(function(){
shadow$provide[654]=function(va,Z,Va,L){function x(bb){for(var zb="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+bb,Wb=1;Wb<arguments.length;Wb++)zb+="\x26args[]\x3d"+encodeURIComponent(arguments[Wb]);return"Minified React error #"+bb+"; visit "+zb+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function V(bb){if(Xa.call(Vc,bb))return!0;if(Xa.call(Zc,bb))return!1;if(ec.test(bb))return Vc[bb]=!0;Zc[bb]=!0;return!1}function y(bb,
zb,Wb,Ac,rb,sa,ja){this.acceptsBooleans=2===zb||3===zb||4===zb;this.attributeName=Ac;this.attributeNamespace=rb;this.mustUseProperty=Wb;this.propertyName=bb;this.type=zb;this.sanitizeURL=sa;this.removeEmptyString=ja}function u(bb){return bb[1].toUpperCase()}function b(bb){if("boolean"===typeof bb||"number"===typeof bb)return""+bb;bb=""+bb;var zb=Ub.exec(bb);if(zb){var Wb="",Ac,rb=0;for(Ac=zb.index;Ac<bb.length;Ac++){switch(bb.charCodeAt(Ac)){case 34:zb="\x26quot;";break;case 38:zb="\x26amp;";break;
case 39:zb="\x26#x27;";break;case 60:zb="\x26lt;";break;case 62:zb="\x26gt;";break;default:continue}rb!==Ac&&(Wb+=bb.substring(rb,Ac));rb=Ac+1;Wb+=zb}bb=rb!==Ac?Wb+bb.substring(rb,Ac):Wb}return bb}function p(bb,zb){return{insertionMode:bb,selectedValue:zb}}function D(bb,zb,Wb){switch(zb){case "select":return p(1,null!=Wb.value?Wb.value:Wb.defaultValue);case "svg":return p(2,null);case "math":return p(3,null);case "foreignObject":return p(1,null);case "table":return p(4,null);case "thead":case "tbody":case "tfoot":return p(5,
null);case "colgroup":return p(7,null);case "tr":return p(6,null)}return 4<=bb.insertionMode||0===bb.insertionMode?p(1,null):bb}function J(bb,zb,Wb){if("object"!==typeof Wb)throw Error(x(62));zb=!0;for(var Ac in Wb)if(Xa.call(Wb,Ac)){var rb=Wb[Ac];if(null!=rb&&"boolean"!==typeof rb&&""!==rb){if(0===Ac.indexOf("--")){var sa=b(Ac);rb=b((""+rb).trim())}else{sa=Ac;var ja=Lb.get(sa);void 0!==ja?sa=ja:(ja=b(sa.replace(Kb,"-$1").toLowerCase().replace(uc,"-ms-")),Lb.set(sa,ja),sa=ja);rb="number"===typeof rb?
0===rb||Xa.call(Ta,Ac)?""+rb:rb+"px":b((""+rb).trim())}zb?(zb=!1,bb.push(' style\x3d"',sa,":",rb)):bb.push(";",sa,":",rb)}}zb||bb.push('"')}function F(bb,zb,Wb,Ac){switch(Wb){case "style":J(bb,zb,Ac);return;case "defaultValue":case "defaultChecked":case "innerHTML":case "suppressContentEditableWarning":case "suppressHydrationWarning":return}if(!(2<Wb.length)||"o"!==Wb[0]&&"O"!==Wb[0]||"n"!==Wb[1]&&"N"!==Wb[1])if(zb=Jc.hasOwnProperty(Wb)?Jc[Wb]:null,null!==zb){switch(typeof Ac){case "function":case "symbol":return;
case "boolean":if(!zb.acceptsBooleans)return}Wb=zb.attributeName;switch(zb.type){case 3:Ac&&bb.push(" ",Wb,'\x3d""');break;case 4:!0===Ac?bb.push(" ",Wb,'\x3d""'):!1!==Ac&&bb.push(" ",Wb,'\x3d"',b(Ac),'"');break;case 5:isNaN(Ac)||bb.push(" ",Wb,'\x3d"',b(Ac),'"');break;case 6:!isNaN(Ac)&&1<=Ac&&bb.push(" ",Wb,'\x3d"',b(Ac),'"');break;default:zb.sanitizeURL&&(Ac=""+Ac),bb.push(" ",Wb,'\x3d"',b(Ac),'"')}}else if(V(Wb)){switch(typeof Ac){case "function":case "symbol":return;case "boolean":if(zb=Wb.toLowerCase().slice(0,
5),"data-"!==zb&&"aria-"!==zb)return}bb.push(" ",Wb,'\x3d"',b(Ac),'"')}}function T(bb,zb,Wb){if(null!=zb){if(null!=Wb)throw Error(x(60));if("object"!==typeof zb||!("__html"in zb))throw Error(x(61));zb=zb.__html;null!==zb&&void 0!==zb&&bb.push(""+zb)}}function h(bb){var zb="";gb.Children.forEach(bb,function(Wb){null!=Wb&&(zb+=Wb)});return zb}function l(bb,zb,Wb,Ac){bb.push(a(Wb));var rb=Wb=null,sa;for(sa in zb)if(Xa.call(zb,sa)){var ja=zb[sa];if(null!=ja)switch(sa){case "children":Wb=ja;break;case "dangerouslySetInnerHTML":rb=
ja;break;default:F(bb,Ac,sa,ja)}}bb.push("\x3e");T(bb,rb,Wb);return"string"===typeof Wb?(bb.push(b(Wb)),null):Wb}function a(bb){var zb=Ob.get(bb);if(void 0===zb){if(!Yb.test(bb))throw Error(x(65,bb));zb="\x3c"+bb;Ob.set(bb,zb)}return zb}function k(bb,zb,Wb,Ac,rb){switch(zb){case "select":bb.push(a("select"));var sa=null,ja=null;for(Ia in Wb)if(Xa.call(Wb,Ia)){var f=Wb[Ia];if(null!=f)switch(Ia){case "children":sa=f;break;case "dangerouslySetInnerHTML":ja=f;break;case "defaultValue":case "value":break;
default:F(bb,Ac,Ia,f)}}bb.push("\x3e");T(bb,ja,sa);return sa;case "option":ja=rb.selectedValue;bb.push(a("option"));var ia=f=null,Sa=null,Ia=null;for(sa in Wb)if(Xa.call(Wb,sa)){var la=Wb[sa];if(null!=la)switch(sa){case "children":f=la;break;case "selected":Sa=la;break;case "dangerouslySetInnerHTML":Ia=la;break;case "value":ia=la;default:F(bb,Ac,sa,la)}}if(null!=ja)if(Wb=null!==ia?""+ia:h(f),wc(ja))for(Ac=0;Ac<ja.length;Ac++){if(""+ja[Ac]===Wb){bb.push(' selected\x3d""');break}}else""+ja===Wb&&bb.push(' selected\x3d""');
else Sa&&bb.push(' selected\x3d""');bb.push("\x3e");T(bb,Ia,f);return f;case "textarea":bb.push(a("textarea"));Ia=ja=sa=null;for(f in Wb)if(Xa.call(Wb,f)&&(ia=Wb[f],null!=ia))switch(f){case "children":Ia=ia;break;case "value":sa=ia;break;case "defaultValue":ja=ia;break;case "dangerouslySetInnerHTML":throw Error(x(91));default:F(bb,Ac,f,ia)}null===sa&&null!==ja&&(sa=ja);bb.push("\x3e");if(null!=Ia){if(null!=sa)throw Error(x(92));if(wc(Ia)&&1<Ia.length)throw Error(x(93));sa=""+Ia}"string"===typeof sa&&
"\n"===sa[0]&&bb.push("\n");null!==sa&&bb.push(b(""+sa));return null;case "input":bb.push(a("input"));ia=Ia=f=sa=null;for(ja in Wb)if(Xa.call(Wb,ja)&&(Sa=Wb[ja],null!=Sa))switch(ja){case "children":case "dangerouslySetInnerHTML":throw Error(x(399,"input"));case "defaultChecked":ia=Sa;break;case "defaultValue":f=Sa;break;case "checked":Ia=Sa;break;case "value":sa=Sa;break;default:F(bb,Ac,ja,Sa)}null!==Ia?F(bb,Ac,"checked",Ia):null!==ia&&F(bb,Ac,"checked",ia);null!==sa?F(bb,Ac,"value",sa):null!==f&&
F(bb,Ac,"value",f);bb.push("/\x3e");return null;case "menuitem":bb.push(a("menuitem"));for(var oa in Wb)if(Xa.call(Wb,oa)&&(sa=Wb[oa],null!=sa))switch(oa){case "children":case "dangerouslySetInnerHTML":throw Error(x(400));default:F(bb,Ac,oa,sa)}bb.push("\x3e");return null;case "title":bb.push(a("title"));sa=null;for(la in Wb)if(Xa.call(Wb,la)&&(ja=Wb[la],null!=ja))switch(la){case "children":sa=ja;break;case "dangerouslySetInnerHTML":throw Error(x(434));default:F(bb,Ac,la,ja)}bb.push("\x3e");return sa;
case "listing":case "pre":bb.push(a(zb));ja=sa=null;for(ia in Wb)if(Xa.call(Wb,ia)&&(f=Wb[ia],null!=f))switch(ia){case "children":sa=f;break;case "dangerouslySetInnerHTML":ja=f;break;default:F(bb,Ac,ia,f)}bb.push("\x3e");if(null!=ja){if(null!=sa)throw Error(x(60));if("object"!==typeof ja||!("__html"in ja))throw Error(x(61));Wb=ja.__html;null!==Wb&&void 0!==Wb&&("string"===typeof Wb&&0<Wb.length&&"\n"===Wb[0]?bb.push("\n",Wb):bb.push(""+Wb))}"string"===typeof sa&&"\n"===sa[0]&&bb.push("\n");return sa;
case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":bb.push(a(zb));for(var Aa in Wb)if(Xa.call(Wb,Aa)&&(sa=Wb[Aa],null!=sa))switch(Aa){case "children":case "dangerouslySetInnerHTML":throw Error(x(399,zb));default:F(bb,Ac,Aa,sa)}bb.push("/\x3e");return null;case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return l(bb,
Wb,zb,Ac);case "html":return 0===rb.insertionMode&&bb.push("\x3c!DOCTYPE html\x3e"),l(bb,Wb,zb,Ac);default:if(-1===zb.indexOf("-")&&"string"!==typeof Wb.is)return l(bb,Wb,zb,Ac);bb.push(a(zb));ja=sa=null;for(Sa in Wb)if(Xa.call(Wb,Sa)&&(f=Wb[Sa],null!=f))switch(Sa){case "children":sa=f;break;case "dangerouslySetInnerHTML":ja=f;break;case "style":J(bb,Ac,f);break;case "suppressContentEditableWarning":case "suppressHydrationWarning":break;default:V(Sa)&&"function"!==typeof f&&"symbol"!==typeof f&&bb.push(" ",
Sa,'\x3d"',b(f),'"')}bb.push("\x3e");T(bb,ja,sa);return sa}}function m(bb,zb,Wb){bb.push('\x3c!--$?--\x3e\x3ctemplate id\x3d"');if(null===Wb)throw Error(x(395));bb.push(Wb);return bb.push('"\x3e\x3c/template\x3e')}function t(bb,zb,Wb,Ac){switch(Wb.insertionMode){case 0:case 1:return bb.push('\x3cdiv hidden id\x3d"'),bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 2:return bb.push('\x3csvg aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),bb.push(zb.segmentPrefix),
zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 3:return bb.push('\x3cmath aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 4:return bb.push('\x3ctable hidden id\x3d"'),bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 5:return bb.push('\x3ctable hidden\x3e\x3ctbody id\x3d"'),bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 6:return bb.push('\x3ctable hidden\x3e\x3ctr id\x3d"'),
bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');case 7:return bb.push('\x3ctable hidden\x3e\x3ccolgroup id\x3d"'),bb.push(zb.segmentPrefix),zb=Ac.toString(16),bb.push(zb),bb.push('"\x3e');default:throw Error(x(397));}}function H(bb,zb){switch(zb.insertionMode){case 0:case 1:return bb.push("\x3c/div\x3e");case 2:return bb.push("\x3c/svg\x3e");case 3:return bb.push("\x3c/math\x3e");case 4:return bb.push("\x3c/table\x3e");case 5:return bb.push("\x3c/tbody\x3e\x3c/table\x3e");
case 6:return bb.push("\x3c/tr\x3e\x3c/table\x3e");case 7:return bb.push("\x3c/colgroup\x3e\x3c/table\x3e");default:throw Error(x(397));}}function B(bb){return JSON.stringify(bb).replace(pb,function(zb){switch(zb){case "\x3c":return"\\u003c";case " ":return"\\u2028";case " ":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React");
}})}function w(bb,zb){zb=void 0===zb?"":zb;return{bootstrapChunks:[],startInlineScript:"\x3cscript\x3e",placeholderPrefix:zb+"P:",segmentPrefix:zb+"S:",boundaryPrefix:zb+"B:",idPrefix:zb,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:bb}}function g(bb,zb,Wb,Ac){if(Wb.generateStaticMarkup)return bb.push(b(zb)),!1;""===zb?bb=Ac:(Ac&&bb.push("\x3c!-- --\x3e"),bb.push(b(zb)),bb=!0);return bb}function d(bb){if(null==bb)return null;
if("function"===typeof bb)return bb.displayName||bb.name||null;if("string"===typeof bb)return bb;switch(bb){case wb:return"Fragment";case ib:return"Portal";case fc:return"Profiler";case Nb:return"StrictMode";case Wc:return"Suspense";case Sc:return"SuspenseList"}if("object"===typeof bb)switch(bb.$$typeof){case Nc:return(bb.displayName||"Context")+".Consumer";case Gc:return(bb._context.displayName||"Context")+".Provider";case nc:var zb=bb.render;(bb=bb.displayName)||(bb=zb.displayName||zb.name||"",
bb=""!==bb?"ForwardRef("+bb+")":"ForwardRef");return bb;case Ad:return zb=bb.displayName||null,null!==zb?zb:d(bb.type)||"Memo";case td:zb=bb._payload;bb=bb._init;try{return d(bb(zb))}catch(Wb){}}return null}function G(bb,zb){bb=bb.contextTypes;if(!bb)return xc;var Wb={},Ac;for(Ac in bb)Wb[Ac]=zb[Ac];return Wb}function z(bb,zb){if(bb!==zb){bb.context._currentValue2=bb.parentValue;bb=bb.parent;var Wb=zb.parent;if(null===bb){if(null!==Wb)throw Error(x(401));}else{if(null===Wb)throw Error(x(401));z(bb,
Wb)}zb.context._currentValue2=zb.value}}function K(bb){bb.context._currentValue2=bb.parentValue;bb=bb.parent;null!==bb&&K(bb)}function W(bb){var zb=bb.parent;null!==zb&&W(zb);bb.context._currentValue2=bb.value}function A(bb,zb){bb.context._currentValue2=bb.parentValue;bb=bb.parent;if(null===bb)throw Error(x(402));bb.depth===zb.depth?z(bb,zb):A(bb,zb)}function Q(bb,zb){var Wb=zb.parent;if(null===Wb)throw Error(x(402));bb.depth===Wb.depth?z(bb,Wb):Q(bb,Wb);zb.context._currentValue2=zb.value}function N(bb){var zb=
hc;zb!==bb&&(null===zb?W(bb):null===bb?K(zb):zb.depth===bb.depth?z(zb,bb):zb.depth>bb.depth?A(zb,bb):Q(zb,bb),hc=bb)}function C(bb,zb,Wb,Ac){var rb=void 0!==bb.state?bb.state:null;bb.updater=gc;bb.props=Wb;bb.state=rb;var sa={queue:[],replace:!1};bb._reactInternals=sa;var ja=zb.contextType;bb.context="object"===typeof ja&&null!==ja?ja._currentValue2:Ac;ja=zb.getDerivedStateFromProps;"function"===typeof ja&&(ja=ja(Wb,rb),rb=null===ja||void 0===ja?rb:vb({},rb,ja),bb.state=rb);if("function"!==typeof zb.getDerivedStateFromProps&&
"function"!==typeof bb.getSnapshotBeforeUpdate&&("function"===typeof bb.UNSAFE_componentWillMount||"function"===typeof bb.componentWillMount))if(zb=bb.state,"function"===typeof bb.componentWillMount&&bb.componentWillMount(),"function"===typeof bb.UNSAFE_componentWillMount&&bb.UNSAFE_componentWillMount(),zb!==bb.state&&gc.enqueueReplaceState(bb,bb.state,null),null!==sa.queue&&0<sa.queue.length)if(zb=sa.queue,ja=sa.replace,sa.queue=null,sa.replace=!1,ja&&1===zb.length)bb.state=zb[0];else{sa=ja?zb[0]:
bb.state;rb=!0;for(ja=ja?1:0;ja<zb.length;ja++){var f=zb[ja];f="function"===typeof f?f.call(bb,sa,Wb,Ac):f;null!=f&&(rb?(rb=!1,sa=vb({},sa,f)):vb(sa,f))}bb.state=sa}else sa.queue=null}function q(bb,zb,Wb){var Ac=bb.id;bb=bb.overflow;var rb=32-qc(Ac)-1;Ac&=~(1<<rb);Wb+=1;var sa=32-qc(zb)+rb;if(30<sa){var ja=rb-rb%5;sa=(Ac&(1<<ja)-1).toString(32);Ac>>=ja;rb-=ja;return{id:1<<32-qc(zb)+rb|Wb<<rb|Ac,overflow:sa+bb}}return{id:1<<sa|Wb<<rb|Ac,overflow:bb}}function M(bb){bb>>>=0;return 0===bb?32:31-(Ab(bb)/
Qb|0)|0}function I(bb,zb){return bb===zb&&(0!==bb||1/bb===1/zb)||bb!==bb&&zb!==zb}function R(){if(null===sb)throw Error(x(321));return sb}function S(){if(0<eb)throw Error(x(312));return{memoizedState:null,queue:null,next:null}}function P(){null===Db?null===kb?(Eb=!1,kb=Db=S()):(Eb=!0,Db=kb):null===Db.next?(Eb=!1,Db=Db.next=S()):(Eb=!0,Db=Db.next);return Db}function ka(){Gb=sb=null;jc=!1;kb=null;eb=0;Db=ab=null}function Y(bb,zb){return"function"===typeof zb?zb(bb):zb}function aa(bb,zb,Wb){sb=R();Db=
P();if(Eb){var Ac=Db.queue;zb=Ac.dispatch;if(null!==ab&&(Wb=ab.get(Ac),void 0!==Wb)){ab.delete(Ac);Ac=Db.memoizedState;do Ac=bb(Ac,Wb.action),Wb=Wb.next;while(null!==Wb);Db.memoizedState=Ac;return[Ac,zb]}return[Db.memoizedState,zb]}bb=bb===Y?"function"===typeof zb?zb():zb:void 0!==Wb?Wb(zb):zb;Db.memoizedState=bb;bb=Db.queue={last:null,dispatch:null};bb=bb.dispatch=X.bind(null,sb,bb);return[Db.memoizedState,bb]}function ba(bb,zb){sb=R();Db=P();zb=void 0===zb?null:zb;if(null!==Db){var Wb=Db.memoizedState;
if(null!==Wb&&null!==zb){var Ac=Wb[1];a:if(null===Ac)Ac=!1;else{for(var rb=0;rb<Ac.length&&rb<zb.length;rb++)if(!sc(zb[rb],Ac[rb])){Ac=!1;break a}Ac=!0}if(Ac)return Wb[0]}}bb=bb();Db.memoizedState=[bb,zb];return bb}function X(bb,zb,Wb){if(25<=eb)throw Error(x(301));if(bb===sb)if(jc=!0,bb={action:Wb,next:null},null===ab&&(ab=new Map),Wb=ab.get(zb),void 0===Wb)ab.set(zb,bb);else{for(zb=Wb;null!==zb.next;)zb=zb.next;zb.next=bb}}function ha(){throw Error(x(394));}function ea(){}function fa(bb){console.error(bb);
return null}function pa(){}function ua(bb,zb,Wb,Ac,rb,sa,ja,f,ia){var Sa=[],Ia=new Set;zb={destination:null,responseState:zb,progressiveChunkSize:void 0===Ac?12800:Ac,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Ia,pingedTasks:Sa,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===rb?fa:rb,onAllReady:void 0===sa?pa:sa,onShellReady:void 0===ja?pa:ja,onShellError:void 0===f?pa:f,onFatalError:void 0===
ia?pa:ia};Wb=wa(zb,0,null,Wb,!1,!1);Wb.parentFlushed=!0;bb=qa(zb,bb,null,Wb,Ia,xc,null,ac);Sa.push(bb);return zb}function qa(bb,zb,Wb,Ac,rb,sa,ja,f){bb.allPendingTasks++;null===Wb?bb.pendingRootTasks++:Wb.pendingTasks++;var ia={node:zb,ping:function(){var Sa=bb.pingedTasks;Sa.push(ia);1===Sa.length&&Ya(bb)},blockedBoundary:Wb,blockedSegment:Ac,abortSet:rb,legacyContext:sa,context:ja,treeContext:f};rb.add(ia);return ia}function wa(bb,zb,Wb,Ac,rb,sa){return{status:0,id:-1,index:zb,parentFlushed:!1,
chunks:[],children:[],formatContext:Ac,boundary:Wb,lastPushedText:rb,textEmbedded:sa}}function Ja(bb,zb){bb=bb.onError(zb);if(null!=bb&&"string"!==typeof bb)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof bb+'" instead');return bb}function Pa(bb,zb){var Wb=bb.onShellError;Wb(zb);Wb=bb.onFatalError;Wb(zb);null!==bb.destination?(bb.status=
2,bb.destination.destroy(zb)):(bb.status=1,bb.fatalError=zb)}function db(bb,zb,Wb,Ac,rb){sb={};Gb=zb;Hc=0;for(bb=Wb(Ac,rb);jc;)jc=!1,Hc=0,eb+=1,Db=null,bb=Wb(Ac,rb);ka();return bb}function za(bb,zb,Wb,Ac){var rb=Wb.render(),sa=Ac.childContextTypes;if(null!==sa&&void 0!==sa){var ja=zb.legacyContext;if("function"!==typeof Wb.getChildContext)Ac=ja;else{Wb=Wb.getChildContext();for(var f in Wb)if(!(f in sa))throw Error(x(108,d(Ac)||"Unknown",f));Ac=vb({},ja,Wb)}zb.legacyContext=Ac;ma(bb,zb,rb);zb.legacyContext=
ja}else ma(bb,zb,rb)}function Ma(bb,zb){if(bb&&bb.defaultProps){zb=vb({},zb);bb=bb.defaultProps;for(var Wb in bb)void 0===zb[Wb]&&(zb[Wb]=bb[Wb])}return zb}function Ca(bb,zb,Wb,Ac,rb){if("function"===typeof Wb)if(Wb.prototype&&Wb.prototype.isReactComponent){rb=G(Wb,zb.legacyContext);var sa=Wb.contextType;sa=new Wb(Ac,"object"===typeof sa&&null!==sa?sa._currentValue2:rb);C(sa,Wb,Ac,rb);za(bb,zb,sa,Wb)}else{sa=G(Wb,zb.legacyContext);rb=db(bb,zb,Wb,Ac,sa);var ja=0!==Hc;if("object"===typeof rb&&null!==
rb&&"function"===typeof rb.render&&void 0===rb.$$typeof)C(rb,Wb,Ac,sa),za(bb,zb,rb,Wb);else if(ja){Ac=zb.treeContext;zb.treeContext=q(Ac,1,0);try{ma(bb,zb,rb)}finally{zb.treeContext=Ac}}else ma(bb,zb,rb)}else if("string"===typeof Wb){rb=zb.blockedSegment;sa=k(rb.chunks,Wb,Ac,bb.responseState,rb.formatContext);rb.lastPushedText=!1;ja=rb.formatContext;rb.formatContext=D(ja,Wb,Ac);Oa(bb,zb,sa);rb.formatContext=ja;switch(Wb){case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "input":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":break;
default:rb.chunks.push("\x3c/",Wb,"\x3e")}rb.lastPushedText=!1}else{switch(Wb){case Fc:case qb:case Nb:case fc:case wb:ma(bb,zb,Ac.children);return;case Sc:ma(bb,zb,Ac.children);return;case Uc:throw Error(x(343));case Wc:a:{Wb=zb.blockedBoundary;rb=zb.blockedSegment;sa=Ac.fallback;Ac=Ac.children;ja=new Set;var f={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:ja,errorDigest:null},ia=wa(bb,rb.chunks.length,f,rb.formatContext,
!1,!1);rb.children.push(ia);rb.lastPushedText=!1;var Sa=wa(bb,0,null,rb.formatContext,!1,!1);Sa.parentFlushed=!0;zb.blockedBoundary=f;zb.blockedSegment=Sa;try{if(Oa(bb,zb,Ac),bb.responseState.generateStaticMarkup||Sa.lastPushedText&&Sa.textEmbedded&&Sa.chunks.push("\x3c!-- --\x3e"),Sa.status=1,La(f,Sa),0===f.pendingTasks)break a}catch(Ia){Sa.status=4,f.forceClientRender=!0,f.errorDigest=Ja(bb,Ia)}finally{zb.blockedBoundary=Wb,zb.blockedSegment=rb}zb=qa(bb,sa,Wb,ia,ja,zb.legacyContext,zb.context,zb.treeContext);
bb.pingedTasks.push(zb)}return}if("object"===typeof Wb&&null!==Wb)switch(Wb.$$typeof){case nc:Ac=db(bb,zb,Wb.render,Ac,rb);if(0!==Hc){Wb=zb.treeContext;zb.treeContext=q(Wb,1,0);try{ma(bb,zb,Ac)}finally{zb.treeContext=Wb}}else ma(bb,zb,Ac);return;case Ad:Wb=Wb.type;Ac=Ma(Wb,Ac);Ca(bb,zb,Wb,Ac,rb);return;case Gc:rb=Ac.children;Wb=Wb._context;Ac=Ac.value;sa=Wb._currentValue2;Wb._currentValue2=Ac;ja=hc;hc=Ac={parent:ja,depth:null===ja?0:ja.depth+1,context:Wb,parentValue:sa,value:Ac};zb.context=Ac;ma(bb,
zb,rb);bb=hc;if(null===bb)throw Error(x(403));Ac=bb.parentValue;bb.context._currentValue2=Ac===Tb?bb.context._defaultValue:Ac;bb=hc=bb.parent;zb.context=bb;return;case Nc:Ac=Ac.children;Ac=Ac(Wb._currentValue2);ma(bb,zb,Ac);return;case td:rb=Wb._init;Wb=rb(Wb._payload);Ac=Ma(Wb,Ac);Ca(bb,zb,Wb,Ac,void 0);return}throw Error(x(130,null==Wb?Wb:typeof Wb,""));}}function ma(bb,zb,Wb){zb.node=Wb;if("object"===typeof Wb&&null!==Wb){switch(Wb.$$typeof){case Cb:Ca(bb,zb,Wb.type,Wb.props,Wb.ref);return;case ib:throw Error(x(257));
case td:var Ac=Wb._init;Wb=Ac(Wb._payload);ma(bb,zb,Wb);return}if(wc(Wb)){Ga(bb,zb,Wb);return}null===Wb||"object"!==typeof Wb?Ac=null:(Ac=Ec&&Wb[Ec]||Wb["@@iterator"],Ac="function"===typeof Ac?Ac:null);if(Ac&&=Ac.call(Wb)){Wb=Ac.next();if(!Wb.done){var rb=[];do rb.push(Wb.value),Wb=Ac.next();while(!Wb.done);Ga(bb,zb,rb)}return}bb=Object.prototype.toString.call(Wb);throw Error(x(31,"[object Object]"===bb?"object with keys {"+Object.keys(Wb).join(", ")+"}":bb));}"string"===typeof Wb?(Ac=zb.blockedSegment,
Ac.lastPushedText=g(zb.blockedSegment.chunks,Wb,bb.responseState,Ac.lastPushedText)):"number"===typeof Wb&&(Ac=zb.blockedSegment,Ac.lastPushedText=g(zb.blockedSegment.chunks,""+Wb,bb.responseState,Ac.lastPushedText))}function Ga(bb,zb,Wb){for(var Ac=Wb.length,rb=0;rb<Ac;rb++){var sa=zb.treeContext;zb.treeContext=q(sa,Ac,rb);try{Oa(bb,zb,Wb[rb])}finally{zb.treeContext=sa}}}function Oa(bb,zb,Wb){var Ac=zb.blockedSegment.formatContext,rb=zb.legacyContext,sa=zb.context;try{return ma(bb,zb,Wb)}catch(ia){if(ka(),
"object"===typeof ia&&null!==ia&&"function"===typeof ia.then){Wb=ia;var ja=zb.blockedSegment,f=wa(bb,ja.chunks.length,null,ja.formatContext,ja.lastPushedText,!0);ja.children.push(f);ja.lastPushedText=!1;bb=qa(bb,zb.node,zb.blockedBoundary,f,zb.abortSet,zb.legacyContext,zb.context,zb.treeContext).ping;Wb.then(bb,bb);zb.blockedSegment.formatContext=Ac;zb.legacyContext=rb;zb.context=sa;N(sa)}else throw zb.blockedSegment.formatContext=Ac,zb.legacyContext=rb,zb.context=sa,N(sa),ia;}}function Ba(bb){var zb=
bb.blockedBoundary;bb=bb.blockedSegment;bb.status=3;Ua(this,zb,bb)}function ta(bb,zb,Wb){var Ac=bb.blockedBoundary;bb.blockedSegment.status=3;null===Ac?(zb.allPendingTasks--,2!==zb.status&&(zb.status=2,null!==zb.destination&&zb.destination.push(null))):(Ac.pendingTasks--,Ac.forceClientRender||(Ac.forceClientRender=!0,bb=void 0===Wb?Error(x(432)):Wb,Ac.errorDigest=zb.onError(bb),Ac.parentFlushed&&zb.clientRenderedBoundaries.push(Ac)),Ac.fallbackAbortableTasks.forEach(function(rb){return ta(rb,zb,Wb)}),
Ac.fallbackAbortableTasks.clear(),zb.allPendingTasks--,0===zb.allPendingTasks&&(Ac=zb.onAllReady,Ac()))}function La(bb,zb){if(0===zb.chunks.length&&1===zb.children.length&&null===zb.children[0].boundary){var Wb=zb.children[0];Wb.id=zb.id;Wb.parentFlushed=!0;1===Wb.status&&La(bb,Wb)}else bb.completedSegments.push(zb)}function Ua(bb,zb,Wb){if(null===zb){if(Wb.parentFlushed){if(null!==bb.completedRootSegment)throw Error(x(389));bb.completedRootSegment=Wb}bb.pendingRootTasks--;0===bb.pendingRootTasks&&
(bb.onShellError=pa,zb=bb.onShellReady,zb())}else zb.pendingTasks--,zb.forceClientRender||(0===zb.pendingTasks?(Wb.parentFlushed&&1===Wb.status&&La(zb,Wb),zb.parentFlushed&&bb.completedBoundaries.push(zb),zb.fallbackAbortableTasks.forEach(Ba,bb),zb.fallbackAbortableTasks.clear()):Wb.parentFlushed&&1===Wb.status&&(La(zb,Wb),1===zb.completedSegments.length&&zb.parentFlushed&&bb.partialBoundaries.push(zb)));bb.allPendingTasks--;0===bb.allPendingTasks&&(bb=bb.onAllReady,bb())}function Ya(bb){if(2!==bb.status){var zb=
hc,Wb=Bb.current;Bb.current=Wa;var Ac=mb;mb=bb.responseState;try{var rb=bb.pingedTasks,sa;for(sa=0;sa<rb.length;sa++){var ja=rb[sa],f=bb,ia=ja.blockedSegment;if(0===ia.status){N(ja.context);try{ma(f,ja,ja.node),f.responseState.generateStaticMarkup||ia.lastPushedText&&ia.textEmbedded&&ia.chunks.push("\x3c!-- --\x3e"),ja.abortSet.delete(ja),ia.status=1,Ua(f,ja.blockedBoundary,ia)}catch($a){if(ka(),"object"===typeof $a&&null!==$a&&"function"===typeof $a.then){var Sa=ja.ping;$a.then(Sa,Sa)}else{ja.abortSet.delete(ja);
ia.status=4;var Ia=ja.blockedBoundary,la=$a,oa=Ja(f,la);null===Ia?Pa(f,la):(Ia.pendingTasks--,Ia.forceClientRender||(Ia.forceClientRender=!0,Ia.errorDigest=oa,Ia.parentFlushed&&f.clientRenderedBoundaries.push(Ia)));f.allPendingTasks--;if(0===f.allPendingTasks){var Aa=f.onAllReady;Aa()}}}finally{}}}rb.splice(0,sa);null!==bb.destination&&Da(bb,bb.destination)}catch($a){Ja(bb,$a),Pa(bb,$a)}finally{mb=Ac,Bb.current=Wb,Wb===Wa&&N(zb)}}}function Ra(bb,zb,Wb){Wb.parentFlushed=!0;switch(Wb.status){case 0:var Ac=
Wb.id=bb.nextSegmentId++;Wb.lastPushedText=!1;Wb.textEmbedded=!1;bb=bb.responseState;zb.push('\x3ctemplate id\x3d"');zb.push(bb.placeholderPrefix);bb=Ac.toString(16);zb.push(bb);return zb.push('"\x3e\x3c/template\x3e');case 1:Wb.status=2;var rb=!0;Ac=Wb.chunks;var sa=0;Wb=Wb.children;for(var ja=0;ja<Wb.length;ja++){for(rb=Wb[ja];sa<rb.index;sa++)zb.push(Ac[sa]);rb=cb(bb,zb,rb)}for(;sa<Ac.length-1;sa++)zb.push(Ac[sa]);sa<Ac.length&&(rb=zb.push(Ac[sa]));return rb;default:throw Error(x(390));}}function cb(bb,
zb,Wb){var Ac=Wb.boundary;if(null===Ac)return Ra(bb,zb,Wb);Ac.parentFlushed=!0;if(Ac.forceClientRender)return bb.responseState.generateStaticMarkup||(Ac=Ac.errorDigest,zb.push("\x3c!--$!--\x3e"),zb.push("\x3ctemplate"),Ac&&(zb.push(' data-dgst\x3d"'),Ac=b(Ac),zb.push(Ac),zb.push('"')),zb.push("\x3e\x3c/template\x3e")),Ra(bb,zb,Wb),bb=bb.responseState.generateStaticMarkup?!0:zb.push("\x3c!--/$--\x3e"),bb;if(0<Ac.pendingTasks){Ac.rootSegmentID=bb.nextSegmentId++;0<Ac.completedSegments.length&&bb.partialBoundaries.push(Ac);
var rb=bb.responseState,sa=rb.nextSuspenseID++;rb=rb.boundaryPrefix+sa.toString(16);Ac=Ac.id=rb;m(zb,bb.responseState,Ac);Ra(bb,zb,Wb);return zb.push("\x3c!--/$--\x3e")}if(Ac.byteSize>bb.progressiveChunkSize)return Ac.rootSegmentID=bb.nextSegmentId++,bb.completedBoundaries.push(Ac),m(zb,bb.responseState,Ac.id),Ra(bb,zb,Wb),zb.push("\x3c!--/$--\x3e");bb.responseState.generateStaticMarkup||zb.push("\x3c!--$--\x3e");Wb=Ac.completedSegments;if(1!==Wb.length)throw Error(x(391));cb(bb,zb,Wb[0]);return bb=
bb.responseState.generateStaticMarkup?!0:zb.push("\x3c!--/$--\x3e")}function lb(bb,zb,Wb){t(zb,bb.responseState,Wb.formatContext,Wb.id);cb(bb,zb,Wb);return H(zb,Wb.formatContext)}function Sb(bb,zb,Wb){for(var Ac=Wb.completedSegments,rb=0;rb<Ac.length;rb++)Jb(bb,zb,Wb,Ac[rb]);Ac.length=0;bb=bb.responseState;Ac=Wb.id;Wb=Wb.rootSegmentID;zb.push(bb.startInlineScript);bb.sentCompleteBoundaryFunction?zb.push('$RC("'):(bb.sentCompleteBoundaryFunction=!0,zb.push('function $RC(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);b.parentNode.removeChild(b);if(a){a\x3da.previousSibling;var f\x3da.parentNode,c\x3da.nextSibling,e\x3d0;do{if(c\x26\x268\x3d\x3d\x3dc.nodeType){var d\x3dc.data;if("/$"\x3d\x3d\x3dd)if(0\x3d\x3d\x3de)break;else e--;else"$"!\x3d\x3dd\x26\x26"$?"!\x3d\x3dd\x26\x26"$!"!\x3d\x3dd||e++}d\x3dc.nextSibling;f.removeChild(c);c\x3dd}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data\x3d"$";a._reactRetry\x26\x26a._reactRetry()}};$RC("'));
if(null===Ac)throw Error(x(395));Wb=Wb.toString(16);zb.push(Ac);zb.push('","');zb.push(bb.segmentPrefix);zb.push(Wb);return zb.push('")\x3c/script\x3e')}function Jb(bb,zb,Wb,Ac){if(2===Ac.status)return!0;var rb=Ac.id;if(-1===rb){if(-1===(Ac.id=Wb.rootSegmentID))throw Error(x(392));return lb(bb,zb,Ac)}lb(bb,zb,Ac);bb=bb.responseState;zb.push(bb.startInlineScript);bb.sentCompleteSegmentFunction?zb.push('$RS("'):(bb.sentCompleteSegmentFunction=!0,zb.push('function $RS(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'));
zb.push(bb.segmentPrefix);rb=rb.toString(16);zb.push(rb);zb.push('","');zb.push(bb.placeholderPrefix);zb.push(rb);return zb.push('")\x3c/script\x3e')}function Da(bb,zb){try{var Wb=bb.completedRootSegment;if(null!==Wb&&0===bb.pendingRootTasks){cb(bb,zb,Wb);bb.completedRootSegment=null;var Ac=bb.responseState.bootstrapChunks;for(Wb=0;Wb<Ac.length-1;Wb++)zb.push(Ac[Wb]);Wb<Ac.length&&zb.push(Ac[Wb])}var rb=bb.clientRenderedBoundaries,sa;for(sa=0;sa<rb.length;sa++){var ja=rb[sa];Ac=zb;var f=bb.responseState,
ia=ja.id,Sa=ja.errorDigest,Ia=ja.errorMessage,la=ja.errorComponentStack;Ac.push(f.startInlineScript);f.sentClientRenderFunction?Ac.push('$RX("'):(f.sentClientRenderFunction=!0,Ac.push('function $RX(b,c,d,e){var a\x3ddocument.getElementById(b);a\x26\x26(b\x3da.previousSibling,b.data\x3d"$!",a\x3da.dataset,c\x26\x26(a.dgst\x3dc),d\x26\x26(a.msg\x3dd),e\x26\x26(a.stck\x3de),b._reactRetry\x26\x26b._reactRetry())};$RX("'));if(null===ia)throw Error(x(395));Ac.push(ia);Ac.push('"');if(Sa||Ia||la){Ac.push(",");
var oa=B(Sa||"");Ac.push(oa)}if(Ia||la){Ac.push(",");var Aa=B(Ia||"");Ac.push(Aa)}if(la){Ac.push(",");var $a=B(la);Ac.push($a)}if(!Ac.push(")\x3c/script\x3e")){bb.destination=null;sa++;rb.splice(0,sa);return}}rb.splice(0,sa);var Mb=bb.completedBoundaries;for(sa=0;sa<Mb.length;sa++)if(!Sb(bb,zb,Mb[sa])){bb.destination=null;sa++;Mb.splice(0,sa);return}Mb.splice(0,sa);var yc=bb.partialBoundaries;for(sa=0;sa<yc.length;sa++){var ed=yc[sa];a:{rb=bb;ja=zb;var wd=ed.completedSegments;for(f=0;f<wd.length;f++)if(!Jb(rb,
ja,ed,wd[f])){f++;wd.splice(0,f);var ne=!1;break a}wd.splice(0,f);ne=!0}if(!ne){bb.destination=null;sa++;yc.splice(0,sa);return}}yc.splice(0,sa);var De=bb.completedBoundaries;for(sa=0;sa<De.length;sa++)if(!Sb(bb,zb,De[sa])){bb.destination=null;sa++;De.splice(0,sa);return}De.splice(0,sa)}finally{0===bb.allPendingTasks&&0===bb.pingedTasks.length&&0===bb.clientRenderedBoundaries.length&&0===bb.completedBoundaries.length&&zb.push(null)}}function ob(bb,zb){try{var Wb=bb.abortableTasks;Wb.forEach(function(Ac){return ta(Ac,
bb,zb)});Wb.clear();null!==bb.destination&&Da(bb,bb.destination)}catch(Ac){Ja(bb,Ac),Pa(bb,Ac)}}function jb(){}function Za(bb,zb,Wb,Ac){var rb=!1,sa=null,ja="",f={push:function(Sa){null!==Sa&&(ja+=Sa);return!0},destroy:function(Sa){rb=!0;sa=Sa}},ia=!1;bb=ua(bb,w(Wb,zb?zb.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},Infinity,jb,void 0,function(){ia=!0},void 0,void 0);Ya(bb);ob(bb,Ac);if(1===bb.status)bb.status=2,f.destroy(bb.fatalError);else if(2!==bb.status&&null===bb.destination){bb.destination=
f;try{Da(bb,f)}catch(Sa){Ja(bb,Sa),Pa(bb,Sa)}}if(rb)throw sa;if(!ia)throw Error(x(426));return ja}var gb=Z(68),Xa=Object.prototype.hasOwnProperty,ec=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zc=
{},Vc={},Jc={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(bb){Jc[bb]=new y(bb,0,!1,bb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(bb){var zb=bb[0];Jc[zb]=new y(zb,1,!1,bb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(bb){Jc[bb]=new y(bb,2,!1,bb.toLowerCase(),
null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(bb){Jc[bb]=new y(bb,2,!1,bb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(bb){Jc[bb]=new y(bb,3,!1,bb.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(bb){Jc[bb]=
new y(bb,3,!0,bb,null,!1,!1)});["capture","download"].forEach(function(bb){Jc[bb]=new y(bb,4,!1,bb,null,!1,!1)});["cols","rows","size","span"].forEach(function(bb){Jc[bb]=new y(bb,6,!1,bb,null,!1,!1)});["rowSpan","start"].forEach(function(bb){Jc[bb]=new y(bb,5,!1,bb.toLowerCase(),null,!1,!1)});var Pc=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(bb){var zb=
bb.replace(Pc,u);Jc[zb]=new y(zb,1,!1,bb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(bb){var zb=bb.replace(Pc,u);Jc[zb]=new y(zb,1,!1,bb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(bb){var zb=bb.replace(Pc,u);Jc[zb]=new y(zb,1,!1,bb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(bb){Jc[bb]=new y(bb,1,!1,bb.toLowerCase(),null,!1,!1)});
Jc.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(bb){Jc[bb]=new y(bb,1,!1,bb.toLowerCase(),null,!0,!0)});var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,
gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hb=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(bb){hb.forEach(function(zb){zb=zb+bb.charAt(0).toUpperCase()+bb.substring(1);Ta[zb]=Ta[bb]})});var Ub=/["'&<>]/,
Kb=/([A-Z])/g,uc=/^ms-/,wc=Array.isArray,Lb=new Map,Yb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ob=new Map,pb=/[<\u2028\u2029]/g,vb=Object.assign,Cb=Symbol.for("react.element"),ib=Symbol.for("react.portal"),wb=Symbol.for("react.fragment"),Nb=Symbol.for("react.strict_mode"),fc=Symbol.for("react.profiler"),Gc=Symbol.for("react.provider"),Nc=Symbol.for("react.context"),nc=Symbol.for("react.forward_ref"),Wc=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),Ad=Symbol.for("react.memo"),td=Symbol.for("react.lazy"),
Uc=Symbol.for("react.scope"),qb=Symbol.for("react.debug_trace_mode"),Fc=Symbol.for("react.legacy_hidden"),Tb=Symbol.for("react.default_value"),Ec=Symbol.iterator,xc={},hc=null,gc={isMounted:function(){return!1},enqueueSetState:function(bb,zb){bb=bb._reactInternals;null!==bb.queue&&bb.queue.push(zb)},enqueueReplaceState:function(bb,zb){bb=bb._reactInternals;bb.replace=!0;bb.queue=[zb]},enqueueForceUpdate:function(){}},ac={id:1,overflow:""},qc=Math.clz32?Math.clz32:M,Ab=Math.log,Qb=Math.LN2,sc="function"===
typeof Object.is?Object.is:I,sb=null,Gb=null,kb=null,Db=null,Eb=!1,jc=!1,Hc=0,ab=null,eb=0,Wa={readContext:function(bb){return bb._currentValue2},useContext:function(bb){R();return bb._currentValue2},useMemo:ba,useReducer:aa,useRef:function(bb){sb=R();Db=P();var zb=Db.memoizedState;return null===zb?(bb={current:bb},Db.memoizedState=bb):zb},useState:function(bb){return aa(Y,bb)},useInsertionEffect:ea,useLayoutEffect:function(){},useCallback:function(bb,zb){return ba(function(){return bb},zb)},useImperativeHandle:ea,
useEffect:ea,useDebugValue:ea,useDeferredValue:function(bb){R();return bb},useTransition:function(){R();return[!1,ha]},useId:function(){var bb=Gb.treeContext,zb=bb.overflow;bb=bb.id;bb=(bb&~(1<<32-qc(bb)-1)).toString(32)+zb;var Wb=mb;if(null===Wb)throw Error(x(404));zb=Hc++;bb=":"+Wb.idPrefix+"R"+bb;0<zb&&(bb+="H"+zb.toString(32));return bb+":"},useMutableSource:function(bb,zb){R();return zb(bb._source)},useSyncExternalStore:function(bb,zb,Wb){if(void 0===Wb)throw Error(x(407));return Wb()}},mb=null,
Bb=gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;L.renderToNodeStream=function(){throw Error(x(207));};L.renderToStaticMarkup=function(bb,zb){return Za(bb,zb,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};L.renderToStaticNodeStream=function(){throw Error(x(208));};L.renderToString=function(bb,
zb){return Za(bb,zb,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};L.version="18.3.1"};
shadow$provide[655]=function(va,Z,Va,L){function x(Fb){for(var pc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Fb,bd=1;bd<arguments.length;bd++)pc+="\x26args[]\x3d"+encodeURIComponent(arguments[bd]);return"Minified React error #"+Fb+"; visit "+pc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function V(Fb,pc){if(0!==pc.length)if(512<pc.length)0<hb&&(Fb.enqueue(new Uint8Array(Ta.buffer,0,hb)),Ta=new Uint8Array(512),hb=
0),Fb.enqueue(pc);else{var bd=Ta.length-hb;bd<pc.length&&(0===bd?Fb.enqueue(Ta):(Ta.set(pc.subarray(0,bd),hb),Fb.enqueue(Ta),pc=pc.subarray(bd)),Ta=new Uint8Array(512),hb=0);Ta.set(pc,hb);hb+=pc.length}}function y(Fb,pc){V(Fb,pc);return!0}function u(Fb){Ta&&0<hb&&(Fb.enqueue(new Uint8Array(Ta.buffer,0,hb)),Ta=null,hb=0)}function b(Fb){return Ub.encode(Fb)}function p(Fb){return Ub.encode(Fb)}function D(Fb,pc){"function"===typeof Fb.error?Fb.error(pc):Fb.close()}function J(Fb){if(Kb.call(Lb,Fb))return!0;
if(Kb.call(wc,Fb))return!1;if(uc.test(Fb))return Lb[Fb]=!0;wc[Fb]=!0;return!1}function F(Fb,pc,bd,kd,re,de,Ge){this.acceptsBooleans=2===pc||3===pc||4===pc;this.attributeName=kd;this.attributeNamespace=re;this.mustUseProperty=bd;this.propertyName=Fb;this.type=pc;this.sanitizeURL=de;this.removeEmptyString=Ge}function T(Fb){return Fb[1].toUpperCase()}function h(Fb){if("boolean"===typeof Fb||"number"===typeof Fb)return""+Fb;Fb=""+Fb;var pc=Cb.exec(Fb);if(pc){var bd="",kd,re=0;for(kd=pc.index;kd<Fb.length;kd++){switch(Fb.charCodeAt(kd)){case 34:pc=
"\x26quot;";break;case 38:pc="\x26amp;";break;case 39:pc="\x26#x27;";break;case 60:pc="\x26lt;";break;case 62:pc="\x26gt;";break;default:continue}re!==kd&&(bd+=Fb.substring(re,kd));re=kd+1;bd+=pc}Fb=re!==kd?bd+Fb.substring(re,kd):bd}return Fb}function l(Fb,pc,bd,kd){return""+pc+("s"===bd?"\\u0073":"\\u0053")+kd}function a(Fb,pc,bd,kd,re){Fb=void 0===Fb?"":Fb;pc=void 0===pc?fc:p('\x3cscript nonce\x3d"'+h(pc)+'"\x3e');var de=[];void 0!==bd&&de.push(pc,b((""+bd).replace(Sc,l)),Gc);if(void 0!==kd)for(bd=
0;bd<kd.length;bd++)de.push(Nc,b(h(kd[bd])),Wc);if(void 0!==re)for(kd=0;kd<re.length;kd++)de.push(nc,b(h(re[kd])),Wc);return{bootstrapChunks:de,startInlineScript:pc,placeholderPrefix:p(Fb+"P:"),segmentPrefix:p(Fb+"S:"),boundaryPrefix:Fb+"B:",idPrefix:Fb,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function k(Fb,pc){return{insertionMode:Fb,selectedValue:pc}}function m(Fb){return k("http://www.w3.org/2000/svg"===Fb?2:"http://www.w3.org/1998/Math/MathML"===
Fb?3:0,null)}function t(Fb,pc,bd){switch(pc){case "select":return k(1,null!=bd.value?bd.value:bd.defaultValue);case "svg":return k(2,null);case "math":return k(3,null);case "foreignObject":return k(1,null);case "table":return k(4,null);case "thead":case "tbody":case "tfoot":return k(5,null);case "colgroup":return k(7,null);case "tr":return k(6,null)}return 4<=Fb.insertionMode||0===Fb.insertionMode?k(1,null):Fb}function H(Fb,pc,bd,kd){if(""===pc)return kd;kd&&Fb.push(Ad);Fb.push(b(h(pc)));return!0}
function B(Fb,pc,bd){if("object"!==typeof bd)throw Error(x(62));pc=!0;for(var kd in bd)if(Kb.call(bd,kd)){var re=bd[kd];if(null!=re&&"boolean"!==typeof re&&""!==re){if(0===kd.indexOf("--")){var de=b(h(kd));re=b(h((""+re).trim()))}else{de=kd;var Ge=td.get(de);void 0!==Ge?de=Ge:(Ge=p(h(de.replace(ib,"-$1").toLowerCase().replace(wb,"-ms-"))),td.set(de,Ge),de=Ge);re="number"===typeof re?0===re||Kb.call(pb,kd)?b(""+re):b(re+"px"):b(h((""+re).trim()))}pc?(pc=!1,Fb.push(Uc,de,qb,re)):Fb.push(Fc,de,qb,re)}}pc||
Fb.push(xc)}function w(Fb,pc,bd,kd){switch(bd){case "style":B(Fb,pc,kd);return;case "defaultValue":case "defaultChecked":case "innerHTML":case "suppressContentEditableWarning":case "suppressHydrationWarning":return}if(!(2<bd.length)||"o"!==bd[0]&&"O"!==bd[0]||"n"!==bd[1]&&"N"!==bd[1])if(pc=Yb.hasOwnProperty(bd)?Yb[bd]:null,null!==pc){switch(typeof kd){case "function":case "symbol":return;case "boolean":if(!pc.acceptsBooleans)return}bd=b(pc.attributeName);switch(pc.type){case 3:kd&&Fb.push(Tb,bd,hc);
break;case 4:!0===kd?Fb.push(Tb,bd,hc):!1!==kd&&Fb.push(Tb,bd,Ec,b(h(kd)),xc);break;case 5:isNaN(kd)||Fb.push(Tb,bd,Ec,b(h(kd)),xc);break;case 6:!isNaN(kd)&&1<=kd&&Fb.push(Tb,bd,Ec,b(h(kd)),xc);break;default:pc.sanitizeURL&&(kd=""+kd),Fb.push(Tb,bd,Ec,b(h(kd)),xc)}}else if(J(bd)){switch(typeof kd){case "function":case "symbol":return;case "boolean":if(pc=bd.toLowerCase().slice(0,5),"data-"!==pc&&"aria-"!==pc)return}Fb.push(Tb,b(bd),Ec,b(h(kd)),xc)}}function g(Fb,pc,bd){if(null!=pc){if(null!=bd)throw Error(x(60));
if("object"!==typeof pc||!("__html"in pc))throw Error(x(61));pc=pc.__html;null!==pc&&void 0!==pc&&Fb.push(b(""+pc))}}function d(Fb){var pc="";Pc.Children.forEach(Fb,function(bd){null!=bd&&(pc+=bd)});return pc}function G(Fb,pc,bd,kd){Fb.push(z(bd));var re=bd=null,de;for(de in pc)if(Kb.call(pc,de)){var Ge=pc[de];if(null!=Ge)switch(de){case "children":bd=Ge;break;case "dangerouslySetInnerHTML":re=Ge;break;default:w(Fb,kd,de,Ge)}}Fb.push(gc);g(Fb,re,bd);return"string"===typeof bd?(Fb.push(b(h(bd))),null):
bd}function z(Fb){var pc=sc.get(Fb);if(void 0===pc){if(!Qb.test(Fb))throw Error(x(65,Fb));pc=p("\x3c"+Fb);sc.set(Fb,pc)}return pc}function K(Fb,pc,bd,kd,re){switch(pc){case "select":Fb.push(z("select"));var de=null,Ge=null;for(md in bd)if(Kb.call(bd,md)){var Pb=bd[md];if(null!=Pb)switch(md){case "children":de=Pb;break;case "dangerouslySetInnerHTML":Ge=Pb;break;case "defaultValue":case "value":break;default:w(Fb,kd,md,Pb)}}Fb.push(gc);g(Fb,Ge,de);return de;case "option":Ge=re.selectedValue;Fb.push(z("option"));
var lc=Pb=null,dd=null,md=null;for(de in bd)if(Kb.call(bd,de)){var Jd=bd[de];if(null!=Jd)switch(de){case "children":Pb=Jd;break;case "selected":dd=Jd;break;case "dangerouslySetInnerHTML":md=Jd;break;case "value":lc=Jd;default:w(Fb,kd,de,Jd)}}if(null!=Ge)if(bd=null!==lc?""+lc:d(Pb),Nb(Ge))for(kd=0;kd<Ge.length;kd++){if(""+Ge[kd]===bd){Fb.push(qc);break}}else""+Ge===bd&&Fb.push(qc);else dd&&Fb.push(qc);Fb.push(gc);g(Fb,md,Pb);return Pb;case "textarea":Fb.push(z("textarea"));md=Ge=de=null;for(Pb in bd)if(Kb.call(bd,
Pb)&&(lc=bd[Pb],null!=lc))switch(Pb){case "children":md=lc;break;case "value":de=lc;break;case "defaultValue":Ge=lc;break;case "dangerouslySetInnerHTML":throw Error(x(91));default:w(Fb,kd,Pb,lc)}null===de&&null!==Ge&&(de=Ge);Fb.push(gc);if(null!=md){if(null!=de)throw Error(x(92));if(Nb(md)&&1<md.length)throw Error(x(93));de=""+md}"string"===typeof de&&"\n"===de[0]&&Fb.push(Ab);null!==de&&Fb.push(b(h(""+de)));return null;case "input":Fb.push(z("input"));lc=md=Pb=de=null;for(Ge in bd)if(Kb.call(bd,
Ge)&&(dd=bd[Ge],null!=dd))switch(Ge){case "children":case "dangerouslySetInnerHTML":throw Error(x(399,"input"));case "defaultChecked":lc=dd;break;case "defaultValue":Pb=dd;break;case "checked":md=dd;break;case "value":de=dd;break;default:w(Fb,kd,Ge,dd)}null!==md?w(Fb,kd,"checked",md):null!==lc&&w(Fb,kd,"checked",lc);null!==de?w(Fb,kd,"value",de):null!==Pb&&w(Fb,kd,"value",Pb);Fb.push(ac);return null;case "menuitem":Fb.push(z("menuitem"));for(var Xd in bd)if(Kb.call(bd,Xd)&&(de=bd[Xd],null!=de))switch(Xd){case "children":case "dangerouslySetInnerHTML":throw Error(x(400));
default:w(Fb,kd,Xd,de)}Fb.push(gc);return null;case "title":Fb.push(z("title"));de=null;for(Jd in bd)if(Kb.call(bd,Jd)&&(Ge=bd[Jd],null!=Ge))switch(Jd){case "children":de=Ge;break;case "dangerouslySetInnerHTML":throw Error(x(434));default:w(Fb,kd,Jd,Ge)}Fb.push(gc);return de;case "listing":case "pre":Fb.push(z(pc));Ge=de=null;for(lc in bd)if(Kb.call(bd,lc)&&(Pb=bd[lc],null!=Pb))switch(lc){case "children":de=Pb;break;case "dangerouslySetInnerHTML":Ge=Pb;break;default:w(Fb,kd,lc,Pb)}Fb.push(gc);if(null!=
Ge){if(null!=de)throw Error(x(60));if("object"!==typeof Ge||!("__html"in Ge))throw Error(x(61));bd=Ge.__html;null!==bd&&void 0!==bd&&("string"===typeof bd&&0<bd.length&&"\n"===bd[0]?Fb.push(Ab,b(bd)):Fb.push(b(""+bd)))}"string"===typeof de&&"\n"===de[0]&&Fb.push(Ab);return de;case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":Fb.push(z(pc));for(var ce in bd)if(Kb.call(bd,ce)&&(de=bd[ce],
null!=de))switch(ce){case "children":case "dangerouslySetInnerHTML":throw Error(x(399,pc));default:w(Fb,kd,ce,de)}Fb.push(ac);return null;case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return G(Fb,bd,pc,kd);case "html":return 0===re.insertionMode&&Fb.push(sb),G(Fb,bd,pc,kd);default:if(-1===pc.indexOf("-")&&"string"!==typeof bd.is)return G(Fb,bd,pc,kd);Fb.push(z(pc));Ge=de=null;
for(dd in bd)if(Kb.call(bd,dd)&&(Pb=bd[dd],null!=Pb))switch(dd){case "children":de=Pb;break;case "dangerouslySetInnerHTML":Ge=Pb;break;case "style":B(Fb,kd,Pb);break;case "suppressContentEditableWarning":case "suppressHydrationWarning":break;default:J(dd)&&"function"!==typeof Pb&&"symbol"!==typeof Pb&&Fb.push(Tb,b(dd),Ec,b(h(Pb)),xc)}Fb.push(gc);g(Fb,Ge,de);return de}}function W(Fb,pc,bd){V(Fb,Hc);if(null===bd)throw Error(x(395));V(Fb,bd);return y(Fb,ab)}function A(Fb,pc,bd,kd){switch(bd.insertionMode){case 0:case 1:return V(Fb,
Wb),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,Ac);case 2:return V(Fb,sa),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,ja);case 3:return V(Fb,ia),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,Sa);case 4:return V(Fb,la),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,oa);case 5:return V(Fb,$a),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,Mb);case 6:return V(Fb,ed),V(Fb,pc.segmentPrefix),V(Fb,b(kd.toString(16))),y(Fb,wd);case 7:return V(Fb,De),V(Fb,pc.segmentPrefix),
V(Fb,b(kd.toString(16))),y(Fb,Pe);default:throw Error(x(397));}}function Q(Fb,pc){switch(pc.insertionMode){case 0:case 1:return y(Fb,rb);case 2:return y(Fb,f);case 3:return y(Fb,Ia);case 4:return y(Fb,Aa);case 5:return y(Fb,yc);case 6:return y(Fb,ne);case 7:return y(Fb,Ef);default:throw Error(x(397));}}function N(Fb){return JSON.stringify(Fb).replace(Li,function(pc){switch(pc){case "\x3c":return"\\u003c";case " ":return"\\u2028";case " ":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React");
}})}function C(Fb){if(null==Fb)return null;if("function"===typeof Fb)return Fb.displayName||Fb.name||null;if("string"===typeof Fb)return Fb;switch(Fb){case mf:return"Fragment";case vf:return"Portal";case qg:return"Profiler";case gg:return"StrictMode";case Qc:return"Suspense";case Mc:return"SuspenseList"}if("object"===typeof Fb)switch(Fb.$$typeof){case Zb:return(Fb.displayName||"Context")+".Consumer";case ng:return(Fb._context.displayName||"Context")+".Provider";case kc:var pc=Fb.render;(Fb=Fb.displayName)||
(Fb=pc.displayName||pc.name||"",Fb=""!==Fb?"ForwardRef("+Fb+")":"ForwardRef");return Fb;case jd:return pc=Fb.displayName||null,null!==pc?pc:C(Fb.type)||"Memo";case ud:pc=Fb._payload;Fb=Fb._init;try{return C(Fb(pc))}catch(bd){}}return null}function q(Fb,pc){Fb=Fb.contextTypes;if(!Fb)return Ye;var bd={},kd;for(kd in Fb)bd[kd]=pc[kd];return bd}function M(Fb,pc){if(Fb!==pc){Fb.context._currentValue=Fb.parentValue;Fb=Fb.parent;var bd=pc.parent;if(null===Fb){if(null!==bd)throw Error(x(401));}else{if(null===
bd)throw Error(x(401));M(Fb,bd)}pc.context._currentValue=pc.value}}function I(Fb){Fb.context._currentValue=Fb.parentValue;Fb=Fb.parent;null!==Fb&&I(Fb)}function R(Fb){var pc=Fb.parent;null!==pc&&R(pc);Fb.context._currentValue=Fb.value}function S(Fb,pc){Fb.context._currentValue=Fb.parentValue;Fb=Fb.parent;if(null===Fb)throw Error(x(402));Fb.depth===pc.depth?M(Fb,pc):S(Fb,pc)}function P(Fb,pc){var bd=pc.parent;if(null===bd)throw Error(x(402));Fb.depth===bd.depth?M(Fb,bd):P(Fb,bd);pc.context._currentValue=
pc.value}function ka(Fb){var pc=pe;pc!==Fb&&(null===pc?R(Fb):null===Fb?I(pc):pc.depth===Fb.depth?M(pc,Fb):pc.depth>Fb.depth?S(pc,Fb):P(pc,Fb),pe=Fb)}function Y(Fb,pc,bd,kd){var re=void 0!==Fb.state?Fb.state:null;Fb.updater=Oe;Fb.props=bd;Fb.state=re;var de={queue:[],replace:!1};Fb._reactInternals=de;var Ge=pc.contextType;Fb.context="object"===typeof Ge&&null!==Ge?Ge._currentValue:kd;Ge=pc.getDerivedStateFromProps;"function"===typeof Ge&&(Ge=Ge(bd,re),re=null===Ge||void 0===Ge?re:Oh({},re,Ge),Fb.state=
re);if("function"!==typeof pc.getDerivedStateFromProps&&"function"!==typeof Fb.getSnapshotBeforeUpdate&&("function"===typeof Fb.UNSAFE_componentWillMount||"function"===typeof Fb.componentWillMount))if(pc=Fb.state,"function"===typeof Fb.componentWillMount&&Fb.componentWillMount(),"function"===typeof Fb.UNSAFE_componentWillMount&&Fb.UNSAFE_componentWillMount(),pc!==Fb.state&&Oe.enqueueReplaceState(Fb,Fb.state,null),null!==de.queue&&0<de.queue.length)if(pc=de.queue,Ge=de.replace,de.queue=null,de.replace=
!1,Ge&&1===pc.length)Fb.state=pc[0];else{de=Ge?pc[0]:Fb.state;re=!0;for(Ge=Ge?1:0;Ge<pc.length;Ge++){var Pb=pc[Ge];Pb="function"===typeof Pb?Pb.call(Fb,de,bd,kd):Pb;null!=Pb&&(re?(re=!1,de=Oh({},de,Pb)):Oh(de,Pb))}Fb.state=de}else de.queue=null}function aa(Fb,pc,bd){var kd=Fb.id;Fb=Fb.overflow;var re=32-$f(kd)-1;kd&=~(1<<re);bd+=1;var de=32-$f(pc)+re;if(30<de){var Ge=re-re%5;de=(kd&(1<<Ge)-1).toString(32);kd>>=Ge;re-=Ge;return{id:1<<32-$f(pc)+re|bd<<re|kd,overflow:de+Fb}}return{id:1<<de|bd<<re|kd,
overflow:Fb}}function ba(Fb){Fb>>>=0;return 0===Fb?32:31-(Ae(Fb)/Qf|0)|0}function X(Fb,pc){return Fb===pc&&(0!==Fb||1/Fb===1/pc)||Fb!==Fb&&pc!==pc}function ha(){if(null===tf)throw Error(x(321));return tf}function ea(){if(0<Mg)throw Error(x(312));return{memoizedState:null,queue:null,next:null}}function fa(){null===Wf?null===wf?(Dh=!1,wf=Wf=ea()):(Dh=!0,Wf=wf):null===Wf.next?(Dh=!1,Wf=Wf.next=ea()):(Dh=!0,Wf=Wf.next);return Wf}function pa(){Kg=tf=null;sg=!1;wf=null;Mg=0;Wf=Lh=null}function ua(Fb,pc){return"function"===
typeof pc?pc(Fb):pc}function qa(Fb,pc,bd){tf=ha();Wf=fa();if(Dh){var kd=Wf.queue;pc=kd.dispatch;if(null!==Lh&&(bd=Lh.get(kd),void 0!==bd)){Lh.delete(kd);kd=Wf.memoizedState;do kd=Fb(kd,bd.action),bd=bd.next;while(null!==bd);Wf.memoizedState=kd;return[kd,pc]}return[Wf.memoizedState,pc]}Fb=Fb===ua?"function"===typeof pc?pc():pc:void 0!==bd?bd(pc):pc;Wf.memoizedState=Fb;Fb=Wf.queue={last:null,dispatch:null};Fb=Fb.dispatch=Ja.bind(null,tf,Fb);return[Wf.memoizedState,Fb]}function wa(Fb,pc){tf=ha();Wf=
fa();pc=void 0===pc?null:pc;if(null!==Wf){var bd=Wf.memoizedState;if(null!==bd&&null!==pc){var kd=bd[1];a:if(null===kd)kd=!1;else{for(var re=0;re<kd.length&&re<pc.length;re++)if(!Rf(pc[re],kd[re])){kd=!1;break a}kd=!0}if(kd)return bd[0]}}Fb=Fb();Wf.memoizedState=[Fb,pc];return Fb}function Ja(Fb,pc,bd){if(25<=Mg)throw Error(x(301));if(Fb===tf)if(sg=!0,Fb={action:bd,next:null},null===Lh&&(Lh=new Map),bd=Lh.get(pc),void 0===bd)Lh.set(pc,Fb);else{for(pc=bd;null!==pc.next;)pc=pc.next;pc.next=Fb}}function Pa(){throw Error(x(394));
}function db(){}function za(Fb){console.error(Fb);return null}function Ma(){}function Ca(Fb,pc,bd,kd,re,de,Ge,Pb,lc){var dd=[],md=new Set;pc={destination:null,responseState:pc,progressiveChunkSize:void 0===kd?12800:kd,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:md,pingedTasks:dd,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===re?za:re,onAllReady:void 0===de?Ma:de,onShellReady:void 0===
Ge?Ma:Ge,onShellError:void 0===Pb?Ma:Pb,onFatalError:void 0===lc?Ma:lc};bd=Ga(pc,0,null,bd,!1,!1);bd.parentFlushed=!0;Fb=ma(pc,Fb,null,bd,md,Ye,null,$e);dd.push(Fb);return pc}function ma(Fb,pc,bd,kd,re,de,Ge,Pb){Fb.allPendingTasks++;null===bd?Fb.pendingRootTasks++:bd.pendingTasks++;var lc={node:pc,ping:function(){var dd=Fb.pingedTasks;dd.push(lc);1===dd.length&&jb(Fb)},blockedBoundary:bd,blockedSegment:kd,abortSet:re,legacyContext:de,context:Ge,treeContext:Pb};re.add(lc);return lc}function Ga(Fb,
pc,bd,kd,re,de){return{status:0,id:-1,index:pc,parentFlushed:!1,chunks:[],children:[],formatContext:kd,boundary:bd,lastPushedText:re,textEmbedded:de}}function Oa(Fb,pc){Fb=Fb.onError(pc);if(null!=Fb&&"string"!==typeof Fb)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof Fb+'" instead');return Fb}function Ba(Fb,pc){var bd=Fb.onShellError;
bd(pc);bd=Fb.onFatalError;bd(pc);null!==Fb.destination?(Fb.status=2,D(Fb.destination,pc)):(Fb.status=1,Fb.fatalError=pc)}function ta(Fb,pc,bd,kd,re){tf={};Kg=pc;Nf=0;for(Fb=bd(kd,re);sg;)sg=!1,Nf=0,Mg+=1,Wf=null,Fb=bd(kd,re);pa();return Fb}function La(Fb,pc,bd,kd){var re=bd.render(),de=kd.childContextTypes;if(null!==de&&void 0!==de){var Ge=pc.legacyContext;if("function"!==typeof bd.getChildContext)kd=Ge;else{bd=bd.getChildContext();for(var Pb in bd)if(!(Pb in de))throw Error(x(108,C(kd)||"Unknown",
Pb));kd=Oh({},Ge,bd)}pc.legacyContext=kd;Ra(Fb,pc,re);pc.legacyContext=Ge}else Ra(Fb,pc,re)}function Ua(Fb,pc){if(Fb&&Fb.defaultProps){pc=Oh({},pc);Fb=Fb.defaultProps;for(var bd in Fb)void 0===pc[bd]&&(pc[bd]=Fb[bd])}return pc}function Ya(Fb,pc,bd,kd,re){if("function"===typeof bd)if(bd.prototype&&bd.prototype.isReactComponent){re=q(bd,pc.legacyContext);var de=bd.contextType;de=new bd(kd,"object"===typeof de&&null!==de?de._currentValue:re);Y(de,bd,kd,re);La(Fb,pc,de,bd)}else{de=q(bd,pc.legacyContext);
re=ta(Fb,pc,bd,kd,de);var Ge=0!==Nf;if("object"===typeof re&&null!==re&&"function"===typeof re.render&&void 0===re.$$typeof)Y(re,bd,kd,de),La(Fb,pc,re,bd);else if(Ge){kd=pc.treeContext;pc.treeContext=aa(kd,1,0);try{Ra(Fb,pc,re)}finally{pc.treeContext=kd}}else Ra(Fb,pc,re)}else if("string"===typeof bd){re=pc.blockedSegment;de=K(re.chunks,bd,kd,Fb.responseState,re.formatContext);re.lastPushedText=!1;Ge=re.formatContext;re.formatContext=t(Ge,bd,kd);lb(Fb,pc,de);re.formatContext=Ge;switch(bd){case "area":case "base":case "br":case "col":case "embed":case "hr":case "img":case "input":case "keygen":case "link":case "meta":case "param":case "source":case "track":case "wbr":break;
default:re.chunks.push(Gb,b(bd),kb)}re.lastPushedText=!1}else{switch(bd){case we:case he:case gg:case qg:case mf:Ra(Fb,pc,kd.children);return;case Mc:Ra(Fb,pc,kd.children);return;case $d:throw Error(x(343));case Qc:a:{bd=pc.blockedBoundary;re=pc.blockedSegment;de=kd.fallback;kd=kd.children;Ge=new Set;var Pb={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ge,errorDigest:null},lc=Ga(Fb,re.chunks.length,Pb,re.formatContext,
!1,!1);re.children.push(lc);re.lastPushedText=!1;var dd=Ga(Fb,0,null,re.formatContext,!1,!1);dd.parentFlushed=!0;pc.blockedBoundary=Pb;pc.blockedSegment=dd;try{if(lb(Fb,pc,kd),dd.lastPushedText&&dd.textEmbedded&&dd.chunks.push(Ad),dd.status=1,Da(Pb,dd),0===Pb.pendingTasks)break a}catch(md){dd.status=4,Pb.forceClientRender=!0,Pb.errorDigest=Oa(Fb,md)}finally{pc.blockedBoundary=bd,pc.blockedSegment=re}pc=ma(Fb,de,bd,lc,Ge,pc.legacyContext,pc.context,pc.treeContext);Fb.pingedTasks.push(pc)}return}if("object"===
typeof bd&&null!==bd)switch(bd.$$typeof){case kc:kd=ta(Fb,pc,bd.render,kd,re);if(0!==Nf){bd=pc.treeContext;pc.treeContext=aa(bd,1,0);try{Ra(Fb,pc,kd)}finally{pc.treeContext=bd}}else Ra(Fb,pc,kd);return;case jd:bd=bd.type;kd=Ua(bd,kd);Ya(Fb,pc,bd,kd,re);return;case ng:re=kd.children;bd=bd._context;kd=kd.value;de=bd._currentValue;bd._currentValue=kd;Ge=pe;pe=kd={parent:Ge,depth:null===Ge?0:Ge.depth+1,context:bd,parentValue:de,value:kd};pc.context=kd;Ra(Fb,pc,re);Fb=pe;if(null===Fb)throw Error(x(403));
kd=Fb.parentValue;Fb.context._currentValue=kd===Xe?Fb.context._defaultValue:kd;Fb=pe=Fb.parent;pc.context=Fb;return;case Zb:kd=kd.children;kd=kd(bd._currentValue);Ra(Fb,pc,kd);return;case ud:re=bd._init;bd=re(bd._payload);kd=Ua(bd,kd);Ya(Fb,pc,bd,kd,void 0);return}throw Error(x(130,null==bd?bd:typeof bd,""));}}function Ra(Fb,pc,bd){pc.node=bd;if("object"===typeof bd&&null!==bd){switch(bd.$$typeof){case yf:Ya(Fb,pc,bd.type,bd.props,bd.ref);return;case vf:throw Error(x(257));case ud:var kd=bd._init;
bd=kd(bd._payload);Ra(Fb,pc,bd);return}if(Nb(bd)){cb(Fb,pc,bd);return}null===bd||"object"!==typeof bd?kd=null:(kd=Td&&bd[Td]||bd["@@iterator"],kd="function"===typeof kd?kd:null);if(kd&&=kd.call(bd)){bd=kd.next();if(!bd.done){var re=[];do re.push(bd.value),bd=kd.next();while(!bd.done);cb(Fb,pc,re)}return}Fb=Object.prototype.toString.call(bd);throw Error(x(31,"[object Object]"===Fb?"object with keys {"+Object.keys(bd).join(", ")+"}":Fb));}"string"===typeof bd?(kd=pc.blockedSegment,kd.lastPushedText=
H(pc.blockedSegment.chunks,bd,Fb.responseState,kd.lastPushedText)):"number"===typeof bd&&(kd=pc.blockedSegment,kd.lastPushedText=H(pc.blockedSegment.chunks,""+bd,Fb.responseState,kd.lastPushedText))}function cb(Fb,pc,bd){for(var kd=bd.length,re=0;re<kd;re++){var de=pc.treeContext;pc.treeContext=aa(de,kd,re);try{lb(Fb,pc,bd[re])}finally{pc.treeContext=de}}}function lb(Fb,pc,bd){var kd=pc.blockedSegment.formatContext,re=pc.legacyContext,de=pc.context;try{return Ra(Fb,pc,bd)}catch(lc){if(pa(),"object"===
typeof lc&&null!==lc&&"function"===typeof lc.then){bd=lc;var Ge=pc.blockedSegment,Pb=Ga(Fb,Ge.chunks.length,null,Ge.formatContext,Ge.lastPushedText,!0);Ge.children.push(Pb);Ge.lastPushedText=!1;Fb=ma(Fb,pc.node,pc.blockedBoundary,Pb,pc.abortSet,pc.legacyContext,pc.context,pc.treeContext).ping;bd.then(Fb,Fb);pc.blockedSegment.formatContext=kd;pc.legacyContext=re;pc.context=de;ka(de)}else throw pc.blockedSegment.formatContext=kd,pc.legacyContext=re,pc.context=de,ka(de),lc;}}function Sb(Fb){var pc=Fb.blockedBoundary;
Fb=Fb.blockedSegment;Fb.status=3;ob(this,pc,Fb)}function Jb(Fb,pc,bd){var kd=Fb.blockedBoundary;Fb.blockedSegment.status=3;null===kd?(pc.allPendingTasks--,2!==pc.status&&(pc.status=2,null!==pc.destination&&pc.destination.close())):(kd.pendingTasks--,kd.forceClientRender||(kd.forceClientRender=!0,Fb=void 0===bd?Error(x(432)):bd,kd.errorDigest=pc.onError(Fb),kd.parentFlushed&&pc.clientRenderedBoundaries.push(kd)),kd.fallbackAbortableTasks.forEach(function(re){return Jb(re,pc,bd)}),kd.fallbackAbortableTasks.clear(),
pc.allPendingTasks--,0===pc.allPendingTasks&&(kd=pc.onAllReady,kd()))}function Da(Fb,pc){if(0===pc.chunks.length&&1===pc.children.length&&null===pc.children[0].boundary){var bd=pc.children[0];bd.id=pc.id;bd.parentFlushed=!0;1===bd.status&&Da(Fb,bd)}else Fb.completedSegments.push(pc)}function ob(Fb,pc,bd){if(null===pc){if(bd.parentFlushed){if(null!==Fb.completedRootSegment)throw Error(x(389));Fb.completedRootSegment=bd}Fb.pendingRootTasks--;0===Fb.pendingRootTasks&&(Fb.onShellError=Ma,pc=Fb.onShellReady,
pc())}else pc.pendingTasks--,pc.forceClientRender||(0===pc.pendingTasks?(bd.parentFlushed&&1===bd.status&&Da(pc,bd),pc.parentFlushed&&Fb.completedBoundaries.push(pc),pc.fallbackAbortableTasks.forEach(Sb,Fb),pc.fallbackAbortableTasks.clear()):bd.parentFlushed&&1===bd.status&&(Da(pc,bd),1===pc.completedSegments.length&&pc.parentFlushed&&Fb.partialBoundaries.push(pc)));Fb.allPendingTasks--;0===Fb.allPendingTasks&&(Fb=Fb.onAllReady,Fb())}function jb(Fb){if(2!==Fb.status){var pc=pe,bd=rf.current;rf.current=
Wh;var kd=gh;gh=Fb.responseState;try{var re=Fb.pingedTasks,de;for(de=0;de<re.length;de++){var Ge=re[de],Pb=Fb,lc=Ge.blockedSegment;if(0===lc.status){ka(Ge.context);try{Ra(Pb,Ge,Ge.node),lc.lastPushedText&&lc.textEmbedded&&lc.chunks.push(Ad),Ge.abortSet.delete(Ge),lc.status=1,ob(Pb,Ge.blockedBoundary,lc)}catch(je){if(pa(),"object"===typeof je&&null!==je&&"function"===typeof je.then){var dd=Ge.ping;je.then(dd,dd)}else{Ge.abortSet.delete(Ge);lc.status=4;var md=Ge.blockedBoundary,Jd=je,Xd=Oa(Pb,Jd);null===
md?Ba(Pb,Jd):(md.pendingTasks--,md.forceClientRender||(md.forceClientRender=!0,md.errorDigest=Xd,md.parentFlushed&&Pb.clientRenderedBoundaries.push(md)));Pb.allPendingTasks--;if(0===Pb.allPendingTasks){var ce=Pb.onAllReady;ce()}}}finally{}}}re.splice(0,de);null!==Fb.destination&&Vc(Fb,Fb.destination)}catch(je){Oa(Fb,je),Ba(Fb,je)}finally{gh=kd,rf.current=bd,bd===Wh&&ka(pc)}}}function Za(Fb,pc,bd){bd.parentFlushed=!0;switch(bd.status){case 0:var kd=bd.id=Fb.nextSegmentId++;bd.lastPushedText=!1;bd.textEmbedded=
!1;Fb=Fb.responseState;V(pc,Db);V(pc,Fb.placeholderPrefix);Fb=b(kd.toString(16));V(pc,Fb);return y(pc,Eb);case 1:bd.status=2;var re=!0;kd=bd.chunks;var de=0;bd=bd.children;for(var Ge=0;Ge<bd.length;Ge++){for(re=bd[Ge];de<re.index;de++)V(pc,kd[de]);re=gb(Fb,pc,re)}for(;de<kd.length-1;de++)V(pc,kd[de]);de<kd.length&&(re=y(pc,kd[de]));return re;default:throw Error(x(390));}}function gb(Fb,pc,bd){var kd=bd.boundary;if(null===kd)return Za(Fb,pc,bd);kd.parentFlushed=!0;if(kd.forceClientRender)kd=kd.errorDigest,
y(pc,eb),V(pc,mb),kd&&(V(pc,bb),V(pc,b(h(kd))),V(pc,Bb)),y(pc,zb),Za(Fb,pc,bd);else if(0<kd.pendingTasks){kd.rootSegmentID=Fb.nextSegmentId++;0<kd.completedSegments.length&&Fb.partialBoundaries.push(kd);var re=Fb.responseState,de=re.nextSuspenseID++;re=p(re.boundaryPrefix+de.toString(16));kd=kd.id=re;W(pc,Fb.responseState,kd);Za(Fb,pc,bd)}else if(kd.byteSize>Fb.progressiveChunkSize)kd.rootSegmentID=Fb.nextSegmentId++,Fb.completedBoundaries.push(kd),W(pc,Fb.responseState,kd.id),Za(Fb,pc,bd);else{y(pc,
jc);bd=kd.completedSegments;if(1!==bd.length)throw Error(x(391));gb(Fb,pc,bd[0])}return y(pc,Wa)}function Xa(Fb,pc,bd){A(pc,Fb.responseState,bd.formatContext,bd.id);gb(Fb,pc,bd);return Q(pc,bd.formatContext)}function ec(Fb,pc,bd){for(var kd=bd.completedSegments,re=0;re<kd.length;re++)Zc(Fb,pc,bd,kd[re]);kd.length=0;Fb=Fb.responseState;kd=bd.id;bd=bd.rootSegmentID;V(pc,Fb.startInlineScript);Fb.sentCompleteBoundaryFunction?V(pc,Jg):(Fb.sentCompleteBoundaryFunction=!0,V(pc,Ag));if(null===kd)throw Error(x(395));
bd=b(bd.toString(16));V(pc,kd);V(pc,Uf);V(pc,Fb.segmentPrefix);V(pc,bd);return y(pc,yg)}function Zc(Fb,pc,bd,kd){if(2===kd.status)return!0;var re=kd.id;if(-1===re){if(-1===(kd.id=bd.rootSegmentID))throw Error(x(392));return Xa(Fb,pc,kd)}Xa(Fb,pc,kd);Fb=Fb.responseState;V(pc,Fb.startInlineScript);Fb.sentCompleteSegmentFunction?V(pc,Yf):(Fb.sentCompleteSegmentFunction=!0,V(pc,qf));V(pc,Fb.segmentPrefix);re=b(re.toString(16));V(pc,re);V(pc,of);V(pc,Fb.placeholderPrefix);V(pc,re);return y(pc,xg)}function Vc(Fb,
pc){Ta=new Uint8Array(512);hb=0;try{var bd=Fb.completedRootSegment;if(null!==bd&&0===Fb.pendingRootTasks){gb(Fb,pc,bd);Fb.completedRootSegment=null;var kd=Fb.responseState.bootstrapChunks;for(bd=0;bd<kd.length-1;bd++)V(pc,kd[bd]);bd<kd.length&&y(pc,kd[bd])}var re=Fb.clientRenderedBoundaries,de;for(de=0;de<re.length;de++){var Ge=re[de];kd=pc;var Pb=Fb.responseState,lc=Ge.id,dd=Ge.errorDigest,md=Ge.errorMessage,Jd=Ge.errorComponentStack;V(kd,Pb.startInlineScript);Pb.sentClientRenderFunction?V(kd,kh):
(Pb.sentClientRenderFunction=!0,V(kd,Hh));if(null===lc)throw Error(x(395));V(kd,lc);V(kd,Vh);if(dd||md||Jd)V(kd,ki),V(kd,b(N(dd||"")));if(md||Jd)V(kd,ki),V(kd,b(N(md||"")));Jd&&(V(kd,ki),V(kd,b(N(Jd))));if(!y(kd,ji)){Fb.destination=null;de++;re.splice(0,de);return}}re.splice(0,de);var Xd=Fb.completedBoundaries;for(de=0;de<Xd.length;de++)if(!ec(Fb,pc,Xd[de])){Fb.destination=null;de++;Xd.splice(0,de);return}Xd.splice(0,de);u(pc);Ta=new Uint8Array(512);hb=0;var ce=Fb.partialBoundaries;for(de=0;de<ce.length;de++){var je=
ce[de];a:{re=Fb;Ge=pc;var Dd=je.completedSegments;for(Pb=0;Pb<Dd.length;Pb++)if(!Zc(re,Ge,je,Dd[Pb])){Pb++;Dd.splice(0,Pb);var Ee=!1;break a}Dd.splice(0,Pb);Ee=!0}if(!Ee){Fb.destination=null;de++;ce.splice(0,de);return}}ce.splice(0,de);var Ie=Fb.completedBoundaries;for(de=0;de<Ie.length;de++)if(!ec(Fb,pc,Ie[de])){Fb.destination=null;de++;Ie.splice(0,de);return}Ie.splice(0,de)}finally{u(pc),0===Fb.allPendingTasks&&0===Fb.pingedTasks.length&&0===Fb.clientRenderedBoundaries.length&&0===Fb.completedBoundaries.length&&
pc.close()}}function Jc(Fb,pc){try{var bd=Fb.abortableTasks;bd.forEach(function(kd){return Jb(kd,Fb,pc)});bd.clear();null!==Fb.destination&&Vc(Fb,Fb.destination)}catch(kd){Oa(Fb,kd),Ba(Fb,kd)}}var Pc=Z(68),Ta=null,hb=0,Ub=new TextEncoder,Kb=Object.prototype.hasOwnProperty,uc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
wc={},Lb={},Yb={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Fb){Yb[Fb]=new F(Fb,0,!1,Fb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Fb){var pc=Fb[0];Yb[pc]=new F(pc,1,!1,Fb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Fb){Yb[Fb]=new F(Fb,2,!1,Fb.toLowerCase(),
null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Fb){Yb[Fb]=new F(Fb,2,!1,Fb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Fb){Yb[Fb]=new F(Fb,3,!1,Fb.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Fb){Yb[Fb]=
new F(Fb,3,!0,Fb,null,!1,!1)});["capture","download"].forEach(function(Fb){Yb[Fb]=new F(Fb,4,!1,Fb,null,!1,!1)});["cols","rows","size","span"].forEach(function(Fb){Yb[Fb]=new F(Fb,6,!1,Fb,null,!1,!1)});["rowSpan","start"].forEach(function(Fb){Yb[Fb]=new F(Fb,5,!1,Fb.toLowerCase(),null,!1,!1)});var Ob=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Fb){var pc=
Fb.replace(Ob,T);Yb[pc]=new F(pc,1,!1,Fb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Fb){var pc=Fb.replace(Ob,T);Yb[pc]=new F(pc,1,!1,Fb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Fb){var pc=Fb.replace(Ob,T);Yb[pc]=new F(pc,1,!1,Fb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Fb){Yb[Fb]=new F(Fb,1,!1,Fb.toLowerCase(),null,!1,!1)});
Yb.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Fb){Yb[Fb]=new F(Fb,1,!1,Fb.toLowerCase(),null,!0,!0)});var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,
gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(Fb){vb.forEach(function(pc){pc=pc+Fb.charAt(0).toUpperCase()+Fb.substring(1);pb[pc]=pb[Fb]})});var Cb=/["'&<>]/,
ib=/([A-Z])/g,wb=/^ms-/,Nb=Array.isArray,fc=p("\x3cscript\x3e"),Gc=p("\x3c/script\x3e"),Nc=p('\x3cscript src\x3d"'),nc=p('\x3cscript type\x3d"module" src\x3d"'),Wc=p('" async\x3d""\x3e\x3c/script\x3e'),Sc=/(<\/|<)(s)(cript)/gi,Ad=p("\x3c!-- --\x3e"),td=new Map,Uc=p(' style\x3d"'),qb=p(":"),Fc=p(";"),Tb=p(" "),Ec=p('\x3d"'),xc=p('"'),hc=p('\x3d""'),gc=p("\x3e"),ac=p("/\x3e"),qc=p(' selected\x3d""'),Ab=p("\n"),Qb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,sc=new Map,sb=p("\x3c!DOCTYPE html\x3e"),Gb=p("\x3c/"),kb=
p("\x3e"),Db=p('\x3ctemplate id\x3d"'),Eb=p('"\x3e\x3c/template\x3e'),jc=p("\x3c!--$--\x3e"),Hc=p('\x3c!--$?--\x3e\x3ctemplate id\x3d"'),ab=p('"\x3e\x3c/template\x3e'),eb=p("\x3c!--$!--\x3e"),Wa=p("\x3c!--/$--\x3e"),mb=p("\x3ctemplate"),Bb=p('"'),bb=p(' data-dgst\x3d"');p(' data-msg\x3d"');p(' data-stck\x3d"');var zb=p("\x3e\x3c/template\x3e"),Wb=p('\x3cdiv hidden id\x3d"'),Ac=p('"\x3e'),rb=p("\x3c/div\x3e"),sa=p('\x3csvg aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),ja=p('"\x3e'),f=p("\x3c/svg\x3e"),
ia=p('\x3cmath aria-hidden\x3d"true" style\x3d"display:none" id\x3d"'),Sa=p('"\x3e'),Ia=p("\x3c/math\x3e"),la=p('\x3ctable hidden id\x3d"'),oa=p('"\x3e'),Aa=p("\x3c/table\x3e"),$a=p('\x3ctable hidden\x3e\x3ctbody id\x3d"'),Mb=p('"\x3e'),yc=p("\x3c/tbody\x3e\x3c/table\x3e"),ed=p('\x3ctable hidden\x3e\x3ctr id\x3d"'),wd=p('"\x3e'),ne=p("\x3c/tr\x3e\x3c/table\x3e"),De=p('\x3ctable hidden\x3e\x3ccolgroup id\x3d"'),Pe=p('"\x3e'),Ef=p("\x3c/colgroup\x3e\x3c/table\x3e"),qf=p('function $RS(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),
Yf=p('$RS("'),of=p('","'),xg=p('")\x3c/script\x3e'),Ag=p('function $RC(a,b){a\x3ddocument.getElementById(a);b\x3ddocument.getElementById(b);b.parentNode.removeChild(b);if(a){a\x3da.previousSibling;var f\x3da.parentNode,c\x3da.nextSibling,e\x3d0;do{if(c\x26\x268\x3d\x3d\x3dc.nodeType){var d\x3dc.data;if("/$"\x3d\x3d\x3dd)if(0\x3d\x3d\x3de)break;else e--;else"$"!\x3d\x3dd\x26\x26"$?"!\x3d\x3dd\x26\x26"$!"!\x3d\x3dd||e++}d\x3dc.nextSibling;f.removeChild(c);c\x3dd}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data\x3d"$";a._reactRetry\x26\x26a._reactRetry()}};$RC("'),
Jg=p('$RC("'),Uf=p('","'),yg=p('")\x3c/script\x3e'),Hh=p('function $RX(b,c,d,e){var a\x3ddocument.getElementById(b);a\x26\x26(b\x3da.previousSibling,b.data\x3d"$!",a\x3da.dataset,c\x26\x26(a.dgst\x3dc),d\x26\x26(a.msg\x3dd),e\x26\x26(a.stck\x3de),b._reactRetry\x26\x26b._reactRetry())};$RX("'),kh=p('$RX("'),Vh=p('"'),ji=p(")\x3c/script\x3e"),ki=p(","),Li=/[<\u2028\u2029]/g,Oh=Object.assign,yf=Symbol.for("react.element"),vf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),
qg=Symbol.for("react.profiler"),ng=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),kc=Symbol.for("react.forward_ref"),Qc=Symbol.for("react.suspense"),Mc=Symbol.for("react.suspense_list"),jd=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),$d=Symbol.for("react.scope"),he=Symbol.for("react.debug_trace_mode"),we=Symbol.for("react.legacy_hidden"),Xe=Symbol.for("react.default_value"),Td=Symbol.iterator,Ye={},pe=null,Oe={isMounted:function(){return!1},enqueueSetState:function(Fb,pc){Fb=
Fb._reactInternals;null!==Fb.queue&&Fb.queue.push(pc)},enqueueReplaceState:function(Fb,pc){Fb=Fb._reactInternals;Fb.replace=!0;Fb.queue=[pc]},enqueueForceUpdate:function(){}},$e={id:1,overflow:""},$f=Math.clz32?Math.clz32:ba,Ae=Math.log,Qf=Math.LN2,Rf="function"===typeof Object.is?Object.is:X,tf=null,Kg=null,wf=null,Wf=null,Dh=!1,sg=!1,Nf=0,Lh=null,Mg=0,Wh={readContext:function(Fb){return Fb._currentValue},useContext:function(Fb){ha();return Fb._currentValue},useMemo:wa,useReducer:qa,useRef:function(Fb){tf=
ha();Wf=fa();var pc=Wf.memoizedState;return null===pc?(Fb={current:Fb},Wf.memoizedState=Fb):pc},useState:function(Fb){return qa(ua,Fb)},useInsertionEffect:db,useLayoutEffect:function(){},useCallback:function(Fb,pc){return wa(function(){return Fb},pc)},useImperativeHandle:db,useEffect:db,useDebugValue:db,useDeferredValue:function(Fb){ha();return Fb},useTransition:function(){ha();return[!1,Pa]},useId:function(){var Fb=Kg.treeContext,pc=Fb.overflow;Fb=Fb.id;Fb=(Fb&~(1<<32-$f(Fb)-1)).toString(32)+pc;
var bd=gh;if(null===bd)throw Error(x(404));pc=Nf++;Fb=":"+bd.idPrefix+"R"+Fb;0<pc&&(Fb+="H"+pc.toString(32));return Fb+":"},useMutableSource:function(Fb,pc){ha();return pc(Fb._source)},useSyncExternalStore:function(Fb,pc,bd){if(void 0===bd)throw Error(x(407));return bd()}},gh=null,rf=Pc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;L.renderToReadableStream=function(Fb,pc){return new Promise(function(bd,kd){var re,de,Ge=new Promise(function(md,Jd){de=md;re=Jd}),Pb=Ca(Fb,
a(pc?pc.identifierPrefix:void 0,pc?pc.nonce:void 0,pc?pc.bootstrapScriptContent:void 0,pc?pc.bootstrapScripts:void 0,pc?pc.bootstrapModules:void 0),m(pc?pc.namespaceURI:void 0),pc?pc.progressiveChunkSize:void 0,pc?pc.onError:void 0,de,function(){var md=new ReadableStream({type:"bytes",pull:function(Jd){if(1===Pb.status)Pb.status=2,D(Jd,Pb.fatalError);else if(2!==Pb.status&&null===Pb.destination){Pb.destination=Jd;try{Vc(Pb,Jd)}catch(Xd){Oa(Pb,Xd),Ba(Pb,Xd)}}},cancel:function(){Jc(Pb)}},{highWaterMark:0});
md.allReady=Ge;bd(md)},function(md){Ge.catch(function(){});kd(md)},re);if(pc&&pc.signal){var lc=pc.signal,dd=function(){Jc(Pb,lc.reason);lc.removeEventListener("abort",dd)};lc.addEventListener("abort",dd)}jb(Pb)})};L.version="18.3.1"};
shadow$provide[658]=function(va,Z,Va,L){va=Z(654);Z=Z(655);L.version=va.version;L.renderToString=va.renderToString;L.renderToStaticMarkup=va.renderToStaticMarkup;L.renderToNodeStream=va.renderToNodeStream;L.renderToStaticNodeStream=va.renderToStaticNodeStream;L.renderToReadableStream=Z.renderToReadableStream};
shadow$provide[659]=function(va,Z,Va,L){function x(){if(!Ib&&(Ib="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ib))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ib(Rb)}function V(c,n=0){return(hd[c[n+0]]+hd[c[n+1]]+hd[c[n+2]]+hd[c[n+3]]+"-"+hd[c[n+4]]+hd[c[n+5]]+"-"+hd[c[n+6]]+hd[c[n+7]]+"-"+hd[c[n+8]]+hd[c[n+9]]+"-"+hd[c[n+10]]+hd[c[n+11]]+hd[c[n+12]]+hd[c[n+13]]+hd[c[n+14]]+
hd[c[n+15]]).toLowerCase()}function y(c){let n=0;var O=0;for(var da of c)n+=da.w*da.h,O=Math.max(O,da.w);c.sort((Ka,fb)=>fb.h-Ka.h);O=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),O),h:Infinity}];let ra=da=0;for(const Ka of c)for(c=O.length-1;0<=c;c--){var Ea=O[c];if(!(Ka.w>Ea.w||Ka.h>Ea.h)){Ka.x=Ea.x;Ka.y=Ea.y;ra=Math.max(ra,Ka.y+Ka.h);da=Math.max(da,Ka.x+Ka.w);Ka.w===Ea.w&&Ka.h===Ea.h?(Ea=O.pop(),c<O.length&&(O[c]=Ea)):Ka.h===Ea.h?(Ea.x+=Ka.w,Ea.w-=Ka.w):(Ka.w!==Ea.w&&O.push({x:Ea.x+Ka.w,y:Ea.y,
w:Ea.w-Ka.w,h:Ka.h}),Ea.y+=Ka.h,Ea.h-=Ka.h);break}}return{w:da,h:ra,fill:n/(da*ra)||0}}function u(c,...n){return{didIntersect:0<n.length,message:c,points:n}}function b(c,n,O=0){const da=[c[0]+n[0]/2,c[1]+n[1]/2],ra=Hd.rotWith(c,da,O),Ea=Hd.rotWith(Hd.add(c,[n[0],0]),da,O),Ka=Hd.rotWith(Hd.add(c,n),da,O);c=Hd.rotWith(Hd.add(c,[0,n[1]]),da,O);return[["top",[ra,Ea]],["right",[Ea,Ka]],["bottom",[Ka,c]],["left",[c,ra]]]}function p(c,n,O,da){const [ra,Ea]=c,[Ka,fb]=n,[ub,bc]=O,[tc,Dc]=da;return fb/Ka!==
(Dc-bc)/(tc-ub)&&(n=Ka*(Dc-bc)-fb*(tc-ub),0!==n&&(c=((Ea-bc)*(tc-ub)-(ra-ub)*(Dc-bc))/n,n=((Ea-bc)*Ka-(ra-ub)*fb)/n,0<=c&&0<=n&&1>=n))?u("intersection",[ra+c*Ka,Ea+c*fb]):u("no intersection")}function D(c,n,O,da,ra=0){return a(O,da,ra,c,n)}function J(c,n,O,da=0){const {minX:ra,minY:Ea,width:Ka,height:fb}=O;return D(c,n,[ra,Ea],[Ka,fb],da)}function F(c,n,O,da){var ra=Hd.sub(c,O);O=Hd.sub(da,O);n=Hd.sub(n,c);da=O[0]*ra[1]-O[1]*ra[0];ra=n[0]*ra[1]-n[1]*ra[0];O=O[1]*n[0]-O[0]*n[1];return 0===da||0===
ra?u("coincident"):0===O?u("parallel"):0!==O&&(da/=O,ra/=O,0<=da&&1>=da&&0<=ra&&1>=ra)?u("intersection",Hd.add(c,Hd.mul(n,da))):u("no intersection")}function T(c,n,O,da){var ra=(n[0]-c[0])*(n[0]-c[0])+(n[1]-c[1])*(n[1]-c[1]),Ea=2*((n[0]-c[0])*(c[0]-O[0])+(n[1]-c[1])*(c[1]-O[1]));O=Ea*Ea-4*ra*(O[0]*O[0]+O[1]*O[1]+c[0]*c[0]+c[1]*c[1]-2*(O[0]*c[0]+O[1]*c[1])-da*da);if(0>O)return u("outside");if(0===O)return u("tangent");da=Math.sqrt(O);O=(-Ea+da)/(2*ra);ra=(-Ea-da)/(2*ra);if((0>O||1<O)&&(0>ra||1<ra))return 0>
O&&0>ra||1<O&&1<ra?u("outside"):u("inside");Ea=[];0<=O&&1>=O&&Ea.push(Hd.lrp(c,n,O));0<=ra&&1>=ra&&Ea.push(Hd.lrp(c,n,ra));return u("intersection",...Ea)}function h(c,n,O,da,ra,Ea=0){if(0===da||0===ra||Hd.isEqual(c,n))return u("no intersection");da=0>da?da:-da;ra=0>ra?ra:-ra;c=Hd.sub(Hd.rotWith(c,O,-Ea),O);n=Hd.sub(Hd.rotWith(n,O,-Ea),O);var Ka=Hd.sub(n,c),fb=Ka[0]*Ka[0]/da/da+Ka[1]*Ka[1]/ra/ra;Ka=2*c[0]*Ka[0]/da/da+2*c[1]*Ka[1]/ra/ra;const ub=[];da=Ka*Ka-4*fb*(c[0]*c[0]/da/da+c[1]*c[1]/ra/ra-1);
0===da?ub.push(-Ka/2/fb):0<da&&(da=Math.sqrt(da),ub.push((-Ka+da)/2/fb),ub.push((-Ka-da)/2/fb));fb=ub.filter(bc=>0<=bc&&1>=bc).map(bc=>Hd.add(O,Hd.add(c,Hd.mul(Hd.sub(n,c),bc)))).map(bc=>Hd.rotWith(bc,O,Ea));return u("intersection",...fb)}function l(c,n,O){const da=[];for(let ra=1;ra<O.length;ra++){const Ea=F(c,n,O[ra-1],O[ra]);Ea&&da.push(...Ea.points)}return 0===da.length?u("no intersection"):u("intersection",...O)}function a(c,n,O,da,ra){return b(c,n,O).reduce((Ea,[Ka,[fb,ub]])=>{(fb=p(da,ra,fb,
ub))&&Ea.push(u(Ka,...fb.points));return Ea},[]).filter(Ea=>Ea.didIntersect)}function k(c,n,O,da){return b(c,n).reduce((ra,[Ea,[Ka,fb]])=>{(Ka=F(O,da,Ka,fb))&&ra.push(u(Ea,...Ka.points));return ra},[]).filter(ra=>ra.didIntersect)}function m(c,n,O,da){return b(c,n).reduce((ra,[Ea,[Ka,fb]])=>{(Ka=T(Ka,fb,O,da))&&ra.push(rg(Ff({},Ka),{message:Ea}));return ra},[]).filter(ra=>ra.didIntersect)}function t(c,n,O,da,ra,Ea=0){return b(c,n).reduce((Ka,[fb,[ub,bc]])=>{(ub=h(ub,bc,O,da,ra,Ea))&&Ka.push(rg(Ff({},
ub),{message:fb}));return Ka},[]).filter(Ka=>Ka.didIntersect)}function H(c,n,O){return b(c,n).reduce((da,[ra,[Ea,Ka]])=>{Ea=l(Ea,Ka,O);Ea.didIntersect&&da.push(u(ra,...Ea.points));return da},[]).filter(da=>da.didIntersect)}function B(c,n,O){return b(c,n).reduce((da,[ra,[Ea,Ka]])=>{{const fb=[];for(let ub=1;ub<O.length+1;ub++){const bc=F(Ea,Ka,O[ub-1],O[ub%O.length]);bc&&fb.push(...bc.points)}Ea=0===fb.length?u("no intersection"):u("intersection",...O)}Ea.didIntersect&&da.push(u(ra,...Ea.points));
return da},[]).filter(da=>da.didIntersect)}function w(c,n,O,da=0,ra,Ea){return n===O?m(ra,Ea,c,n):t(ra,Ea,c,n,O,da)}function g(c,n,O){const {minX:da,minY:ra,width:Ea,height:Ka}=c;return k([da,ra],[Ea,Ka],n,O)}function d(c){for(var n=arguments.length,O=Array(1<n?n-1:0),da=1;da<n;da++)O[da-1]=arguments[da];throw Error("number"===typeof c?"[MobX] minified error nr: "+c+(O.length?" "+O.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":
"[MobX] "+c);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==typeof self?self:Ck}function z(){Zy||d("Proxy not available")}function K(c){var n=!1;return function(){if(!n)return n=!0,c.apply(this,arguments)}}function W(c){return"function"===typeof c}function A(c){switch(typeof c){case "string":case "symbol":case "number":return!0}return!1}function Q(c){return null!==c&&"object"===typeof c}function N(c){if(!Q(c))return!1;
c=Object.getPrototypeOf(c);if(null==c)return!0;c=Object.hasOwnProperty.call(c,"constructor")&&c.constructor;return"function"===typeof c&&c.toString()===$y}function C(c){return(c=null==c?void 0:c.constructor)?"GeneratorFunction"===c.name||"GeneratorFunction"===c.displayName?!0:!1:!1}function q(c,n,O){Yk(c,n,{enumerable:!1,writable:!0,configurable:!0,value:O})}function M(c,n,O){Yk(c,n,{enumerable:!1,writable:!1,configurable:!0,value:O})}function I(c,n){var O="isMobX"+c;n.prototype[O]=!0;return function(da){return Q(da)&&
!0===da[O]}}function R(c){return c instanceof Map}function S(c){return c instanceof Set}function P(c){var n=Object.keys(c);if(!mv)return n;var O=Object.getOwnPropertySymbols(c);return O.length?[].concat(n,O.filter(function(da){return yq.propertyIsEnumerable.call(c,da)})):n}function ka(c){return null===c?null:"object"===typeof c?""+c:c}function Y(c,n){return yq.hasOwnProperty.call(c,n)}function aa(c,n){for(var O=0;O<n.length;O++){var da=n[O];da.enumerable=da.enumerable||!1;da.configurable=!0;"value"in
da&&(da.writable=!0);Object.defineProperty(c,da.key,da)}}function ba(c,n,O){n&&aa(c.prototype,n);O&&aa(c,O);Object.defineProperty(c,"prototype",{writable:!1});return c}function X(){X=Object.assign||function(c){for(var n=1;n<arguments.length;n++){var O=arguments[n],da;for(da in O)Object.prototype.hasOwnProperty.call(O,da)&&(c[da]=O[da])}return c};return X.apply(this,arguments)}function ha(c,n){c.prototype=Object.create(n.prototype);c.prototype.constructor=c;ea(c,n)}function ea(c,n){ea=Object.setPrototypeOf||
function(O,da){O.__proto__=da;return O};return ea(c,n)}function fa(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function pa(c,n){if(c){if("string"===typeof c)return ua(c,n);var O=Object.prototype.toString.call(c).slice(8,-1);"Object"===O&&c.constructor&&(O=c.constructor.name);if("Map"===O||"Set"===O)return Array.from(c);if("Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return ua(c,n)}}function ua(c,n){if(null==
n||n>c.length)n=c.length;for(var O=0,da=Array(n);O<n;O++)da[O]=c[O];return da}function qa(c,n){var O="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(O)return(O=O.call(c)).next.bind(O);if(Array.isArray(c)||(O=pa(c))||n&&c&&"number"===typeof c.length){O&&(c=O);var da=0;return function(){return da>=c.length?{done:!0}:{done:!1,value:c[da++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function wa(c){return Object.assign(function(n,O){Ja(n,O,c)},c)}function Ja(c,n,O){Y(c,Ll)||q(c,Ll,X({},c[Ll]));O.annotationType_!==bz&&(c[Ll][n]=O)}function Pa(c){Y(c,Ll)||q(c,Ll,X({},c[Ll]));return c[Ll]}function db(c,n,O){void 0===n&&(n=hp);void 0===O&&(O=hp);c=new zq(c);n!==hp&&Uc(qz,c,n,void 0);O!==hp&&td(c,O);return c}function za(c,n,O){return hc(c)?c:Array.isArray(c)?Ug.array(c,{name:O}):N(c)?Ug.object(c,void 0,{name:O}):R(c)?Ug.map(c,{name:O}):S(c)?Ug.set(c,{name:O}):"function"!==typeof c||
Nc(c)||xc(c)?c:C(c)?Eq(c):Dq(O,c)}function Ma(c){return c}function Ca(c,n){return{annotationType_:c,options_:n,make_:ma,extend_:Ga}}function ma(c,n,O,da){var ra;if(null!=(ra=this.options_)&&ra.bound)return null===this.extend_(c,n,O,!1)?0:1;if(da===c.target_)return null===this.extend_(c,n,O,!1)?0:2;if(Nc(O.value))return 1;c=Oa(c,this,n,O,!1);Yk(da,n,c);return 2}function Ga(c,n,O,da){O=Oa(c,this,n,O);return c.defineProperty_(n,O,da)}function Oa(c,n,O,da,ra){var Ea,Ka,fb,ub,bc,tc,Dc;void 0===ra&&(ra=
cg.safeDescriptors);da=da.value;if(null!=(Ea=n.options_)&&Ea.bound){var $c;da=da.bind(null!=($c=c.proxy_)?$c:c.target_)}return{value:Xa(null!=(Ka=null==(fb=n.options_)?void 0:fb.name)?Ka:O.toString(),da,null!=(ub=null==(bc=n.options_)?void 0:bc.autoAction)?ub:!1,null!=(tc=n.options_)&&tc.bound?null!=(Dc=c.proxy_)?Dc:c.target_:void 0),configurable:ra?c.isPlainObject_:!0,enumerable:!1,writable:ra?!1:!0}}function Ba(c,n){return{annotationType_:c,options_:n,make_:ta,extend_:La}}function ta(c,n,O,da){var ra;
if(da===c.target_)return null===this.extend_(c,n,O,!1)?0:2;if(null!=(ra=this.options_)&&ra.bound&&(!Y(c.target_,n)||!xc(c.target_[n]))&&null===this.extend_(c,n,O,!1))return 0;if(xc(O.value))return 1;c=Ua(c,this,n,O,!1,!1);Yk(da,n,c);return 2}function La(c,n,O,da){var ra;O=Ua(c,this,n,O,null==(ra=this.options_)?void 0:ra.bound);return c.defineProperty_(n,O,da)}function Ua(c,n,O,da,ra,Ea){void 0===Ea&&(Ea=cg.safeDescriptors);n=da.value;xc(n)||(n=Eq(n));if(ra){var Ka;n=n.bind(null!=(Ka=c.proxy_)?Ka:
c.target_);n.isMobXFlow=!0}return{value:n,configurable:Ea?c.isPlainObject_:!0,enumerable:!1,writable:Ea?!1:!0}}function Ya(c,n){return{annotationType_:c,options_:n,make_:Ra,extend_:cb}}function Ra(c,n,O){return null===this.extend_(c,n,O,!1)?0:1}function cb(c,n,O,da){return c.defineComputedProperty_(n,X({},this.options_,{get:O.get,set:O.set}),da)}function lb(c,n){return{annotationType_:c,options_:n,make_:Sb,extend_:Jb}}function Sb(c,n,O){return null===this.extend_(c,n,O,!1)?0:1}function Jb(c,n,O,da){var ra,
Ea;return c.defineObservableProperty_(n,O.value,null!=(ra=null==(Ea=this.options_)?void 0:Ea.enhancer)?ra:za,da)}function Da(c){return{annotationType_:"true",options_:c,make_:ob,extend_:jb}}function ob(c,n,O,da){var ra,Ea;if(O.get)return bh.make_(c,n,O,da);if(O.set){O=Xa(n.toString(),O.set);if(da===c.target_)return null===c.defineProperty_(n,{configurable:cg.safeDescriptors?c.isPlainObject_:!0,set:O})?0:2;Yk(da,n,{configurable:!0,set:O});return 2}if(da!==c.target_&&"function"===typeof O.value){var Ka;
if(C(O.value)){var fb;return(null!=(fb=this.options_)&&fb.autoBind?Eq.bound:Eq).make_(c,n,O,da)}return(null!=(Ka=this.options_)&&Ka.autoBind?Dq.bound:Dq).make_(c,n,O,da)}Ka=!1===(null==(ra=this.options_)?void 0:ra.deep)?Ug.ref:Ug;if("function"===typeof O.value&&null!=(Ea=this.options_)&&Ea.autoBind){var ub;O.value=O.value.bind(null!=(ub=c.proxy_)?ub:c.target_)}return Ka.make_(c,n,O,da)}function jb(c,n,O,da){var ra,Ea;if(O.get)return bh.extend_(c,n,O,da);if(O.set)return c.defineProperty_(n,{configurable:cg.safeDescriptors?
c.isPlainObject_:!0,set:Xa(n.toString(),O.set)},da);if("function"===typeof O.value&&null!=(ra=this.options_)&&ra.autoBind){var Ka;O.value=O.value.bind(null!=(Ka=c.proxy_)?Ka:c.target_)}return(!1===(null==(Ea=this.options_)?void 0:Ea.deep)?Ug.ref:Ug).extend_(c,n,O,da)}function Za(c){if(!0===c.deep)var n=za;else{if(!1===c.deep)c=Ma;else{c=c.defaultDecorator;var O;c=c?null!=(n=null==(O=c.options_)?void 0:O.enhancer)?n:za:za}n=c}return n}function gb(c,n,O){if(A(n))Ja(c,n,nv);else return hc(c)?c:N(c)?
Ug.object(c,n,O):Array.isArray(c)?Ug.array(c,n):R(c)?Ug.map(c,n):S(c)?Ug.set(c,n):"object"===typeof c&&null!==c?c:Ug.box(c,n)}function Xa(c,n,O,da){function ra(){a:{var Ea=da||this,Ka=arguments,fb=cg.trackingDerivation,ub=!O||!fb;Yb();var bc=cg.allowStateChanges;ub&&(hb(),bc=Zc(!0));var tc=Ub(!0),Dc=iz++,$c=zr;zr=Dc;try{var sd=n.apply(Ea,Ka);break a}catch(Gd){var od=Gd;throw Gd;}finally{zr!==Dc&&d(30),zr=$c,void 0!==od&&(cg.suppressReactionErrors=!0),cg.allowStateChanges=bc,cg.allowStateReads=tc,
Ob(),ub&&(cg.trackingDerivation=fb),cg.suppressReactionErrors=!1}sd=void 0}return sd}void 0===O&&(O=!1);ra.isMobxAction=!0;jz&&(sv.value=c,Object.defineProperty(ra,"name",sv));return ra}function ec(c,n){c=Zc(c);try{return n()}finally{cg.allowStateChanges=c}}function Zc(c){var n=cg.allowStateChanges;cg.allowStateChanges=c;return n}function Vc(c){switch(c.dependenciesState_){case Hi.UP_TO_DATE_:return!1;case Hi.NOT_TRACKING_:case Hi.STALE_:return!0;case Hi.POSSIBLY_STALE_:for(var n=Ub(!0),O=hb(),da=
c.observing_,ra=da.length,Ea=0;Ea<ra;Ea++){var Ka=da[Ea];if(Cq(Ka)){if(cg.disableErrorBoundaries)Ka.get();else try{Ka.get()}catch(fb){return cg.trackingDerivation=O,cg.allowStateReads=n,!0}if(c.dependenciesState_===Hi.STALE_)return cg.trackingDerivation=O,cg.allowStateReads=n,!0}}Kb(c);cg.trackingDerivation=O;cg.allowStateReads=n;return!1}}function Jc(c,n,O){var da=Ub(!0);Kb(c);c.newObserving_=Array(c.observing_.length+100);c.unboundDepsCount_=0;c.runId_=++cg.runId;var ra=cg.trackingDerivation;cg.trackingDerivation=
c;cg.inBatch++;if(!0===cg.disableErrorBoundaries)var Ea=n.call(O);else try{Ea=n.call(O)}catch(tc){Ea=new qo(tc)}cg.inBatch--;cg.trackingDerivation=ra;var Ka=c.observing_;n=c.observing_=c.newObserving_;O=Hi.UP_TO_DATE_;ra=0;for(var fb=c.unboundDepsCount_,ub=0;ub<fb;ub++){var bc=n[ub];0===bc.diffValue_&&(bc.diffValue_=1,ra!==ub&&(n[ra]=bc),ra++);bc.dependenciesState_>O&&(O=bc.dependenciesState_)}n.length=ra;c.newObserving_=null;for(fb=Ka.length;fb--;)ub=Ka[fb],0===ub.diffValue_&&wc(ub,c),ub.diffValue_=
0;for(;ra--;)Ka=n[ra],1===Ka.diffValue_&&(Ka.diffValue_=0,fb=c,Ka.observers_.add(fb),Ka.lowestObserverState_>fb.dependenciesState_&&(Ka.lowestObserverState_=fb.dependenciesState_));O!==Hi.UP_TO_DATE_&&(c.dependenciesState_=O,c.onBecomeStale_());cg.allowStateReads=da;return Ea}function Pc(c){var n=c.observing_;c.observing_=[];for(var O=n.length;O--;)wc(n[O],c);c.dependenciesState_=Hi.NOT_TRACKING_}function Ta(c){var n=hb();try{return c()}finally{cg.trackingDerivation=n}}function hb(){var c=cg.trackingDerivation;
cg.trackingDerivation=null;return c}function Ub(c){var n=cg.allowStateReads;cg.allowStateReads=c;return n}function Kb(c){if(c.dependenciesState_!==Hi.UP_TO_DATE_){c.dependenciesState_=Hi.UP_TO_DATE_;c=c.observing_;for(var n=c.length;n--;)c[n].lowestObserverState_=Hi.UP_TO_DATE_}}function uc(){(cg.pendingReactions.length||cg.inBatch||cg.isRunningReactions)&&d(36);tv=!0;if(Br){var c=G();0===--c.__mobxInstanceCount&&(c.__mobxGlobals=void 0);cg=new Ar}}function wc(c,n){c.observers_["delete"](n);0===c.observers_.size&&
Lb(c)}function Lb(c){!1===c.isPendingUnobservation_&&(c.isPendingUnobservation_=!0,cg.pendingUnobservations.push(c))}function Yb(){cg.inBatch++}function Ob(){if(0===--cg.inBatch){0<cg.inBatch||cg.isRunningReactions||Cr(wb);for(var c=cg.pendingUnobservations,n=0;n<c.length;n++){var O=c[n];O.isPendingUnobservation_=!1;0===O.observers_.size&&(O.isBeingObserved_&&(O.isBeingObserved_=!1,O.onBUO()),O instanceof Bq&&O.suspend_())}cg.pendingUnobservations=[]}}function pb(c){var n=cg.trackingDerivation;if(null!==
n)return n.runId_!==c.lastAccessedBy_&&(c.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=c,!c.isBeingObserved_&&cg.trackingContext&&(c.isBeingObserved_=!0,c.onBO())),c.isBeingObserved_;0===c.observers_.size&&0<cg.inBatch&&Lb(c);return!1}function vb(c){c.lowestObserverState_!==Hi.STALE_&&(c.lowestObserverState_=Hi.STALE_,c.observers_.forEach(function(n){if(n.dependenciesState_===Hi.UP_TO_DATE_)n.onBecomeStale_();n.dependenciesState_=Hi.STALE_}))}function Cb(c){c.lowestObserverState_!==
Hi.STALE_&&(c.lowestObserverState_=Hi.STALE_,c.observers_.forEach(function(n){n.dependenciesState_===Hi.POSSIBLY_STALE_?n.dependenciesState_=Hi.STALE_:n.dependenciesState_===Hi.UP_TO_DATE_&&(c.lowestObserverState_=Hi.UP_TO_DATE_)}))}function ib(c){c.lowestObserverState_===Hi.UP_TO_DATE_&&(c.lowestObserverState_=Hi.POSSIBLY_STALE_,c.observers_.forEach(function(n){n.dependenciesState_===Hi.UP_TO_DATE_&&(n.dependenciesState_=Hi.POSSIBLY_STALE_,n.onBecomeStale_())}))}function wb(){cg.isRunningReactions=
!0;for(var c=cg.pendingReactions,n=0;0<c.length;){++n===nz&&(console.error("[mobx] cycle in reaction: "+c[0]),c.splice(0));for(var O=c.splice(0),da=0,ra=O.length;da<ra;da++)O[da].runReaction_()}cg.isRunningReactions=!1}function Nb(c){var n=Cr;Cr=function(O){return c(function(){return n(O)})}}function fc(c){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Gc(c){return function(n,O){if(W(n))return Xa(n.name||"\x3cunnamed action\x3e",n,c);if(W(O))return Xa(n,O,
c);if(A(O))return Ja(n,O,c?wv:vv);if(A(n))return wa(Ca(c?"autoAction":uv,{name:n,autoAction:c}))}}function Nc(c){return W(c)&&!0===c.isMobxAction}function nc(c,n){function O(){c(ub)}var da,ra;void 0===n&&(n=Ys);var Ea=null!=(da=null==(ra=n)?void 0:ra.name)?da:"Autorun";if(n.scheduler||n.delay){var Ka=Wc(n),fb=!1;var ub=new kp(Ea,function(){fb||(fb=!0,Ka(function(){fb=!1;ub.isDisposed_||ub.track(O)}))},n.onError,n.requiresObservable)}else ub=new kp(Ea,function(){this.track(O)},n.onError,n.requiresObservable);
ub.schedule_();return ub.getDisposer_()}function Wc(c){return c.scheduler?c.scheduler:c.delay?function(n){return setTimeout(n,c.delay)}:pz}function Sc(c,n,O){function da(){tc=!1;if(!od.isDisposed_){var Gd=!1;od.track(function(){var Rd=ec(!1,function(){return c(od)});Gd=bc||!sd(Dc,Rd);$c=Dc;Dc=Rd});bc&&O.fireImmediately?Ka(Dc,$c,od):!bc&&Gd&&Ka(Dc,$c,od);bc=!1}}var ra;void 0===O&&(O=Ys);var Ea=null!=(ra=O.name)?ra:"Reaction",Ka=Gg(Ea,O.onError?Ad(O.onError,n):n),fb=!O.scheduler&&!O.delay,ub=Wc(O),
bc=!0,tc=!1,Dc,$c,sd=O.compareStructural?ip.structural:O.equals||ip["default"],od=new kp(Ea,function(){bc||fb?da():tc||(tc=!0,ub(da))},O.onError,O.requiresObservable);od.schedule_();return od.getDisposer_()}function Ad(c,n){return function(){try{return n.apply(this,arguments)}catch(O){c.call(this,O)}}}function td(c,n,O){return Uc(rz,c,n,O)}function Uc(c,n,O,da){var ra="function"===typeof da?ia(n,O):ia(n),Ea=W(da)?da:O,Ka=c+"L";ra[Ka]?ra[Ka].add(Ea):ra[Ka]=new Set([Ea]);return function(){var fb=ra[Ka];
fb&&(fb["delete"](Ea),0===fb.size&&delete ra[Ka])}}function qb(c){!0===c.isolateGlobalState&&uc();var n=c.useProxies,O=c.enforceActions;void 0!==n&&(cg.useProxies="always"===n?!0:"never"===n?!1:"undefined"!==typeof Proxy);"ifavailable"===n&&(cg.verifyProxies=!0);void 0!==O&&(n="always"===O?"always":"observed"===O,cg.enforceActions=n,cg.allowStateChanges=!0===n||"always"===n?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(da){da in
c&&(cg[da]=!!c[da])});cg.allowStateReads=!cg.observableRequiresReaction;c.reactionScheduler&&Nb(c.reactionScheduler)}function Fc(c,n,O,da){var ra=az(n),Ea=Wb(c,da)[Gh];Yb();try{yr(ra).forEach(function(Ka){Ea.extend_(Ka,ra[Ka],O?Ka in O?O[Ka]:!0:!0)})}finally{Ob()}return c}function Tb(c){var n={name:c.name_};c.observing_&&0<c.observing_.length&&(n.dependencies=Array.from(new Set(c.observing_)).map(Tb));return n}function Ec(){this.message="FLOW_CANCELLED"}function xc(c){return!0===(null==c?void 0:c.isMobXFlow)}
function hc(c,n){return c?void 0!==n?rb(c)?c[Gh].values_.has(n):!1:rb(c)||!!c[Gh]||Zs(c)||Dr(c)||Cq(c):!1}function gc(c){if(rb(c))return c[Gh].ownKeys_();d(38)}function ac(c,n,O){c.set(n,O);return O}function qc(c,n){if(null==c||"object"!==typeof c||c instanceof Date||!hc(c))return c;if(lz(c)||Cq(c))return qc(c.get(),n);if(n.has(c))return n.get(c);if(bb(c)){var O=ac(n,c,Array(c.length));c.forEach(function(Ka,fb){O[fb]=qc(Ka,n)});return O}if(ro(c)){var da=ac(n,c,new Set);c.forEach(function(Ka){da.add(qc(Ka,
n))});return da}if(kn(c)){var ra=ac(n,c,new Map);c.forEach(function(Ka,fb){ra.set(fb,qc(Ka,n))});return ra}var Ea=ac(n,c,{});gc(c).forEach(function(Ka){yq.propertyIsEnumerable.call(c,Ka)&&(Ea[Ka]=qc(c[Ka],n))});return Ea}function Ab(c,n){return qc(c,new Map)}function Qb(){d("trace() is not available in production builds");for(var c=!1,n=arguments.length,O=Array(n),da=0;da<n;da++)O[da]=arguments[da];"boolean"===typeof O[O.length-1]&&(c=O.pop());a:{switch(O.length){case 0:n=cg.trackingDerivation;break a;
case 1:n=ia(O[0]);break a;case 2:n=ia(O[0],O[1]);break a}n=void 0}if(!n)return d("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");n.isTracing_===jp.NONE&&console.log("[mobx.trace] '"+n.name_+"' tracing enabled");n.isTracing_=c?jp.BREAK:jp.LOG}function sc(c,n){void 0===n&&(n=void 0);Yb();try{return c.apply(n)}finally{Ob()}}function sb(c){return void 0!==c.interceptors_&&0<c.interceptors_.length}function Gb(c,
n){var O=c.interceptors_||(c.interceptors_=[]);O.push(n);return K(function(){var da=O.indexOf(n);-1!==da&&O.splice(da,1)})}function kb(c,n){var O=hb();try{var da=[].concat(c.interceptors_||[]);c=0;for(var ra=da.length;c<ra&&((n=da[c](n))&&!n.type&&d(14),n);c++);return n}finally{cg.trackingDerivation=O}}function Db(c){return void 0!==c.changeListeners_&&0<c.changeListeners_.length}function Eb(c,n){var O=c.changeListeners_||(c.changeListeners_=[]);O.push(n);return K(function(){var da=O.indexOf(n);-1!==
da&&O.splice(da,1)})}function jc(c,n){var O=hb();if(c=c.changeListeners_){c=c.slice();for(var da=0,ra=c.length;da<ra;da++)c[da](n);cg.trackingDerivation=O}}function Hc(c,n,O){var da=Wb(c,O)[Gh];Yb();try{var ra;null!=(ra=n)?ra:n=Pa(c);yr(n).forEach(function(Ea){return da.make_(Ea,n[Ea])})}finally{Ob()}return c}function ab(c,n,O,da){void 0===O&&(O="ObservableArray");void 0===da&&(da=!1);z();n=new $s(O,n,da,!1);M(n.values_,Gh,n);O=new Proxy(n.values_,vz);n.proxy_=O;c&&c.length&&(da=Zc(!0),n.spliceWithArray_(0,
0,c),cg.allowStateChanges=da);return O}function eb(c,n){"function"===typeof Array.prototype[c]&&(Er[c]=n(c))}function Wa(c){return function(){var n=this[Gh];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);return n[c].apply(n,arguments)}}function mb(c){return function(n,O){var da=this,ra=this[Gh];ra.atom_.reportObserved();return ra.dehanceValues_(ra.values_)[c](function(Ea,Ka){return n.call(O,Ea,Ka,da)})}}function Bb(c){return function(){var n=this,O=this[Gh];O.atom_.reportObserved();O=O.dehanceValues_(O.values_);
var da=arguments[0];arguments[0]=function(ra,Ea,Ka){return da(ra,Ea,Ka,n)};return O[c].apply(O,arguments)}}function bb(c){return Q(c)&&wz(c[Gh])}function zb(c){if(R(c)||kn(c))return c;if(Array.isArray(c))return new Map(c);if(N(c)){var n=new Map,O;for(O in c)n.set(O,c[O]);return n}return d(21,c)}function Wb(c,n){var O;if(Y(c,Gh))return c;var da=null!=(O=null==n?void 0:n.name)?O:"ObservableObject";O=Cv;var ra=new Map;da=String(da);var Ea;var Ka=n?null!=(Ea=n.defaultDecorator)?Ea:Da(n):void 0;n=new O(c,
ra,da,Ka);q(c,Gh,n);return c}function Ac(c){return Bv[c]||(Bv[c]={get:function(){return this[Gh].getObservablePropValue_(c)},set:function(n){return this[Gh].setObservablePropValue_(c,n)}})}function rb(c){return Q(c)?Dz(c[Gh]):!1}function sa(c){return{enumerable:!1,configurable:!0,get:function(){return this[Gh].get_(c)},set:function(n){this[Gh].set_(c,n)}}}function ja(c){if(c>at){for(var n=at;n<c+100;n++)Yk(bt.prototype,""+n,sa(n));at=c}}function f(c,n,O){return new bt(c,n,O)}function ia(c,n){if("object"===
typeof c&&null!==c){if(bb(c))return void 0!==n&&d(23),c[Gh].atom_;if(ro(c))return c[Gh];if(kn(c)){if(void 0===n)return c.keysAtom_;var O=c.data_.get(n)||c.hasMap_.get(n);O||d(25,n,Ia(c));return O}if(rb(c)){if(!n)return d(26);(O=c[Gh].values_.get(n))||d(27,n,Ia(c));return O}if(Zs(c)||Cq(c)||Dr(c))return c}else if(W(c)&&Dr(c[Gh]))return c[Gh];d(28)}function Sa(c,n){c||d(29);if(void 0!==n)return Sa(ia(c,n));if(Zs(c)||Cq(c)||Dr(c)||kn(c)||ro(c))return c;if(c[Gh])return c[Gh];d(24,c)}function Ia(c,n){if(void 0!==
n)c=ia(c,n);else{if(Nc(c))return c.name;c=rb(c)||kn(c)||ro(c)?Sa(c):ia(c)}return c.name_}function la(c,n,O){void 0===O&&(O=-1);return oa(c,n,O)}function oa(c,n,O,da,ra){if(c===n)return 0!==c||1/c===1/n;if(null==c||null==n)return!1;if(c!==c)return n!==n;var Ea=typeof c;if("function"!==Ea&&"object"!==Ea&&"object"!=typeof n)return!1;Ea=Ev.call(c);if(Ea!==Ev.call(n))return!1;switch(Ea){case "[object RegExp]":case "[object String]":return""+c===""+n;case "[object Number]":return+c!==+c?+n!==+n:0===+c?
1/+c===1/n:+c===+n;case "[object Date]":case "[object Boolean]":return+c===+n;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(c)===Symbol.valueOf.call(n);case "[object Map]":case "[object Set]":0<=O&&O++}c=Aa(c);n=Aa(n);Ea="[object Array]"===Ea;if(!Ea){if("object"!=typeof c||"object"!=typeof n)return!1;var Ka=c.constructor,fb=n.constructor;if(Ka!==fb&&!(W(Ka)&&Ka instanceof Ka&&W(fb)&&fb instanceof fb)&&"constructor"in c&&"constructor"in n)return!1}if(0===O)return!1;
0>O&&(O=-1);da=da||[];ra=ra||[];for(Ka=da.length;Ka--;)if(da[Ka]===c)return ra[Ka]===n;da.push(c);ra.push(n);if(Ea){Ka=c.length;if(Ka!==n.length)return!1;for(;Ka--;)if(!oa(c[Ka],n[Ka],O-1,da,ra))return!1}else{Ea=Object.keys(c);Ka=Ea.length;if(Object.keys(n).length!==Ka)return!1;for(;Ka--;)if(fb=Ea[Ka],!Y(n,fb)||!oa(c[fb],n[fb],O-1,da,ra))return!1}da.pop();ra.pop();return!0}function Aa(c){return bb(c)?c.slice():R(c)||kn(c)||S(c)||ro(c)?Array.from(c.entries()):c}function $a(c){c[Symbol.iterator]=Mb;
return c}function Mb(){return this}function yc(c,n){const O=new Set(n),da=Object.values(c),ra=new Set(da.filter(Ea=>O.has(Ea.toId)||O.has(Ea.fromId)));c=ra.size;for(n=-1;0!==n;)ra.forEach(Ea=>{Ea=Ea.fromId;for(const Ka of da)Ka.fromId===Ea&&ra.add(Ka),Ka.toId===Ea&&ra.add(Ka)}),n=ra.size-c,c=ra.size;return Array.from(ra.values())}function ed(c,n,O,da,ra,Ea,Ka,fb){if(ra=n.getBindingPoint(ra,Ea,Ka,fb))return{id:da,type:"line",fromId:c.id,toId:n.id,handleId:O,point:ve.toFixed(ra.point),distance:ra.distance}}
function wd(c,n){const O=c.getCenter(),da=n.getCenter();var ra=Te();ra=rg(Ff({},Fq.defaultProps),{id:ra,type:Fq.id,parentId:c.props.parentId,point:O});c=ed(ra,c,"start",Te(),O,O,ve.uni(ve.sub(da,O)),!1);n=ed(ra,n,"end",Te(),da,da,ve.uni(ve.sub(O,da)),!1);return c&&n?(ra.handles.start.point=[0,0],ra.handles.end.point=ve.sub(da,O),ra.handles.start.bindingId=c.id,ra.handles.end.bindingId=n.id,[ra,[c,n]]):null}function ne(){return new Mz}function De(){return new WeakMap}function Pe(c){if(!c)return jt(null);
var n=c.constructor;if(n===Object)return c===Object.prototype?{}:jt(c);if(~Kz.call(n).indexOf("[native code]"))try{return new n}catch(O){}return jt(c)}function Ef(c){var n="";c.global&&(n+="g");c.ignoreCase&&(n+="i");c.multiline&&(n+="m");c.unicode&&(n+="u");c.sticky&&(n+="y");return n}function qf(c){return c.flags}function Yf(c){c=Lz.call(c);return c.substring(8,c.length-1)}function of(c){return c[Symbol.toStringTag]||Yf(c)}function xg(c){return qw(c).concat(kt(c))}function Ag(c,n,O){for(var da=
Tz(c),ra=0,Ea=da.length,Ka,fb;ra<Ea;++ra)if(Ka=da[ra],"callee"!==Ka&&"caller"!==Ka)if(fb=Rz(c,Ka)){fb.get||fb.set||(fb.value=O.copier(fb.value,O));try{Qz(n,Ka,fb)}catch(ub){n[Ka]=fb.value}}else n[Ka]=O.copier(c[Ka],O);return n}function Jg(c,n){var O=new n.Constructor;n.cache.set(c,O);c.forEach(function(da,ra){O.set(ra,n.copier(da,n))});return O}function Uf(c,n){var O=Pe(n.prototype);n.cache.set(c,O);for(var da in c)sw.call(c,da)&&(O[da]=n.copier(c[da],n));return O}function yg(c,n){var O=Pe(n.prototype);
n.cache.set(c,O);for(var da in c)sw.call(c,da)&&(O[da]=n.copier(c[da],n));da=kt(c);for(var ra=0,Ea=da.length,Ka;ra<Ea;++ra)Ka=da[ra],Sz.call(c,Ka)&&(O[Ka]=n.copier(c[Ka],n));return O}function Hh(c,n){return new n.Constructor(c.valueOf())}function kh(c,n){return c}function Vh(c,n){var O=new n.Constructor;n.cache.set(c,O);c.forEach(function(da){O.add(n.copier(da,n))});return O}function ji(c){function n(Ea,Ka){Ka.prototype=Ka.Constructor=void 0;if(!Ea||"object"!==typeof Ea)return Ea;if(Ka.cache.has(Ea))return Ka.cache.get(Ea);
Ka.prototype=Ea.__proto__||Vz(Ea);Ka.Constructor=Ka.prototype&&Ka.prototype.constructor;if(!Ka.Constructor||Ka.Constructor===Object)return ra(Ea,Ka);if(Uz(Ea))return da(Ea,Ka);var fb=O[Pz(Ea)];return fb?fb(Ea,Ka):"function"===typeof Ea.then?Ea:ra(Ea,Ka)}c=lt({},uw,c);var O={Arguments:c.object,Array:c.array,ArrayBuffer:c.arrayBuffer,Blob:c.blob,Boolean:Hh,DataView:c.dataView,Date:c.date,Error:c.error,Float32Array:c.arrayBuffer,Float64Array:c.arrayBuffer,Int8Array:c.arrayBuffer,Int16Array:c.arrayBuffer,
Int32Array:c.arrayBuffer,Map:c.map,Number:Hh,Object:c.object,Promise:kh,RegExp:c.regExp,Set:c.set,String:Hh,WeakMap:kh,WeakSet:kh,Uint8Array:c.arrayBuffer,Uint8ClampedArray:c.arrayBuffer,Uint16Array:c.arrayBuffer,Uint32Array:c.arrayBuffer,Uint64Array:c.arrayBuffer},da=O.Array,ra=O.Object;return function(Ea){return n(Ea,{Constructor:void 0,cache:Nz(),copier:n,prototype:void 0})}}function ki(c,n){return(0,Zz.default)(c,n,{arrayMerge:(O,da,ra)=>da})}function Li(c,n,O,da=!1){const [ra,Ea]=n,[Ka,fb]=O;
c=Ka+(c-ra)/(Ea-ra)*(fb-Ka);return da?Ka<fb?Math.max(Math.min(c,fb),Ka):Math.max(Math.min(c,Ka),fb):c}function Oh(c,n){return new Promise((O,da)=>{if("video"===n){const ra=document.createElement("video");ra.addEventListener("loadedmetadata",function(){O([this.videoWidth,this.videoHeight])},!1);ra.src=c}else if("image"===n){const ra=new Image;ra.onload=()=>O([ra.width,ra.height]);ra.src=c;ra.onerror=Ea=>da(Ea)}else"pdf"===n&&O([595,842])})}function yf(c){return Object.values(Na).includes(c)}function vf(c,
n){return yf(c)||null==c?`var(--ls-wb-${n}-color-${c?c:"default"})`:c}function mf(){var c;null==(c=document.getElementById("__textLabelMeasure"))?void 0:c.remove();c=document.createElement("pre");c.id="__textLabelMeasure";Object.assign(c.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",
font:"var(--ls-font-family)"});c.tabIndex=-1;document.body.appendChild(c);return c}function gg(c,n,O=0){var da,ra,Ea;if(!c)return[16,32];let Ka;Ka="string"===typeof n?n:`${null!=(da=n.fontStyle)?da:"normal"} ${null!=(ra=n.fontVariant)?ra:"normal"} ${null!=(Ea=n.fontWeight)?Ea:"normal"} ${n.fontSize}px/${n.fontSize*n.lineHeight}px ${n.fontFamily}`;if(!mt.has(`${c}-${Ka}-${O}`)){if(!on)return[10,10];on.parentNode||document.body.appendChild(on);on.innerHTML=`${c}&#8203;`;on.style.font=Ka;on.style.padding=
O+"px";n=on.getBoundingClientRect();mt.set(`${c}-${Ka}-${O}`,[Math.ceil(n.width||1),Math.ceil(n.height||1)])}return mt.get(`${c}-${Ka}-${O}`)}function qg(c){try{if("string"!==typeof c||!Bc.test(c))throw TypeError("Invalid UUID");let n;const O=new Uint8Array(16);O[0]=(n=parseInt(c.slice(0,8),16))>>>24;O[1]=n>>>16&255;O[2]=n>>>8&255;O[3]=n&255;O[4]=(n=parseInt(c.slice(9,13),16))>>>8;O[5]=n&255;O[6]=(n=parseInt(c.slice(14,18),16))>>>8;O[7]=n&255;O[8]=(n=parseInt(c.slice(19,23),16))>>>8;O[9]=n&255;O[10]=
(n=parseInt(c.slice(24,36),16))/1099511627776&255;O[11]=n/4294967296&255;O[12]=n>>>24&255;O[13]=n>>>16&255;O[14]=n>>>8&255;O[15]=n&255;return!0}catch(n){return!1}}function ng(c,n=0,O){let da;return function(...ra){null==O?void 0:O(...ra);clearTimeout(da);da=setTimeout(()=>c.apply(ra),n)}}function Zb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function kc(){var c,n,O;return(null==(O=null==(n=null==(c=null==window?void 0:window.logseq)?void 0:c.api)?void 0:n.get_state_from_store)?
void 0:O.call(n,"ui/developer-mode?"))||!1}function Qc(c){return!!c}function Mc(c=0){return new Promise(n=>setTimeout(n,c))}function jd(c="noid"){nt[c]||(nt[c]=xw.createContext({}));return nt[c]}function ud(c="noid"){return xw.useContext(jd(c))}function $d(c){const {callbacks:n}=ud(),O=ww.useRef(-1);return ww.useMemo(()=>{const da=ra=>{var Ea,Ka;const {order:fb=0}=ra;if(!fb){var ub=ra.target;ub.removeEventListener("pointerup",da);ub.releasePointerCapture(ra.pointerId);null==(Ea=n.onPointerUp)?void 0:
Ea.call(n,{type:"selection",handle:c,order:fb},ra);Ea=Date.now();ub=Ea-O.current;300<ub?O.current=Ea:300>=ub&&(null==(Ka=n.onDoubleClick)?void 0:Ka.call(n,{type:"selection",handle:c,order:fb},ra),O.current=-1);ra.order=fb+1}};return{onPointerDown:ra=>{var Ea;const {order:Ka=0}=ra;if(!Ka){var fb=he(ra.currentTarget);fb.setPointerCapture(ra.pointerId);fb.addEventListener("pointerup",da);null==(Ea=n.onPointerDown)?void 0:Ea.call(n,{type:"selection",handle:c,order:Ka},ra);ra.order=Ka+1}},onPointerMove:ra=>
{var Ea;const {order:Ka=0}=ra;Ka||(null==(Ea=n.onPointerMove)?void 0:Ea.call(n,{type:"selection",handle:c,order:Ka},ra),ra.order=Ka+1)},onPointerEnter:ra=>{var Ea;const {order:Ka=0}=ra;Ka||(null==(Ea=n.onPointerEnter)?void 0:Ea.call(n,{type:"selection",handle:c,order:Ka},ra),ra.order=Ka+1)},onPointerLeave:ra=>{var Ea;const {order:Ka=0}=ra;Ka||(null==(Ea=n.onPointerLeave)?void 0:Ea.call(n,{type:"selection",handle:c,order:Ka},ra),ra.order=Ka+1)},onKeyDown:ra=>{var Ea;null==(Ea=n.onKeyDown)?void 0:Ea.call(n,
{type:"selection",handle:c,order:-1},ra)},onKeyUp:ra=>{var Ea;null==(Ea=n.onKeyUp)?void 0:Ea.call(n,{type:"selection",handle:c,order:-1},ra)}}},[n])}function he(c){var n;if(null==(n=c.namespaceURI)?0:n.endsWith("svg")){if(c.parentElement)return he(c.parentElement);throw Error("Could not find a parent element of an HTML type!");}return c}function we(c,n,O){const da=Hq.useRef(!1),ra=Hq.useCallback(()=>{var Ea;if(da.current){const Ka=null==(Ea=c.current)?void 0:Ea.getBoundingClientRect();Ka&&(Ea={minX:Ka.left,
maxX:Ka.left+Ka.width,minY:Ka.top,maxY:Ka.top+Ka.height,width:Ka.width,height:Ka.height},n.updateBounds(Ea),null==O?void 0:O(Ea))}else da.current=!0},[c,O]);Hq.useEffect(()=>{const Ea=c.current?bA(c.current):document,Ka=ng(ra,100);Ea.addEventListener("scroll",Ka);window.addEventListener("resize",Ka);return()=>{Ea.removeEventListener("scroll",Ka);window.removeEventListener("resize",Ka)}},[]);Hq.useLayoutEffect(()=>{const Ea=new ResizeObserver(Ka=>{Ka[0].contentRect&&ra()});c.current&&Ea.observe(c.current);
return()=>{Ea.disconnect()}},[c]);Hq.useEffect(()=>{ra();setTimeout(()=>{var Ea,Ka;null==(Ka=null==(Ea=c.current)?void 0:Ea.querySelector(".tl-canvas"))?void 0:Ka.focus()})},[c])}function Xe(c,n){return Object.keys(n).reduce((O,da)=>{const ra=n[da];return ra?O+`${`--${c}-${da}`}: ${ra};
`:O},"")}function Td(c,n,O=".logseq-tldraw"){ot.useLayoutEffect(()=>{const da=document.createElement("style"),ra=Xe(c,n);da.setAttribute("id",`${c}-theme`);da.setAttribute("data-selector",O);da.innerHTML=`
        ${O} {
          ${ra}
        }
      `;document.head.appendChild(da);return()=>{da&&document.head.contains(da)&&document.head.removeChild(da)}},[c,n,O])}function Ye(c,n){ot.useLayoutEffect(()=>{if(pt.get(c))return()=>{};const O=document.createElement("style");O.innerHTML=n;O.setAttribute("id",c);document.head.appendChild(O);pt.set(c,O);return()=>{O&&document.head.contains(O)&&(document.head.removeChild(O),pt.delete(c))}},[c,n])}function pe(c,n){const O=ot.useMemo(()=>Ff(Ff({},cA),c),[c]);Td("tl",O,n);Ye("tl-canvas",dA)}function Oe(c=
"noid"){qt[c]||(qt[c]=zw.createContext({}));return qt[c]}function $e(c="noid"){return zw.useContext(Oe(c))}function $f(){const c=$e(),{callbacks:n}=ud(),O=yw.useRef(-1);return yw.useMemo(()=>({onPointerDown:da=>{var ra,Ea,Ka;if(!c.settings.penMode||"pen"===da.pointerType&&da.isPrimary){var {order:fb=0}=da;fb||(null==(ra=da.currentTarget)?void 0:ra.setPointerCapture(da.pointerId));da.isPrimary&&(null==(Ea=n.onPointerDown)?void 0:Ea.call(n,{type:"canvas",order:fb},da),ra=Date.now(),Ea=ra-O.current,
300<Ea?O.current=ra:300>=Ea&&(null==(Ka=n.onDoubleClick)?void 0:Ka.call(n,{type:"canvas",order:fb},da),O.current=-1))}},onPointerMove:da=>{var ra;if(!c.settings.penMode||"pen"===da.pointerType&&da.isPrimary){var {order:Ea=0}=da;null==(ra=n.onPointerMove)?void 0:ra.call(n,{type:"canvas",order:Ea},da)}},onPointerUp:da=>{var ra,Ea;if(!c.settings.penMode||"pen"===da.pointerType&&da.isPrimary){var {order:Ka=0}=da;Ka||(null==(ra=da.currentTarget)?void 0:ra.releasePointerCapture(da.pointerId));null==(Ea=
n.onPointerUp)?void 0:Ea.call(n,{type:"canvas",order:Ka},da)}},onPointerEnter:da=>{var ra;if(!c.settings.penMode||"pen"===da.pointerType&&da.isPrimary){var {order:Ea=0}=da;null==(ra=n.onPointerEnter)?void 0:ra.call(n,{type:"canvas",order:Ea},da)}},onPointerLeave:da=>{var ra;if(!c.settings.penMode||"pen"===da.pointerType&&da.isPrimary){var {order:Ea=0}=da;null==(ra=n.onPointerLeave)?void 0:ra.call(n,{type:"canvas",order:Ea},da)}},onDrop:da=>ci(this,null,function*(){da.preventDefault();"clientX"in da&&
c.drop(da.dataTransfer,[da.clientX,da.clientY])}),onDragOver:da=>{da.preventDefault()},onTouchEnd:da=>{let ra=c.selectedTool.id;"pencil"!==ra&&"highlighter"!==ra||da.preventDefault()}}),[n])}function Ae(c,n,O){return 0===n||Infinity===Math.abs(n)?Math.pow(c,5*O):c*n*O/(n+O*c)}function Qf(c,n,O,da=.15){return 0===da?Math.max(n,Math.min(c,O)):c<n?-Ae(n-c,O-n,da)+n:c>O?+Ae(c-O,O-n,da)+O:c}function Rf(c,[n,O],[da,ra]){const [[Ea,Ka],[fb,ub]]=c;return[Qf(n,Ea,Ka,da),Qf(O,fb,ub,ra)]}function tf(c,n,O){n in
c?Object.defineProperty(c,n,{value:O,enumerable:!0,configurable:!0,writable:!0}):c[n]=O;return c}function Kg(c,n){var O=Object.keys(c);if(Object.getOwnPropertySymbols){var da=Object.getOwnPropertySymbols(c);n&&(da=da.filter(function(ra){return Object.getOwnPropertyDescriptor(c,ra).enumerable}));O.push.apply(O,da)}return O}function wf(c){for(var n=1;n<arguments.length;n++){var O=null!=arguments[n]?arguments[n]:{};n%2?Kg(Object(O),!0).forEach(function(da){tf(c,da,O[da])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(c,Object.getOwnPropertyDescriptors(O)):Kg(Object(O)).forEach(function(da){Object.defineProperty(c,da,Object.getOwnPropertyDescriptor(O,da))})}return c}function Wf(c){return c?c[0].toUpperCase()+c.slice(1):""}function Dh(c=!1,n){return c&&!eA.includes(n)}function sg(c,n="",O=!1){const da=Aw[c];n=da?da[n]||n:n;return"on"+Wf(c)+Wf(n)+(Dh(O,n)?"Capture":"")}function Nf(c){c=c.substring(2).toLowerCase();const n=!!~c.indexOf("passive");n&&(c=c.replace("passive",""));var O=fA.includes(c)?
"capturecapture":"capture";(O=!!~c.indexOf(O))&&(c=c.replace("capture",""));return{device:c,capture:O,passive:n}}function Lh(c,n=""){const O=Aw[c];return c+(O?O[n]||n:n)}function Mg(c){return"touches"in c?"touch":"pointerType"in c?c.pointerType:"mouse"}function Wh(c){return Array.from(c.touches).filter(n=>{var O,da;return n.target===c.currentTarget||(null===(O=c.currentTarget)||void 0===O?void 0:null===(da=O.contains)||void 0===da?void 0:da.call(O,n.target))})}function gh(c){return"touches"in c?("touchend"===
c.type||"touchcancel"===c.type?c.changedTouches:c.targetTouches)[0]:c}function rf(c,n){const O=n.clientX-c.clientX,da=n.clientY-c.clientY;return{angle:-(180*Math.atan2(O,da))/Math.PI,distance:Math.hypot(O,da),origin:[(n.clientX+c.clientX)/2,(n.clientY+c.clientY)/2]}}function Fb(c){return Wh(c).map(n=>n.identifier)}function pc(c,n){const [O,da]=Array.from(c.touches).filter(ra=>n.includes(ra.identifier));return rf(O,da)}function bd(c){const n=gh(c);return"touches"in c?n.identifier:n.pointerId}function kd(c){c=
gh(c);return[c.clientX,c.clientY]}function re(c){let {deltaX:n,deltaY:O,deltaMode:da}=c;1===da?(n*=40,O*=40):2===da&&(n*=800,O*=800);return[n,O]}function de(c,...n){return"function"===typeof c?c(...n):c}function Ge(){}function Pb(...c){return 0===c.length?Ge:1===c.length?c[0]:function(){let n;for(const O of c)n=O.apply(this,arguments)||n;return n}}function lc([c,n],O){c=Math.abs(c);n=Math.abs(n);if(c>n&&c>O)return"x";if(n>c&&n>O)return"y"}function dd(c){const [n,O]=c.overflow,[da,ra]=c._delta,[Ea,
Ka]=c._direction;if(0>n&&0<da&&0>Ea||0<n&&0>da&&0<Ea)c._movement[0]=c._movementBound[0];if(0>O&&0<ra&&0>Ka||0<O&&0>ra&&0<Ka)c._movement[1]=c._movementBound[1]}function md(c){rt.set(c.key,c.engine);st.set(c.key,c.resolver)}function Jd(c={},n){const O={};for(const [da,ra]of Object.entries(n))switch(typeof ra){case "function":O[da]=ra.call(O,c[da],da,c);break;case "object":O[da]=Jd(c[da],ra);break;case "boolean":ra&&(O[da]=c[da])}return O}function Xd(c,n,O={}){const {target:da,eventOptions:ra,window:Ea,
enabled:Ka,transform:fb}=c;var ub=CA;if(null==c)c={};else{if(null==c)var bc={};else{bc={};var tc=Object.keys(c),Dc;for(Dc=0;Dc<tc.length;Dc++){var $c=tc[Dc];0<=ub.indexOf($c)||(bc[$c]=c[$c])}}if(Object.getOwnPropertySymbols)for(Dc=Object.getOwnPropertySymbols(c),$c=0;$c<Dc.length;$c++)tc=Dc[$c],0<=ub.indexOf(tc)||Object.prototype.propertyIsEnumerable.call(c,tc)&&(bc[tc]=c[tc]);c=bc}O.shared=Jd({target:da,eventOptions:ra,window:Ea,enabled:Ka,transform:fb},BA);if(n){var sd=st.get(n);O[n]=Jd(wf({shared:O.shared},
c),sd)}else for(sd in c)(n=st.get(sd))&&(O[sd]=Jd(wf({shared:O.shared},c[sd]),n));return O}function ce(c,n){c.gestures.add(n);c.gestureEventStores[n]=new Iw(c,n);c.gestureTimeoutStores[n]=new DA}function je(c,n,O,da,ra,Ea){if(c.has(O)&&rt.has(da)){var Ka=O+"Start",fb=O+"End";ra[da]=ub=>{let bc=void 0;if(ub.first&&Ka in n)n[Ka](ub);O in n&&(bc=n[O](ub));if(ub.last&&fb in n)n[fb](ub);return bc};Ea[da]=Ea[da]||{}}}function Dd(c,n={},O,da){const ra=tt.default.useMemo(()=>new EA(c),[]);ra.applyHandlers(c,
da);ra.applyConfig(n,O);tt.default.useEffect(ra.effect.bind(ra));tt.default.useEffect(()=>ra.clean.bind(ra),[]);if(void 0===n.target)return ra.bind.bind(ra)}function Ee(c){c.forEach(md);return function(n,O){O=O||{};const da={},ra={},Ea=new Set;for(let $c in n)FA.test($c)?(Ea.add(RegExp.lastMatch),ra[$c]=n[$c]):da[$c]=n[$c];const [Ka,fb,ub]=[ra,da,Ea];n={};je(ub,Ka,"onDrag","drag",n,O);je(ub,Ka,"onWheel","wheel",n,O);je(ub,Ka,"onScroll","scroll",n,O);je(ub,Ka,"onPinch","pinch",n,O);je(ub,Ka,"onMove",
"move",n,O);je(ub,Ka,"onHover","hover",n,O);const {handlers:bc,nativeHandlers:tc,config:Dc}={handlers:n,config:O,nativeHandlers:fb};return Dd(bc,Dc,void 0,tc)}}function Ie(c,n){return Ee([vA,yA,zA,AA,xA,wA])(c,n||{})}function Ue(c){const {viewport:n,inputs:O,callbacks:da}=ud(),ra=Jr.useRef(void 0),Ea=Jr.useRef([0,0]),Ka=Jr.useRef(0),fb=Jr.useMemo(()=>({onWheel:ub=>{var bc;({event:ub}=ub);ub.preventDefault();const {deltaY:tc,deltaX:Dc}=ub;var $c=0;if(ub.ctrlKey||ub.metaKey){$c=Math.sign(ub.deltaY);
let Rd=tc;10<Math.abs(ub.deltaY)&&(Rd=10*$c);$c=Rd}const [sd,od,Gd]=[Dc,tc,$c];"pinching"===O.state||Ka.current>=ub.timeStamp||(Ka.current=ub.timeStamp,(ub.altKey||ub.ctrlKey||ub.metaKey)&&0===ub.buttons?($c=n.bounds,ub=null!=(bc=O.currentScreenPoint)?bc:[$c.width/2,$c.height/2],bc=n.camera.zoom,n.onZoom(ub,bc-Gd/100*bc)):(bc=ve.mul(ub.shiftKey&&!Zb()?[od,0]:[sd,od],.8),ve.isEqual(bc,[0,0])||n.panCamera(bc)))},onPinchStart:({event:ub,delta:bc,offset:tc,origin:Dc})=>{var $c;const sd=c.current;ub instanceof
WheelEvent||!(ub.target===sd||null!=sd&&sd.contains(ub.target))||(null==($c=da.onPinchStart)?void 0:$c.call(da,{type:"canvas",order:0,delta:[...bc,tc[0]],offset:tc,point:ve.sub(Dc,O.containerOffset)},ub),ra.current=Dc,Ea.current=[0,0])},onPinchEnd:({event:ub,offset:bc,origin:tc})=>{var Dc;const $c=c.current;ub instanceof WheelEvent||!(ub.target===$c||null!=$c&&$c.contains(ub.target))||"pinching"!==O.state||(null==(Dc=da.onPinchEnd)?void 0:Dc.call(da,{type:"canvas",order:0,delta:[0,0,bc[0]],offset:bc,
point:ve.sub(tc,O.containerOffset)},ub),Ea.current=[0,0])},onPinch:({event:ub,offset:bc,origin:tc})=>{var Dc,$c=c.current;if(!(ub instanceof WheelEvent)&&(ub.target===$c||null!=$c&&$c.contains(ub.target))){ra.current||(ra.current=tc);$c=ve.sub(ra.current,tc);var sd=ve.sub($c,Ea.current);null==(Dc=da.onPinch)?void 0:Dc.call(da,{type:"canvas",order:0,delta:[...sd,bc[0]],offset:bc,point:ve.sub(tc,O.containerOffset)},ub);Ea.current=$c}}}),[da]);Ie(fb,{target:c,eventOptions:{passive:!1},pinch:{from:[n.camera.zoom,
n.camera.zoom],scaleBounds:()=>({from:n.camera.zoom,max:yl.maxZoom,min:yl.minZoom})}})}function xb(c,n,O,da){ut.useLayoutEffect(()=>{c.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[n.minX,n.minY,O,n.rotation]);ut.useLayoutEffect(()=>{const ra=c.current;ra.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;ra.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);ut.useLayoutEffect(()=>{const ra=c.current;void 0!==da&&(ra.style.zIndex=da.toString())},[da])}function Cc(c,n){const {onPersist:O,onError:da,onMount:ra,onCreateAssets:Ea,onCreateShapes:Ka,onDeleteAssets:fb,onDeleteShapes:ub,
onDrop:bc,onPaste:tc,onCopy:Dc,onCanvasDBClick:$c}=n;Kw.useLayoutEffect(()=>{const sd=[];if(c)return window.tlapps=window.tlapps||{},window.tlapps[c.uuid]=c,ra&&ra(c,null),()=>{sd.forEach(od=>od());window.tlapps&&delete window.tlapps[c.uuid]}},[c]);Kw.useLayoutEffect(()=>{const sd=[];O&&sd.push(c.subscribe("persist",O));da&&sd.push(c.subscribe("error",da));Ka&&sd.push(c.subscribe("create-shapes",Ka));Ea&&sd.push(c.subscribe("create-assets",Ea));ub&&sd.push(c.subscribe("delete-shapes",ub));fb&&sd.push(c.subscribe("delete-assets",
fb));bc&&sd.push(c.subscribe("drop",bc));tc&&sd.push(c.subscribe("paste",tc));Dc&&sd.push(c.subscribe("copy",Dc));$c&&sd.push(c.subscribe("canvas-dbclick",$c));return()=>sd.forEach(od=>od())},[c,O,da])}function zc(c){if("app"in c)return c.app;const [n]=Lw.useState(()=>new $z(c.model,c.Shapes,c.Tools,c.readOnly));Lw.useLayoutEffect(()=>()=>{n.dispose()},[n]);return n}function Yc(c,n){GA.useEffect(()=>{"model"in n&&n.model&&c.loadDocumentModel(n.model)},[n.model])}function gd(c){const n=ud(),{viewport:{bounds:O}}=
n;HA.useEffect(()=>{const da=Ka=>{Ka.preventDefault()},ra=Ka=>{if(0!==Ka.touches.length){var fb=Ka.touches[0].pageX,ub=Ka.touches[0].radiusX||0;(10>fb-ub||fb+ub>O.width-10)&&Ka.preventDefault()}},Ea=c.current;if(!Ea)return()=>{};Ea.addEventListener("touchstart",da,{passive:!0});Ea.addEventListener("gestureend",da,{passive:!0});Ea.addEventListener("gesturechange",da,{passive:!0});Ea.addEventListener("gesturestart",da,{passive:!0});Ea.addEventListener("touchstart",ra,{passive:!0});return()=>{Ea&&(Ea.removeEventListener("touchstart",
da),Ea.removeEventListener("gestureend",da),Ea.removeEventListener("gesturechange",da),Ea.removeEventListener("gesturestart",da),Ea.removeEventListener("touchstart",ra))}},[c,O.width])}function vd(c,n){const {inputs:O,callbacks:da}=ud();return IA.useMemo(()=>({onPointerDown:ra=>{var Ea,Ka;const {order:fb=0}=ra;fb||(null==(Ea=ra.currentTarget)?void 0:Ea.setPointerCapture(ra.pointerId));Ea=c.props.handles[n];null==(Ka=da.onPointerDown)?void 0:Ka.call(da,{type:"handle",shape:c,handle:Ea,id:n,order:fb},
ra);ra.order=fb+1},onPointerMove:ra=>{var Ea;const {order:Ka=0}=ra,fb=c.props.handles[n];null==(Ea=da.onPointerMove)?void 0:Ea.call(da,{type:"handle",shape:c,handle:fb,id:n,order:Ka},ra);ra.order=Ka+1},onPointerUp:ra=>{var Ea,Ka;const {order:fb=0}=ra;fb||(null==(Ea=ra.currentTarget)?void 0:Ea.releasePointerCapture(ra.pointerId));Ea=c.props.handles[n];null==(Ka=da.onPointerUp)?void 0:Ka.call(da,{type:"handle",shape:c,handle:Ea,id:n,order:fb},ra);ra.order=fb+1},onPointerEnter:ra=>{var Ea;const {order:Ka=
0}=ra,fb=c.props.handles[n];null==(Ea=da.onPointerEnter)?void 0:Ea.call(da,{type:"handle",shape:c,handle:fb,id:n,order:Ka},ra);ra.order=Ka+1},onPointerLeave:ra=>{var Ea;const {order:Ka=0}=ra,fb=c.props.handles[n];null==(Ea=da.onPointerLeave)?void 0:Ea.call(da,{type:"handle",shape:c,handle:fb,id:n,order:Ka},ra);ra.order=Ka+1},onKeyUp:ra=>{var Ea;const Ka=c.props.handles[n];null==(Ea=da.onKeyUp)?void 0:Ea.call(da,{type:"handle",shape:c,handle:Ka,id:n,order:-1},ra)},onKeyDown:ra=>{var Ea;const Ka=c.props.handles[n];
null==(Ea=da.onKeyDown)?void 0:Ea.call(da,{type:"handle",shape:c,handle:Ka,id:n,order:-1},ra)}}),[c.id,O,da])}function Bd(c,n,O=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${n})${O?" scale(-1,-1) translate(0, -32)":""}'>`+c.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Ed(c,n,O=0){JA.useEffect(()=>{const da=c.current;da&&(da.style.cursor=
KA[n](Fh.radiansToDegrees(O)))},[n,O])}function Pd(c){const {viewport:n}=ud(),O=$e();LA.useLayoutEffect(()=>nc(()=>{const da=ng(()=>{var ra;null==(ra=c.current)?void 0:ra.style.setProperty("--tl-zoom",n.camera.zoom.toString())},200);"pinching"!==O.inputs.state&&null!=n.camera.zoom&&da()}),[])}function ge(c,n=0){const [O,da]=(0,Mw.useState)(c);(0,Mw.useEffect)(()=>{let ra=!1;const Ea=setTimeout(()=>{ra||da(c)},n);return()=>{ra=!0;clearTimeout(Ea)}},[c,n]);return O}function ie(){const c=$e();Nw.useEffect(()=>
{Sc(()=>Ff({},c.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+c.currentPageId,JSON.stringify(c.viewport.camera))})},[c.viewport.camera]);Nw.useEffect(()=>{var n;const O=JSON.parse(null!=(n=window.sessionStorage.getItem("logseq.tldraw.camera:"+c.currentPageId))?n:"null");O?c.viewport.update(O):c.selectedIds.size?c.api.zoomToSelection():c.api.zoomToFit()},[c])}function te(c){c()}function He(c){return Tb(ia(c,void 0))}function Le(c){return{reaction:c,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+NA}}function ke(c){var n=new Map,O=1,da=new c(function(ra){var Ea=n.get(ra);Ea&&(Ea.reaction.dispose(),n.delete(ra))});return{addReactionToTrack:function(ra,Ea,Ka){var fb=O++;da.register(Ka,fb,ra);ra.current=Le(Ea);ra.current.finalizationRegistryCleanupToken=fb;n.set(fb,ra.current);return ra.current},recordReactionAsCommitted:function(ra){da.unregister(ra);ra.current&&ra.current.finalizationRegistryCleanupToken&&n.delete(ra.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function Ne(){function c(){void 0===da&&(da=setTimeout(n,1E4))}function n(){da=void 0;var ra=Date.now();O.forEach(function(Ea){var Ka=Ea.current;Ka&&ra>=Ka.cleanAt&&(Ka.reaction.dispose(),Ea.current=null,O.delete(Ea))});0<O.size&&c()}var O=new Set,da;return{addReactionToTrack:function(ra,Ea,Ka){ra.current=Le(Ea);O.add(ra);c();return ra.current},recordReactionAsCommitted:function(ra){O.delete(ra)},forceCleanupTimerToRunNowForTests:function(){da&&(clearTimeout(da),
n())},resetCleanupScheduleForTests:function(){var ra;if(0<O.size){try{for(var Ea=OA(O),Ka=Ea.next();!Ka.done;Ka=Ea.next()){var fb=Ka.value,ub=fb.current;ub&&(ub.reaction.dispose(),fb.current=null)}}catch(tc){var bc={error:tc}}finally{try{Ka&&!Ka.done&&(ra=Ea.return)&&ra.call(Ea)}finally{if(bc)throw bc.error;}}O.clear()}da&&(clearTimeout(da),da=void 0)}}}function Ke(){return new RA}function dg(c,n){void 0===n&&(n="observed");var O=Qw(Kq.default.useState(Ke),1)[0],da=Qw(Kq.default.useState(),2)[1],
ra=Kq.default.useRef(null);if(!ra.current)var Ea=new kp("observer".concat(n),function(){Ka.mounted?da([]):Ka.changedBeforeMount=!0}),Ka=PA(ra,Ea,O);O=ra.current.reaction;Kq.default.useDebugValue(O,He);Kq.default.useEffect(function(){QA(ra);ra.current?(ra.current.mounted=!0,ra.current.changedBeforeMount&&(ra.current.changedBeforeMount=!1,da([]))):(ra.current={reaction:new kp("observer".concat(n),function(){da([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},da([]));return function(){ra.current.reaction.dispose();
ra.current=null}},[]);var fb,ub;O.track(function(){try{fb=c()}catch(bc){ub=bc}});if(ub)throw ub;return fb}function Be(c,n){var O;if(Tw&&c.$$typeof===Tw)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");n=null!==(O=null===n||void 0===n?void 0:n.forwardRef)&&void 0!==O?O:!1;var da=c,ra=c.displayName||c.name;if(Sw&&c.$$typeof===Sw&&(n=!0,da=c.render,"function"!==
typeof da))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");O=function(Ea,Ka){return dg(function(){return da(Ea,Ka)},ra)};""!==ra&&(O.displayName=ra);c.contextTypes&&(O.contextTypes=c.contextTypes);n&&(O=(0,tp.forwardRef)(O));O=(0,tp.memo)(O);gf(c,O);return O}function gf(c,n){Object.keys(c).forEach(function(O){SA[O]||Object.defineProperty(n,O,Object.getOwnPropertyDescriptor(c,O))})}function Hf(c){var n=c.render;c=c.children||n;return"function"!==typeof c?null:dg(c)}
function vg(c){const n=$e(),{callbacks:O}=ud(),da=Uw.useRef(!1);Uw.useEffect(()=>{const ra=ub=>{var bc,tc;if(null==(bc=c.current)?0:bc.contains(document.activeElement))null==(tc=O.onKeyDown)?void 0:tc.call(O,{type:"canvas",order:-1},ub),da.current=ub.shiftKey},Ea=ub=>{var bc,tc;if(null==(bc=c.current)?0:bc.contains(document.activeElement))null==(tc=O.onKeyUp)?void 0:tc.call(O,{type:"canvas",order:-1},ub),da.current=ub.shiftKey},Ka=ub=>{var bc,tc,Dc;!n.editingShape&&(null==(bc=c.current)?0:bc.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(Dc=null==(tc=document.activeElement)?void 0:tc.tagName)?Dc:"")&&(ub.preventDefault(),n.paste(ub,da.current))},fb=ub=>{var bc,tc,Dc;!n.editingShape&&0<n.selectedShapes.size&&(null==(bc=c.current)?0:bc.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Dc=null==(tc=document.activeElement)?void 0:tc.tagName)?Dc:"")&&(ub.preventDefault(),n.copy())};window.addEventListener("keydown",ra);window.addEventListener("keyup",Ea);document.addEventListener("paste",
Ka);document.addEventListener("copy",fb);return()=>{window.removeEventListener("keydown",ra);window.removeEventListener("keyup",Ea);document.removeEventListener("paste",Ka);document.removeEventListener("copy",fb)}},[])}function Ng(c){const n=$e(),{inputs:O,callbacks:da}=ud(),ra=Zw.useRef(-1);return Zw.useMemo(()=>({onPointerDown:Ea=>{var Ka,fb;if(!n.settings.penMode||"pen"===Ea.pointerType&&Ea.isPrimary){var {order:ub=0}=Ea;ub||(null==(Ka=Ea.currentTarget)?void 0:Ka.setPointerCapture(Ea.pointerId));
null==(fb=da.onPointerDown)?void 0:fb.call(da,{type:"shape",shape:c,order:ub},Ea);Ea.order=ub+1}},onPointerMove:Ea=>{var Ka;if(!n.settings.penMode||"pen"===Ea.pointerType&&Ea.isPrimary){var {order:fb=0}=Ea;null==(Ka=da.onPointerMove)?void 0:Ka.call(da,{type:"shape",shape:c,order:fb},Ea);Ea.order=fb+1}},onPointerUp:Ea=>{var Ka,fb,ub;if(!n.settings.penMode||"pen"===Ea.pointerType&&Ea.isPrimary){var {order:bc=0}=Ea;bc||(null==(Ka=Ea.currentTarget)?void 0:Ka.releasePointerCapture(Ea.pointerId));null==
(fb=da.onPointerUp)?void 0:fb.call(da,{type:"shape",shape:c,order:bc},Ea);Ka=Date.now();fb=Ka-ra.current;300<fb?ra.current=Ka:300>=fb&&(null==(ub=da.onDoubleClick)?void 0:ub.call(da,{type:"shape",shape:c,order:bc},Ea),ra.current=-1);Ea.order=bc+1}},onPointerEnter:Ea=>{var Ka;if(!n.settings.penMode||"pen"===Ea.pointerType&&Ea.isPrimary){var {order:fb=0}=Ea;null==(Ka=da.onPointerEnter)?void 0:Ka.call(da,{type:"shape",shape:c,order:fb},Ea);Ea.order=fb+1}},onPointerLeave:Ea=>{var Ka;if(!n.settings.penMode||
"pen"===Ea.pointerType&&Ea.isPrimary){var {order:fb=0}=Ea;null==(Ka=da.onPointerLeave)?void 0:Ka.call(da,{type:"shape",shape:c,order:fb},Ea);Ea.order=fb+1}},onKeyUp:Ea=>{var Ka;null==(Ka=da.onKeyUp)?void 0:Ka.call(da,{type:"shape",shape:c,order:-1},Ea)},onKeyDown:Ea=>{var Ka;null==(Ka=da.onKeyDown)?void 0:Ka.call(da,{type:"shape",shape:c,order:-1},Ea)}}),[c.id,O,da])}function Og(c){var {viewport:n,inputs:O,callbacks:da,components:ra}=c;c=Zi(c,["viewport","inputs","callbacks","components"]);return(0,qx.jsx)(lB,
{id:c.id,viewport:n,inputs:O,callbacks:da,components:ra,meta:c.meta,children:(0,qx.jsx)(hB,Ff({},c))})}function Wg(c){var {side:n,content:O,sideOffset:da=10}=c;c=Zi(c,["side","content","sideOffset"]);return O?(0,wo.jsx)(Mq.TooltipProvider,{delayDuration:300,children:(0,wo.jsxs)(Mq.Tooltip,{children:[(0,wo.jsx)(Mq.TooltipTrigger,{asChild:!0,children:c.children}),(0,wo.jsxs)(Mq.TooltipContent,rg(Ff({sideOffset:da,side:n},c),{children:[O,(0,wo.jsx)(Mq.TooltipArrow,{className:"popper-arrow"})]}))]})}):
(0,wo.jsx)(wo.Fragment,{children:c.children})}function oh(c){var {className:n,tooltip:O,tooltipSide:da}=c;c=Zi(c,["className","tooltip","tooltipSide"]);return(0,rx.jsx)(Wg,{content:O,side:da,children:(0,rx.jsx)("button",Ff({className:"tl-button "+(null!=n?n:"")},c))})}function Cg(c){var {toggle:n=!0,pressed:O,onPressedChange:da,className:ra,tooltip:Ea}=c;c=Zi(c,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,Ft.jsx)(Wg,{content:Ea,children:(0,Ft.jsx)("div",{className:"inline-flex",
children:(0,Ft.jsx)(rB.Toggle,rg(Ff({},c),{"data-toggle":n,className:"tl-button"+(ra?" "+ra:""),pressed:O,onPressedChange:da}))})})}function ij(c){var {side:n,align:O,alignOffset:da,label:ra,children:Ea,border:Ka}=c;c=Zi(c,"side align alignOffset label children border".split(" "));return(0,Ur.jsxs)(Vr.Popover,{children:[(0,Ur.jsx)(Vr.PopoverTrigger,rg(Ff({},c),{"data-border":Ka,className:"tl-button tl-popover-trigger-button",children:ra})),(0,Ur.jsxs)(Vr.PopoverContent,{className:"w-auto p-1",align:O,
alignOffset:da,side:n,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[Ea,(0,Ur.jsx)(Vr.PopoverArrow,{className:"popper-arrow"})]})]})}function zf(c){function n(bc){return bc?(0,bk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:bc},children:(0,bk.jsx)("div",{className:`w-full h-full bg-${bc}-500`})}):(0,bk.jsx)("div",{className:"tl-color-bg",children:(0,bk.jsx)(ih,{name:"color-swatch"})})}var {color:O,opacity:da,popoverSide:ra,setColor:Ea,setOpacity:Ka}=
c;c=Zi(c,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:fb}}=vx.default.useContext(wi),ub=vx.default.useMemo(()=>{let bc="";return ng(tc=>{Ea(bc)},100,tc=>{bc=tc.target.value})},[]);return(0,bk.jsx)(ij,rg(Ff({},c),{border:!0,side:ra,label:(0,bk.jsx)(Wg,{content:fb("whiteboard/color"),side:ra,sideOffset:14,children:n(O)}),children:(0,bk.jsxs)("div",{className:"p-1",children:[(0,bk.jsx)("div",{className:"tl-color-palette",children:Object.values(Na).map(bc=>(0,bk.jsx)("button",
{className:`tl-color-drip m-1${bc===O?" active":""}`,onClick:()=>Ea(bc),children:n(bc)},bc))}),(0,bk.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,bk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${yf(O)?"":"active"}`,children:(0,bk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,bk.jsx)("input",Ff({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(O)?O:"#000000",onChange:ub,style:{opacity:yf(O)?
0:1}},c))})}),(0,bk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"text-xs cursor-pointer",children:fb("whiteboard/select-custom-color")})]}),Ka&&(0,bk.jsx)("div",{className:"mx-1 my-2",children:(0,bk.jsxs)(Wr.Slider,{defaultValue:[null!=da?da:0],onValueCommit:bc=>Ka(bc[0]),max:1,step:.1,"aria-label":fb("whiteboard/opacity"),className:"tl-slider-root",children:[(0,bk.jsx)(Wr.SliderTrack,{className:"tl-slider-track",children:(0,bk.jsx)(Wr.SliderRange,{className:"tl-slider-range"})}),(0,bk.jsx)(Wr.SliderThumb,
{className:"tl-slider-thumb"})]})})]})}))}function Sh(c){var {options:n,tooltip:O,popoverSide:da,compact:ra=!1,value:Ea,onValueChange:Ka}=c;c=Zi(c,"options tooltip popoverSide compact value onValueChange".split(" "));const [fb,ub]=zB.useState(!1);return(0,Fm.jsx)("div",rg(Ff({},c),{children:(0,Fm.jsxs)(wp.Select,{open:fb,onOpenChange:ub,value:Ea,onValueChange:Ka,children:[(0,Fm.jsx)(Wg,{content:O,side:da,children:(0,Fm.jsxs)(wp.SelectTrigger,{className:`tl-select-trigger ${ra?"compact":""}`,children:[(0,Fm.jsx)(wp.SelectValue,
{}),!ra&&(0,Fm.jsx)(wp.SelectIcon,{asChild:!0,children:(0,Fm.jsx)(BB,{className:"h-4 w-4 opacity-50"})})]})}),(0,Fm.jsx)(wp.SelectContent,{className:"min-w-min",side:da,position:"popper",sideOffset:14,align:"center",onKeyDown:bc=>bc.stopPropagation(),children:n.map(bc=>(0,Fm.jsx)(wp.SelectItem,{value:bc.value,children:bc.label},bc.value))})]})}))}function Ti(c){var {scaleLevel:n,compact:O,popoverSide:da}=c;Zi(c,["scaleLevel","compact","popoverSide"]);const ra=$e();({handlers:{t:c}}=CB.default.useContext(wi));
const Ea=[{label:O?"XS":c("whiteboard/extra-small"),value:"xs"},{label:O?"SM":c("whiteboard/small"),value:"sm"},{label:O?"MD":c("whiteboard/medium"),value:"md"},{label:O?"LG":c("whiteboard/large"),value:"lg"},{label:O?"XL":c("whiteboard/extra-large"),value:"xl"},{label:O?"XXL":c("whiteboard/huge"),value:"xxl"}];return(0,DB.jsx)(Sh,{tooltip:c("whiteboard/scale-level"),options:Ea,value:n,popoverSide:da,compact:O,onValueChange:Ka=>{ra.api.setScaleLevel(Ka)}})}function $h(c,n){return function(O){return c(n(O))}}
function Ej(c,n){return n(c)}function jk(c,n){return function(O){return c(n,O)}}function Pj(c,n){return function(){return c(n)}}function bj(c,n){n(c);return c}function ai(){for(var c=arguments.length,n=Array(c),O=0;O<c;O++)n[O]=arguments[O];return n}function Qj(c){c()}function Vj(c){return function(){return c}}function Ui(){for(var c=arguments.length,n=Array(c),O=0;O<c;O++)n[O]=arguments[O];return function(){n.map(Qj)}}function Ji(){}function bi(c,n){return c(1,n)}function Ik(c,n){c(0,n)}function Rj(c){c(2)}
function Wj(c){return c(4)}function Tg(c,n){return bi(c,jk(n,0))}function kk(c,n){var O=c(1,function(da){O();n(da)});return O}function ch(){var c=[];return function(n,O){switch(n){case 2:c.splice(0,c.length);break;case 1:return c.push(O),function(){var da=c.indexOf(O);-1<da&&c.splice(da,1)};case 0:c.slice().forEach(function(da){da(O)});break;default:throw Error("unrecognized action "+n);}}}function mg(c){var n=c,O=ch();return function(da,ra){switch(da){case 1:ra(n);break;case 0:n=ra;break;case 4:return n}return O(da,
ra)}}function Aj(c){var n,O;return function(da,ra){switch(da){case 1:if(ra){if(O===ra)break;n&&n();O=ra;return n=c(1,ra)}n&&n();return Ji;case 2:n&&n();O=null;break;default:throw Error("unrecognized action "+da);}}}function Yi(c){return bj(ch(),function(n){return Tg(c,n)})}function Vi(c,n){return bj(mg(n),function(O){return Tg(c,O)})}function tl(){for(var c=arguments.length,n=Array(c),O=0;O<c;O++)n[O]=arguments[O];return function(da){return n.reduceRight(Ej,da)}}function Pf(c){for(var n=arguments.length,
O=Array(1<n?n-1:0),da=1;da<n;da++)O[da-1]=arguments[da];var ra=tl.apply(void 0,O);return function(Ea,Ka){switch(Ea){case 1:return bi(c,ra(Ka));case 2:c(2);break;default:throw Error("unrecognized action "+Ea);}}}function Hj(c,n){return c===n}function yh(c){void 0===c&&(c=Hj);var n;return function(O){return function(da){c(n,da)||(n=da,O(da))}}}function Ch(c){return function(n){return function(O){c(O)&&n(O)}}}function Hg(c){return function(n){return $h(n,c)}}function Kj(c){return function(n){return function(){return n(c)}}}
function zi(c,n){return function(O){return function(da){return O(n=c(n,da))}}}function gk(c){return function(n){return function(O){0<c?c--:n(O)}}}function hk(c){var n,O;return function(da){return function(ra){n=ra;O||=setTimeout(function(){O=void 0;da(n)},c)}}}function Gl(c){var n,O;return function(da){return function(ra){n=ra;O&&clearTimeout(O);O=setTimeout(function(){da(n)},c)}}}function Ah(){for(var c=arguments.length,n=Array(c),O=0;O<c;O++)n[O]=arguments[O];var da=Array(n.length),ra=0,Ea=null,
Ka=Math.pow(2,n.length)-1;n.forEach(function(fb,ub){var bc=Math.pow(2,ub);bi(fb,function(tc){var Dc=ra;ra|=bc;da[ub]=tc;Dc!==Ka&&ra===Ka&&Ea&&(Ea(),Ea=null)})});return function(fb){return function(ub){var bc=function(){return fb([ub].concat(da))};ra===Ka?bc():Ea=bc}}}function Am(){for(var c=arguments.length,n=Array(c),O=0;O<c;O++)n[O]=arguments[O];return function(da,ra){switch(da){case 1:return Ui.apply(void 0,n.map(function(Ea){return Ea(1,ra)}));case 2:break;default:throw Error("unrecognized action "+
da);}}}function Nh(c,n){void 0===n&&(n=Hj);return Pf(c,yh(n))}function Ci(){for(var c=ch(),n=arguments.length,O=Array(n),da=0;da<n;da++)O[da]=arguments[da];var ra=Array(O.length),Ea=0,Ka=Math.pow(2,O.length)-1;O.forEach(function(fb,ub){var bc=Math.pow(2,ub);bi(fb,function(tc){ra[ub]=tc;Ea|=bc;Ea===Ka&&c(0,ra)})});return function(fb,ub){switch(fb){case 1:return Ea===Ka&&ub(ra),c(1,ub);case 2:c(2);break;default:throw Error("unrecognized action "+fb);}}}function uh(c,n,O){void 0===n&&(n=[]);O=(void 0===
O?{singleton:!0}:O).singleton;return{id:Symbol(),constructor:c,dependencies:n,singleton:O}}function Lj(c){var n=new Map;return function ra(da){var Ea=da.id,Ka=da.constructor,fb=da.dependencies;if((da=da.singleton)&&n.has(Ea))return n.get(Ea);Ka=Ka(fb.map(function(ub){return ra(ub)}));da&&n.set(Ea,Ka);return Ka}(c)}function kl(c,n){if(null==c)return{};var O={},da=Object.keys(c),ra;for(ra=0;ra<da.length;ra++){var Ea=da[ra];0<=n.indexOf(Ea)||(O[Ea]=c[Ea])}return O}function ul(c,n){if(c){if("string"===
typeof c)return fn(c,n);var O=Object.prototype.toString.call(c).slice(8,-1);"Object"===O&&c.constructor&&(O=c.constructor.name);if("Map"===O||"Set"===O)return Array.from(c);if("Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return fn(c,n)}}function fn(c,n){if(null==n||n>c.length)n=c.length;for(var O=0,da=Array(n);O<n;O++)da[O]=c[O];return da}function gm(c,n){var O="undefined"!==typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(O)return(O=O.call(c)).next.bind(O);if(Array.isArray(c)||
(O=ul(c))||n&&c&&"number"===typeof c.length){O&&(c=O);var da=0;return function(){return da>=c.length?{done:!0}:{done:!1,value:c[da++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function cp(c,n){for(var O={},da={},ra=0,Ea=c.length;ra<Ea;)da[c[ra]]=1,ra+=1;for(var Ka in n)da.hasOwnProperty(Ka)||(O[Ka]=n[Ka]);return O}function vc(c,n,O){function da(Dc,$c){Dc.propsReady&&(0,Dc.propsReady)(0,
!1);for(var sd=gm(Ka),od;!(od=sd()).done;)od=od.value,(0,Dc[n.required[od]])(0,$c[od]);for(sd=gm(fb);!(od=sd()).done;)if(od=od.value,od in $c)(0,Dc[n.optional[od]])(0,$c[od]);Dc.propsReady&&(0,Dc.propsReady)(0,!0)}function ra(Dc){return ub.reduce(function($c,sd){$c[sd]=function(od){(0,Dc[n.methods[sd]])(0,od)};return $c},{})}function Ea(Dc){return bc.reduce(function($c,sd){$c[sd]=Aj(Dc[n.events[sd]]);return $c},{})}var Ka=Object.keys(n.required||{}),fb=Object.keys(n.optional||{}),ub=Object.keys(n.methods||
{}),bc=Object.keys(n.events||{}),tc=(0,Kk.createContext)({});return{Component:(0,Kk.forwardRef)(function(Dc,$c){var sd=Dc.children,od=kl(Dc,IB),Gd=(0,Kk.useState)(function(){return bj(Lj(c),function(id){return da(id,od)})})[0],Rd=(0,Kk.useState)(Pj(Ea,Gd))[0];Xr(function(){for(var id=gm(bc),qd;!(qd=id()).done;)if(qd=qd.value,qd in od)(0,Rd[qd])(1,od[qd]);return function(){Object.values(Rd).map(Rj)}},[od,Rd,Gd]);Xr(function(){da(Gd,od)});(0,Kk.useImperativeHandle)($c,Vj(ra(Gd)));return(0,Kk.createElement)(tc.Provider,
{value:Gd},O?(0,Kk.createElement)(O,cp([].concat(Ka,fb,bc),od),sd):sd)}),usePublisher:function(Dc){return(0,Kk.useCallback)(jk(Ik,(0,Kk.useContext)(tc)[Dc]),[Dc])},useEmitterValue:function(Dc){var $c=(0,Kk.useContext)(tc)[Dc];Dc=(0,Kk.useState)(Pj(Wj,$c));var sd=Dc[0],od=Dc[1];Xr(function(){return bi($c,function(Gd){Gd!==sd&&od(Vj(Gd))})},[$c,sd]);return sd},useEmitter:function(Dc,$c){var sd=(0,Kk.useContext)(tc)[Dc];Xr(function(){return sd(1,$c)},[$c,sd])}}}function Ha(){return Ha=Object.assign||
function(c){for(var n=1;n<arguments.length;n++){var O=arguments[n],da;for(da in O)Object.prototype.hasOwnProperty.call(O,da)&&(c[da]=O[da])}return c},Ha.apply(this,arguments)}function Kc(c,n){if(null==c)return{};var O,da,ra={},Ea=Object.keys(c);for(da=0;da<Ea.length;da++)0<=n.indexOf(O=Ea[da])||(ra[O]=c[O]);return ra}function Lc(c,n){(null==n||n>c.length)&&(n=c.length);for(var O=0,da=Array(n);O<n;O++)da[O]=c[O];return da}function Xb(c,n){var O="undefined"!=typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];
if(O)return(O=O.call(c)).next.bind(O);if(Array.isArray(c)||(O=function(ra,Ea){if(ra){if("string"==typeof ra)return Lc(ra,Ea);var Ka=Object.prototype.toString.call(ra).slice(8,-1);return"Object"===Ka&&ra.constructor&&(Ka=ra.constructor.name),"Map"===Ka||"Set"===Ka?Array.from(ra):"Arguments"===Ka||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ka)?Lc(ra,Ea):void 0}}(c))||n&&c&&"number"==typeof c.length){O&&(c=O);var da=0;return function(){return da>=c.length?{done:!0}:{done:!1,value:c[da++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Rc(c,n){void 0===n&&(n=!0);var O=(0,Uh.useRef)(null),da=function(Ea){};if("undefined"!=typeof ResizeObserver){var ra=new ResizeObserver(function(Ea){Ea=Ea[0].target;null!==Ea.offsetParent&&c(Ea)});da=function(Ea){Ea&&n?(ra.observe(Ea),O.current=Ea):(O.current&&ra.unobserve(O.current),O.current=null)}}return{ref:O,callbackRef:da}}function rc(c,n){return void 0===n&&(n=!0),Rc(c,n).callbackRef}function $b(c,n,O,da,ra,Ea,Ka){return Rc(function(fb){for(var ub=function(Dc,$c,sd,od){sd=Dc.length;
if(0===sd)return null;for(var Gd=[],Rd=0;Rd<sd;Rd++){var id=Dc.item(Rd);if(id&&void 0!==id.dataset.index){var qd=parseInt(id.dataset.index),xd=parseFloat(id.dataset.knownSize),Sd=$c(id,"offsetHeight");if(0===Sd&&od("Zero-sized element, this should not happen",{child:id},dk.ERROR),Sd!==xd)id=Gd[Gd.length-1],0===Gd.length||id.size!==Sd||id.endIndex!==qd-1?Gd.push({startIndex:qd,endIndex:qd,size:Sd}):Gd[Gd.length-1].endIndex++}}return Gd}(fb.children,n,0,ra),bc=fb.parentElement;!bc.dataset.virtuosoScroller;)bc=
bc.parentElement;var tc="window"===bc.firstElementChild.dataset.viewportType;da({scrollTop:Math.max(Ka?Ka.scrollTop:tc?window.pageYOffset||document.documentElement.scrollTop:bc.scrollTop,0),scrollHeight:Ka?Ka.scrollHeight:tc?document.documentElement.scrollHeight:bc.scrollHeight,viewportHeight:Ka?Ka.offsetHeight:tc?window.innerHeight:bc.offsetHeight});null==Ea||Ea(function(Dc,$c,sd){return"normal"===$c||null!=$c&&$c.endsWith("px")||sd("row-gap was not resolved to pixel value correctly",$c,dk.WARN),
"normal"===$c?0:parseInt(null!=$c?$c:"0",10)}(0,getComputedStyle(fb).rowGap,ra));null!==ub&&c(ub)},O)}function Vb(c,n){return Math.round(c.getBoundingClientRect()[n])}function Tc(c,n,O,da,ra){void 0===da&&(da=Ji);var Ea=(0,Uh.useRef)(null),Ka=(0,Uh.useRef)(null),fb=(0,Uh.useRef)(null),ub=(0,Uh.useRef)(!1),bc=(0,Uh.useCallback)(function(tc){tc=tc.target;var Dc=tc===window||tc===document,$c=Dc?window.pageYOffset||document.documentElement.scrollTop:tc.scrollTop,sd=Dc?document.documentElement.scrollHeight:
tc.scrollHeight,od=Dc?window.innerHeight:tc.offsetHeight;tc=function(){c({scrollTop:Math.max($c,0),scrollHeight:sd,viewportHeight:od})};ub.current?(0,JB.flushSync)(tc):tc();ub.current=!1;null!==Ka.current&&($c===Ka.current||0>=$c||$c===sd-od)&&(Ka.current=null,n(!0),fb.current&&(clearTimeout(fb.current),fb.current=null))},[c,n]);return(0,Uh.useEffect)(function(){var tc=ra||Ea.current;return da(ra||Ea.current),bc({target:tc}),tc.addEventListener("scroll",bc,{passive:!0}),function(){da(null);tc.removeEventListener("scroll",
bc)}},[Ea,bc,O,da,ra]),{scrollerRef:Ea,scrollByCallback:function(tc){ub.current=!0;Ea.current.scrollBy(tc)},scrollToCallback:function(tc){var Dc=Ea.current;if(Dc&&!("offsetHeight"in Dc&&0===Dc.offsetHeight)){var $c,sd,od,Gd="smooth"===tc.behavior;if(Dc===window?(sd=Math.max(Vb(document.documentElement,"height"),document.documentElement.scrollHeight),$c=window.innerHeight,od=document.documentElement.scrollTop):(sd=Dc.scrollHeight,$c=Vb(Dc,"height"),od=Dc.scrollTop),tc.top=Math.ceil(Math.max(Math.min(sd-
$c,tc.top),0)),1.01>Math.abs($c-sd)||tc.top===od)return c({scrollTop:od,scrollHeight:sd,viewportHeight:$c}),void(Gd&&n(!0));Gd?(Ka.current=tc.top,fb.current&&clearTimeout(fb.current),fb.current=setTimeout(function(){fb.current=null;Ka.current=null;n(!0)},1E3)):Ka.current=null;Dc.scrollTo(tc)}}}}function cd(c,n,O,da,ra){return void 0===da&&(da=qi),void 0===ra&&(ra=qi),{k:c,v:n,lvl:O,l:da,r:ra}}function pd(c,n){if(c===qi)return qi;var O=c.k,da=c.l,ra=c.r;if(n===O){if(da===qi)return ra;if(ra===qi)return da;
n=Re(da);return Pg(df(c,{k:n[0],v:n[1],l:Bf(da)}))}return Pg(df(c,n<O?{l:pd(da,n)}:{r:pd(ra,n)}))}function Fd(c,n,O){return(void 0===O&&(O="k"),c===qi)?[-Infinity,void 0]:c[O]===n?[c.k,c.v]:c[O]<n?(n=Fd(c.r,n,O),-Infinity===n[0]?[c.k,c.v]:n):Fd(c.l,n,O)}function Md(c,n,O){return c===qi?cd(n,O,1):n===c.k?df(c,{k:n,v:O}):Mf(hg(df(c,n<c.k?{l:Md(c.l,n,O)}:{r:Md(c.r,n,O)})))}function Yd(c,n,O){if(c===qi)return[];var da=c.k,ra=c.v,Ea=c.r,Ka=[];return da>n&&(Ka=Ka.concat(Yd(c.l,n,O))),da>=n&&da<=O&&Ka.push({k:da,
v:ra}),da<=O&&(Ka=Ka.concat(Yd(Ea,n,O))),Ka}function ze(c){return c===qi?[]:[].concat(ze(c.l),[{k:c.k,v:c.v}],ze(c.r))}function Re(c){return c.r===qi?[c.k,c.v]:Re(c.r)}function Bf(c){return c.r===qi?c.l:Pg(df(c,{r:Bf(c.r)}))}function df(c,n){return cd(void 0!==n.k?n.k:c.k,void 0!==n.v?n.v:c.v,void 0!==n.lvl?n.lvl:c.lvl,void 0!==n.l?n.l:c.l,void 0!==n.r?n.r:c.r)}function Rg(c){return c===qi||c.lvl>c.r.lvl}function Pg(c){var n=c.l,O=c.r,da=c.lvl;if(O.lvl>=da-1&&n.lvl>=da-1)return c;if(da>O.lvl+1){if(Rg(n))return hg(df(c,
{lvl:da-1}));if(n===qi||n.r===qi)throw Error("Unexpected empty nodes");return df(n.r,{l:df(n,{r:n.r.l}),r:df(c,{l:n.r.r,lvl:da-1}),lvl:da})}if(Rg(c))return Mf(df(c,{lvl:da-1}));if(O===qi||O.l===qi)throw Error("Unexpected empty nodes");n=O.l;var ra=Rg(n)?O.lvl-1:O.lvl;return df(n,{l:df(c,{r:n.l,lvl:da-1}),r:Mf(df(O,{l:n.r,lvl:ra})),lvl:n.lvl+1})}function Xg(c,n,O){return c===qi?[]:Fg(Yd(c,Fd(c,n)[0],O),function(da){return{index:da.k,value:da.v}})}function Fg(c,n){var O=c.length;if(0===O)return[];var da=
n(c[0]),ra=da.index;da=da.value;for(var Ea=[],Ka=1;Ka<O;Ka++){var fb=n(c[Ka]),ub=fb.index;fb=fb.value;Ea.push({start:ra,end:ub-1,value:da});ra=ub;da=fb}return Ea.push({start:ra,end:Infinity,value:da}),Ea}function Mf(c){var n=c.r,O=c.lvl;return n===qi||n.r===qi||n.lvl!==O||n.r.lvl!==O?c:df(n,{l:df(c,{r:n.l}),lvl:O+1})}function hg(c){var n=c.l;return n===qi||n.lvl!==c.lvl?c:df(n,{r:df(c,{l:n.r})})}function ph(c,n,O,da){void 0===da&&(da=0);for(var ra=c.length-1;da<=ra;){var Ea=Math.floor((da+ra)/2),
Ka=O(c[Ea],n);if(0===Ka)return Ea;if(-1===Ka){if(2>ra-da)return Ea-1;ra=Ea-1}else{if(ra===da)return Ea;da=Ea+1}}throw Error("Failed binary finding record in array - "+c.join(",")+", searched for "+n);}function sh(c){var n=c.size,O=c.startIndex,da=c.endIndex;return function(ra){return ra.start===O&&(ra.end===da||Infinity===ra.end)&&ra.value===n}}function If(c,n){c=c.index;return n===c?0:n<c?-1:1}function si(c,n){c=c.offset;return n===c?0:n<c?-1:1}function Eh(c){return{index:c.index,value:c}}function li(c,
n,O,da){var ra=0,Ea=0,Ka=0,fb;0!==n?(Ka=c[fb=ph(c,n-1,If)].offset,Ea=Fd(O,n-1),ra=Ea[0],Ea=Ea[1],c.length&&c[fb].size===Fd(O,n)[1]&&--fb,c=c.slice(0,fb+1)):c=[];for(n=Xb(Xg(O,n,Infinity));!(O=n()).done;)fb=O.value,O=fb.start,fb=fb.value,ra=O-ra,Ka=ra*Ea+Ka+ra*da,c.push({offset:Ka,size:fb,index:O}),ra=O,Ea=fb;return{offsetTree:c,lastIndex:ra,lastOffset:Ka,lastSize:Ea}}function wh(c,n){var O=n[0],da=n[1],ra=n[3];0<O.length&&(0,n[2])("received item sizes",O,dk.DEBUG);var Ea=c.sizeTree;n=Ea;var Ka=0;
if(0<da.length&&Ea===qi&&2===O.length){var fb=O[0].size,ub=O[1].size;n=da.reduce(function(tc,Dc){return Md(Md(tc,Dc,fb),Dc+1,ub)},n)}else O=function(tc,Dc){var $c,sd=tc===qi?0:Infinity;for(Dc=Xb(Dc);!($c=Dc()).done;){var od=$c.value;$c=od.size;var Gd=od.startIndex,Rd=od.endIndex;if(sd=Math.min(sd,Gd),tc===qi)tc=Md(tc,0,$c);else{var id=Xg(tc,Gd-1,Rd+1);if(!id.some(sh(od))){var qd,xd=od=!1;for(id=Xb(id);!(qd=id()).done;){var Sd=qd.value;qd=Sd.start;var Id=Sd.end;Sd=Sd.value;od?(Rd>=qd||$c===Sd)&&(tc=
pd(tc,qd)):(xd=Sd!==$c,od=!0);Id>Rd&&Rd>=qd&&Sd!==$c&&(tc=Md(tc,Rd+1,Sd))}xd&&(tc=Md(tc,Gd,$c))}}}return[tc,sd]}(n,O),n=O[0],Ka=O[1];if(n===Ea)return c;c=li(c.offsetTree,Ka,n,ra);var bc=c.offsetTree;return{sizeTree:n,offsetTree:bc,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:da.reduce(function(tc,Dc){return Md(tc,Dc,$i(Dc,bc,ra))},qi),groupIndices:da}}function $i(c,n,O){if(0===n.length)return 0;n=n[ph(n,c,If)];c-=n.index;c=n.size*c+(c-1)*O+n.offset;return 0<c?
c+O:c}function Jh(c,n,O){if(void 0!==c.groupIndex)return n.groupIndices[c.groupIndex]+1;c=Di("LAST"===c.index?O:c.index,n);return Math.max(0,c,Math.min(O,c))}function Di(c,n){if(n.groupOffsetTree===qi)return c;for(var O=0;n.groupIndices[O]<=c+O;)O++;return c+O}function qj(c){c="number"==typeof c?{index:c}:c;return c.align||(c.align="start"),c.behavior&&NB||(c.behavior="auto"),c.offset||(c.offset=0),c}function Qn(c){return!!c&&("smooth"===c?"smooth":"auto")}function ll(c){return c.reduce(function(n,
O){return n.groupIndices.push(n.totalCount),n.totalCount+=O+1,n},{totalCount:0,groupIndices:[]})}function Pm(c,n){return!(!c||c[0]!==n[0]||c[1]!==n[1])}function Fk(c,n){return!(!c||c.startIndex!==n.startIndex||c.endIndex!==n.endIndex)}function Rn(c,n,O){return"number"==typeof c?"up"===O&&"top"===n||"down"===O&&"bottom"===n?c:0:"up"===O?"top"===n?c.main:c.reverse:"bottom"===n?c.main:c.reverse}function qr(c,n,O){if(0===c.length)return[];if(n.groupOffsetTree===qi)return c.map(function(ub){return Ha({},
ub,{index:ub.index+O,originalIndex:ub.index})});var da,ra=[],Ea=Xg(n.groupOffsetTree,c[0].index,c[c.length-1].index),Ka=void 0,fb=0;for(c=Xb(c);!(da=c()).done;)da=da.value,(!Ka||Ka.end<da.index)&&(Ka=Ea.shift(),fb=n.groupIndices.indexOf(Ka.start)),ra.push(Ha({},da.index===Ka.start?{type:"group",index:fb}:{index:da.index-(fb+1)+O,groupIndex:fb},{size:da.size,offset:da.offset,originalIndex:da.index,data:da.data}));return ra}function Lo(c,n,O,da,ra,Ea){var Ka=0,fb=0;0<c.length&&(Ka=c[0].offset,fb=c[c.length-
1],fb=fb.offset+fb.size);var ub=O-ra.lastIndex,bc=Ka;da=ra.lastOffset+ub*ra.lastSize+(ub-1)*da-fb;return{items:qr(c,ra,Ea),topItems:qr(n,ra,Ea),topListHeight:n.reduce(function(tc,Dc){return Dc.size+tc},0),offsetTop:Ka,offsetBottom:da,top:bc,bottom:fb,totalCount:O,firstItemIndex:Ea}}function Qm(c){var n,O=!1;return function(){return O||(O=!0,n=c()),n}}function Rm(c,n){var O=(0,Uh.useRef)(null),da=(0,Uh.useCallback)(function(ub){if(null!==ub&&ub.offsetParent){var bc=ub.getBoundingClientRect();ub=bc.width;
if(n){var tc=n.getBoundingClientRect();bc=bc.top-tc.top;tc=tc.height-Math.max(0,bc);bc+=n.scrollTop}else tc=window.innerHeight-Math.max(0,bc.top),bc=bc.top+window.pageYOffset;O.current={offsetTop:bc,visibleHeight:tc,visibleWidth:ub};c(O.current)}},[c,n]),ra=Rc(da),Ea=ra.callbackRef,Ka=ra.ref,fb=(0,Uh.useCallback)(function(){da(Ka.current)},[da,Ka]);return(0,Uh.useEffect)(function(){if(n){n.addEventListener("scroll",fb);var ub=new ResizeObserver(fb);return ub.observe(n),function(){n.removeEventListener("scroll",
fb);ub.unobserve(n)}}return window.addEventListener("scroll",fb),window.addEventListener("resize",fb),function(){window.removeEventListener("scroll",fb);window.removeEventListener("resize",fb)}},[fb,n]),Ea}function um(c){return c}function Uj(c,n){var O=ch();return bi(O,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+n,"color: red;","color: inherit;","color: blue;")}),Tg(O,c),O}function uj(c,n){if("string"!=typeof c)return{context:n}}function vq(c){var n=c.usePublisher,
O=c.useEmitter,da=c.useEmitterValue;return vh.memo(function(ra){var Ea=ra.style,Ka=ra.children;ra=Kc(ra,aC);var fb=n("scrollContainerState"),ub=da("ScrollerComponent"),bc=n("smoothScrollTargetReached"),tc=da("scrollerRef"),Dc=da("context");fb=Tc(fb,bc,ub,tc);bc=fb.scrollerRef;tc=fb.scrollByCallback;return O("scrollTo",fb.scrollToCallback),O("scrollBy",tc),(0,Uh.createElement)(ub,Ha({ref:bc,style:Ha({},hC,Ea),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},ra,uj(ub,Dc)),
Ka)})}function fm(c){var n=c.usePublisher,O=c.useEmitter,da=c.useEmitterValue;return vh.memo(function(ra){var Ea=ra.style,Ka=ra.children;ra=Kc(ra,bC);var fb=n("windowScrollContainerState"),ub=da("ScrollerComponent"),bc=n("smoothScrollTargetReached"),tc=da("totalListHeight"),Dc=da("deviation"),$c=da("customScrollParent"),sd=da("context");bc=Tc(fb,bc,ub,Ji,$c);var od=bc.scrollerRef;fb=bc.scrollByCallback;bc=bc.scrollToCallback;return KB(function(){return od.current=$c||window,function(){od.current=
null}},[od,$c]),O("windowScrollTo",bc),O("scrollBy",fb),(0,Uh.createElement)(ub,Ha({style:Ha({position:"relative"},Ea,0!==tc?{height:tc+Dc}:{}),"data-virtuoso-scroller":!0},ra,uj(ub,sd)),Ka)})}function $o(c,n,O){return Array.from({length:n-c+1}).map(function(da,ra){return{index:ra+c,data:null==O?void 0:O[ra+c]}})}function qq(c,n){return c&&c.column===n.column&&c.row===n.row}function em(c,n,O,da){var ra=O.height;return void 0===ra||0===da.length?{top:0,bottom:0}:{top:ym(c,n,O,da[0].index),bottom:ym(c,
n,O,da[da.length-1].index)+ra}}function ym(c,n,O,da){var ra=n.column;c=Ap(1,$r((c.width+ra)/(O.width+ra)));da=$r(da/c);O=da*O.height+Ap(0,da-1)*n.row;return 0<O?O+n.row:O}function Um(c,n,O){return"normal"===n||null!=n&&n.endsWith("px")||O(c+" was not resolved to pixel value correctly",n,dk.WARN),"normal"===n?0:parseInt(null!=n?n:"0",10)}function ml(){ml=Object.assign?Object.assign.bind():function(c){for(var n=1;n<arguments.length;n++){var O=arguments[n],da;for(da in O)Object.prototype.hasOwnProperty.call(O,
da)&&(c[da]=O[da])}return c};return ml.apply(this,arguments)}function Xl(c,n){Xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,da){O.__proto__=da;return O};return Xl(c,n)}function rl(c,n){c.prototype=Object.create(n.prototype);c.prototype.constructor=c;Xl(c,n)}function go(c){go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)};return go(c)}function io(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function Tm(c,n,O){Tm=io()?Reflect.construct.bind():function(da,ra,Ea){var Ka=[null];Ka.push.apply(Ka,ra);da=new (Function.bind.apply(da,Ka));Ea&&Xl(da,Ea.prototype);return da};return Tm.apply(null,arguments)}function lq(c){var n="function"===typeof Map?new Map:void 0;lq=function(O){function da(){return Tm(O,arguments,go(this).constructor)}if(null===O||
-1===Function.toString.call(O).indexOf("[native code]"))return O;if("function"!==typeof O)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(O))return n.get(O);n.set(O,da)}da.prototype=Object.create(O.prototype,{constructor:{value:da,enumerable:!1,writable:!0,configurable:!0}});return Xl(da,O)};return lq(c)}function Ss(c,n,O){return Math.round(255*c)+","+Math.round(255*n)+","+Math.round(255*O)}function Hl(c,n,O,da){void 0===da&&(da=Ss);if(0===
n)return da(O,O,O);c=(c%360+360)%360/60;var ra=(1-Math.abs(2*O-1))*n,Ea=ra*(1-Math.abs(c%2-1)),Ka=n=0,fb=0;0<=c&&1>c?(n=ra,Ka=Ea):1<=c&&2>c?(n=Ea,Ka=ra):2<=c&&3>c?(Ka=ra,fb=Ea):3<=c&&4>c?(Ka=Ea,fb=ra):4<=c&&5>c?(n=Ea,fb=ra):5<=c&&6>c&&(n=ra,fb=Ea);O-=ra/2;return da(n+O,Ka+O,fb+O)}function Ts(c){if("string"!==typeof c)throw new km(3);if("string"===typeof c){var n=c.toLowerCase();c=Mx[n]?"#"+Mx[n]:c}if(c.match(MC))return{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+
c[5]+c[6],16)};if(c.match(NC))return n=parseFloat((parseInt(""+c[7]+c[8],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[2],16),green:parseInt(""+c[3]+c[4],16),blue:parseInt(""+c[5]+c[6],16),alpha:n};if(c.match(OC))return{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16)};if(c.match(PC))return n=parseFloat((parseInt(""+c[4]+c[4],16)/255).toFixed(2)),{red:parseInt(""+c[1]+c[1],16),green:parseInt(""+c[2]+c[2],16),blue:parseInt(""+c[3]+c[3],16),alpha:n};if(n=Tt.exec(c))return{red:parseInt(""+
n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10)};if(n=QC.exec(c.substring(0,50)))return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:1<parseFloat(""+n[4])?parseFloat(""+n[4])/100:parseFloat(""+n[4])};var O=RC.exec(c);if(O){n=parseInt(""+O[1],10);var da=parseInt(""+O[2],10)/100;O=parseInt(""+O[3],10)/100;n="rgb("+Hl(n,da,O)+")";da=Tt.exec(n);if(!da)throw new km(4,c,n);return{red:parseInt(""+da[1],10),green:parseInt(""+da[2],10),blue:parseInt(""+
da[3],10)}}if(n=SC.exec(c.substring(0,50))){da=parseInt(""+n[1],10);O=parseInt(""+n[2],10)/100;var ra=parseInt(""+n[3],10)/100;da="rgb("+Hl(da,O,ra)+")";O=Tt.exec(da);if(!O)throw new km(4,c,da);return{red:parseInt(""+O[1],10),green:parseInt(""+O[2],10),blue:parseInt(""+O[3],10),alpha:1<parseFloat(""+n[4])?parseFloat(""+n[4])/100:parseFloat(""+n[4])}}throw new km(5);}function Hk(c){c=c.toString(16);return 1===c.length?"0"+c:c}function lh(c,n,O){return Ut("#"+Hk(Math.round(255*c))+Hk(Math.round(255*
n))+Hk(Math.round(255*O)))}function rr(c,n,O){if("number"===typeof c&&"number"===typeof n&&"number"===typeof O)return Ut("#"+Hk(c)+Hk(n)+Hk(O));if("object"===typeof c&&void 0===n&&void 0===O)return Ut("#"+Hk(c.red)+Hk(c.green)+Hk(c.blue));throw new km(6);}function rq(c){if("object"!==typeof c)throw new km(8);if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?rr(c.red,c.green,c.blue):"rgba("+c.red+","+c.green+
","+c.blue+","+c.alpha+")";else throw new km(7);return c}if("number"===typeof c.red&&"number"===typeof c.green&&"number"===typeof c.blue&&("number"!==typeof c.alpha||"undefined"===typeof c.alpha))return rr(c);if("number"===typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&"number"===typeof c.alpha){if("object"===typeof c)c=1<=c.alpha?Hl(c.hue,c.saturation,c.lightness,lh):"rgba("+Hl(c.hue,c.saturation,c.lightness)+","+c.alpha+")";else throw new km(2);return c}if("number"===
typeof c.hue&&"number"===typeof c.saturation&&"number"===typeof c.lightness&&("number"!==typeof c.alpha||"undefined"===typeof c.alpha)){if("object"===typeof c)c=Hl(c.hue,c.saturation,c.lightness,lh);else throw new km(1);return c}throw new km(8);}function Po(c,n,O){return function(){var da=O.concat(Array.prototype.slice.call(arguments));return da.length>=n?c.apply(this,da):Po(c,n,da)}}function ap(c,n){if("transparent"===n)return n;n=Ts(n);var O=n.red/255,da=n.green/255,ra=n.blue/255,Ea=Math.max(O,
da,ra),Ka=Math.min(O,da,ra),fb=(Ea+Ka)/2;if(Ea===Ka)n=void 0!==n.alpha?{hue:0,saturation:0,lightness:fb,alpha:n.alpha}:{hue:0,saturation:0,lightness:fb};else{var ub=Ea-Ka;Ka=.5<fb?ub/(2-Ea-Ka):ub/(Ea+Ka);switch(Ea){case O:O=(da-ra)/ub+(da<ra?6:0);break;case da:O=(ra-O)/ub+2;break;default:O=(O-da)/ub+4}O*=60;n=void 0!==n.alpha?{hue:O,saturation:Ka,lightness:fb,alpha:n.alpha}:{hue:O,saturation:Ka,lightness:fb}}fb=ml;c=n.lightness-parseFloat(c);return rq(fb({},n,{lightness:Math.max(0,Math.min(1,c))}))}
function Vk(c,n){var O;void 0!==n.strokeWidth&&(n.strokeWidth=Math.max(n.strokeWidth,1));void 0!==n.opacity&&(n.opacity=Math.min(1,Math.max(n.opacity,0)));let da=null!=(O=n.fill)?O:c.props.fill;void 0===da||yf(da)||"var(--ls-secondary-background-color)"===da||n.noFill||!Co.includes(c.props.type)||(c=TC(.3,da),n.stroke=c);return n}function sq({strokeWidth:c,size:n,mode:O}){return"svg"===O?(0,Nx.jsx)("rect",{className:"tl-binding-indicator",x:c,y:c,rx:2,ry:2,width:Math.max(0,n[0]-2*c),height:Math.max(0,
n[1]-2*c),strokeWidth:4*c}):(0,Nx.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Sm(){const c=$e();return"panning"===c.inputs.state||"pinching"===c.inputs.state}function No({left:c,middle:n,right:O,stroke:da,strokeWidth:ra}){return(0,$t.jsxs)("g",{children:[(0,$t.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${c} L ${n} ${O}`}),(0,$t.jsx)("path",{d:`M ${c} L ${n} ${O}`,fill:"none",
stroke:da,strokeWidth:ra,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Wl(c,n,O){n=T(c,n,c,O).points;if(!n)return console.warn("Could not find an intersection for the arrow head."),{left:c,right:c};n=(O=n[0])?ve.rotWith(O,c,Math.PI/6):c;c=O?ve.rotWith(O,c,-Math.PI/6):c;return{left:n,right:c}}function tm(c,n,O){const {left:da,right:ra}=Wl(c,n,O);return`M ${da} L ${c} ${ra}`}function Bj(c,n,O,da,ra){c=c.strokeWidth;var Ea=ve.dist(n,O);c=Math.min(Ea/3,16*c);Ea=[];Ea.push(`M ${n} L ${O}`);
da&&Ea.push(tm(n,O,c));ra&&Ea.push(tm(O,n,c));return Ea.join(" ")}function bp({id:c,bounds:n,labelSize:O,offset:da,scale:ra=1}){return(0,fs.jsx)("defs",{children:(0,fs.jsxs)("mask",{id:c+"_clip",children:[(0,fs.jsx)("rect",{x:-100,y:-100,width:n.width+200,height:n.height+200,fill:"white"}),(0,fs.jsx)("rect",{x:n.width/2-O[0]/2*ra+((null==da?void 0:da[0])||0),y:n.height/2-O[1]/2*ra+((null==da?void 0:da[1])||0),width:O[0]*ra,height:O[1]*ra,rx:4*ra,ry:4*ra,fill:"black"})]})})}function Wk(c,n,O,da=ra=>
ra){return c*da(.5-n*(.5-O))}function ur(c){return[-c[0],-c[1]]}function Jk(c,n){return[c[0]+n[0],c[1]+n[1]]}function zj(c,n){return[c[0]-n[0],c[1]-n[1]]}function ik(c,n){return[c[0]*n,c[1]*n]}function lo(c){return[c[1],-c[0]]}function Us(c,n){return c[0]===n[0]&&c[1]===n[1]}function zm(c){return c[0]*c[0]+c[1]*c[1]}function dn(c){var n=Math.hypot(c[0],c[1]);return[c[0]/n,c[1]/n]}function sr(c,n){return Math.hypot(c[1]-n[1],c[0]-n[0])}function Ak(c,n,O){let da=Math.sin(O);O=Math.cos(O);let ra=c[0]-
n[0];c=c[1]-n[1];return[ra*O-c*da+n[0],ra*da+c*O+n[1]]}function Kl(c,n,O){return Jk(c,ik(zj(n,c),O))}function en(c,n,O){return Jk(c,ik(n,O))}function uq(c,n={}){let {size:O=16,smoothing:da=.5,thinning:ra=.5,simulatePressure:Ea=!0,easing:Ka=Kf=>Kf,start:fb={},end:ub={},last:bc=!1}=n,{cap:tc=!0,easing:Dc=Kf=>Kf*(2-Kf)}=fb,{cap:$c=!0,easing:sd=Kf=>--Kf*Kf*Kf+1}=ub;if(0===c.length||0>=O)return[];var od=c[c.length-1].runningLength;let Gd=!1===fb.taper?0:!0===fb.taper?Math.max(O,od):fb.taper,Rd=!1===ub.taper?
0:!0===ub.taper?Math.max(O,od):ub.taper;var id=Math.pow(O*da,2);n=[];let qd=[];var xd=c.slice(0,10).reduce((Kf,Af)=>{var ag=Af.pressure;Ea&&(Af=Gp(1,Af.distance/O),ag=Gp(1,1-Af),ag=Gp(1,Kf+.275*(ag-Kf)*Af));return(Kf+ag)/2},c[0].pressure),Sd=Wk(O,ra,c[c.length-1].pressure,Ka),Id;let Ve=c[0].vector;var We=c[0].point;let ig=We;var kf=We;let Vf=ig;var Lg=!1;for(var dh=0;dh<c.length;dh++){var {pressure:Ig}=c[dh];let {point:Kf,vector:Af,distance:ag,runningLength:fh}=c[dh];if(dh<c.length-1&&3>od-fh)continue;
ra?(Ea&&(Sd=Gp(1,ag/O),Ig=Gp(1,1-Sd),Ig=Gp(1,xd+.275*(Ig-xd)*Sd)),Sd=Wk(O,ra,Ig,Ka)):Sd=O/2;void 0===Id&&(Id=Sd);var eh=fh<Gd?Dc(fh/Gd):1,Df=od-fh<Rd?sd((od-fh)/Rd):1;Sd=Math.max(.01,Sd*Math.min(eh,Df));Df=(dh<c.length-1?c[dh+1]:c[dh]).vector;let Ih=dh<c.length-1?Af[0]*Df[0]+Af[1]*Df[1]:1;eh=null!==Ih&&0>Ih;if(0>Af[0]*Ve[0]+Af[1]*Ve[1]&&!Lg||eh){We=ik(lo(Ve),Sd);for(let Wi=1/13,ii=0;1>=ii;ii+=Wi)kf=Ak(zj(Kf,We),Kf,Vq*ii),n.push(kf),Vf=Ak(Jk(Kf,We),Kf,Vq*-ii),qd.push(Vf);We=kf;ig=Vf;eh&&(Lg=!0)}else(Lg=
!1,dh===c.length-1)?(Ig=ik(lo(Af),Sd),n.push(zj(Kf,Ig)),qd.push(Jk(Kf,Ig))):(xd=ik(lo(Kl(Df,Af,Ih)),Sd),kf=zj(Kf,xd),(1>=dh||zm(zj(We,kf))>id)&&(n.push(kf),We=kf),Vf=Jk(Kf,xd),(1>=dh||zm(zj(ig,Vf))>id)&&(qd.push(Vf),ig=Vf),xd=Ig,Ve=Af)}od=c[0].point.slice(0,2);id=1<c.length?c[c.length-1].point.slice(0,2):Jk(c[0].point,[1,1]);kf=[];Lg=[];if(1===c.length){if(!Gd&&!Rd||bc){c=en(od,dn(lo(zj(od,id))),-(Id||Sd));n=[];for(let Kf=1/13,Af=Kf;1>=Af;Af+=Kf)n.push(Ak(c,od,2*Vq*Af));return n}}else{if(!(Gd||Rd&&
1===c.length))if(tc)for(let Kf=1/13,Af=Kf;1>=Af;Af+=Kf)Id=Ak(qd[0],od,Vq*Af),kf.push(Id);else dh=zj(n[0],qd[0]),Id=ik(dh,.5),dh=ik(dh,.51),kf.push(zj(od,Id),zj(od,dh),Jk(od,dh),Jk(od,Id));Id=lo(ur(c[c.length-1].vector));if(Rd||Gd&&1===c.length)Lg.push(id);else if($c){c=en(id,Id,Sd);for(let Kf=1/29,Af=Kf;1>Af;Af+=Kf)Lg.push(Ak(c,id,3*Vq*Af))}else Lg.push(Jk(id,ik(Id,Sd)),Jk(id,ik(Id,.99*Sd)),zj(id,ik(Id,.99*Sd)),zj(id,ik(Id,Sd)))}return n.concat(Lg,qd.reverse(),kf)}function Ws(c,n={}){var O;let {streamline:da=
.5,size:ra=16,last:Ea=!1}=n;if(0===c.length)return[];n=.15+.85*(1-da);c=Array.isArray(c[0])?c:c.map(({x:Dc,y:$c,pressure:sd=.5})=>[Dc,$c,sd]);if(2===c.length){var Ka=c[1];c=c.slice(0,-1);for(var fb=1;5>fb;fb++)c.push(Kl(c[0],Ka,fb/4))}1===c.length&&(c=[...c,[...Jk(c[0],[1,1]),...c[0].slice(2)]]);Ka=[{point:[c[0][0],c[0][1]],pressure:0<=c[0][2]?c[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];fb=!1;let ub=0,bc=Ka[0],tc=c.length-1;for(let Dc=1;Dc<c.length;Dc++){let $c=Ea&&Dc===tc?c[Dc].slice(0,
2):Kl(bc.point,c[Dc],n);if(Us(bc.point,$c))continue;let sd=sr($c,bc.point);if(ub+=sd,Dc<tc&&!fb){if(ub<ra)continue;fb=!0}bc={point:$c,pressure:0<=c[Dc][2]?c[Dc][2]:.5,vector:dn(zj(bc.point,$c)),distance:sd,runningLength:ub};Ka.push(bc)}return Ka[0].vector=(null==(O=Ka[1])?void 0:O.vector)||[0,0],Ka}function dp(c,n=4/3){return(new tq(c)).exportAsSVG(n)}function ep(c,n=4/3){return(new tq(c)).generatePreviewJsx(void 0,n)}function vl({id:c,type:n,onRemove:O,showContent:da}){const ra=$e(),{handlers:Ea}=
xx.default.useContext(wi),Ka=Ea.t;return(0,Xi.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,Xi.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Xi.jsx)(yx,{id:c,showReferenceContent:da})}),(0,Xi.jsx)("div",{className:"flex-1"}),Ea.getBlockPageName(c)!==ra.currentPage.name&&(0,Xi.jsx)(oh,{tooltip:Ka("whiteboard/open-page"),type:"button",onClick:()=>null==Ea?void 0:Ea.redirectToPage(c),children:(0,Xi.jsx)(ih,
{name:"open-as-page"})}),(0,Xi.jsx)(oh,{tooltip:Ka("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==Ea?void 0:Ea.sidebarAddBlock(c,"B"===n?"block":"page"),children:(0,Xi.jsx)(ih,{name:"move-to-sidebar-right"})}),O&&(0,Xi.jsx)(oh,{className:"tl-shape-links-panel-item-remove-button",tooltip:Ka("whiteboard/remove-link"),type:"button",onClick:O,children:(0,Xi.jsx)(ih,{name:"x",className:"!translate-y-0"})})]})}function Bk({options:c,value:n,onValueChange:O}){return(0,yn.jsx)(is.ToggleGroup,
{type:"single",value:n,onValueChange:O,children:c.map(da=>(0,yn.jsx)(Wg,{content:da.tooltip,children:(0,yn.jsx)("div",{className:"inline-flex",children:(0,yn.jsx)(is.ToggleGroupItem,{className:"tl-button",value:da.value,disabled:da.value===n,children:(0,yn.jsx)(ih,{name:da.icon})})})},da.value))})}function vi({options:c,value:n,onValueChange:O}){return(0,yn.jsx)(is.ToggleGroup,{className:"inline-flex",type:"multiple",value:n,onValueChange:O,children:c.map(da=>(0,yn.jsx)(is.ToggleGroupItem,{className:"tl-button",
value:da.value,children:(0,yn.jsx)(ih,{name:da.icon})},da.value))})}function tk(c){return $e().selectedShapesArray.filter(n=>!n.props.isLocked).filter(n=>{var O;return null==(O=rj[n.props.type])?void 0:O.includes(c)})}function wq(c){var n;c=c.match(/\.[0-9a-z]+$/i);if(!c)return"unknown";const O=c[0].toLowerCase();[c]=null!=(n=Object.entries(ps).find(([,da])=>da.includes(O)))?n:["unknown",null];return c}function Xk(...c){return(...n)=>ci(this,null,function*(){for(const O of c){const da=yield O(...n);
if(da&&0<da.length)return da}return null})}function Bm(c,n){return ci(this,null,function*(){return c.types.includes(n)?c instanceof DataTransfer?c.getData(n):yield(yield c.getType(n)).text():null})}function vr(){const {handlers:c}=Np.useContext(wi);return Np.useCallback((n,O)=>ci(this,null,function*(){if(O.shiftKey&&1===n.selectedShapesArray.length){var da=yield navigator.clipboard.read();let ra;0<da.length&&(da=(yield(yield da[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(da)&&
40===da.length?(da=da.slice(2,-2),qg(da)&&(ra=da)):/^\[\[.*\]\]$/.test(da)&&(ra=da.slice(2,-2)));if(ra){n.selectedShapesArray[0].update({refs:[ra]});n.persist();return}}qs(n,O,c)}),[])}function uk(){const c=vr();return Mp.useCallback((n,O)=>ci(this,[n,O],function*(da,{dataTransfer:ra,point:Ea}){c(da,{point:Ea,shiftKey:!1,dataTransfer:ra,fromDrop:!0})}),[])}function wr(){const {handlers:c}=ru.useContext(wi);return ru.useCallback((n,{text:O,html:da})=>{c.copyToClipboard(O,da)},[])}function xr(){return rs.default.useCallback(c=>
ci(this,null,function*(){setTimeout(()=>{c.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var hm=Object.create,wl=Object.defineProperty,fp=Object.defineProperties,gn=Object.getOwnPropertyDescriptor,mo=Object.getOwnPropertyDescriptors,hn=Object.getOwnPropertyNames,gp=Object.getOwnPropertySymbols,xq=Object.getPrototypeOf,no=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,Cm=(c,n,O)=>n in c?wl(c,n,{enumerable:!0,configurable:!0,writable:!0,value:O}):
c[n]=O,Ff=(c,n)=>{for(var O in n||={})no.call(n,O)&&Cm(c,O,n[O]);if(gp)for(O of gp(n))jn.call(n,O)&&Cm(c,O,n[O]);return c},rg=(c,n)=>fp(c,mo(n)),Zi=(c,n)=>{var O={},da;for(da in c)no.call(c,da)&&0>n.indexOf(da)&&(O[da]=c[da]);if(null!=c&&gp)for(da of gp(c))0>n.indexOf(da)&&jn.call(c,da)&&(O[da]=c[da]);return O},oo=(c,n)=>function(){return n||(0,c[hn(c)[0]])((n={exports:{}}).exports,n),n.exports},vk=(c,n,O,da)=>{if(n&&"object"===typeof n||"function"===typeof n)for(let ra of hn(n))no.call(c,ra)||ra===
O||wl(c,ra,{get:()=>n[ra],enumerable:!(da=gn(n,ra))||da.enumerable});return c},Sf=(c,n,O)=>(O=null!=c?hm(xq(c)):{},vk(!n&&c&&c.__esModule?O:wl(O,"default",{value:c,enumerable:!0}),c)),ye=(c,n,O,da)=>{for(var ra=1<da?void 0:da?gn(n,O):n,Ea=c.length-1,Ka;0<=Ea;Ea--)if(Ka=c[Ea])ra=(da?Ka(n,O,ra):Ka(ra))||ra;da&&ra&&wl(n,O,ra);return ra},yb=(c,n,O)=>{Cm(c,"symbol"!==typeof n?n+"":n,O);return O},ci=(c,n,O)=>new Promise((da,ra)=>{var Ea=ub=>{try{fb(O.next(ub))}catch(bc){ra(bc)}},Ka=ub=>{try{fb(O.throw(ub))}catch(bc){ra(bc)}},
fb=ub=>ub.done?da(ub.value):Promise.resolve(ub.value).then(Ea,Ka);fb((O=O.apply(c,n)).next())}),E=oo({["../../node_modules/rbush/rbush.min.js"](c,n){!function(O,da){"object"==typeof c&&"undefined"!=typeof n?n.exports=da():"function"==typeof define&&define.amd?define(da):(O=O||self).RBush=da()}(c,function(){function O(id,qd,xd,Sd,Id){!function dh(We,ig,kf,Vf,Lg){for(;Vf>kf;){if(600<Vf-kf){var Ig=Vf-kf+1,eh=ig-kf+1,Df=Math.log(Ig),Kf=.5*Math.exp(2*Df/3);Df=.5*Math.sqrt(Df*Kf*(Ig-Kf)/Ig)*(0>eh-Ig/2?
-1:1);dh(We,ig,Math.max(kf,Math.floor(ig-eh*Kf/Ig+Df)),Math.min(Vf,Math.floor(ig+(Ig-eh)*Kf/Ig+Df)),Lg)}Ig=We[ig];eh=kf;Kf=Vf;da(We,kf,ig);for(0<Lg(We[Vf],Ig)&&da(We,kf,Vf);eh<Kf;){da(We,eh,Kf);eh++;for(Kf--;0>Lg(We[eh],Ig);)eh++;for(;0<Lg(We[Kf],Ig);)Kf--}0===Lg(We[kf],Ig)?da(We,kf,Kf):da(We,++Kf,Vf);Kf<=ig&&(kf=Kf+1);ig<=Kf&&(Vf=Kf-1)}}(id,qd,xd||0,Sd||id.length-1,Id||ra)}function da(id,qd,xd){var Sd=id[qd];id[qd]=id[xd];id[xd]=Sd}function ra(id,qd){return id<qd?-1:id>qd?1:0}function Ea(id,qd){Ka(id,
0,id.children.length,qd,id)}function Ka(id,qd,xd,Sd,Id){Id||=od(null);Id.minX=1/0;Id.minY=1/0;Id.maxX=-1/0;for(Id.maxY=-1/0;qd<xd;qd++){var Ve=id.children[qd];fb(Id,id.leaf?Sd(Ve):Ve)}return Id}function fb(id,qd){return id.minX=Math.min(id.minX,qd.minX),id.minY=Math.min(id.minY,qd.minY),id.maxX=Math.max(id.maxX,qd.maxX),id.maxY=Math.max(id.maxY,qd.maxY),id}function ub(id,qd){return id.minX-qd.minX}function bc(id,qd){return id.minY-qd.minY}function tc(id){return(id.maxX-id.minX)*(id.maxY-id.minY)}
function Dc(id){return id.maxX-id.minX+(id.maxY-id.minY)}function $c(id,qd){return id.minX<=qd.minX&&id.minY<=qd.minY&&qd.maxX<=id.maxX&&qd.maxY<=id.maxY}function sd(id,qd){return qd.minX<=id.maxX&&qd.minY<=id.maxY&&qd.maxX>=id.minX&&qd.maxY>=id.minY}function od(id){return{children:id,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Gd(id,qd,xd,Sd,Id){for(var Ve=[qd,xd];Ve.length;)if(!((xd=Ve.pop())-(qd=Ve.pop())<=Sd)){var We=qd+Math.ceil((xd-qd)/Sd/2)*Sd;O(id,We,qd,xd,Id);Ve.push(qd,
We,We,xd)}}var Rd=function(id){void 0===id&&(id=9);this._maxEntries=Math.max(4,id);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return Rd.prototype.all=function(){return this._all(this.data,[])},Rd.prototype.search=function(id){var qd=this.data,xd=[];if(!sd(id,qd))return xd;for(var Sd=this.toBBox,Id=[];qd;){for(var Ve=0;Ve<qd.children.length;Ve++){var We=qd.children[Ve],ig=qd.leaf?Sd(We):We;sd(id,ig)&&(qd.leaf?xd.push(We):$c(id,ig)?this._all(We,xd):Id.push(We))}qd=Id.pop()}return xd},
Rd.prototype.collides=function(id){var qd=this.data;if(!sd(id,qd))return!1;for(var xd=[];qd;){for(var Sd=0;Sd<qd.children.length;Sd++){var Id=qd.children[Sd],Ve=qd.leaf?this.toBBox(Id):Id;if(sd(id,Ve)){if(qd.leaf||$c(id,Ve))return!0;xd.push(Id)}}qd=xd.pop()}return!1},Rd.prototype.load=function(id){if(!id||!id.length)return this;if(id.length<this._minEntries){for(var qd=0;qd<id.length;qd++)this.insert(id[qd]);return this}id=this._build(id.slice(),0,id.length-1,0);this.data.children.length?this.data.height===
id.height?this._splitRoot(this.data,id):(this.data.height<id.height&&(qd=this.data,this.data=id,id=qd),this._insert(id,this.data.height-id.height-1,!0)):this.data=id;return this},Rd.prototype.insert=function(id){return id&&this._insert(id,this.data.height-1),this},Rd.prototype.clear=function(){return this.data=od([]),this},Rd.prototype.remove=function(id,qd){if(!id)return this;for(var xd,Sd,Id,Ve=this.data,We=this.toBBox(id),ig=[],kf=[];Ve||ig.length;){if(Ve||(Ve=ig.pop(),Sd=ig[ig.length-1],xd=kf.pop(),
Id=!0),Ve.leaf){a:{var Vf=id;var Lg=Ve.children,dh=qd;if(dh){for(var Ig=0;Ig<Lg.length;Ig++)if(dh(Vf,Lg[Ig])){Vf=Ig;break a}Vf=-1}else Vf=Lg.indexOf(Vf)}if(-1!==Vf)return Ve.children.splice(Vf,1),ig.push(Ve),this._condense(ig),this}Id||Ve.leaf||!$c(Ve,We)?Sd?(xd++,Ve=Sd.children[xd],Id=!1):Ve=null:(ig.push(Ve),kf.push(xd),xd=0,Sd=Ve,Ve=Ve.children[0])}return this},Rd.prototype.toBBox=function(id){return id},Rd.prototype.compareMinX=function(id,qd){return id.minX-qd.minX},Rd.prototype.compareMinY=
function(id,qd){return id.minY-qd.minY},Rd.prototype.toJSON=function(){return this.data},Rd.prototype.fromJSON=function(id){return this.data=id,this},Rd.prototype._all=function(id,qd){for(var xd=[];id;)id.leaf?qd.push.apply(qd,id.children):xd.push.apply(xd,id.children),id=xd.pop();return qd},Rd.prototype._build=function(id,qd,xd,Sd){var Id,Ve=xd-qd+1,We=this._maxEntries;if(Ve<=We)return Ea(Id=od(id.slice(qd,xd+1)),this.toBBox),Id;Sd||(Sd=Math.ceil(Math.log(Ve)/Math.log(We)),We=Math.ceil(Ve/Math.pow(We,
Sd-1)));(Id=od([])).leaf=!1;Id.height=Sd;Ve=Math.ceil(Ve/We);We=Ve*Math.ceil(Math.sqrt(We));for(Gd(id,qd,xd,We,this.compareMinX);qd<=xd;qd+=We){var ig=Math.min(qd+We-1,xd);Gd(id,qd,ig,Ve,this.compareMinY);for(var kf=qd;kf<=ig;kf+=Ve)Id.children.push(this._build(id,kf,Math.min(kf+Ve-1,ig),Sd-1))}return Ea(Id,this.toBBox),Id},Rd.prototype._chooseSubtree=function(id,qd,xd,Sd){for(;Sd.push(qd),!qd.leaf&&Sd.length-1!==xd;){for(var Id=1/0,Ve=1/0,We=void 0,ig=0;ig<qd.children.length;ig++){var kf=qd.children[ig],
Vf=tc(kf),Lg=(dh=id,Ig=kf,(Math.max(Ig.maxX,dh.maxX)-Math.min(Ig.minX,dh.minX))*(Math.max(Ig.maxY,dh.maxY)-Math.min(Ig.minY,dh.minY))-Vf);Lg<Ve?(Ve=Lg,Id=Vf<Id?Vf:Id,We=kf):Lg===Ve&&Vf<Id&&(Id=Vf,We=kf)}qd=We||qd.children[0]}var dh,Ig;return qd},Rd.prototype._insert=function(id,qd,xd){xd=xd?id:this.toBBox(id);var Sd=[],Id=this._chooseSubtree(xd,this.data,qd,Sd);Id.children.push(id);for(fb(Id,xd);0<=qd&&Sd[qd].children.length>this._maxEntries;)this._split(Sd,qd),qd--;this._adjustParentBBoxes(xd,Sd,
qd)},Rd.prototype._split=function(id,qd){var xd=id[qd],Sd=xd.children.length,Id=this._minEntries;this._chooseSplitAxis(xd,Id,Sd);Sd=this._chooseSplitIndex(xd,Id,Sd);Sd=od(xd.children.splice(Sd,xd.children.length-Sd));Sd.height=xd.height;Sd.leaf=xd.leaf;Ea(xd,this.toBBox);Ea(Sd,this.toBBox);qd?id[qd-1].children.push(Sd):this._splitRoot(xd,Sd)},Rd.prototype._splitRoot=function(id,qd){this.data=od([id,qd]);this.data.height=id.height+1;this.data.leaf=!1;Ea(this.data,this.toBBox)},Rd.prototype._chooseSplitIndex=
function(id,qd,xd){for(var Sd,Id,Ve,We,ig,kf,Vf,Lg=1/0,dh=1/0,Ig=qd;Ig<=xd-qd;Ig++){var eh=Ka(id,0,Ig,this.toBBox),Df=Ka(id,Ig,xd,this.toBBox),Kf=(Id=eh,Ve=Df,We=void 0,ig=void 0,kf=void 0,Vf=void 0,We=Math.max(Id.minX,Ve.minX),ig=Math.max(Id.minY,Ve.minY),kf=Math.min(Id.maxX,Ve.maxX),Vf=Math.min(Id.maxY,Ve.maxY),Math.max(0,kf-We)*Math.max(0,Vf-ig));eh=tc(eh)+tc(Df);Kf<Lg?(Lg=Kf,Sd=Ig,dh=eh<dh?eh:dh):Kf===Lg&&eh<dh&&(dh=eh,Sd=Ig)}return Sd||xd-qd},Rd.prototype._chooseSplitAxis=function(id,qd,xd){var Sd=
id.leaf?this.compareMinX:ub,Id=id.leaf?this.compareMinY:bc;this._allDistMargin(id,qd,xd,Sd)<this._allDistMargin(id,qd,xd,Id)&&id.children.sort(Sd)},Rd.prototype._allDistMargin=function(id,qd,xd,Sd){id.children.sort(Sd);Sd=this.toBBox;for(var Id=Ka(id,0,qd,Sd),Ve=Ka(id,xd-qd,xd,Sd),We=Dc(Id)+Dc(Ve),ig=qd;ig<xd-qd;ig++){var kf=id.children[ig];fb(Id,id.leaf?Sd(kf):kf);We+=Dc(Id)}for(xd=xd-qd-1;xd>=qd;xd--)Id=id.children[xd],fb(Ve,id.leaf?Sd(Id):Id),We+=Dc(Ve);return We},Rd.prototype._adjustParentBBoxes=
function(id,qd,xd){for(;0<=xd;xd--)fb(qd[xd],id)},Rd.prototype._condense=function(id){for(var qd=id.length-1,xd=void 0;0<=qd;qd--)0===id[qd].children.length?0<qd?(xd=id[qd-1].children).splice(xd.indexOf(id[qd]),1):this.clear():Ea(id[qd],this.toBBox)},Rd})}}),ca=oo({["../../node_modules/fast-deep-equal/index.js"](c,n){n.exports=function Ea(da,ra){if(da===ra)return!0;if(da&&ra&&"object"==typeof da&&"object"==typeof ra){if(da.constructor!==ra.constructor)return!1;var Ka;if(Array.isArray(da)){var fb=
da.length;if(fb!=ra.length)return!1;for(Ka=fb;0!==Ka--;)if(!Ea(da[Ka],ra[Ka]))return!1;return!0}if(da.constructor===RegExp)return da.source===ra.source&&da.flags===ra.flags;if(da.valueOf!==Object.prototype.valueOf)return da.valueOf()===ra.valueOf();if(da.toString!==Object.prototype.toString)return da.toString()===ra.toString();var ub=Object.keys(da);fb=ub.length;if(fb!==Object.keys(ra).length)return!1;for(Ka=fb;0!==Ka--;)if(!Object.prototype.hasOwnProperty.call(ra,ub[Ka]))return!1;for(Ka=fb;0!==Ka--;)if(fb=
ub[Ka],!Ea(da[fb],ra[fb]))return!1;return!0}return da!==da&&ra!==ra}}}),ya=oo({["../../../../node_modules/deepmerge/dist/cjs.js"](c,n){function O(Dc,$c){return!1!==$c.clone&&$c.isMergeableObject(Dc)?ub(Array.isArray(Dc)?[]:{},Dc,$c):Dc}function da(Dc,$c,sd){return Dc.concat($c).map(function(od){return O(od,sd)})}function ra(Dc){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Dc).filter(function($c){return Object.propertyIsEnumerable.call(Dc,$c)}):[]}function Ea(Dc){return Object.keys(Dc).concat(ra(Dc))}
function Ka(Dc,$c){try{return $c in Dc}catch(sd){return!1}}function fb(Dc,$c,sd){var od={};sd.isMergeableObject(Dc)&&Ea(Dc).forEach(function(Gd){od[Gd]=O(Dc[Gd],sd)});Ea($c).forEach(function(Gd){if(!Ka(Dc,Gd)||Object.hasOwnProperty.call(Dc,Gd)&&Object.propertyIsEnumerable.call(Dc,Gd))if(Ka(Dc,Gd)&&sd.isMergeableObject($c[Gd])){if(sd.customMerge){var Rd=sd.customMerge(Gd);Rd="function"===typeof Rd?Rd:ub}else Rd=ub;od[Gd]=Rd(Dc[Gd],$c[Gd],sd)}else od[Gd]=O($c[Gd],sd)});return od}function ub(Dc,$c,sd){sd=
sd||{};sd.arrayMerge=sd.arrayMerge||da;sd.isMergeableObject=sd.isMergeableObject||bc;sd.cloneUnlessOtherwiseSpecified=O;var od=Array.isArray($c),Gd=Array.isArray(Dc);return od!==Gd?O($c,sd):od?sd.arrayMerge(Dc,$c,sd):fb(Dc,$c,sd)}var bc=function(Dc){var $c;if($c=!!Dc&&"object"===typeof Dc)$c=Object.prototype.toString.call(Dc),$c=!("[object RegExp]"===$c||"[object Date]"===$c||Dc.$$typeof===tc);return $c},tc="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;ub.all=function(Dc,
$c){if(!Array.isArray(Dc))throw Error("first argument should be an array");return Dc.reduce(function(sd,od){return ub(sd,od,$c)},{})};n.exports=ub}}),xa={};((c,n)=>{for(var O in n)wl(c,O,{get:n[O],enumerable:!0})})(xa,{App:()=>br,PreviewManager:()=>tq,generateJSXFromModel:()=>ep,generateSVGFromModel:()=>dp});Va.exports=(c=>vk(wl({},"__esModule",{value:!0}),c))(xa);var Na=(c=>{c.Yellow="yellow";c.Red="red";c.Pink="pink";c.Green="green";c.Blue="blue";c.Purple="purple";c.Gray="gray";c.Default="";return c})(Na||
{}),nb=(c=>{c.Box="box";c.Ellipse="ellipse";c.Polygon="polygon";return c})(nb||{}),Ib,Rb=new Uint8Array(16),Bc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,hd=[];for(let c=0;256>c;++c)hd.push((c+256).toString(16).slice(1));var yd,ae,fe=0,me=0,Te=function(c,n,O){O=n&&O||0;const da=n||Array(16);c=c||{};let ra=c.node||yd;var Ea=void 0!==c.clockseq?c.clockseq:ae;if(null==ra||null==Ea){var Ka=c.random||(c.rng||x)();null==ra&&(ra=
yd=[Ka[0]|1,Ka[1],Ka[2],Ka[3],Ka[4],Ka[5]]);null==Ea&&(Ea=ae=(Ka[6]<<8|Ka[7])&16383)}Ka=void 0!==c.msecs?c.msecs:Date.now();let fb=void 0!==c.nsecs?c.nsecs:me+1;const ub=Ka-fe+(fb-me)/1E4;0>ub&&void 0===c.clockseq&&(Ea=Ea+1&16383);(0>ub||Ka>fe)&&void 0===c.nsecs&&(fb=0);if(1E4<=fb)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");fe=Ka;me=fb;ae=Ea;Ka+=122192928E5;c=(1E4*(Ka&268435455)+fb)%4294967296;da[O++]=c>>>24&255;da[O++]=c>>>16&255;da[O++]=c>>>8&255;da[O++]=c&255;c=Ka/4294967296*
1E4&268435455;da[O++]=c>>>8&255;da[O++]=c&255;da[O++]=c>>>24&15|16;da[O++]=c>>>16&255;da[O++]=Ea>>>8|128;da[O++]=Ea&255;for(Ea=0;6>Ea;++Ea)da[O+Ea]=ra[Ea];return n||V(da)},hf=class{static clamp(c,n,O){return Math.max(n,"undefined"!==typeof O?Math.min(c,O):c)}static clampV(c,n,O){return c.map(da=>O?hf.clamp(da,n,O):hf.clamp(da,n))}static cross(c,n,O){return(n[0]-c[0])*(O[1]-c[1])-(O[0]-c[0])*(n[1]-c[1])}static snap(c,n=1){return[Math.round(c[0]/n)*n,Math.round(c[1]/n)*n]}},Hd=hf;Hd.neg=c=>[-c[0],-c[1]];
Hd.add=(c,n)=>[c[0]+n[0],c[1]+n[1]];Hd.addScalar=(c,n)=>[c[0]+n,c[1]+n];Hd.sub=(c,n)=>[c[0]-n[0],c[1]-n[1]];Hd.subScalar=(c,n)=>[c[0]-n,c[1]-n];Hd.vec=(c,n)=>[n[0]-c[0],n[1]-c[1]];Hd.mul=(c,n)=>[c[0]*n,c[1]*n];Hd.mulV=(c,n)=>[c[0]*n[0],c[1]*n[1]];Hd.div=(c,n)=>[c[0]/n,c[1]/n];Hd.divV=(c,n)=>[c[0]/n[0],c[1]/n[1]];Hd.per=c=>[c[1],-c[0]];Hd.dpr=(c,n)=>c[0]*n[0]+c[1]*n[1];Hd.cpr=(c,n)=>c[0]*n[1]-n[0]*c[1];Hd.len2=c=>c[0]*c[0]+c[1]*c[1];Hd.len=c=>Math.hypot(c[0],c[1]);Hd.pry=(c,n)=>hf.dpr(c,n)/hf.len(n);
Hd.uni=c=>hf.div(c,hf.len(c));Hd.normalize=c=>hf.uni(c);Hd.tangent=(c,n)=>hf.uni(hf.sub(c,n));Hd.dist2=(c,n)=>hf.len2(hf.sub(c,n));Hd.dist=(c,n)=>Math.hypot(c[1]-n[1],c[0]-n[0]);Hd.fastDist=(c,n)=>{c=[n[0]-c[0],n[1]-c[1]];n=[Math.abs(c[0]),Math.abs(c[1])];let O=1/Math.max(n[0],n[1]);O*=1.29289-(n[0]+n[1])*O*.29289;return[c[0]*O,c[1]*O]};Hd.ang=(c,n)=>Math.atan2(hf.cpr(c,n),hf.dpr(c,n));Hd.angle=(c,n)=>Math.atan2(n[1]-c[1],n[0]-c[0]);Hd.med=(c,n)=>hf.mul(hf.add(c,n),.5);Hd.rot=(c,n=0)=>[c[0]*Math.cos(n)-
c[1]*Math.sin(n),c[0]*Math.sin(n)+c[1]*Math.cos(n)];Hd.rotWith=(c,n,O=0)=>{if(0===O)return c;const da=Math.sin(O);O=Math.cos(O);const ra=c[0]-n[0];c=c[1]-n[1];return[ra*O-c*da+n[0],ra*da+c*O+n[1]]};Hd.isEqual=(c,n)=>c[0]===n[0]&&c[1]===n[1];Hd.lrp=(c,n,O)=>hf.add(c,hf.mul(hf.sub(n,c),O));Hd.int=(c,n,O,da,ra=1)=>{O=(hf.clamp(O,da)-O)/(da-O);return hf.add(hf.mul(c,1-O),hf.mul(n,ra))};Hd.ang3=(c,n,O)=>{c=hf.vec(n,c);n=hf.vec(n,O);return hf.ang(c,n)};Hd.abs=c=>[Math.abs(c[0]),Math.abs(c[1])];Hd.rescale=
(c,n)=>{const O=hf.len(c);return[n*c[0]/O,n*c[1]/O]};Hd.isLeft=(c,n,O)=>(n[0]-c[0])*(O[1]-c[1])-(O[0]-c[0])*(n[1]-c[1]);Hd.clockwise=(c,n,O)=>0<hf.isLeft(c,n,O);Hd.toFixed=c=>c.map(n=>Math.round(100*n)/100);Hd.nearestPointOnLineThroughPoint=(c,n,O)=>hf.add(c,hf.mul(n,hf.pry(hf.sub(O,c),n)));Hd.distanceToLineThroughPoint=(c,n,O)=>hf.dist(O,hf.nearestPointOnLineThroughPoint(c,n,O));Hd.nearestPointOnLineSegment=(c,n,O,da=!0)=>{const ra=hf.uni(hf.sub(n,c));O=hf.add(c,hf.mul(ra,hf.pry(hf.sub(O,c),ra)));
if(da){if(O[0]<Math.min(c[0],n[0]))return c[0]<n[0]?c:n;if(O[0]>Math.max(c[0],n[0]))return c[0]>n[0]?c:n;if(O[1]<Math.min(c[1],n[1]))return c[1]<n[1]?c:n;if(O[1]>Math.max(c[1],n[1]))return c[1]>n[1]?c:n}return O};Hd.distanceToLineSegment=(c,n,O,da=!0)=>hf.dist(O,hf.nearestPointOnLineSegment(c,n,O,da));Hd.nudge=(c,n,O)=>hf.isEqual(c,n)?c:hf.add(c,hf.mul(hf.uni(hf.sub(n,c)),O));Hd.nudgeAtAngle=(c,n,O)=>[Math.cos(n)*O+c[0],Math.sin(n)*O+c[1]];Hd.toPrecision=(c,n=4)=>[+c[0].toPrecision(n),+c[1].toPrecision(n)];
Hd.pointsBetween=(c,n,O=6)=>Array.from(Array(O)).map((da,ra)=>{da=ra/(O-1);ra=Math.min(1,.5+Math.abs(.5-da));return[...hf.lrp(c,n,da),ra]});Hd.slope=(c,n)=>c[0]===n[0]?NaN:(c[1]-n[1])/(c[0]-n[0]);Hd.toAngle=c=>{c=Math.atan2(c[1],c[0]);return 0>c?c+2*Math.PI:c};Hd.max=(...c)=>[Math.max(...c.map(n=>n[0])),Math.max(...c.map(n=>n[1]))];Hd.min=(...c)=>[Math.min(...c.map(n=>n[0])),Math.min(...c.map(n=>n[1]))];var ve=Hd,Qe=class{static getRectangleSides(c,n,O=0){const da=[c[0]+n[0]/2,c[1]+n[1]/2],ra=Hd.rotWith(c,
da,O),Ea=Hd.rotWith(Hd.add(c,[n[0],0]),da,O),Ka=Hd.rotWith(Hd.add(c,n),da,O);c=Hd.rotWith(Hd.add(c,[0,n[1]]),da,O);return[["top",[ra,Ea]],["right",[Ea,Ka]],["bottom",[Ka,c]],["left",[c,ra]]]}static getBoundsSides(c){return Qe.getRectangleSides([c.minX,c.minY],[c.width,c.height])}static expandBounds(c,n){return{minX:c.minX-n,minY:c.minY-n,maxX:c.maxX+n,maxY:c.maxY+n,width:c.width+2*n,height:c.height+2*n}}static boundsCollide(c,n){return!(c.maxX<n.minX||c.minX>n.maxX||c.maxY<n.minY||c.minY>n.maxY)}static boundsContain(c,
n){return Array.isArray(n)?c.minX<n[0]&&c.minY<n[1]&&c.maxY>n[1]&&c.maxX>n[0]:c.minX<n.minX&&c.minY<n.minY&&c.maxY>n.maxY&&c.maxX>n.maxX}static boundsContained(c,n){return Qe.boundsContain(n,c)}static boundsAreEqual(c,n){return!(n.maxX!==c.maxX||n.minX!==c.minX||n.maxY!==c.maxY||n.minY!==c.minY)}static getBoundsFromPoints(c,n=0){let O=Infinity,da=Infinity,ra=-Infinity,Ea=-Infinity;if(2>c.length)da=O=0,Ea=ra=1;else for(const Ka of c)O=Math.min(Ka[0],O),da=Math.min(Ka[1],da),ra=Math.max(Ka[0],ra),Ea=
Math.max(Ka[1],Ea);return 0!==n?Qe.getBoundsFromPoints(c.map(Ka=>Hd.rotWith(Ka,[(O+ra)/2,(da+Ea)/2],n))):{minX:O,minY:da,maxX:ra,maxY:Ea,width:Math.max(1,ra-O),height:Math.max(1,Ea-da)}}static centerBounds(c,n){const O=Qe.getBoundsCenter(c);return Qe.translateBounds(c,[n[0]-O[0],n[1]-O[1]])}static snapBoundsToGrid(c,n){const O=Math.round(c.minX/n)*n,da=Math.round(c.minY/n)*n,ra=Math.round(c.maxX/n)*n;c=Math.round(c.maxY/n)*n;return{minX:O,minY:da,maxX:ra,maxY:c,width:Math.max(1,ra-O),height:Math.max(1,
c-da)}}static translateBounds(c,n){return{minX:c.minX+n[0],minY:c.minY+n[1],maxX:c.maxX+n[0],maxY:c.maxY+n[1],width:c.width,height:c.height}}static multiplyBounds(c,n){const O=Qe.getBoundsCenter(c);return Qe.centerBounds({minX:c.minX*n,minY:c.minY*n,maxX:c.maxX*n,maxY:c.maxY*n,width:c.width*n,height:c.height*n},[O[0]*n,O[1]*n])}static divideBounds(c,n){const O=Qe.getBoundsCenter(c);return Qe.centerBounds({minX:c.minX/n,minY:c.minY/n,maxX:c.maxX/n,maxY:c.maxY/n,width:c.width/n,height:c.height/n},[O[0]/
n,O[1]/n])}static getRotatedBounds(c,n=0){c=Qe.getRotatedCorners(c,n);let O=n=Infinity,da=-Infinity,ra=-Infinity;for(const Ea of c)n=Math.min(Ea[0],n),O=Math.min(Ea[1],O),da=Math.max(Ea[0],da),ra=Math.max(Ea[1],ra);return{minX:n,minY:O,maxX:da,maxY:ra,width:Math.max(1,da-n),height:Math.max(1,ra-O),rotation:0}}static getRotatedEllipseBounds(c,n,O,da,ra=0){var Ea=Math.cos(ra);const Ka=Math.sin(ra);ra=Math.hypot(O*Ea,da*Ka);Ea=Math.hypot(O*Ka,da*Ea);return{minX:c+O-ra,minY:n+da-Ea,maxX:c+O+ra,maxY:n+
da+Ea,width:2*ra,height:2*Ea}}static getExpandedBounds(c,n){const O=Math.min(c.minX,n.minX),da=Math.min(c.minY,n.minY),ra=Math.max(c.maxX,n.maxX);c=Math.max(c.maxY,n.maxY);return{minX:O,minY:da,maxX:ra,maxY:c,width:Math.abs(ra-O),height:Math.abs(c-da)}}static getCommonBounds(c){if(2>c.length)return c[0];let n=c[0];for(let O=1;O<c.length;O++)n=Qe.getExpandedBounds(n,c[O]);return n}static getRotatedCorners(c,n=0){const O=[c.minX+c.width/2,c.minY+c.height/2];c=[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,
c.maxY],[c.minX,c.maxY]];return n?c.map(da=>Hd.rotWith(da,O,n)):c}static getTransformedBoundingBox(c,n,O,da=0,ra=!1){const [Ea,Ka]=[c.minX,c.minY],[fb,ub]=[c.maxX,c.maxY];let [bc,tc]=[c.minX,c.minY],[Dc,$c]=[c.maxX,c.maxY];if("center"===n)return{minX:bc+O[0],minY:tc+O[1],maxX:Dc+O[0],maxY:$c+O[1],width:Dc-bc,height:$c-tc,scaleX:1,scaleY:1};const [sd,od]=Hd.rot(O,-da);switch(n){case "top_edge":case "top_left_corner":case "top_right_corner":tc+=od;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":$c+=
od}switch(n){case "left_edge":case "top_left_corner":case "bottom_left_corner":bc+=sd;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":Dc+=sd}var Gd=fb-Ea;const Rd=ub-Ka;var id=(Dc-bc)/Gd,qd=($c-tc)/Rd;c=0>id;O=0>qd;var xd=Math.abs(Dc-bc),Sd=Math.abs($c-tc);if(ra)switch(ra=Gd/Rd,Gd=ra<xd/Sd,qd=1/ra*(0>qd?1:-1)*xd,id=Sd*(0>id?1:-1)*ra,n){case "top_left_corner":Gd?tc=$c+qd:bc=Dc+id;break;case "top_right_corner":Gd?tc=$c+qd:Dc=bc-id;break;case "bottom_right_corner":Gd?$c=tc-
qd:Dc=bc-id;break;case "bottom_left_corner":Gd?$c=tc-qd:bc=Dc+id;break;case "bottom_edge":case "top_edge":xd=(bc+Dc)/2;Sd*=ra;bc=xd-Sd/2;Dc=xd+Sd/2;break;case "left_edge":case "right_edge":Sd=(tc+$c)/2,xd/=ra,tc=Sd-xd/2,$c=Sd+xd/2}if(0!==da%(2*Math.PI)){xd=[0,0];Sd=Hd.med([Ea,Ka],[fb,ub]);id=Hd.med([bc,tc],[Dc,$c]);switch(n){case "top_left_corner":xd=Hd.sub(Hd.rotWith([Dc,$c],id,da),Hd.rotWith([fb,ub],Sd,da));break;case "top_right_corner":xd=Hd.sub(Hd.rotWith([bc,$c],id,da),Hd.rotWith([Ea,ub],Sd,
da));break;case "bottom_right_corner":xd=Hd.sub(Hd.rotWith([bc,tc],id,da),Hd.rotWith([Ea,Ka],Sd,da));break;case "bottom_left_corner":xd=Hd.sub(Hd.rotWith([Dc,tc],id,da),Hd.rotWith([fb,Ka],Sd,da));break;case "top_edge":xd=Hd.sub(Hd.rotWith(Hd.med([bc,$c],[Dc,$c]),id,da),Hd.rotWith(Hd.med([Ea,ub],[fb,ub]),Sd,da));break;case "left_edge":xd=Hd.sub(Hd.rotWith(Hd.med([Dc,tc],[Dc,$c]),id,da),Hd.rotWith(Hd.med([fb,Ka],[fb,ub]),Sd,da));break;case "bottom_edge":xd=Hd.sub(Hd.rotWith(Hd.med([bc,tc],[Dc,tc]),
id,da),Hd.rotWith(Hd.med([Ea,Ka],[fb,Ka]),Sd,da));break;case "right_edge":xd=Hd.sub(Hd.rotWith(Hd.med([bc,tc],[bc,$c]),id,da),Hd.rotWith(Hd.med([Ea,Ka],[Ea,ub]),Sd,da))}[bc,tc]=Hd.sub([bc,tc],xd);[Dc,$c]=Hd.sub([Dc,$c],xd)}Dc<bc&&([Dc,bc]=[bc,Dc]);$c<tc&&([$c,tc]=[tc,$c]);return{minX:bc,minY:tc,maxX:Dc,maxY:$c,width:Dc-bc,height:$c-tc,scaleX:(Dc-bc)/(fb-Ea||1)*(c?-1:1),scaleY:($c-tc)/(ub-Ka||1)*(O?-1:1)}}static getTransformAnchor(c,n,O){let da=c;switch(c){case "top_left_corner":da=n&&O?"bottom_right_corner":
n?"top_right_corner":O?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":da=n&&O?"bottom_left_corner":n?"top_left_corner":O?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":da=n&&O?"top_left_corner":n?"bottom_left_corner":O?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":da=n&&O?"top_right_corner":n?"bottom_right_corner":O?"top_left_corner":"top_right_corner"}return da}static getRelativeTransformedBoundingBox(c,n,O,da,ra){da=c.minX+
(da?n.maxX-O.maxX:O.minX-n.minX)/n.width*c.width;ra=c.minY+(ra?n.maxY-O.maxY:O.minY-n.minY)/n.height*c.height;const Ea=O.width/n.width*c.width;c=O.height/n.height*c.height;return{minX:da,minY:ra,maxX:da+Ea,maxY:ra+c,width:Ea,height:c}}static getRotatedSize(c,n){const O=Hd.div(c,2);c=[[0,0],[c[0],0],c,[0,c[1]]].map(da=>Hd.rotWith(da,O,n));c=Qe.getBoundsFromPoints(c);return[c.width,c.height]}static getBoundsCenter(c){return[c.minX+c.width/2,c.minY+c.height/2]}static getBoundsWithCenter(c){const n=Qe.getBoundsCenter(c);
return rg(Ff({},c),{midX:n[0],midY:n[1]})}static getCommonTopLeft(c){const n=[Infinity,Infinity];c.forEach(O=>{n[0]=Math.min(n[0],O[0]);n[1]=Math.min(n[1],O[1])});return n}static getTLSnapPoints(c,n,O){const da=Ff({},c);c=[0,0];const ra=[],Ea={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},Ka=["midX","minX","maxX"],fb=["midY","minY","maxY"];n=n.map($c=>{const sd=Ka.flatMap((Gd,
Rd)=>Ka.map((id,qd)=>{const xd=da[Gd]-$c[id];return{f:Gd,t:id,gap:xd,distance:Math.abs(xd),isCareful:0===Rd||3===Rd+qd}})),od=fb.flatMap((Gd,Rd)=>fb.map((id,qd)=>{const xd=da[Gd]-$c[id];return{f:Gd,t:id,gap:xd,distance:Math.abs(xd),isCareful:0===Rd||3===Rd+qd}}));return[$c,sd,od]});let ub=Infinity,bc=Infinity,tc=Infinity,Dc=Infinity;n.forEach(([,$c,sd])=>{$c.forEach(od=>{od.distance<O&&od.distance<tc&&(tc=od.distance,ub=od.gap)});sd.forEach(od=>{od.distance<O&&od.distance<Dc&&(Dc=od.distance,bc=od.gap)})});
n.forEach(([$c,sd,od])=>{Infinity!==ub&&sd.forEach(Gd=>{2>Math.abs(Gd.gap-ub)&&(Ea[Gd.f]=rg(Ff({},Ea[Gd.f]),{isSnapped:!0,to:$c[Gd.t],B:$c,distance:Gd.distance}))});Infinity!==bc&&od.forEach(Gd=>{2>Math.abs(Gd.gap-bc)&&(Ea[Gd.f]=rg(Ff({},Ea[Gd.f]),{isSnapped:!0,to:$c[Gd.t],B:$c,distance:Gd.distance}))})});c[0]=Infinity===ub?0:ub;c[1]=Infinity===bc?0:bc;da.minX-=c[0];da.midX-=c[0];da.maxX-=c[0];da.minY-=c[1];da.midY-=c[1];da.maxY-=c[1];Ka.forEach($c=>{$c=Ea[$c];if($c.isSnapped){var {id:sd,B:od}=$c;
$c=da[sd];ra.push("minX"===sd?[[$c,da.midY],[$c,od.minY],[$c,od.maxY]]:[[$c,da.minY],[$c,da.maxY],[$c,od.minY],[$c,od.maxY]])}});fb.forEach($c=>{$c=Ea[$c];if($c.isSnapped){var {id:sd,B:od}=$c;$c=da[sd];ra.push("midY"===sd?[[da.midX,$c],[od.minX,$c],[od.maxX,$c]]:[[da.minX,$c],[da.maxX,$c],[od.minX,$c],[od.maxX,$c]])}});return{offset:c,snapLines:ra}}static ensureRatio(c,n){const {width:O,height:da}=c,ra=Ff({},c);O/da<n?(ra.width=da*n,ra.maxX+=O-c.width):(ra.height=O/n,ra.maxY+=da-c.height);return ra}static getDistributions(c,
n){var O=c.map(Ea=>{const Ka=Ea.getBounds();return{id:Ea.id,point:[Ka.minX,Ka.minY],bounds:Ka,center:Ea.getCenter()}});c=O.length;var da=Qe.getCommonBounds(O.map(({bounds:Ea})=>Ea));const ra=[];switch(n){case "horizontal":n=O.reduce((Ea,Ka)=>Ea+Ka.bounds.width,0);if(n>da.width){const Ea=O.sort((bc,tc)=>bc.bounds.minX-tc.bounds.minX)[0],Ka=O.sort((bc,tc)=>tc.bounds.maxX-bc.bounds.maxX)[0];da=O.filter(bc=>bc!==Ea&&bc!==Ka).sort((bc,tc)=>bc.center[0]-tc.center[0]);const fb=(Ka.center[0]-Ea.center[0])/
(c-1),ub=Ea.center[0]+fb;da.forEach(({id:bc,point:tc,bounds:Dc},$c)=>{ra.push({id:bc,prev:tc,next:[ub+fb*$c-Dc.width/2,Dc.minY]})})}else{O=O.sort((fb,ub)=>fb.center[0]-ub.center[0]);let Ea=da.minX;const Ka=(da.width-n)/(c-1);O.forEach(({id:fb,point:ub,bounds:bc})=>{ra.push({id:fb,prev:ub,next:[Ea,bc.minY]});Ea+=bc.width+Ka})}break;case "vertical":if(n=O.reduce((Ea,Ka)=>Ea+Ka.bounds.height,0),n>da.height){const Ea=O.sort((bc,tc)=>bc.bounds.minY-tc.bounds.minY)[0],Ka=O.sort((bc,tc)=>tc.bounds.maxY-
bc.bounds.maxY)[0];da=O.filter(bc=>bc!==Ea&&bc!==Ka).sort((bc,tc)=>bc.center[1]-tc.center[1]);const fb=(Ka.center[1]-Ea.center[1])/(c-1),ub=Ea.center[1]+fb;da.forEach(({id:bc,point:tc,bounds:Dc},$c)=>{ra.push({id:bc,prev:tc,next:[Dc.minX,ub+fb*$c-Dc.height/2]})})}else{O=O.sort((fb,ub)=>fb.center[1]-ub.center[1]);let Ea=da.minY;const Ka=(da.height-n)/(c-1);O.forEach(({id:fb,point:ub,bounds:bc})=>{ra.push({id:fb,prev:ub,next:[bc.minX,Ea]});Ea+=bc.height+Ka})}}return ra}static getPackedDistributions(c){const n=
Qe.getCommonBounds(c.map(({bounds:ra})=>ra)),O=[n.minX,n.minY],da=Object.fromEntries(c.map(ra=>[ra.id,[ra.bounds.minX,ra.bounds.minY]]));c=c.filter(ra=>{var Ea,Ka,fb,ub;return!((null==(Ka=null==(Ea=ra.props.handles)?void 0:Ea.start)?0:Ka.bindingId)||(null==(ub=null==(fb=ra.props.handles)?void 0:fb.end)?0:ub.bindingId))}).map(ra=>{const Ea=ra.getBounds();return{id:ra.id,w:Ea.width+16,h:Ea.height+16,x:Ea.minX,y:Ea.minY}});y(c);return c.map(({id:ra,x:Ea,y:Ka})=>({id:ra,prev:da[ra],next:[Ea+O[0],Ka+O[1]]}))}},
oi=class{static pointInCircle(c,n,O){return Hd.dist(c,n)<=O}static pointInEllipse(c,n,O,da,ra=0){ra=ra||0;var Ea=Math.cos(ra);ra=Math.sin(ra);n=Hd.sub(c,n);c=Ea*n[0]+ra*n[1];Ea=ra*n[0]-Ea*n[1];return 1>=c*c/(O*O)+Ea*Ea/(da*da)}static pointInRect(c,n){return!(c[0]<n[0]||c[0]>c[0]+n[0]||c[1]<n[1]||c[1]>c[1]+n[1])}static pointInPolygon(c,n){let O=0;n.forEach((da,ra)=>{ra=n[(ra+1)%n.length];da[1]<=c[1]?ra[1]>c[1]&&0<Hd.cross(da,ra,c)&&(O+=1):ra[1]<=c[1]&&0>Hd.cross(da,ra,c)&&--O});return 0!==O}static pointInBounds(c,
n){return!(c[0]<n.minX||c[0]>n.maxX||c[1]<n.minY||c[1]>n.maxY)}static pointInPolyline(c,n,O=3){for(let da=1;da<n.length;da++)if(Hd.distanceToLineSegment(n[da-1],n[da],c)<O)return!0;return!1}static _getSqSegDist(c,n,O){let da=n[0];n=n[1];let ra=O[0]-da,Ea=O[1]-n;if(0!==ra||0!==Ea){const Ka=((c[0]-da)*ra+(c[1]-n)*Ea)/(ra*ra+Ea*Ea);1<Ka?(da=O[0],n=O[1]):0<Ka&&(da+=ra*Ka,n+=Ea*Ka)}ra=c[0]-da;Ea=c[1]-n;return ra*ra+Ea*Ea}static _simplifyStep(c,n,O,da,ra){let Ea=da,Ka=-1;for(let fb=n+1;fb<O;fb++){const ub=
oi._getSqSegDist(c[fb],c[n],c[O]);ub>Ea&&(Ka=fb,Ea=ub)}-1<Ka&&Ea>da&&(1<Ka-n&&oi._simplifyStep(c,n,Ka,da,ra),ra.push(c[Ka]),1<O-Ka&&oi._simplifyStep(c,Ka,O,da,ra))}static simplify2(c,n=1){if(2>=c.length)return c;n*=n;var O=c[0],da=c[1];const ra=[O];for(let Ea=1,Ka=c.length;Ea<Ka;Ea++)da=c[Ea],(da[0]-O[0])*(da[0]-O[0])+(da[1]-O[1])*(da[1]-O[1])>n&&(ra.push(da),O=da);O!==da&&ra.push(da);O=ra.length-1;da=[ra[0]];oi._simplifyStep(ra,0,O,n,da);da.push(ra[O],c[c.length-1]);return da}static pointNearToPolyline(c,
n,O=8){const da=n.length;for(let ra=1;ra<da;ra++)if(Hd.distanceToLineSegment(n[ra-1],n[ra],c)<O)return!0;return!1}},xh=oi;yb(xh,"simplify",(c,n=1)=>{var O=c.length;const da=c[0],ra=c[O-1],[Ea,Ka]=da,[fb,ub]=ra;if(2<O){let bc=0,tc=0;const Dc=Hd.len2([ub-Ka,fb-Ea]);for(let $c=1;$c<O-1;$c++){const [sd,od]=c[$c],Gd=Math.pow(sd*(ub-Ka)+Ea*(od-ub)+fb*(Ka-od),2)/Dc;bc>Gd||(bc=Gd,tc=$c)}if(bc>n)return O=oi.simplify(c.slice(0,tc+1),n),c=oi.simplify(c.slice(tc+1),n),O.concat(c.slice(1))}return[da,ra]});var Xh=
Math.PI,fi=Xh/2,Sg=2*Xh,Ai={},gi={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Fh=class{static circleFromThreePoints(c,n,O){const [da,
ra]=c,[Ea,Ka]=n,[fb,ub]=O;n=da*(Ka-ub)-ra*(Ea-fb)+Ea*ub-fb*Ka;c=-((da*da+ra*ra)*(ub-Ka)+(Ea*Ea+Ka*Ka)*(ra-ub)+(fb*fb+ub*ub)*(Ka-ra))/(2*n);n=-((da*da+ra*ra)*(Ea-fb)+(Ea*Ea+Ka*Ka)*(fb-da)+(fb*fb+ub*ub)*(da-Ea))/(2*n);return[c,n,Math.hypot(c-da,n-ra)]}static perimeterOfEllipse(c,n){const O=Math.pow(c-n,2)/Math.pow(c+n,2);return Xh*(c+n)*(1+3*O/(10+Math.sqrt(4-3*O)))}static shortAngleDist(c,n){c=(n-c)%Sg;return 2*c%Sg-c}static longAngleDist(c,n){return Sg-Fh.shortAngleDist(c,n)}static lerpAngles(c,n,
O){return c+Fh.shortAngleDist(c,n)*O}static angleDelta(c,n){return Fh.shortAngleDist(c,n)}static getSweep(c,n,O){return Fh.angleDelta(ve.angle(c,n),ve.angle(c,O))}static clampRadians(c){return(Sg+c)%Sg}static snapAngleToSegments(c,n){n=Sg/n;c=Math.floor((Fh.clampRadians(c)+n/2)/n)*n%Sg;c<Xh&&(c+=Sg);c>Xh&&(c-=Sg);return c}static isAngleBetween(c,n,O){if(O===c||O===n)return!0;n=(n-c+fi)%fi;return n<=Xh!==(O-c+fi)%fi>n}static degreesToRadians(c){return c*Xh/180}static radiansToDegrees(c){return 180*
c/Xh}static getArcLength(c,n,O,da){c=Fh.getSweep(c,O,da);return c/Sg*Sg*n}static getSweepFlag(c,n,O){O=ve.angle(c,O);return 0<(ve.angle(c,n)-O+3*Xh)%Sg-Xh?0:1}static getLargeArcFlag(c,n,O){c=ve.angle(O,c);n=(ve.angle(O,n)-c+3*Xh)%Sg-Xh;return Math.abs(n)>fi?0:1}static getArcDashOffset(c,n,O,da,ra){const Ea=Fh.getSweepFlag(c,O,da);n=Fh.getArcLength(c,n,O,da);return-(0>Ea?n:Sg*c[2]-n)/2+ra}static getEllipseDashOffset(c,n){return-(Sg*c[2])/2+-n}static radiansToCardinalDirection(c){return c<.25*Math.PI?
"north":c<.75*Math.PI?"east":c<1.25*Math.PI?"south":c<1.75*Math.PI?"west":"north"}},pi=class{static getPolygonCentroid(c){var n=c.map(O=>O[0]);c=c.map(O=>O[1]);n=Math.min(...n)+Math.max(...n);c=Math.min(...c)+Math.max(...c);return[n?n/2:0,c?c/2:0]}};yb(pi,"getEdges",c=>{const n=c.length;return c.map((O,da)=>[O,c[(da+1)%n]])});yb(pi,"getEdgeOutwardNormal",(c,n)=>ve.per(ve.uni(ve.sub(n,c))));yb(pi,"getEdgeInwardNormal",(c,n)=>ve.neg(pi.getEdgeOutwardNormal(c,n)));yb(pi,"getOffsetEdge",(c,n,O)=>{O=ve.mul(ve.per(ve.uni(ve.sub(n,
c))),O);return[ve.add(c,O),ve.add(n,O)]});yb(pi,"getOffsetEdges",(c,n)=>c.map(([O,da])=>pi.getOffsetEdge(O,da,n)));yb(pi,"getOffsetPolygon",(c,n)=>{if(1>c.length)throw Error("Expected at least one point.");if(1===c.length)return c=c[0],[ve.add(c,[-n,-n]),ve.add(c,[n,-n]),ve.add(c,[n,n]),ve.add(c,[-n,n])];if(2===c.length){const [O,da]=c;return[...pi.getOffsetEdge(O,da,n),...pi.getOffsetEdge(da,O,n)]}return pi.getOffsetEdges(pi.getEdges(c),n).flatMap((O,da,ra)=>{{da=ra[(da+1)%ra.length];const Ea=Hd.slope(O[0],
O[1]);ra=Hd.slope(da[0],da[1]);Ea!==ra?Number.isNaN(Ea)&&!Number.isNaN(ra)?O=[O[0][0],(O[0][0]-da[0][0])*ra+da[0][1]]:Number.isNaN(ra)&&!Number.isNaN(Ea)?O=[da[0][0],(da[0][0]-O[0][0])*Ea+O[0][1]]:(O=(Ea*O[0][0]-ra*da[0][0]+da[0][1]-O[0][1])/(Ea-ra),O=[O,ra*(O-da[0][0])+da[0][1]]):O=void 0}if(void 0===O)throw Error("Expected an intersection");return O})});yb(pi,"getPolygonVertices",(c,n,O=0,da=1)=>{c=ve.div(c,2);const [ra,Ea]=[Math.max(1,c[0]-O),Math.max(1,c[1]-O)];O=[];for(let bc=0,tc=Sg/n;bc<n;bc++){var Ka=
(-fi+bc*tc)%Sg,fb=(-fi+(bc+1)*tc)%Sg;Ka=ve.add(c,[ra*Math.cos(Ka),Ea*Math.sin(Ka)]);fb=ve.add(c,[ra*Math.cos(fb),Ea*Math.sin(fb)]);var ub=ve.med(Ka,fb);ub=ve.nudge(ub,c,ve.dist(c,ub)*(1-da));O.push(Ka,ub,fb)}return O});yb(pi,"getTriangleVertices",(c,n=0,O=1)=>{const [da,ra]=c;var Ea=1-O;c=[da/2,n/2];O=[da-n,ra-n];n=[n/2,ra-n];const Ka=pi.getPolygonCentroid([c,O,n]),fb=ve.med(c,O),ub=ve.med(O,n),bc=ve.med(n,c),tc=ve.dist(fb,Ka)*Ea,Dc=ve.dist(ub,Ka)*Ea;Ea*=ve.dist(bc,Ka);return[c,tc?ve.nudge(fb,Ka,
tc):fb,O,Dc?ve.nudge(ub,Ka,Dc):ub,n,Ea?ve.nudge(bc,Ka,Ea):bc]});yb(pi,"getStarVertices",(c,n,O,da=1)=>{const ra=ve.div(n,2),Ea=ve.mul(ra,da/2),Ka=Sg/O/2;return Array.from(Array(2*O)).map((fb,ub)=>{fb=-fi+ub*Ka;const [bc,tc]=ub%2?Ea:ra;return ve.add(c,[bc*Math.cos(fb),tc*Math.sin(fb)])})});var Xj=class{static getCurvedPathForPolygon(c){if(3>c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const n=["M",...c[0].slice(0,2),"Q"],O=c.length;for(let da=1;da<O;da++){const [ra,Ea]=c[da],
[Ka,fb]=c[(da+1)%O];n.push(ra,Ea,(ra+Ka)/2,(Ea+fb)/2)}n.push("Z");return n.join(" ")}static getCurvedPathForPoints(c){if(3>c.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const n=["M",...c[0].slice(0,2),"Q"],O=c.length;for(let da=1;da<O-1;da++){const [ra,Ea]=c[da],[Ka,fb]=c[da+1];n.push(ra,Ea,(ra+Ka)/2,(Ea+fb)/2)}return n.join(" ")}static getSvgPathFromStroke(c,n=!0){const O=c.length;if(4>O)return"";let da=c[0],ra=c[1];var Ea=c[2];Ea=`M${da[0].toFixed(2)},${da[1].toFixed(2)} Q${ra[0].toFixed(2)},${ra[1].toFixed(2)} ${((ra[0]+
Ea[0])/2).toFixed(2)},${((ra[1]+Ea[1])/2).toFixed(2)} T`;for(let Ka=2,fb=O-1;Ka<fb;Ka++)da=c[Ka],ra=c[Ka+1],Ea+=`${((da[0]+ra[0])/2).toFixed(2)},${((da[1]+ra[1])/2).toFixed(2)} `;n&&(Ea+="Z");return Ea}static getSvgPathFromStrokePoints(c,n=!1){const O=c.length;if(4>O)return"";let da=c[0].point,ra=c[1].point;var Ea=c[2].point;Ea=`M${da[0].toFixed(2)},${da[1].toFixed(2)} Q${ra[0].toFixed(2)},${ra[1].toFixed(2)} ${((ra[0]+Ea[0])/2).toFixed(2)},${((ra[1]+Ea[1])/2).toFixed(2)} T`;for(let Ka=2,fb=O-1;Ka<
fb;Ka++)da=c[Ka].point,ra=c[Ka+1].point,Ea+=`${((da[0]+ra[0])/2).toFixed(2)},${((da[1]+ra[1])/2).toFixed(2)} `;n&&(Ea+="Z");return Ea}};yb(Xj,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Ck={},Dm=Object.assign,xl=Object.getOwnPropertyDescriptor,Yk=Object.defineProperty,yq=Object.prototype,Xs=[];Object.freeze(Xs);var Ys={};Object.freeze(Ys);var Zy="undefined"!==typeof Proxy,$y=Object.toString(),hp=function(){},mv="undefined"!==typeof Object.getOwnPropertySymbols,yr="undefined"!==
typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:mv?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:Object.getOwnPropertyNames,az=Object.getOwnPropertyDescriptors||function(c){var n={};yr(c).forEach(function(O){n[O]=xl(c,O)});return n},Ll=Symbol("mobx-stored-annotations"),Gh=Symbol("mobx administration"),zq=function(){function c(O){void 0===O&&(O="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=
this.diffValue_=0;this.lowestObserverState_=Hi.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=O}var n=c.prototype;n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(O){return O()})};n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(O){return O()})};n.reportObserved=function(){return pb(this)};n.reportChanged=function(){Yb();vb(this);Ob()};n.toString=function(){return this.name_};return c}(),Zs=I("Atom",zq),ip={identity:function(c,n){return c===n},structural:function(c,n){return la(c,
n)},"default":function(c,n){return Object.is?Object.is(c,n):c===n?0!==c||1/c===1/n:c!==c&&n!==n},shallow:function(c,n){return la(c,n,1)}},bz="override",cz=Da(),Aq={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Aq);var nv=lb("observable"),dz=lb("observable.ref",{enhancer:Ma}),ez=lb("observable.shallow",{enhancer:function(c,n,O){if(void 0===c||null===c||rb(c)||bb(c)||kn(c)||ro(c))return c;if(Array.isArray(c))return Ug.array(c,{name:O,deep:!1});if(N(c))return Ug.object(c,void 0,
{name:O,deep:!1});if(R(c))return Ug.map(c,{name:O,deep:!1});if(S(c))return Ug.set(c,{name:O,deep:!1})}}),fz=lb("observable.struct",{enhancer:function(c,n){return la(c,n)?n:c}}),ov=wa(nv);Object.assign(gb,ov);var gz={box:function(c,n){n=n||Aq;return new po(c,Za(n),n.name,!0,n.equals)},array:function(c,n){n=n||Aq;return(!1===cg.useProxies||!1===n.proxy?f:ab)(c,Za(n),n.name)},map:function(c,n){n=n||Aq;return new zv(c,Za(n),n.name)},set:function(c,n){n=n||Aq;return new Av(c,Za(n),n.name)},object:function(c,
n,O){if(!1===cg.useProxies||!1===(null==O?void 0:O.proxy))O=Wb({},O);else{var da={},ra,Ea;z();da=Wb(da,O);O=null!=(Ea=(ra=da[Gh]).proxy_)?Ea:ra.proxy_=new Proxy(da,uz)}return Fc(O,c,n)},ref:wa(dz),shallow:wa(ez),deep:ov,struct:wa(fz)},Ug=Dm(gb,gz),pv=Ya("computed"),hz=Ya("computed.struct",{equals:ip.structural}),bh=function(c,n){if(A(n))return Ja(c,n,pv);if(N(c))return wa(Ya("computed",c));n=N(n)?n:{};n.get=c;n.name||(n.name=c.name||"");return new Bq(n)};Object.assign(bh,pv);bh.struct=wa(hz);var qv,
rv,zr=0,iz=1,jz=null!=(qv=null==(rv=xl(function(){},"name"))?void 0:rv.configurable)?qv:!1,sv={value:"action",configurable:!0,writable:!1,enumerable:!1};var kz=Symbol.toPrimitive;var po=function(c){function n(da,ra,Ea,Ka,fb){void 0===Ea&&(Ea="ObservableValue");void 0===fb&&(fb=ip["default"]);Ka=c.call(this,Ea)||this;Ka.enhancer=void 0;Ka.hasUnreportedChange_=!1;Ka.interceptors_=void 0;Ka.changeListeners_=void 0;Ka.value_=void 0;Ka.dehancer=void 0;Ka.enhancer=ra;Ka.name_=Ea;Ka.equals=fb;Ka.value_=
ra(da,void 0,Ea);return Ka}ha(n,c);var O=n.prototype;O.dehanceValue=function(da){return void 0!==this.dehancer?this.dehancer(da):da};O.set=function(da){da=this.prepareNewValue_(da);da!==cg.UNCHANGED&&this.setNewValue_(da)};O.prepareNewValue_=function(da){if(sb(this)){da=kb(this,{object:this,type:im,newValue:da});if(!da)return cg.UNCHANGED;da=da.newValue}da=this.enhancer(da,this.value_,this.name_);return this.equals(this.value_,da)?cg.UNCHANGED:da};O.setNewValue_=function(da){var ra=this.value_;this.value_=
da;this.reportChanged();Db(this)&&jc(this,{type:im,object:this,newValue:da,oldValue:ra})};O.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};O.intercept_=function(da){return Gb(this,da)};O.observe_=function(da,ra){ra&&da({observableKind:"value",debugObjectName:this.name_,object:this,type:im,newValue:this.value_,oldValue:void 0});return Eb(this,da)};O.raw=function(){return this.value_};O.toJSON=function(){return this.get()};O.toString=function(){return this.name_+"["+this.value_+
"]"};O.valueOf=function(){return ka(this.get())};O[kz]=function(){return this.valueOf()};return n}(zq),lz=I("ObservableValue",po);var mz=Symbol.toPrimitive;var Bq=function(){function c(O){this.dependenciesState_=Hi.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Hi.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new qo(null);this.triggeredBy_=
this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=jp.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;O.get||d(31);this.derivation=O.get;this.name_=O.name||"ComputedValue";O.set&&(this.setter_=Xa("ComputedValue-setter",O.set));this.equals_=O.equals||(O.compareStructural||O.struct?ip.structural:ip["default"]);this.scope_=O.context;this.requiresReaction_=O.requiresReaction;this.keepAlive_=
!!O.keepAlive}var n=c.prototype;n.onBecomeStale_=function(){ib(this)};n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(O){return O()})};n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(O){return O()})};n.get=function(){this.isComputing_&&d(32,this.name_,this.derivation);if(0!==cg.inBatch||0!==this.observers_.size||this.keepAlive_){if(pb(this),Vc(this)){var O=cg.trackingContext;this.keepAlive_&&!O&&(cg.trackingContext=this);this.trackAndCompute()&&Cb(this);cg.trackingContext=O}}else Vc(this)&&
(this.warnAboutUntrackedRead_(),Yb(),this.value_=this.computeValue_(!1),Ob());O=this.value_;if(O instanceof qo)throw O.cause;return O};n.set=function(O){if(this.setter_){this.isRunningSetter_&&d(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,O)}finally{this.isRunningSetter_=!1}}else d(34,this.name_)};n.trackAndCompute=function(){var O=this.value_,da=this.dependenciesState_===Hi.NOT_TRACKING_,ra=this.computeValue_(!0);if(O=da||O instanceof qo||ra instanceof qo||!this.equals_(O,
ra))this.value_=ra;return O};n.computeValue_=function(O){this.isComputing_=!0;var da=Zc(!1);if(O)var ra=Jc(this,this.derivation,this.scope_);else if(!0===cg.disableErrorBoundaries)ra=this.derivation.call(this.scope_);else try{ra=this.derivation.call(this.scope_)}catch(Ea){ra=new qo(Ea)}cg.allowStateChanges=da;this.isComputing_=!1;return ra};n.suspend_=function(){this.keepAlive_||(Pc(this),this.value_=void 0)};n.observe_=function(O,da){var ra=this,Ea=!0,Ka=void 0;return nc(function(){var fb=ra.get();
if(!Ea||da){var ub=hb();O({observableKind:"computed",debugObjectName:ra.name_,type:im,object:ra,newValue:fb,oldValue:Ka});cg.trackingDerivation=ub}Ea=!1;Ka=fb})};n.warnAboutUntrackedRead_=function(){};n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};n.valueOf=function(){return ka(this.get())};n[mz]=function(){return this.valueOf()};return c}(),Cq=I("ComputedValue",Bq),Hi;(function(c){c[c.NOT_TRACKING_=-1]="NOT_TRACKING_";c[c.UP_TO_DATE_=0]="UP_TO_DATE_";c[c.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";c[c.STALE_=2]="STALE_"})(Hi||={});var jp;(function(c){c[c.NONE=0]="NONE";c[c.LOG=1]="LOG";c[c.BREAK=2]="BREAK"})(jp||={});var qo=function(c){this.cause=c},Ar=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=
[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Br=!0,tv=!1,cg=function(){var c=G();0<c.__mobxInstanceCount&&!c.__mobxGlobals&&(Br=!1);c.__mobxGlobals&&c.__mobxGlobals.version!==(new Ar).version&&(Br=!1);if(Br){if(c.__mobxGlobals)return c.__mobxInstanceCount+=1,c.__mobxGlobals.UNCHANGED||(c.__mobxGlobals.UNCHANGED={}),c.__mobxGlobals;
c.__mobxInstanceCount=1;return c.__mobxGlobals=new Ar}setTimeout(function(){tv||d(35)},1);return new Ar}(),kp=function(){function c(O,da,ra,Ea){void 0===O&&(O="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Hi.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=jp.NONE;this.name_=O;this.onInvalidate_=
da;this.errorHandler_=ra;this.requiresObservable_=Ea}var n=c.prototype;n.onBecomeStale_=function(){this.schedule_()};n.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,cg.pendingReactions.push(this),0<cg.inBatch||cg.isRunningReactions||Cr(wb))};n.isScheduled=function(){return this.isScheduled_};n.runReaction_=function(){if(!this.isDisposed_){Yb();this.isScheduled_=!1;var O=cg.trackingContext;cg.trackingContext=this;if(Vc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(da){this.reportExceptionInDerivation_(da)}}cg.trackingContext=
O;Ob()}};n.track=function(O){if(!this.isDisposed_){Yb();this.isRunning_=!0;var da=cg.trackingContext;cg.trackingContext=this;O=Jc(this,O,void 0);cg.trackingContext=da;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Pc(this);O instanceof qo&&this.reportExceptionInDerivation_(O.cause);Ob()}};n.reportExceptionInDerivation_=function(O){var da=this;if(this.errorHandler_)this.errorHandler_(O,this);else{if(cg.disableErrorBoundaries)throw O;cg.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",O);cg.globalReactionErrorHandlers.forEach(function(ra){return ra(O,da)})}};n.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Yb(),Pc(this),Ob()))};n.getDisposer_=function(){var O=this.dispose.bind(this);O[Gh]=this;return O};n.toString=function(){return"Reaction["+this.name_+"]"};n.trace=function(O){void 0===O&&(O=!1);Qb(this,O)};return c}(),nz=100,Cr=function(c){return c()},Dr=I("Reaction",kp),uv="action",vv=Ca(uv),oz=Ca("action.bound",{bound:!0}),wv=Ca("autoAction",
{autoAction:!0}),xv=Ca("autoAction.bound",{autoAction:!0,bound:!0}),Gg=Gc(!1);Object.assign(Gg,vv);var Dq=Gc(!0);Object.assign(Dq,wv);Gg.bound=wa(oz);Dq.bound=wa(xv);var pz=function(c){return c()},qz="onBO",rz="onBUO",sz=0;Ec.prototype=Object.create(Error.prototype);var yv=Ba("flow"),tz=Ba("flow.bound",{bound:!0}),Eq=Object.assign(function(c,n){if(A(n))return Ja(c,n,yv);var O=c.name||"\x3cunnamed flow\x3e";n=function(){var da=arguments,ra=++sz,Ea=Gg(O+" - runid: "+ra+" - init",c).apply(this,da),Ka,
fb=void 0;da=new Promise(function(ub,bc){function tc(od){fb=void 0;try{var Gd=Gg(O+" - runid: "+ra+" - yield "+sd++,Ea.next).call(Ea,od)}catch(Rd){return bc(Rd)}$c(Gd)}function Dc(od){fb=void 0;try{var Gd=Gg(O+" - runid: "+ra+" - yield "+sd++,Ea["throw"]).call(Ea,od)}catch(Rd){return bc(Rd)}$c(Gd)}function $c(od){if(W(null==od?void 0:od.then))od.then($c,bc);else{if(od.done)return ub(od.value);fb=Promise.resolve(od.value);return fb.then(tc,Dc)}}var sd=0;Ka=bc;tc(void 0)});da.cancel=Gg(O+" - runid: "+
ra+" - cancel",function(){try{if(fb){var ub=fb;W(ub.cancel)&&ub.cancel()}var bc=Ea["return"](void 0),tc=Promise.resolve(bc.value);tc.then(hp,hp);W(tc.cancel)&&tc.cancel();Ka(new Ec)}catch(Dc){Ka(Dc)}});return da};n.isMobXFlow=!0;return n},yv);Eq.bound=wa(tz);var uz={has:function(c,n){return c[Gh].has_(n)},get:function(c,n){return c[Gh].get_(n)},set:function(c,n,O){var da;return A(n)?null!=(da=c[Gh].set_(n,O,!0))?da:!0:!1},deleteProperty:function(c,n){var O;return A(n)?null!=(O=c[Gh].delete_(n,!0))?
O:!0:!1},defineProperty:function(c,n,O){var da;return null!=(da=c[Gh].defineProperty_(n,O))?da:!0},ownKeys:function(c){return c[Gh].ownKeys_()},preventExtensions:function(c){d(13)}},im="update",vz={get:function(c,n){var O=c[Gh];return n===Gh?O:"length"===n?O.getArrayLength_():"string"!==typeof n||isNaN(n)?Y(Er,n)?Er[n]:c[n]:O.get_(parseInt(n))},set:function(c,n,O){var da=c[Gh];"length"===n&&da.setArrayLength_(O);"symbol"===typeof n||isNaN(n)?c[n]=O:da.set_(parseInt(n),O);return!0},preventExtensions:function(){d(15)}},
$s=function(){function c(O,da,ra,Ea){void 0===O&&(O="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ra;this.legacyMode_=Ea;this.atom_=new zq(O);this.enhancer_=function(Ka,fb){return da(Ka,fb,"ObservableArray[..]")}}var n=c.prototype;n.dehanceValue_=function(O){return void 0!==this.dehancer?this.dehancer(O):O};n.dehanceValues_=function(O){return void 0!==
this.dehancer&&0<O.length?O.map(this.dehancer):O};n.intercept_=function(O){return Gb(this,O)};n.observe_=function(O,da){void 0===da&&(da=!1);da&&O({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Eb(this,O)};n.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};n.setArrayLength_=function(O){("number"!==typeof O||isNaN(O)||0>O)&&
d("Out of range: "+O);var da=this.values_.length;if(O!==da)if(O>da){for(var ra=Array(O-da),Ea=0;Ea<O-da;Ea++)ra[Ea]=void 0;this.spliceWithArray_(da,0,ra)}else this.spliceWithArray_(O,da-O)};n.updateArrayLength_=function(O,da){O!==this.lastKnownLength_&&d(16);this.lastKnownLength_+=da;this.legacyMode_&&0<da&&ja(O+da+1)};n.spliceWithArray_=function(O,da,ra){var Ea=this,Ka=this.values_.length;void 0===O?O=0:O>Ka?O=Ka:0>O&&(O=Math.max(0,Ka+O));da=1===arguments.length?Ka-O:void 0===da||null===da?0:Math.max(0,
Math.min(da,Ka-O));void 0===ra&&(ra=Xs);if(sb(this)){var fb=kb(this,{object:this.proxy_,type:"splice",index:O,removedCount:da,added:ra});if(!fb)return Xs;da=fb.removedCount;ra=fb.added}ra=0===ra.length?ra:ra.map(function(ub){return Ea.enhancer_(ub,void 0)});this.legacyMode_&&this.updateArrayLength_(Ka,ra.length-da);Ka=this.spliceItemsIntoValues_(O,da,ra);0===da&&0===ra.length||this.notifyArraySplice_(O,ra,Ka);return this.dehanceValues_(Ka)};n.spliceItemsIntoValues_=function(O,da,ra){if(1E4>ra.length){var Ea;
return(Ea=this.values_).splice.apply(Ea,[O,da].concat(ra))}Ea=this.values_.slice(O,O+da);var Ka=this.values_.slice(O+da);this.values_.length+=ra.length-da;for(da=0;da<ra.length;da++)this.values_[O+da]=ra[da];for(da=0;da<Ka.length;da++)this.values_[O+ra.length+da]=Ka[da];return Ea};n.notifyArrayChildUpdate_=function(O,da,ra){var Ea=!this.owned_&&!1,Ka=Db(this);O=Ka||Ea?{observableKind:"array",object:this.proxy_,type:im,debugObjectName:this.atom_.name_,index:O,newValue:da,oldValue:ra}:null;this.atom_.reportChanged();
Ka&&jc(this,O)};n.notifyArraySplice_=function(O,da,ra){var Ea=!this.owned_&&!1,Ka=Db(this);O=Ka||Ea?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:O,removed:ra,added:da,removedCount:ra.length,addedCount:da.length}:null;this.atom_.reportChanged();Ka&&jc(this,O)};n.get_=function(O){if(this.legacyMode_&&O>=this.values_.length)console.warn("[mobx] Out of bounds read: "+O);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[O])};n.set_=
function(O,da){var ra=this.values_;this.legacyMode_&&O>ra.length&&d(17,O,ra.length);if(O<ra.length){var Ea=ra[O];if(sb(this)){da=kb(this,{type:im,object:this.proxy_,index:O,newValue:da});if(!da)return;da=da.newValue}da=this.enhancer_(da,Ea);da!==Ea&&(ra[O]=da,this.notifyArrayChildUpdate_(O,da,Ea))}else{O=Array(O+1-ra.length);for(Ea=0;Ea<O.length-1;Ea++)O[Ea]=void 0;O[O.length-1]=da;this.spliceWithArray_(ra.length,0,O)}};return c}(),Er={clear:function(){return this.splice(0)},replace:function(c){var n=
this[Gh];return n.spliceWithArray_(0,n.values_.length,c)},toJSON:function(){return this.slice()},splice:function(c,n){for(var O=arguments.length,da=Array(2<O?O-2:0),ra=2;ra<O;ra++)da[ra-2]=arguments[ra];O=this[Gh];switch(arguments.length){case 0:return[];case 1:return O.spliceWithArray_(c);case 2:return O.spliceWithArray_(c,n)}return O.spliceWithArray_(c,n,da)},spliceWithArray:function(c,n,O){return this[Gh].spliceWithArray_(c,n,O)},push:function(){for(var c=this[Gh],n=arguments.length,O=Array(n),
da=0;da<n;da++)O[da]=arguments[da];c.spliceWithArray_(c.values_.length,0,O);return c.values_.length},pop:function(){return this.splice(Math.max(this[Gh].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var c=this[Gh],n=arguments.length,O=Array(n),da=0;da<n;da++)O[da]=arguments[da];c.spliceWithArray_(0,0,O);return c.values_.length},reverse:function(){cg.trackingDerivation&&d(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){cg.trackingDerivation&&
d(37,"sort");var c=this.slice();c.sort.apply(c,arguments);this.replace(c);return this},remove:function(c){var n=this[Gh];c=n.dehanceValues_(n.values_).indexOf(c);return-1<c?(this.splice(c,1),!0):!1}};eb("concat",Wa);eb("flat",Wa);eb("includes",Wa);eb("indexOf",Wa);eb("join",Wa);eb("lastIndexOf",Wa);eb("slice",Wa);eb("toString",Wa);eb("toLocaleString",Wa);eb("every",mb);eb("filter",mb);eb("find",mb);eb("findIndex",mb);eb("flatMap",mb);eb("forEach",mb);eb("map",mb);eb("some",mb);eb("reduce",Bb);eb("reduceRight",
Bb);var wz=I("ObservableArrayAdministration",$s),xz={};var yz=Symbol.iterator;var zz=Symbol.toStringTag;var zv=function(){function c(O,da,ra){var Ea=this;void 0===da&&(da=za);void 0===ra&&(ra="ObservableMap");this.name_=this.enhancer_=void 0;this[Gh]=xz;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=da;this.name_=ra;W(Map)||d(18);this.keysAtom_=db("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;ec(!0,function(){Ea.merge(O)})}
var n=c.prototype;n.has_=function(O){return this.data_.has(O)};n.has=function(O){var da=this;if(!cg.trackingDerivation)return this.has_(O);var ra=this.hasMap_.get(O);if(!ra){var Ea=ra=new po(this.has_(O),Ma,"ObservableMap.key?",!1);this.hasMap_.set(O,Ea);td(Ea,function(){return da.hasMap_["delete"](O)})}return ra.get()};n.set=function(O,da){var ra=this.has_(O);if(sb(this)){da=kb(this,{type:ra?im:"add",object:this,newValue:da,name:O});if(!da)return this;da=da.newValue}ra?this.updateValue_(O,da):this.addValue_(O,
da);return this};n["delete"]=function(O){var da=this;if(sb(this)&&!kb(this,{type:"delete",object:this,name:O}))return!1;if(this.has_(O)){var ra=Db(this),Ea=ra?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(O).value_,name:O}:null;sc(function(){var Ka;da.keysAtom_.reportChanged();null==(Ka=da.hasMap_.get(O))?void 0:Ka.setNewValue_(!1);da.data_.get(O).setNewValue_(void 0);da.data_["delete"](O)});ra&&jc(this,Ea);return!0}return!1};n.updateValue_=function(O,
da){var ra=this.data_.get(O);da=ra.prepareNewValue_(da);if(da!==cg.UNCHANGED){var Ea=Db(this);O=Ea?{observableKind:"map",debugObjectName:this.name_,type:im,object:this,oldValue:ra.value_,name:O,newValue:da}:null;ra.setNewValue_(da);Ea&&jc(this,O)}};n.addValue_=function(O,da){var ra=this;sc(function(){var fb,ub=new po(da,ra.enhancer_,"ObservableMap.key",!1);ra.data_.set(O,ub);da=ub.value_;null==(fb=ra.hasMap_.get(O))?void 0:fb.setNewValue_(!0);ra.keysAtom_.reportChanged()});var Ea=Db(this),Ka=Ea?{observableKind:"map",
debugObjectName:this.name_,type:"add",object:this,name:O,newValue:da}:null;Ea&&jc(this,Ka)};n.get=function(O){return this.has(O)?this.dehanceValue_(this.data_.get(O).get()):this.dehanceValue_(void 0)};n.dehanceValue_=function(O){return void 0!==this.dehancer?this.dehancer(O):O};n.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};n.values=function(){var O=this,da=this.keys();return $a({next:function(){var ra=da.next(),Ea=ra.done;ra=ra.value;return{done:Ea,value:Ea?void 0:O.get(ra)}}})};
n.entries=function(){var O=this,da=this.keys();return $a({next:function(){var ra=da.next(),Ea=ra.done;ra=ra.value;return{done:Ea,value:Ea?void 0:[ra,O.get(ra)]}}})};n[yz]=function(){return this.entries()};n.forEach=function(O,da){for(var ra=qa(this),Ea;!(Ea=ra()).done;)Ea=Ea.value,O.call(da,Ea[1],Ea[0],this)};n.merge=function(O){var da=this;kn(O)&&(O=new Map(O));sc(function(){N(O)?P(O).forEach(function(ra){return da.set(ra,O[ra])}):Array.isArray(O)?O.forEach(function(ra){return da.set(ra[0],ra[1])}):
R(O)?(O.constructor!==Map&&d(19,O),O.forEach(function(ra,Ea){return da.set(Ea,ra)})):null!==O&&void 0!==O&&d(20,O)});return this};n.clear=function(){var O=this;sc(function(){Ta(function(){for(var da=qa(O.keys()),ra;!(ra=da()).done;)O["delete"](ra.value)})})};n.replace=function(O){var da=this;sc(function(){for(var ra=zb(O),Ea=new Map,Ka=!1,fb=qa(da.data_.keys()),ub;!(ub=fb()).done;)if(ub=ub.value,!ra.has(ub))if(da["delete"](ub))Ka=!0;else{var bc=da.data_.get(ub);Ea.set(ub,bc)}for(ra=qa(ra.entries());!(fb=
ra()).done;)ub=fb.value,fb=ub[0],bc=ub[1],ub=da.data_.has(fb),da.set(fb,bc),da.data_.has(fb)&&(bc=da.data_.get(fb),Ea.set(fb,bc),ub||(Ka=!0));if(!Ka)if(da.data_.size!==Ea.size)da.keysAtom_.reportChanged();else for(Ka=da.data_.keys(),ra=Ea.keys(),fb=Ka.next(),ub=ra.next();!fb.done;){if(fb.value!==ub.value){da.keysAtom_.reportChanged();break}fb=Ka.next();ub=ra.next()}da.data_=Ea});return this};n.toString=function(){return"[object ObservableMap]"};n.toJSON=function(){return Array.from(this)};n.observe_=
function(O,da){return Eb(this,O)};n.intercept_=function(O){return Gb(this,O)};ba(c,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:zz,get:function(){return"Map"}}]);return c}(),kn=I("ObservableMap",zv),Az={};var Bz=Symbol.iterator;var Cz=Symbol.toStringTag;var Av=function(){function c(O,da,ra){void 0===da&&(da=za);void 0===ra&&(ra="ObservableSet");this.name_=void 0;this[Gh]=Az;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=
this.atom_=void 0;this.name_=ra;W(Set)||d(22);this.atom_=db(this.name_);this.enhancer_=function(Ea,Ka){return da(Ea,Ka,ra)};O&&this.replace(O)}var n=c.prototype;n.dehanceValue_=function(O){return void 0!==this.dehancer?this.dehancer(O):O};n.clear=function(){var O=this;sc(function(){Ta(function(){for(var da=qa(O.data_.values()),ra;!(ra=da()).done;)O["delete"](ra.value)})})};n.forEach=function(O,da){for(var ra=qa(this),Ea;!(Ea=ra()).done;)Ea=Ea.value,O.call(da,Ea,Ea,this)};n.add=function(O){var da=
this;if(sb(this)&&!kb(this,{type:"add",object:this,newValue:O}))return this;if(!this.has(O)){sc(function(){da.data_.add(da.enhancer_(O,void 0));da.atom_.reportChanged()});var ra=Db(this),Ea=ra?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:O}:null;ra&&jc(this,Ea)}return this};n["delete"]=function(O){var da=this;if(sb(this)&&!kb(this,{type:"delete",object:this,oldValue:O}))return!1;if(this.has(O)){var ra=Db(this),Ea=ra?{observableKind:"set",debugObjectName:this.name_,
type:"delete",object:this,oldValue:O}:null;sc(function(){da.atom_.reportChanged();da.data_["delete"](O)});ra&&jc(this,Ea);return!0}return!1};n.has=function(O){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(O))};n.entries=function(){var O=0,da=Array.from(this.keys()),ra=Array.from(this.values());return $a({next:function(){var Ea=O;O+=1;return Ea<ra.length?{value:[da[Ea],ra[Ea]],done:!1}:{done:!0}}})};n.keys=function(){return this.values()};n.values=function(){this.atom_.reportObserved();
var O=this,da=0,ra=Array.from(this.data_.values());return $a({next:function(){return da<ra.length?{value:O.dehanceValue_(ra[da++]),done:!1}:{done:!0}}})};n.replace=function(O){var da=this;ro(O)&&(O=new Set(O));sc(function(){Array.isArray(O)?(da.clear(),O.forEach(function(ra){return da.add(ra)})):S(O)?(da.clear(),O.forEach(function(ra){return da.add(ra)})):null!==O&&void 0!==O&&d("Cannot initialize set from "+O)});return this};n.observe_=function(O,da){return Eb(this,O)};n.intercept_=function(O){return Gb(this,
O)};n.toJSON=function(){return Array.from(this)};n.toString=function(){return"[object ObservableSet]"};n[Bz]=function(){return this.values()};ba(c,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:Cz,get:function(){return"Set"}}]);return c}(),ro=I("ObservableSet",Av),Bv=Object.create(null),Cv=function(){function c(O,da,ra,Ea){void 0===da&&(da=new Map);void 0===Ea&&(Ea=cz);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=
this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=O;this.values_=da;this.name_=ra;this.defaultAnnotation_=Ea;this.keysAtom_=new zq("ObservableObject.keys");this.isPlainObject_=N(this.target_)}var n=c.prototype;n.getObservablePropValue_=function(O){return this.values_.get(O).get()};n.setObservablePropValue_=function(O,da){var ra=this.values_.get(O);if(ra instanceof Bq)return ra.set(da),!0;if(sb(this)){da=kb(this,{type:im,object:this.proxy_||
this.target_,name:O,newValue:da});if(!da)return null;da=da.newValue}da=ra.prepareNewValue_(da);if(da!==cg.UNCHANGED){var Ea=Db(this);O=Ea?{type:im,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ra.value_,name:O,newValue:da}:null;ra.setNewValue_(da);Ea&&jc(this,O)}return!0};n.get_=function(O){cg.trackingDerivation&&!Y(this.target_,O)&&this.has_(O);return this.target_[O]};n.set_=function(O,da,ra){void 0===ra&&(ra=!1);if(Y(this.target_,O)){if(this.values_.has(O))return this.setObservablePropValue_(O,
da);if(ra)return Reflect.set(this.target_,O,da);this.target_[O]=da;return!0}return this.extend_(O,{value:da,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ra)};n.has_=function(O){if(!cg.trackingDerivation)return O in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var da=this.pendingKeys_.get(O);da||(da=new po(O in this.target_,Ma,"ObservableObject.key?",!1),this.pendingKeys_.set(O,da));return da.get()};n.make_=function(O,da){!0===da&&(da=this.defaultAnnotation_);if(!1!==
da){if(!(O in this.target_)){var ra;if(null!=(ra=this.target_[Ll])&&ra[O])return;d(1,da.annotationType_,this.name_+"."+O.toString())}for(ra=this.target_;ra&&ra!==yq;){var Ea=xl(ra,O);if(Ea){Ea=da.make_(this,O,Ea,ra);if(0===Ea)return;if(1===Ea)break}ra=Object.getPrototypeOf(ra)}var Ka;null==(Ka=this.target_[Ll])?!0:delete Ka[O]}};n.extend_=function(O,da,ra,Ea){void 0===Ea&&(Ea=!1);!0===ra&&(ra=this.defaultAnnotation_);if(!1===ra)return this.defineProperty_(O,da,Ea);if(da=ra.extend_(this,O,da,Ea)){var Ka;
null==(Ka=this.target_[Ll])?!0:delete Ka[O]}return da};n.defineProperty_=function(O,da,ra){void 0===ra&&(ra=!1);try{Yb();var Ea=this.delete_(O);if(!Ea)return Ea;if(sb(this)){var Ka=kb(this,{object:this.proxy_||this.target_,name:O,type:"add",newValue:da.value});if(!Ka)return null;var fb=Ka.newValue;da.value!==fb&&(da=X({},da,{value:fb}))}if(ra){if(!Reflect.defineProperty(this.target_,O,da))return!1}else Yk(this.target_,O,da);this.notifyPropertyAddition_(O,da.value)}finally{Ob()}return!0};n.defineObservableProperty_=
function(O,da,ra,Ea){void 0===Ea&&(Ea=!1);try{Yb();var Ka=this.delete_(O);if(!Ka)return Ka;if(sb(this)){var fb=kb(this,{object:this.proxy_||this.target_,name:O,type:"add",newValue:da});if(!fb)return null;da=fb.newValue}var ub=Ac(O),bc={configurable:cg.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:ub.get,set:ub.set};if(Ea){if(!Reflect.defineProperty(this.target_,O,bc))return!1}else Yk(this.target_,O,bc);var tc=new po(da,ra,"ObservableObject.key",!1);this.values_.set(O,tc);this.notifyPropertyAddition_(O,
tc.value_)}finally{Ob()}return!0};n.defineComputedProperty_=function(O,da,ra){void 0===ra&&(ra=!1);try{Yb();var Ea=this.delete_(O);if(!Ea)return Ea;if(sb(this)&&!kb(this,{object:this.proxy_||this.target_,name:O,type:"add",newValue:void 0}))return null;da.name||(da.name="ObservableObject.key");da.context=this.proxy_||this.target_;var Ka=Ac(O),fb={configurable:cg.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Ka.get,set:Ka.set};if(ra){if(!Reflect.defineProperty(this.target_,O,fb))return!1}else Yk(this.target_,
O,fb);this.values_.set(O,new Bq(da));this.notifyPropertyAddition_(O,void 0)}finally{Ob()}return!0};n.delete_=function(O,da){void 0===da&&(da=!1);if(!Y(this.target_,O))return!0;if(sb(this)&&!kb(this,{object:this.proxy_||this.target_,name:O,type:"remove"}))return null;try{var ra,Ea;Yb();var Ka=Db(this),fb=this.values_.get(O),ub=void 0;if(!fb&&Ka){var bc;ub=null==(bc=xl(this.target_,O))?void 0:bc.value}if(da){if(!Reflect.deleteProperty(this.target_,O))return!1}else delete this.target_[O];fb&&(this.values_["delete"](O),
fb instanceof po&&(ub=fb.value_),vb(fb));this.keysAtom_.reportChanged();null==(ra=this.pendingKeys_)?void 0:null==(Ea=ra.get(O))?void 0:Ea.set(O in this.target_);if(Ka){var tc={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:ub,name:O};Ka&&jc(this,tc)}}finally{Ob()}return!0};n.observe_=function(O,da){return Eb(this,O)};n.intercept_=function(O){return Gb(this,O)};n.notifyPropertyAddition_=function(O,da){var ra,Ea,Ka=Db(this);Ka&&(da=Ka?{type:"add",
observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:O,newValue:da}:null,Ka&&jc(this,da));null==(ra=this.pendingKeys_)?void 0:null==(Ea=ra.get(O))?void 0:Ea.set(!0);this.keysAtom_.reportChanged()};n.ownKeys_=function(){this.keysAtom_.reportObserved();return yr(this.target_)};n.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return c}(),Dz=I("ObservableObjectAdministration",Cv),Ez=sa(0),at=0,Dv=function(){};(function(c,n){Object.setPrototypeOf?
Object.setPrototypeOf(c.prototype,n):void 0!==c.prototype.__proto__?c.prototype.__proto__=n:c.prototype=n})(Dv,Array.prototype);var bt=function(c,n,O){function da(Ea,Ka,fb,ub){void 0===fb&&(fb="ObservableArray");void 0===ub&&(ub=!1);var bc=c.call(this)||this;Ka=new $s(fb,Ka,ub,!0);Ka.proxy_=fa(bc);M(fa(bc),Gh,Ka);Ea&&Ea.length&&(Ka=Zc(!0),bc.spliceWithArray(0,0,Ea),cg.allowStateChanges=Ka);Object.defineProperty(fa(bc),"0",Ez);return bc}ha(da,c);var ra=da.prototype;ra.concat=function(){this[Gh].atom_.reportObserved();
for(var Ea=arguments.length,Ka=Array(Ea),fb=0;fb<Ea;fb++)Ka[fb]=arguments[fb];return Array.prototype.concat.apply(this.slice(),Ka.map(function(ub){return bb(ub)?ub.slice():ub}))};ra[O]=function(){var Ea=this,Ka=0;return $a({next:function(){return Ka<Ea.length?{value:Ea[Ka++],done:!1}:{done:!0,value:void 0}}})};ba(da,[{key:"length",get:function(){return this[Gh].getArrayLength_()},set:function(Ea){this[Gh].setArrayLength_(Ea)}},{key:n,get:function(){return"Array"}}]);return da}(Dv,Symbol.toStringTag,
Symbol.iterator);Object.entries(Er).forEach(function(c){var n=c[0];c=c[1];"concat"!==n&&q(bt.prototype,n,c)});ja(1E3);var Ev=yq.toString;["Symbol","Map","Set"].forEach(function(c){"undefined"===typeof G()[c]&&d("MobX requires global '"+c+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:fc,extras:{getDebugName:Ia},$mobx:Gh});var Fz=Z(282),Yj=class{constructor(c){yb(this,"props");yb(this,"aspectRatio");yb(this,"type");
yb(this,"hideCloneHandles",!1);yb(this,"hideResizeHandles",!1);yb(this,"hideRotateHandle",!1);yb(this,"hideContextBar",!1);yb(this,"hideSelectionDetail",!1);yb(this,"hideSelection",!1);yb(this,"canChangeAspectRatio",!0);yb(this,"canUnmount",!0);yb(this,"canResize",[!0,!0]);yb(this,"canScale",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!1);yb(this,"canBind",!1);yb(this,"nonce");yb(this,"bindingDistance",4);yb(this,"isDirty",!1);yb(this,"lastSerialized");yb(this,"getCenter",()=>Qe.getBoundsCenter(this.bounds));
yb(this,"getRotatedBounds",()=>{const {bounds:Ea,props:{rotation:Ka}}=this;return Ka?Qe.getBoundsFromPoints(Qe.getRotatedCorners(Ea,Ka)):Ea});yb(this,"hitTestPoint",Ea=>{var Ka=this.rotatedBounds;if(!this.props.rotation)return xh.pointInBounds(Ea,Ka);Ka=Qe.getRotatedCorners(Ka,this.props.rotation);return xh.pointInPolygon(Ea,Ka)});yb(this,"hitTestLineSegment",(Ea,Ka)=>{const fb=Qe.getBoundsFromPoints([Ea,Ka]),{rotatedBounds:ub,props:{rotation:bc=0}}=this;return Qe.boundsContain(ub,fb)||bc?l(Ea,Ka,
Qe.getRotatedCorners(this.bounds)).didIntersect:0<g(ub,Ea,Ka).length});yb(this,"hitTestBounds",Ea=>{const {rotatedBounds:Ka,props:{rotation:fb=0}}=this,ub=Qe.getRotatedCorners(this.bounds,fb);return Qe.boundsContain(Ea,Ka)||0<B([Ea.minX,Ea.minY],[Ea.width,Ea.height],ub).length});yb(this,"getExpandedBounds",()=>Qe.expandBounds(this.getBounds(),this.bindingDistance));yb(this,"getBindingPoint",(Ea,Ka,fb,ub)=>{var bc=this.getBounds(),tc=this.getExpandedBounds();if(xh.pointInBounds(Ea,tc)){var Dc=J(Ka,
fb,tc).filter($c=>$c.didIntersect).map($c=>$c.points[0]);if(Dc.length)return fb=this.getCenter(),Dc=Dc.sort(($c,sd)=>ve.dist(sd,Ka)-ve.dist($c,Ka))[0],Dc=ve.med(Ea,Dc),ub?(ub=2>ve.dist(Ea,fb)?fb:Ea,bc=0):(ub=2>ve.distanceToLineSegment(Ea,Dc,fb)?fb:Dc,bc=xh.pointInBounds(Ea,bc)?this.bindingDistance:Math.max(this.bindingDistance,Qe.getBoundsSides(bc).map($c=>ve.distanceToLineSegment($c[1][0],$c[1][1],Ea)).sort(($c,sd)=>$c-sd)[0])),tc=ve.divV(ve.sub(ub,[tc.minX,tc.minY]),[tc.width,tc.height]),{point:ve.clampV(tc,
0,1),distance:bc}}});yb(this,"getSerialized",()=>Ab(rg(Ff({},this.props),{type:this.type,nonce:this.nonce})));yb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||sc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});yb(this,"validateProps",Ea=>Ea);yb(this,"update",(Ea,Ka=!1,fb=!1)=>{Ka||this.isDirty||this.setIsDirty(!0);Ka||fb||this.incNonce();Object.assign(this.props,
this.validateProps(Ea));return this});yb(this,"clone",()=>new this.constructor(this.serialized));yb(this,"onResetBounds",Ea=>this);yb(this,"scale",[1,1]);yb(this,"onResizeStart",Ea=>{var Ka;this.scale=[...(null!=(Ka=this.props.scale)?Ka:[1,1])];return this});yb(this,"onResize",(Ea,Ka)=>{const {bounds:fb,rotation:ub,scale:[bc,tc]}=Ka;Ea=[...this.scale];0>bc&&(Ea[0]*=-1);0>tc&&(Ea[1]*=-1);this.update({point:[fb.minX,fb.minY],scale:Ea,rotation:ub});return this});yb(this,"onHandleChange",(Ea,{id:Ka,delta:fb})=>
{if(void 0!==Ea.handles){var ub=to(Ea.handles);ub[Ka]=rg(Ff({},ub[Ka]),{point:ve.add(fb,Ea.handles[Ka].point)});var bc=Qe.getCommonTopLeft(Object.values(ub).map(tc=>tc.point));Object.values(ub).forEach(tc=>{tc.point=ve.sub(tc.point,bc)});this.update({point:ve.add(Ea.point,bc),handles:ub})}});var n,O;const da=this.constructor.id,ra=null!=(n=this.constructor.defaultProps)?n:{};this.type=da;this.props=Ff(Ff({scale:[1,1]},ra),c);this.nonce=null!=(O=c.nonce)?O:Date.now();Hc(this)}get id(){return this.props.id}setNonce(c){this.nonce=
c}incNonce(){this.nonce++}setIsDirty(c){this.isDirty=c}setLastSerialized(c){this.lastSerialized=c}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(c){c=this.getBounds();const {stroke:n,strokeWidth:O,strokeType:da,opacity:ra,fill:Ea,noFill:Ka,borderRadius:fb}=this.props;return(0,Fz.jsx)("rect",{fill:Ka?"none":vf(Ea,"background"),stroke:vf(n,"stroke"),strokeWidth:null!=
O?O:2,strokeDasharray:"dashed"===da?"8 2":void 0,fillOpacity:null!=ra?ra:.2,width:c.width,height:c.height,rx:fb,ry:fb})}};yb(Yj,"type");ye([Ug],Yj.prototype,"props",2);ye([Ug],Yj.prototype,"canResize",2);ye([Ug],Yj.prototype,"nonce",2);ye([Ug],Yj.prototype,"isDirty",2);ye([Ug],Yj.prototype,"lastSerialized",2);ye([bh],Yj.prototype,"id",1);ye([Gg],Yj.prototype,"setNonce",1);ye([Gg],Yj.prototype,"incNonce",1);ye([Gg],Yj.prototype,"setIsDirty",1);ye([Gg],Yj.prototype,"setLastSerialized",1);ye([bh],Yj.prototype,
"center",1);ye([bh],Yj.prototype,"bounds",1);ye([bh],Yj.prototype,"rotatedBounds",1);ye([bh],Yj.prototype,"serialized",1);ye([Gg],Yj.prototype,"update",2);var xk=class extends Yj{constructor(c={}){super(c);yb(this,"canBind",!0);yb(this,"getBounds",()=>{const [n,O]=this.props.point,[da,ra]=this.props.size;return{minX:n,minY:O,maxX:n+da,maxY:O+ra,width:da,height:ra}});yb(this,"getRotatedBounds",()=>Qe.getBoundsFromPoints(Qe.getRotatedCorners(this.bounds,this.props.rotation)));yb(this,"onResize",(n,
O)=>{const {bounds:da,rotation:ra,scale:[Ea,Ka]}=O;n=[...this.scale];0>Ea&&(n[0]*=-1);0>Ka&&(n[1]*=-1);this.update({point:[da.minX,da.minY],scale:n,rotation:ra});return this.update({rotation:ra,point:[da.minX,da.minY],size:[Math.max(1,da.width),Math.max(1,da.height)],scale:n})});yb(this,"validateProps",n=>{void 0!==n.size&&(n.size[0]=Math.max(n.size[0],1),n.size[1]=Math.max(n.size[1],1));return n});Hc(this)}};yb(xk,"id","box");yb(xk,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],
size:[100,100]});var lp=class extends Yj{constructor(c={}){super(c);yb(this,"getBounds",()=>{const {pointBounds:n,props:{point:O}}=this;return Qe.translateBounds(n,O)});yb(this,"getRotatedBounds",()=>{const {props:{rotation:n,point:O},bounds:da,rotatedPoints:ra}=this;return n?Qe.translateBounds(Qe.getBoundsFromPoints(ra),O):da});yb(this,"normalizedPoints",[]);yb(this,"isResizeFlippedX",!1);yb(this,"isResizeFlippedY",!1);yb(this,"onResizeStart",()=>{var n;const {bounds:O,props:{points:da}}=this;this.scale=
[...(null!=(n=this.props.scale)?n:[1,1])];const ra=[O.width,O.height];this.normalizedPoints=da.map(Ea=>Hd.divV(Ea,ra));return this});yb(this,"onResize",(n,O)=>{const {bounds:da,scale:[ra,Ea]}=O,Ka=[da.width,da.height];n=[...this.scale];0>ra&&(n[0]*=-1);0>Ea&&(n[1]*=-1);return this.update(ra||Ea?{point:[da.minX,da.minY],points:this.normalizedPoints.map(fb=>Hd.mulV(fb,Ka).concat(fb[2])),scale:n}:{point:[da.minX,da.minY],points:this.normalizedPoints.map(fb=>Hd.mulV(fb,Ka).concat(fb[2]))})});yb(this,
"hitTestPoint",n=>{const {props:{points:O,point:da}}=this;return xh.pointNearToPolyline(Hd.sub(n,da),O)});yb(this,"hitTestLineSegment",(n,O)=>{const {bounds:da,props:{points:ra,point:Ea}}=this;if(xh.pointInBounds(n,da)||xh.pointInBounds(O,da)||0<g(da,n,O).length){const Ka=Hd.sub(n,Ea),fb=Hd.sub(O,Ea);return l(Ka,fb,ra).didIntersect||!!ra.find(ub=>5>Hd.dist(Ka,ub)||5>Hd.dist(fb,ub))}return!1});yb(this,"hitTestBounds",n=>{const {rotatedBounds:O,props:{points:da,point:ra}}=this,Ea=Qe.translateBounds(n,
Hd.neg(ra));return Qe.boundsContain(n,O)||da.every(Ka=>xh.pointInBounds(Ka,Ea))||Qe.boundsCollide(n,O)&&0<H([Ea.minX,Ea.minY],[Ea.width,Ea.height],da).length});Hc(this)}get pointBounds(){const {props:{points:c}}=this;return Qe.getBoundsFromPoints(c)}get rotatedPoints(){const {props:{point:c,points:n,rotation:O},center:da}=this;if(!O)return n;const ra=Hd.sub(da,c);return n.map(Ea=>Hd.rotWith(Ea,ra,O))}};yb(lp,"id","draw");yb(lp,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],
isComplete:!1});ye([bh],lp.prototype,"pointBounds",1);ye([bh],lp.prototype,"rotatedPoints",1);var ct=class extends xk{constructor(c={}){super(c);yb(this,"getBounds",()=>{const {props:{point:[n,O],size:[da,ra]}}=this;return Qe.getRotatedEllipseBounds(n,O,da/2,ra/2,0)});yb(this,"getRotatedBounds",()=>{const {props:{point:[n,O],size:[da,ra],rotation:Ea}}=this;return Qe.getRotatedEllipseBounds(n,O,da/2,ra/2,Ea)});yb(this,"hitTestPoint",n=>{const {props:{size:O,rotation:da},center:ra}=this;return xh.pointInEllipse(n,
ra,O[0],O[1],da||0)});yb(this,"hitTestLineSegment",(n,O)=>{const {props:{size:[da,ra],rotation:Ea=0},center:Ka}=this;return h(n,O,Ka,da,ra,Ea).didIntersect});yb(this,"hitTestBounds",n=>{const {props:{size:[O,da],rotation:ra=0},rotatedBounds:Ea}=this;var Ka;if(!(Ka=Qe.boundsContain(n,Ea))){const {minX:fb,minY:ub,width:bc,height:tc}=n;Ka=0<w(this.center,O/2,da/2,ra,[fb,ub],[bc,tc]).length}return Ka});Hc(this)}};yb(ct,"id","ellipse");yb(ct,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",
point:[0,0],size:[100,100]});var dt=class extends xk{constructor(c={}){super(c);yb(this,"onResetBounds",n=>{const {clipping:O,size:da,point:ra}=this.props;if(O){const [Ea,Ka,fb,ub]=Array.isArray(O)?O:[O,O,O,O];return this.update({clipping:0,point:[ra[0]-ub,ra[1]-Ea],size:[da[0]+(ub-Ka),da[1]+(Ea-fb)]})}if(n.asset){const {size:[Ea,Ka]}=n.asset;this.update({clipping:0,point:[ra[0]+da[0]/2-Ea/2,ra[1]+da[1]/2-Ka/2],size:[Ea,Ka]})}return this});yb(this,"onResize",(n,O)=>{const {bounds:da,clip:ra,scale:Ea}=
O;({clipping:O}=this.props);const {clipping:Ka}=n;if(ra){const {point:[fb,ub],size:[bc,tc]}=n,[Dc,$c,sd,od]=Ka?Array.isArray(Ka)?Ka:[Ka,Ka,Ka,Ka]:[0,0,0,0];O=[Dc+(da.minY-ub),$c+(da.maxX-(fb+bc)),sd+(da.maxY-(ub+tc)),od+(da.minX-fb)]}else void 0!==Ka&&(O=Array.isArray(Ka)?Ka:[Ka,Ka,Ka,Ka],O=[O[0]*Ea[1],O[1]*Ea[0],O[2]*Ea[1],O[3]*Ea[0]]);if(O&&Array.isArray(O)){const fb=O;fb.every((ub,bc)=>0===bc||ub===fb[bc-1])&&(O=fb[0])}return this.update({point:[da.minX,da.minY],size:[Math.max(1,da.width),Math.max(1,
da.height)],clipping:O})});Hc(this)}};yb(dt,"id","ellipse");yb(dt,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Fv=class extends Yj{constructor(c={}){super(c);yb(this,"getBounds",()=>{const {points:n,props:{point:O}}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),O)});yb(this,"getRotatedBounds",()=>{const {rotatedPoints:n,props:{point:O}}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),O)});yb(this,
"normalizedHandles",[]);yb(this,"onResizeStart",()=>{var n;const {props:{handles:O},bounds:da}=this;this.scale=[...(null!=(n=this.props.scale)?n:[1,1])];const ra=[da.width,da.height];this.normalizedHandles=Object.values(O).map(Ea=>Hd.divV(Ea.point,ra));return this});yb(this,"onResize",(n,O)=>{const {bounds:da,scale:[ra,Ea]}=O,{props:{handles:Ka},normalizedHandles:fb}=this,ub=[da.width,da.height];n=[...this.scale];0>ra&&(n[0]*=-1);0>Ea&&(n[1]*=-1);return this.update({point:[da.minX,da.minY],handles:Object.values(Ka).map((bc,
tc)=>rg(Ff({},bc),{point:Hd.mulV(fb[tc],ub)})),scale:n})});yb(this,"hitTestPoint",n=>{const {points:O}=this;return xh.pointNearToPolyline(Hd.sub(n,this.props.point),O)});yb(this,"hitTestLineSegment",(n,O)=>{const {bounds:da,points:ra,props:{point:Ea}}=this;if(xh.pointInBounds(n,da)||xh.pointInBounds(O,da)||0<g(da,n,O).length){const Ka=Hd.sub(n,Ea),fb=Hd.sub(O,Ea);return l(Ka,fb,ra).didIntersect||!!ra.find(ub=>5>Hd.dist(Ka,ub)||5>Hd.dist(fb,ub))}return!1});yb(this,"hitTestBounds",n=>{const {rotatedBounds:O,
points:da,props:{point:ra}}=this,Ea=Qe.translateBounds(n,Hd.neg(ra));return Qe.boundsContain(n,O)||da.every(Ka=>xh.pointInBounds(Ka,Ea))||Qe.boundsCollide(n,O)&&0<H([Ea.minX,Ea.minY],[Ea.width,Ea.height],da).length});yb(this,"validateProps",n=>{n.point&&(n.point=[0,0]);void 0!==n.handles&&1>Object.values(n.handles).length&&(n.handles=Fv.defaultProps.handles);return n});Hc(this)}get points(){return Object.values(this.props.handles).map(c=>c.point)}get centroid(){const {points:c}=this;return pi.getPolygonCentroid(c)}get rotatedPoints(){const {centroid:c,
props:{handles:n,rotation:O}}=this;return O?Object.values(n).map(da=>Hd.rotWith(da.point,c,O)):this.points}},mp=Fv;yb(mp,"id","polyline");yb(mp,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});ye([bh],mp.prototype,"points",1);ye([bh],mp.prototype,"centroid",1);ye([bh],mp.prototype,"rotatedPoints",1);var Gv=class extends mp{constructor(c={}){super(c);yb(this,"hideResizeHandles",!0);yb(this,"hideRotateHandle",!0);yb(this,"validateProps",n=>{n.point&&(n.point=[0,
0]);void 0!==n.handles&&1>Object.values(n.handles).length&&(n.handles=Gv.defaultProps.handles);return n});yb(this,"getHandlesChange",(n,O)=>{var da=ki(n.handles,O);da=ki(da,{start:{point:ve.toFixed(da.start.point)},end:{point:ve.toFixed(da.end.point)}});if(!ve.isEqual(da.start.point,da.end.point)){O={point:n.point,handles:to(da)};n=n.point;da=Qe.translateBounds(Qe.getBoundsFromPoints(Object.values(da).map(Ea=>Ea.point)),O.point);var ra=ve.sub([da.minX,da.minY],n);ve.isEqual(ra,[0,0])||(Object.values(O.handles).forEach(Ea=>
{Ea.point=ve.toFixed(ve.sub(Ea.point,ra))}),O.point=ve.toFixed(ve.add(O.point,ra)));return O}});Hc(this)}},Fq=Gv;yb(Fq,"id","line");yb(Fq,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var ln=class extends xk{constructor(c={}){super(c);yb(this,"getRotatedBounds",()=>{const {rotatedVertices:n,props:{point:O},offset:da}=this;return Qe.translateBounds(Qe.getBoundsFromPoints(n),Hd.add(O,da))});
yb(this,"hitTestPoint",n=>{const {vertices:O}=this;return xh.pointInPolygon(Hd.add(n,this.props.point),O)});yb(this,"hitTestLineSegment",(n,O)=>{const {vertices:da,props:{point:ra}}=this;return l(Hd.sub(n,ra),Hd.sub(O,ra),da).didIntersect});yb(this,"hitTestBounds",n=>{const {rotatedBounds:O,offset:da,rotatedVertices:ra,props:{point:Ea}}=this,Ka=Qe.translateBounds(n,Hd.neg(Hd.add(Ea,da)));return Qe.boundsContain(n,O)||ra.every(fb=>xh.pointInBounds(fb,Ka))||0<B([Ka.minX,Ka.minY],[Ka.width,Ka.height],
ra).length});yb(this,"validateProps",n=>{n.point&&(n.point=[0,0]);void 0!==n.sides&&3>n.sides&&(n.sides=3);return n});Hc(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:c},vertices:n}=this;return n.map(O=>Hd.add(O,c))}get centroid(){const {vertices:c}=this;return pi.getPolygonCentroid(c)}get rotatedVertices(){const {vertices:c,centroid:n,props:{rotation:O}}=this;return O?c.map(da=>Hd.rotWith(da,n,O)):c}get offset(){const {props:{size:[c,n]}}=this,O=Qe.getBoundsCenter(Qe.getBoundsFromPoints(this.vertices));
return Hd.sub(Hd.div([c,n],2),O)}getVertices(c=0){const {ratio:n,sides:O,size:da}=this.props;return 3===O?pi.getTriangleVertices(da,c,n):pi.getPolygonVertices(da,O,c,n)}};yb(ln,"id","polygon");yb(ln,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});ye([bh],ln.prototype,"vertices",1);ye([bh],ln.prototype,"pageVertices",1);ye([bh],ln.prototype,"centroid",1);ye([bh],ln.prototype,"rotatedVertices",1);ye([bh],ln.prototype,"offset",1);
var et=class extends xk{constructor(c={}){super(c);yb(this,"canEdit",!0);yb(this,"canFlip",!1);Hc(this)}};yb(et,"id","text");yb(et,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Fr=class extends xk{constructor(c={}){super(c);yb(this,"canEdit",!1);yb(this,"canFlip",!1);yb(this,"getBounds",()=>0===this.shapes.length?($e().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Qe.getCommonBounds(this.shapes.map(n=>n.getBounds())));
Hc(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};yb(Fr,"id","group");yb(Fr,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});ye([bh],Fr.prototype,"shapes",1);var np=class{constructor(){yb(this,"_id");yb(this,"_initial");yb(this,"_states");yb(this,"_isActive",!1);yb(this,"cursor");yb(this,"_disposables",[]);yb(this,"children",new Map([]));yb(this,"registerStates",O=>{O.forEach(da=>
this.children.set(da.id,new da(this,this)));return this});yb(this,"deregisterStates",O=>{O.forEach(da=>{var ra;null==(ra=this.children.get(da.id))?void 0:ra.dispose();this.children.delete(da.id)});return this});yb(this,"currentState",{});yb(this,"transition",(O,da={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${O}.`);const ra=this.children.get(O),Ea=this.currentState;if(!ra)throw Error(`Could not find a state named ${O}.`);sc(()=>{this.currentState?
(Ea._events.onExit(rg(Ff({},da),{toId:O})),Ea.dispose(),this.setCurrentState(ra),this._events.onTransition(rg(Ff({},da),{fromId:Ea.id,toId:O})),ra._events.onEnter(rg(Ff({},da),{fromId:Ea.id}))):(this.currentState=ra,ra._events.onEnter(rg(Ff({},da),{fromId:""})))});return this});yb(this,"isIn",O=>{O=O.split(".").reverse();let da=this;for(;0<O.length;){const ra=O.pop();if(!ra)return!0;if(da.currentState.id===ra){if(0===O.length)return!0;da=da.currentState}else break}return!1});yb(this,"isInAny",(...O)=>
O.some(this.isIn));yb(this,"forwardEvent",(O,...da)=>{var ra,Ea;(null==(Ea=null==(ra=this.currentState)?void 0:ra._events)?0:Ea[O])&&sc(()=>{var Ka;return null==(Ka=this.currentState._events)?void 0:Ka[O](...da)})});yb(this,"_events",{onTransition:O=>{var da;null==(da=this.onTransition)?void 0:da.call(this,O)},onEnter:O=>{var da;this._isActive=!0;this.initial&&this.transition(this.initial,O);null==(da=this.onEnter)?void 0:da.call(this,O)},onExit:O=>{var da,ra,Ea;this._isActive=!1;null==(ra=null==
(da=this.currentState)?void 0:da.onExit)?void 0:ra.call(da,{toId:"parent"});null==(Ea=this.onExit)?void 0:Ea.call(this,O)},onPointerDown:(O,da)=>{var ra;null==(ra=this.onPointerDown)?void 0:ra.call(this,O,da);this.forwardEvent("onPointerDown",O,da)},onPointerUp:(O,da)=>{var ra;null==(ra=this.onPointerUp)?void 0:ra.call(this,O,da);this.forwardEvent("onPointerUp",O,da)},onPointerMove:(O,da)=>{var ra;null==(ra=this.onPointerMove)?void 0:ra.call(this,O,da);this.forwardEvent("onPointerMove",O,da)},onPointerEnter:(O,
da)=>{var ra;null==(ra=this.onPointerEnter)?void 0:ra.call(this,O,da);this.forwardEvent("onPointerEnter",O,da)},onPointerLeave:(O,da)=>{var ra;null==(ra=this.onPointerLeave)?void 0:ra.call(this,O,da);this.forwardEvent("onPointerLeave",O,da)},onDoubleClick:(O,da)=>{var ra;null==(ra=this.onDoubleClick)?void 0:ra.call(this,O,da);this.forwardEvent("onDoubleClick",O,da)},onKeyDown:(O,da)=>{var ra;this._events.onModifierKey(O,da);null==(ra=this.onKeyDown)?void 0:ra.call(this,O,da);this.forwardEvent("onKeyDown",
O,da)},onKeyUp:(O,da)=>{var ra;this._events.onModifierKey(O,da);null==(ra=this.onKeyUp)?void 0:ra.call(this,O,da);this.forwardEvent("onKeyUp",O,da)},onPinchStart:(O,da)=>{var ra;null==(ra=this.onPinchStart)?void 0:ra.call(this,O,da);this.forwardEvent("onPinchStart",O,da)},onPinch:(O,da)=>{var ra;null==(ra=this.onPinch)?void 0:ra.call(this,O,da);this.forwardEvent("onPinch",O,da)},onPinchEnd:(O,da)=>{var ra;null==(ra=this.onPinchEnd)?void 0:ra.call(this,O,da);this.forwardEvent("onPinchEnd",O,da)},onModifierKey:(O,
da)=>{switch(da.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(O,da)}}});yb(this,"onEnter");yb(this,"onExit");yb(this,"onTransition");yb(this,"onPointerDown");yb(this,"onPointerUp");yb(this,"onPointerMove");yb(this,"onPointerEnter");yb(this,"onPointerLeave");yb(this,"onDoubleClick");yb(this,"onKeyDown");yb(this,"onKeyUp");yb(this,"onPinchStart");yb(this,"onPinch");yb(this,"onPinchEnd");const c=this.constructor.initial,n=this.constructor.states;this._id=this.constructor.id;
this._initial=c;this._states=n}dispose(){this._disposables.forEach(c=>c());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(c=>[c,...c.descendants])}setCurrentState(c){this.currentState=c}};yb(np,"id");yb(np,"shortcuts");ye([Ug],np.prototype,"currentState",2);ye([Gg],np.prototype,"setCurrentState",
1);var ft=class extends np{constructor(c,n){var O,da;super();yb(this,"_root");yb(this,"_parent");yb(this,"children",new Map([]));yb(this,"registerStates",ra=>{ra.forEach(Ea=>this.children.set(Ea.id,new Ea(this,this._root)));return this});yb(this,"deregisterStates",ra=>{ra.forEach(Ea=>{var Ka;null==(Ka=this.children.get(Ea.id))?void 0:Ka.dispose();this.children.delete(Ea.id)});return this});this._parent=c;this._root=n;this.states&&0<this.states.length&&(this.registerStates(this.states),c=null!=(O=
this.initial)?O:this.states[0].id,O=this.children.get(c))&&(this.setCurrentState(O),null==(da=this.currentState)?void 0:da._events.onEnter({fromId:"initial"}));Hc(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};yb(ft,"cursor");var mn=class extends ft{constructor(){super(...arguments);yb(this,"isLocked",!1);yb(this,"previous");yb(this,"onEnter",({fromId:c})=>
{this.previous=c;this.cursor&&this.app.cursors.setCursor(this.cursor)});yb(this,"onTransition",c=>{({toId:c}=c);c=this.children.get(c);this.app.cursors.reset();c.cursor?this.app.cursors.setCursor(c.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},hi=class extends ft{get app(){return this.root}get tool(){return this.parent}},Hv=class extends hi{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"creatingShape");yb(this,"aspectRatio");
yb(this,"initialBounds",{});yb(this,"onEnter",()=>{const {currentPage:c,inputs:{originPoint:n,currentPoint:O}}=this.app;var {Shape:da}=this.tool;da=new da({id:Te(),type:da.id,parentId:c.id,point:[...n],fill:this.app.settings.color,stroke:this.app.settings.color,size:ve.abs(ve.sub(O,n))});this.initialBounds={minX:n[0],minY:n[1],maxX:n[0]+1,maxY:n[1]+1,width:1,height:1};da.canChangeAspectRatio||(da.aspectRatio?(this.aspectRatio=da.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=
1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=da;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(da);this.app.setSelectedShapes([da])});yb(this,"onPointerMove",c=>{if(!c.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:n}=this,{currentPoint:O,originPoint:da,shiftKey:ra}=this.app.inputs;c=ra||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;n=Qe.getTransformedBoundingBox(n,"bottom_right_corner",ve.sub(O,da),0,c);this.app.settings.snapToGrid&&!c&&(n=Qe.snapBoundsToGrid(n,8));this.creatingShape.update({point:[n.minX,n.minY],size:[n.width,n.height]})}});yb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});yb(this,"onKeyDown",(c,n)=>
{switch(n.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};yb(Hv,"id","creating");var Iv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...c)=>{var n,O;this.app.transition("select",{returnTo:this.app.currentState.id});null==(O=(n=this.app._events).onPinchStart)?void 0:O.call(n,...c)});
yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};yb(Iv,"id","idle");var Jv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});yb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};yb(Jv,"id","pointing");var Em=class extends mn{constructor(){super(...arguments);
yb(this,"cursor","crosshair")}};yb(Em,"id","box");yb(Em,"states",[Iv,Jv,Hv]);yb(Em,"initial","idle");var Kv=class extends hi{constructor(){super(...arguments);yb(this,"shape",{});yb(this,"points",[[0,0,.5]]);yb(this,"persistDebounced",ng(this.app.persist,200));yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});yb(this,"onEnter",()=>{var c;const {Shape:n,previousShape:O}=this.tool;var {originPoint:da}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
O){this.shape=O;var {shape:ra}=this;var Ea=ra.props.points[ra.props.points.length-1];const fb=Hd.sub(da,ra.props.point).concat(null!=(c=da[2])?c:.5);this.points=[...ra.props.points,Ea,Ea];const ub=Math.ceil(Hd.dist(Ea,da)/16);for(let bc=0,tc=bc/(ub-1);bc<ub;bc++){c=this.points;da=c.push;ra=Hd.lrp(Ea,fb,tc);var Ka=Ea[2];da.call(c,ra.concat.call(ra,Ka+(fb[2]-Ka)*tc))}this.addNextPoint(fb)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(Ea=da[2])?Ea:.5]],this.shape=new n({id:Te(),type:n.id,
parentId:this.app.currentPage.id,point:da.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});yb(this,"onPointerMove",()=>{const {shape:c}=this,{currentPoint:n,previousPoint:O}=this.app.inputs;Hd.isEqual(O,n)||this.addNextPoint(Hd.sub(n,c.props.point).concat(n[2]))});yb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");
this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?xh.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let c=this.app.selectedTool.id;"pencil"===c||"highlighter"===c?this.persistDebounced():this.app.persist()});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(c){const {shape:n}=
this,O=Hd.min(c,[0,0]);this.points.push(c);0>O[0]||0>O[1]?(this.points=this.points.map(da=>Hd.sub(da,O).concat(da[2])),n.update({point:Hd.add(n.props.point,O),points:this.points})):n.update({points:this.points})}};yb(Kv,"id","creating");var Lv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",(c,n)=>{c.order||this.app.readOnly||this.tool.transition("creating")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};
yb(Lv,"id","idle");var Mv=class extends hi{constructor(){super(...arguments);yb(this,"origin",[0,0]);yb(this,"prevDelta",[0,0]);yb(this,"onEnter",c=>{this.prevDelta=c.info.delta;this.origin=c.info.point});yb(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};yb(Mv,"id","pinching");var Gq=class extends mn{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"simplify",!0);yb(this,"simplifyTolerance",
1);yb(this,"previousShape");yb(this,"onPinchStart",(c,n)=>{this.transition("pinching",{info:c,event:n})})}};yb(Gq,"id","draw");yb(Gq,"states",[Lv,Kv,Mv]);yb(Gq,"initial","idle");var Nv=class extends hi{constructor(){super(...arguments);yb(this,"points",[[0,0,.5]]);yb(this,"hitShapes",new Set);yb(this,"onEnter",()=>{const {originPoint:c}=this.app.inputs;this.points=[c];this.hitShapes.clear()});yb(this,"onPointerMove",()=>{const {currentPoint:c,previousPoint:n}=this.app.inputs;Hd.isEqual(n,c)||(this.points.push(c),
this.app.shapesInViewport.filter(O=>O.hitTestLineSegment(n,c)).forEach(O=>this.hitShapes.add(O)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});yb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};yb(Nv,"id","erasing");var Ov=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",
(c,n)=>{c.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...c)=>{var n,O;this.app.transition("select",{returnTo:this.app.currentState.id});null==(O=(n=this.app._events).onPinchStart)?void 0:O.call(n,...c)});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};yb(Ov,"id","idle");var Pv=class extends hi{constructor(){super(...arguments);yb(this,"onEnter",()=>{const {currentPoint:c}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(n=>
n.hitTestPoint(c)))});yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});yb(this,"onPointerUp",()=>{const c=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(c);this.tool.transition("idle")})}};yb(Pv,"id","pointing");var Gr=class extends mn{constructor(){super(...arguments);yb(this,"cursor","crosshair")}};yb(Gr,"id","erase");yb(Gr,"states",[Ov,Pv,Nv]);yb(Gr,
"initial","idle");var gt=class extends hi{constructor(){super(...arguments);yb(this,"handle",{});yb(this,"handleId","end");yb(this,"currentShape",{});yb(this,"initialShape",{});yb(this,"bindableShapeIds",[]);yb(this,"startBindingShapeId");yb(this,"newStartBindingId","");yb(this,"draggedBindingId","");yb(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,previousPoint:n,originPoint:O,currentPoint:da,modKey:ra,altKey:Ea},settings:{snapToGrid:Ka}}=this.app;var fb=this.app.getShapeById(this.initialShape.id),
{handles:ub}=this.initialShape,bc=this.handleId,tc="start"===this.handleId?"end":"start";if(!ve.isEqual(n,da)){var Dc=ve.sub(da,O);if(c){var $c=ub[tc].point,sd=ve.add(ub[bc].point,Dc),od=ve.angle($c,sd);$c=ve.rotWith(sd,$c,Fh.snapAngleToSegments(od,24)-od);Dc=ve.add(Dc,ve.sub($c,sd))}Dc=ve.add(ub[bc].point,Dc);ub={[bc]:rg(Ff({},ub[bc]),{point:Ka?ve.snap(Dc,8):ve.toFixed(Dc),bindingId:void 0})};var Gd=this.currentShape.getHandlesChange(this.initialShape,ub);if(Gd){ub=ki(fb.props,Gd);var Rd={},id;bc=
ub.handles[bc];tc=ub.handles[tc];if(this.startBindingShapeId){var qd;if(Dc=this.app.getShapeById(this.startBindingShapeId)){sd=Dc.getCenter();$c=ub.handles.end;var xd=ve.add(ub.handles.start.point,ub.point);ve.isEqual(xd,sd)&&xd[1]++;od=Dc.hitTestPoint(da);xd=ve.uni(ve.sub(xd,sd));const Sd=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ra||Dc.hitTestPoint(ve.add(ub.point,$c.point))||(qd=ed(fb.props,Dc,"start",this.newStartBindingId,sd,sd,xd,od));qd&&!Sd?(Rd[this.newStartBindingId]=
qd,ub.handles.start.bindingId=qd.id):!qd&&Sd&&(console.log("removing start binding"),delete Rd[this.newStartBindingId],ub.handles.start.bindingId=void 0)}}if(!ra){qd=ve.add(tc.point,ub.point);tc=ve.add(bc.point,ub.point);bc=ve.uni(ve.sub(tc,qd));const Sd=ve.add(ub.point,ub.handles.start.point),Id=ve.add(ub.point,ub.handles.end.point);Dc=this.bindableShapeIds.map(Ve=>this.app.getShapeById(Ve)).sort((Ve,We)=>We.nonce-Ve.nonce).filter(Ve=>![Sd,Id].every(We=>Ve.hitTestPoint(We)));for(const Ve of Dc)if(id=
ed(fb.props,Ve,this.handleId,this.draggedBindingId,tc,qd,bc,Ea))break}id?(Rd[this.draggedBindingId]=id,ub=ki(ub,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(fb=fb.props.handles[this.handleId].bindingId,void 0!==fb&&(delete Rd[fb],ub=ki(ub,{handles:{[this.handleId]:{bindingId:void 0}}})));Gd=this.currentShape.getHandlesChange(ub,ub.handles);sc(()=>{var Sd;if(Gd){this.currentShape.update(Gd);this.app.currentPage.updateBindings(Rd);const Id=Object.values(null!=(Sd=Gd.handles)?Sd:
{}).map(Ve=>Ve.bindingId).map(Ve=>this.app.currentPage.bindings[Ve]).filter(Boolean).flatMap(Ve=>[Ve.toId,Ve.fromId].filter(Boolean));this.app.setBindingShapes(Id)}})}}});yb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});yb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};yb(gt,"id","creating");var Qv=class extends gt{constructor(){super(...arguments);yb(this,"onEnter",()=>{var c;this.app.history.pause();this.newStartBindingId=Te();this.draggedBindingId=Te();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:n}=this.tool;const {originPoint:O}=this.app.inputs;n=new n(rg(Ff({},n.defaultProps),{id:Te(),type:n.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?ve.snap(O,8):O,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Ab(n.props);this.currentShape=n;this.app.currentPage.addShapes(n);this.app.setSelectedShapes([n]);if(this.startBindingShapeId=null==(c=this.bindableShapeIds.map(da=>this.app.getShapeById(da)).filter(da=>xh.pointInBounds(O,da.bounds))[0])?void 0:c.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};yb(Qv,"id","creating");
var Rv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...c)=>{var n,O;this.app.transition("select",{returnTo:this.app.currentState.id});null==(O=(n=this.app._events).onPinchStart)?void 0:O.call(n,...c)});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}});yb(this,"onPointerEnter",c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);
break;case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c)}});yb(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};yb(Rv,"id","idle");var Sv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
yb(Sv,"id","pointing");var Hr=class extends mn{constructor(){super(...arguments);yb(this,"cursor","crosshair")}};yb(Hr,"id","line");yb(Hr,"states",[Rv,Sv,Qv]);yb(Hr,"initial","idle");var Tv=class extends hi{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"creatingShape");yb(this,"aspectRatio");yb(this,"initialBounds",{});yb(this,"onEnter",()=>{const {currentPage:c,inputs:{originPoint:n}}=this.app,{Shape:O}=this.tool,da=new O({id:Te(),type:O.id,parentId:c.id,point:[...n],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=da;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);sc(()=>{this.app.currentPage.addShapes(da);const ra=this.app.settings.snapToGrid?ve.snap([...n],8):n,{bounds:Ea}=da;da.update({point:ve.sub(ra,[Ea.width/2,Ea.height/2])});this.app.transition("select");this.app.setSelectedShapes([da]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
yb(Tv,"id","creating");var Uv=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",(c,n)=>{c.order||this.app.readOnly||this.tool.transition("creating")});yb(this,"onPinchStart",(...c)=>{var n,O;this.app.transition("select",{returnTo:this.app.currentState.id});null==(O=(n=this.app._events).onPinchStart)?void 0:O.call(n,...c)});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}})}};yb(Uv,"id","idle");var Ir=class extends mn{constructor(){super(...arguments);
yb(this,"cursor","crosshair")}};yb(Ir,"id","box");yb(Ir,"states",[Uv,Tv]);yb(Ir,"initial","idle");var Gz=Sf(E()),Hz=class extends Gz.default{constructor(){super(...arguments);yb(this,"toBBox",c=>c.rotatedBounds)}},Vv=class extends hi{constructor(){super(...arguments);yb(this,"initialSelectedIds",[]);yb(this,"initialSelectedShapes",[]);yb(this,"tree",new Hz);yb(this,"onEnter",()=>{const {selectedShapes:c,currentPage:n,selectedIds:O}=this.app;this.initialSelectedIds=Array.from(O.values());this.initialSelectedShapes=
Array.from(c.values());this.tree.load(n.shapes)});yb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});yb(this,"onPointerMove",()=>{const {inputs:{shiftKey:c,ctrlKey:n,originPoint:O,currentPoint:da}}=this.app,ra=Qe.getBoundsFromPoints([da,O],0);this.app.setBrush(ra);const Ea=[...(new Set(this.tree.search(ra).filter(Ka=>n?Qe.boundsContain(ra,Ka.rotatedBounds):Ka.hitTestBounds(ra)).filter(Ka=>"group"!==Ka.type).map(Ka=>{var fb;return null!=(fb=this.app.getParentGroup(Ka))?
fb:Ka})))];c?Ea.every(Ka=>this.initialSelectedShapes.includes(Ka))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(Ka=>!Ea.includes(Ka))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...Ea]))]):this.app.setSelectedShapes(Ea);this.app.viewport.panToPointWhenNearBounds(da)});yb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});yb(this,"handleModifierKey",(c,n)=>{switch(n.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};yb(Vv,"id","brushing");var Wv=class extends hi{constructor(){super(...arguments);yb(this,"onEnter",c=>{var n;const {selectedIds:O,inputs:{shiftKey:da}}=this.app;if("shape"===c.type&&!O.has(c.shape.id)){const ra=null!=(n=this.app.getParentGroup(c.shape))?n:c.shape;da?this.app.setSelectedShapes([...Array.from(O.values()),ra.id]):this.app.setSelectedShapes([ra])}});yb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};yb(Wv,"id","contextMenu");var Xv=class extends hi{constructor(){super(...arguments);
yb(this,"onEnter",c=>{"pinching"===c.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});yb(this,"onExit",()=>{});yb(this,"onPointerEnter",c=>{if(!c.order)switch(c.type){case "shape":this.app.setHoveredShape(c.shape.id);break;case "selection":"background"!==c.handle&&"center"!==c.handle&&this.tool.transition("hoveringSelectionHandle",c);break;case "canvas":this.app.setHoveredShape(void 0)}});yb(this,"onPointerDown",(c,n)=>{const {selectedShapes:O,inputs:{ctrlKey:da}}=this.app;
if(2===n.button)this.tool.transition("contextMenu",c);else if(da)this.tool.transition("pointingCanvas");else switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",c)}break;case "shape":if(O.has(c.shape))this.tool.transition("pointingSelectedShape",c);else{const {selectionBounds:ra,inputs:Ea}=this.app;
ra&&xh.pointInBounds(Ea.currentPoint,ra)?this.tool.transition("pointingShapeBehindBounds",c):this.tool.transition("pointingShape",c)}break;case "handle":this.tool.transition("pointingHandle",c);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Ff(Ff({},n),c))}});yb(this,"onPointerLeave",c=>{c.order||"shape"===c.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",
{info:c,event:n})});yb(this,"onDoubleClick",c=>{if(!c.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var n=this.app.selectedShapesArray[0];if(n.canEdit&&!n.props.isLocked)switch(c.type){case "shape":this.tool.transition("editingShape",c);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}}});yb(this,"onKeyDown",(c,n)=>{({selectedShapesArray:c}=this.app);switch(n.key){case "Enter":1===c.length&&c[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:c[0],order:0});break;case "Escape":c.length&&this.app.setSelectedShapes([])}})}};yb(Xv,"id","idle");var Yv=class extends hi{constructor(){super(...arguments);yb(this,"onEnter",c=>{var n;const {selectedIds:O,inputs:{shiftKey:da}}=this.app,ra=null!=(n=this.app.getParentGroup(c.shape))?n:c.shape;da?this.app.setSelectedShapes([...Array.from(O.values()),ra.id]):this.app.setSelectedShapes([ra])});yb(this,"onPointerMove",()=>{const {currentPoint:c,
originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});yb(this,"onPointerUp",()=>{this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(Yv,"id","pointingShape");var Zv=class extends hi{constructor(){super(...arguments);yb(this,"cursor","move");yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});
yb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(Zv,"id","pointingBoundsBackground");var $v=class extends hi{constructor(){super(...arguments);yb(this,"onEnter",()=>{var c;const {shiftKey:n}=this.app.inputs;n||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(c=window.getSelection())?void 0:c.removeAllRanges())});yb(this,"onPointerMove",()=>{const {currentPoint:c,
originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("brushing")});yb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});yb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};yb($v,"id","pointingCanvas");var aw=class extends hi{constructor(){super(...arguments);yb(this,"cursor","move");yb(this,
"isCloning",!1);yb(this,"didClone",!1);yb(this,"initialPoints",{});yb(this,"initialShapePoints",{});yb(this,"initialClonePoints",{});yb(this,"clones",[]);yb(this,"onEnter",()=>{var c;this.app.history.pause();const {allSelectedShapesArray:n,inputs:O}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(n.map(({id:da,props:{point:ra}})=>[da,ra.slice()]));document.querySelectorAll("input,textarea").forEach(da=>da.blur());null==(c=document.getSelection())?void 0:c.empty();O.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});yb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});yb(this,"onPointerMove",()=>{const {inputs:{currentPoint:c}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(c)});yb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(O=>{O.update({point:this.initialPoints[O.id]})}),this.tool.transition("idle")}});yb(this,"onKeyUp",(c,n)=>{switch(n.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:O,allSelectedShapes:da}=this.app;O.removeShapes(...da);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:c,originPoint:n,currentPoint:O}}=this.app,{initialPoints:da}=this,ra=Hd.sub(O,n);c&&(Math.abs(ra[0])<Math.abs(ra[1])?ra[0]=0:ra[1]=0);sc(()=>{this.app.allSelectedShapesArray.filter(Ea=>!Ea.props.isLocked).forEach(Ea=>{let Ka=Hd.add(da[Ea.id],ra);this.app.settings.snapToGrid&&(Ka=Hd.snap(Ka,8));Ea.update({point:Ka})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(c=>
{const n=this.app.getShapeClass(c.type);if(!n)throw Error("Could not find that shape class.");return new n(rg(Ff({},c.serialized),{id:Te(),type:c.type,point:this.initialPoints[c.id],rotation:c.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:c,props:{point:n}})=>[c,n.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(c=>{c.update({point:this.initialPoints[c.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};yb(aw,"id","translating");var bw=class extends hi{constructor(){super(...arguments);yb(this,"pointedSelectedShape");yb(this,"onEnter",c=>{this.pointedSelectedShape=c.shape});yb(this,"onExit",()=>{this.pointedSelectedShape=void 0});yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});
yb(this,"onPointerUp",()=>{const {shiftKey:c,currentPoint:n}=this.app.inputs;var {selectedShapesArray:O}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(c)({selectedIds:O}=this.app),O=Array.from(O.values()),O.splice(O.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(O);else{if(1===O.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof xk&&xh.pointInBounds(n,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(bw,"id","pointingSelectedShape");var cw=class extends hi{constructor(){super(...arguments);yb(this,"info",{});yb(this,"onEnter",c=>{this.info=c;this.updateCursor()});yb(this,"onExit",()=>{this.app.cursors.reset()});
yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("resizing",this.info)});yb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}updateCursor(){this.app.cursors.setCursor(gi[this.info.handle],this.app.selectionBounds.rotation)}};yb(cw,"id","pointingResizeHandle");var dw=class extends hi{constructor(){super(...arguments);
yb(this,"isSingle",!1);yb(this,"handle","bottom_right_corner");yb(this,"snapshots",{});yb(this,"initialCommonBounds",{});yb(this,"selectionRotation",0);yb(this,"resizeType","corner");yb(this,"onEnter",c=>{var n,O;const {history:da,selectedShapesArray:ra,selectionBounds:Ea}=this.app;if(!Ea)throw Error("Expected a selected bounds.");this.handle=c.handle;this.resizeType="left_edge"===c.handle||"right_edge"===c.handle?"horizontal-edge":"top_edge"===c.handle||"bottom_edge"===c.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(dw.CURSORS[c.handle],null==(n=this.app.selectionBounds)?void 0:n.rotation);da.pause();const Ka=Qe.getBoundsFromPoints(ra.map(fb=>Qe.getBoundsCenter(fb.bounds)));this.selectionRotation=(this.isSingle=1===ra.length)?null!=(O=ra[0].props.rotation)?O:0:0;this.initialCommonBounds=Ff({},Ea);this.snapshots=Object.fromEntries(ra.map(fb=>{const ub=Ff({},fb.bounds),[bc,tc]=Qe.getBoundsCenter(ub);return[fb.id,{props:fb.serialized,bounds:ub,transformOrigin:[(bc-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(tc-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(bc-Ka.minX)/Ka.width,(tc-Ka.minY)/Ka.height],isAspectRatioLocked:fb.props.isAspectRatioLocked||!(fb.canChangeAspectRatio&&!fb.props.rotation)}]}));ra.forEach(fb=>{var ub;null==(ub=fb.onResizeStart)?void 0:ub.call(fb,{isSingle:this.isSingle})})});yb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
yb(this,"onPointerMove",()=>{const {inputs:{altKey:c,shiftKey:n,ctrlKey:O,originPoint:da,currentPoint:ra}}=this.app,{handle:Ea,snapshots:Ka,initialCommonBounds:fb}=this;let ub=Hd.sub(ra,da);c&&(ub=Hd.mul(ub,2));const bc=this.app.selectedShapes.values().next().value;let tc=Qe.getTransformedBoundingBox(fb,Ea,ub,this.selectionRotation,n||this.isSingle&&(O?!("clipping"in bc.props):!bc.canChangeAspectRatio||bc.props.isAspectRatioLocked));c&&(tc=Ff(Ff({},tc),Qe.centerBounds(tc,Qe.getBoundsCenter(fb))));
const {scaleX:Dc,scaleY:$c}=tc;this.app.selectedShapes.forEach(sd=>{var od,Gd;const {isAspectRatioLocked:Rd,props:id,bounds:qd,transformOrigin:xd}=Ka[sd.id];let Sd=Qe.getRelativeTransformedBoundingBox(tc,fb,qd,0>Dc,0>$c);if(sd.canResize.some(We=>We)||sd.props.isSizeLocked||!this.isSingle){var Id=[Dc,$c],Ve=null!=(od=id.rotation)?od:0;od=Qe.getBoundsCenter(Sd);sd.canFlip||(Id=Hd.abs(Id));sd.canScale||(Id=null!=(Gd=id.scale)?Gd:[1,1]);if(Ve&&0>Dc&&0<=$c||0>$c&&0<=Dc)Ve*=-1;this.app.settings.snapToGrid&&
!Rd&&(Sd=Qe.snapBoundsToGrid(Sd,8));sd.onResize(id,{center:od,rotation:Ve,scale:Id,bounds:Sd,type:Ea,clip:O,transformOrigin:xd})}});this.updateCursor(Dc,$c);this.app.viewport.panToPointWhenNearBounds(ra)});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.selectedShapes.forEach(O=>{O.update(Ff({},this.snapshots[O.id].props))}),this.tool.transition("idle")}})}updateCursor(c,n){var O,
da,ra,Ea;const Ka=0>c&&0<=n;c=0>n&&0<=c;switch(this.handle){case "top_left_corner":case "bottom_right_corner":Ka||c?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(O=this.app.selectionBounds)?void 0:O.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(da=this.app.selectionBounds)?void 0:da.rotation);break;case "top_right_corner":case "bottom_left_corner":Ka||c?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(ra=this.app.selectionBounds)?void 0:ra.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(Ea=this.app.selectionBounds)?void 0:Ea.rotation)}}},ht=dw;yb(ht,"id","resizing");yb(ht,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var ew=class extends hi{constructor(){super(...arguments);
yb(this,"cursor","rotate");yb(this,"handle","");yb(this,"onEnter",c=>{this.app.history.pause();this.handle=c.handle;this.updateCursor()});yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("rotating",{handle:this.handle})});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}updateCursor(){this.app.cursors.setCursor(gi[this.handle],
this.app.selectionRotation)}};yb(ew,"id","pointingRotateHandle");var fw=class extends hi{constructor(){super(...arguments);yb(this,"info",{});yb(this,"onEnter",c=>{this.info=c});yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&!this.app.readOnly&&this.tool.transition("translating")});yb(this,"onPointerUp",()=>{const {selectedIds:c,inputs:{shiftKey:n}}=this.app;n?this.app.setSelectedShapes([...Array.from(c.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(fw,"id","pointingShapeBehindBounds");var it=class extends hi{constructor(){super(...arguments);yb(this,"cursor","rotate");yb(this,"snapshot",{});yb(this,"initialCommonCenter",[0,0]);yb(this,"initialCommonBounds",{});yb(this,"initialAngle",0);yb(this,"initialSelectionRotation",0);yb(this,"handle","");yb(this,"onEnter",c=>{const {history:n,selectedShapesArray:O,selectionBounds:da}=
this.app;if(!da)throw Error("Expected selected bounds.");n.pause();this.handle=c.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Ff({},da);this.initialCommonCenter=Qe.getBoundsCenter(da);this.initialAngle=Hd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(O.map(ra=>[ra.id,{point:[...ra.props.point],center:[...ra.center],rotation:ra.props.rotation,handles:"handles"in ra?to(ra.handles):void 0}]));this.updateCursor()});
yb(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});yb(this,"onPointerMove",()=>{const {selectedShapes:c,inputs:{shiftKey:n,currentPoint:O}}=this.app,{snapshot:da,initialCommonCenter:ra,initialAngle:Ea,initialSelectionRotation:Ka}=this;let fb=Hd.angle(ra,O)-Ea;n&&(fb=Fh.snapAngleToSegments(fb,24));c.forEach(bc=>{var tc=da[bc.id];let Dc=0;if(n){var {rotation:$c=0}=tc;Dc=Fh.snapAngleToSegments($c,24)-$c}const sd=Hd.sub(tc.center,tc.point);$c=Hd.rotWith(tc.center,ra,fb);if("handles"in
bc){tc=tc.handles;const od=tc.map(Rd=>Hd.rotWith(Rd.point,sd,fb)),Gd=Qe.getCommonTopLeft(od);bc.update({point:Hd.add(Gd,Hd.sub($c,sd)),handles:tc.map((Rd,id)=>rg(Ff({},Rd),{point:Hd.sub(od[id],Gd)}))})}else bc.update({point:Hd.sub($c,sd),rotation:Fh.clampRadians((tc.rotation||0)+fb+Dc)})});const ub=Fh.clampRadians(Ka+fb);this.app.setSelectionRotation(n?Fh.snapAngleToSegments(ub,24):ub);this.updateCursor()});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});
yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.selectedShapes.forEach(O=>{O.update(this.snapshot[O.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(gi[this.handle],this.app.selectionRotation)}};yb(it,"id","rotating");var gw=class extends hi{constructor(){super(...arguments);yb(this,"onPinch",(c,n)=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")});yb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
yb(gw,"id","pinching");var hw=class extends gt{constructor(){super(...arguments);yb(this,"cursor","grabbing");yb(this,"onEnter",c=>{this.app.history.pause();this.newStartBindingId=Te();this.draggedBindingId=Te();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=c.id;this.currentShape=c.shape;this.initialShape=Ab(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};yb(hw,"id","translatingHandle");var iw=class extends hi{constructor(){super(...arguments);
yb(this,"cursor","grabbing");yb(this,"info",{});yb(this,"onEnter",c=>{this.info=c});yb(this,"onPointerMove",()=>{const {currentPoint:c,originPoint:n}=this.app.inputs;5<Hd.dist(c,n)&&this.tool.transition("translatingHandle",this.info)});yb(this,"onPointerUp",()=>{this.tool.transition("idle")});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(iw,"id","pointingHandle");var jw=class extends hi{constructor(){super(...arguments);yb(this,"handle");yb(this,"onEnter",
c=>{var n;this.app.cursors.setCursor(gi[c.handle],null!=(n=this.app.selectionBounds.rotation)?n:0);this.handle=c.handle});yb(this,"onExit",()=>{this.app.cursors.reset()});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});yb(this,"onPointerDown",c=>{switch(c.type){case "selection":switch(c.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
c);break;default:this.tool.transition("pointingResizeHandle",c)}}});yb(this,"onPointerLeave",()=>{this.tool.transition("idle")});yb(this,"onDoubleClick",c=>{var n;if(!c.order&&1===this.app.selectedShapes.size){var O=this.app.selectedShapes.values().next().value;if(!O.canEdit||this.app.readOnly||O.props.isLocked)O.onResetBounds({asset:O.props.assetId?this.app.assets[O.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(c.type){case "shape":this.tool.transition("editingShape",
c);break;case "selection":null==(n=O.onResetBounds)?void 0:n.call(O,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:O})}}})}};yb(jw,"id","hoveringSelectionHandle");var kw=class extends hi{constructor(){super(...arguments);yb(this,"editingShape",{});yb(this,"onEnter",c=>{this.editingShape=c.shape;this.app.setEditingShape(c.shape)});yb(this,"onExit",()=>{var c;if(this.editingShape&&"text"in this.editingShape.props){const n=
this.editingShape.props.text.trim();""===n&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:n}))}this.app.persist();this.app.setEditingShape();null==(c=document.querySelector(".tl-canvas"))?void 0:c.focus()});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})});yb(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.editingShape)break;this.tool.transition("idle",
c);break;case "canvas":c.order||this.tool.transition("idle",c)}});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":sc(()=>{n.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};yb(kw,"id","editingShape");var lw=class extends hi{constructor(){super(...arguments);yb(this,"minimapZoom",1);yb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});yb(this,"getCameraPoint",c=>{const n=document.querySelector(".tl-preview-minimap svg");
var O=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(n&&O){const da=n.getBoundingClientRect();this.minimapRect.height=da.height;this.minimapRect.width=da.width;this.minimapRect.minX=da.left;this.minimapRect.minY=da.top;this.minimapRect.maxX=da.right;this.minimapRect.maxY=da.bottom;this.minimapZoom=+n.dataset.commonBoundWidth/this.minimapRect.width;c=Hd.sub(c,[this.minimapRect.minX,this.minimapRect.minY]);O=O.getBoundingClientRect();O=Hd.mul(Hd.sub(c,[O.left+O.width/2,O.top+
O.height/2]),this.minimapZoom);return Hd.sub(this.app.viewport.camera.point,O)}});yb(this,"onEnter",c=>{(c=this.getCameraPoint([c.clientX,c.clientY]))?this.app.viewport.update({point:c}):this.tool.transition("idle")});yb(this,"onPointerMove",(c,n)=>{"clientX"in n&&(c=this.getCameraPoint([n.clientX,n.clientY]))&&this.app.viewport.update({point:c})});yb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};yb(lw,"id","pointingMinimap");var op=class extends mn{constructor(){super(...arguments);yb(this,
"returnTo","");yb(this,"onEnter",c=>{this.returnTo=null==c?void 0:c.returnTo})}};yb(op,"id","select");yb(op,"initial","idle");yb(op,"shortcut","whiteboard/select");yb(op,"states",[Xv,Vv,Wv,$v,Yv,fw,bw,Zv,jw,cw,ew,lw,iw,hw,aw,ht,it,it,gw,kw]);var mw=class extends hi{constructor(){super(...arguments);yb(this,"cursor","grabbing");yb(this,"originalScreenPoint",[]);yb(this,"originalCameraPoint",[]);yb(this,"prevState","idle");yb(this,"onEnter",c=>{this.prevState=null==c?void 0:c.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});yb(this,"onPointerMove",(c,n)=>{c=ve.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:ve.sub(this.originalCameraPoint,ve.div(c,this.app.viewport.camera.zoom))})});yb(this,"onPointerUp",()=>{var c;this.tool.transition(null!=(c=this.prevState)?c:"idle")})}};yb(mw,"id","panning");var nw=class extends hi{constructor(){super(...arguments);yb(this,"onEnter",c=>{this.parent.prevTool&&
c.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});yb(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("panning")})}};yb(nw,"id","idle");var ow=class extends hi{constructor(){super(...arguments);yb(this,"onPointerDown",(c,n)=>{c.order||this.tool.transition("panning",{prevState:"idleHold"})});yb(this,"onPinchStart",(c,n)=>{this.tool.transition("pinching",{info:c,event:n})})}};yb(ow,
"id","idleHold");var pw=class extends hi{constructor(){super(...arguments);yb(this,"origin",[0,0]);yb(this,"prevDelta",[0,0]);yb(this,"onEnter",c=>{this.prevDelta=c.info.delta;this.origin=c.info.point});yb(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};yb(pw,"id","pinching");var pp=class extends mn{constructor(){super(...arguments);yb(this,"cursor","grab");yb(this,"prevTool",null);yb(this,"onEnter",c=>{this.prevTool=
null==c?void 0:c.prevTool});yb(this,"onKeyDown",(c,n)=>{switch(n.key){case "Escape":this.app.transition("select")}});yb(this,"onPinchStart",(c,n)=>{this.transition("pinching",{info:c,event:n})})}};yb(pp,"id","move");yb(pp,"shortcut","whiteboard/pan");yb(pp,"states",[nw,ow,mw,pw]);yb(pp,"initial","idle");var Zj=class{constructor(c,n={}){yb(this,"lastShapesNounces",null);yb(this,"app");yb(this,"id");yb(this,"name");yb(this,"shapes",[]);yb(this,"bindings",{});yb(this,"nonce",0);yb(this,"bringForward",
fb=>{this.bringToFront(fb);return this});yb(this,"sendBackward",fb=>{this.sendToBack(fb);return this});yb(this,"bringToFront",fb=>{const ub=this.parseShapesArg(fb);fb=this.shapes.filter(bc=>!ub.includes(bc));this.shapes=fb.concat(ub);fb={op:"bringToFront",shapes:ub,before:fb[fb.length-1]};this.app.persist(fb);this.persistInfo=fb;return this});yb(this,"sendToBack",fb=>{const ub=this.parseShapesArg(fb);fb=this.shapes.filter(bc=>!ub.includes(bc));this.shapes=ub.concat(fb);this.app.persist({op:"sendToBack",
shapes:ub,next:fb[0]});return this});yb(this,"flip",(fb,ub)=>{fb=this.parseShapesArg(fb);const bc=Qe.getCommonBounds(fb.map(tc=>tc.bounds));fb.forEach(tc=>{var Dc;const $c=Qe.getRelativeTransformedBoundingBox(bc,bc,tc.bounds,"horizontal"===ub,"vertical"===ub);if(tc.serialized)tc.onResize(tc.serialized,{bounds:$c,center:Qe.getBoundsCenter($c),rotation:null!=(Dc=tc.props.rotation)?Dc:-0,type:"top_left_corner",scale:tc.canFlip&&tc.props.scale?"horizontal"===ub?[-tc.props.scale[0],1]:[1,-tc.props.scale[1]]:
[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});yb(this,"getShapeById",fb=>this.shapes.find(ub=>ub.id===fb));yb(this,"cleanup",fb=>{fb=yc(this.bindings,fb);const ub=new Set;let bc=!1;const tc=to(this.bindings);fb.forEach(Dc=>{var $c;if(this.bindings[Dc.id]){var sd=this.getShapeById(Dc.toId),od=this.getShapeById(Dc.fromId);sd&&od?ub.has(od.id)||(Dc=this.updateArrowBindings(od),ub.add(od.id),Dc&&(sd=Ff(Ff({},od.props),Dc),null==($c=this.getShapeById(sd.id))?void 0:$c.update(sd,
!1,(0,Yz.default)(null==Dc?void 0:Dc.handles,null==od?void 0:od.props.handles)))):(delete tc[Dc.id],bc=!0)}});Object.keys(tc).forEach(Dc=>{const $c=this.bindings[Dc];0===this.shapes.filter(sd=>sd.id===$c.fromId||sd.id===$c.toId).length&&(delete tc[Dc],bc=!0)});bc&&this.update({bindings:tc})});yb(this,"updateArrowBindings",fb=>{var ub,bc,tc,Dc={start:to(fb.props.handles.start),end:to(fb.props.handles.end)},$c={isBound:!1,handle:fb.props.handles.start,point:ve.add(fb.props.handles.start.point,fb.props.point)},
sd={isBound:!1,handle:fb.props.handles.end,point:ve.add(fb.props.handles.end.point,fb.props.point)};if(fb.props.handles.start.bindingId){var od=void 0!==(null==(ub=fb.props.decorations)?void 0:ub.start);ub=fb.props.handles.start;var Gd=this.bindings[fb.props.handles.start.bindingId],Rd=this.getShapeById(null==Gd?void 0:Gd.toId);if(Rd){$c=Rd.getBounds();var id=Rd.getExpandedBounds(),qd=Qe.expandBounds($c,od?Gd.distance:1);const {minX:xd,minY:Sd,width:Id,height:Ve}=id,We=ve.add([xd,Sd],ve.mulV([Id,
Ve],ve.rotWith(Gd.point,[.5,.5],Rd.props.rotation||0)));$c={isBound:!0,hasDecoration:od,binding:Gd,handle:ub,point:We,target:Rd,bounds:$c,expandedBounds:id,intersectBounds:qd,center:Rd.getCenter()}}}if(fb.props.handles.end.bindingId&&(od=void 0!==(null==(bc=fb.props.decorations)?void 0:bc.end),bc=fb.props.handles.end,ub=this.bindings[fb.props.handles.end.bindingId],Gd=this.getShapeById(null==ub?void 0:ub.toId))){sd=Gd.getBounds();Rd=Gd.getExpandedBounds();id=od?Qe.expandBounds(sd,ub.distance):sd;
const {minX:xd,minY:Sd,width:Id,height:Ve}=Rd;qd=ve.add([xd,Sd],ve.mulV([Id,Ve],ve.rotWith(ub.point,[.5,.5],Gd.props.rotation||0)));sd={isBound:!0,hasDecoration:od,binding:ub,handle:bc,point:qd,target:Gd,bounds:sd,expandedBounds:Rd,intersectBounds:id,center:Gd.getCenter()}}for(const xd of["end","start"]){bc="start"===xd?$c:sd;const Sd="start"===xd?sd:$c;if(bc.isBound)if(bc.binding.distance){if(od=ve.uni(ve.sub(bc.point,Sd.point)),ub=J(Sd.point,od,bc.intersectBounds,bc.target.props.rotation).filter(Id=>
Id.didIntersect).map(Id=>Id.points[0]).sort((Id,Ve)=>ve.dist(Id,Sd.point)-ve.dist(Ve,Sd.point)),ub[0])if(Gd=void 0,Sd.isBound&&(Gd=J(Sd.point,od,Sd.intersectBounds,Sd.target.props.rotation).filter(Id=>Id.didIntersect).map(Id=>Id.points[0]).sort((Id,Ve)=>ve.dist(Id,Sd.point)-ve.dist(Ve,Sd.point))[0]),Sd.isBound&&(2>ub.length||Gd&&ub[0]&&10>Math.ceil(ve.dist(ub[0],Gd))||Qe.boundsContain(bc.expandedBounds,Sd.expandedBounds)||Qe.boundsCollide(bc.expandedBounds,Sd.expandedBounds)))od=ve.uni(ve.sub(Sd.point,
bc.point)),ub=J(bc.point,od,bc.bounds,bc.target.props.rotation).filter(Id=>Id.didIntersect).map(Id=>Id.points[0]),ub[0]&&(Dc[xd].point=ve.toFixed(ve.sub(ub[0],fb.props.point)),Dc["start"===xd?"end":"start"].point=ve.toFixed(ve.add(ve.sub(ub[0],fb.props.point),ve.mul(od,Math.min(ve.dist(ub[0],Sd.point),10*(Qe.boundsContain(Sd.bounds,bc.intersectBounds)?-1:1))))));else{if(!Sd.isBound&&(ub[0]&&10>ve.dist(ub[0],Sd.point)||xh.pointInBounds(Sd.point,bc.intersectBounds)))return Dc=ve.uni(ve.sub(bc.center,
Sd.point)),null==(tc=fb.getHandlesChange)?void 0:tc.call(fb,fb.props,{[xd]:rg(Ff({},fb.props.handles[xd]),{point:ve.toFixed(ve.add(ve.sub(Sd.point,fb.props.point),ve.mul(Dc,10)))})});ub[0]&&(Dc[xd].point=ve.toFixed(ve.sub(ub[0],fb.props.point)))}}else Dc[xd].point=ve.sub(bc.point,fb.props.point)}return fb.getHandlesChange(fb.props,Dc)});const {id:O,name:da,shapes:ra=[],bindings:Ea={},nonce:Ka}=n;this.id=O;this.name=da;this.bindings=Object.assign({},Ea);this.app=c;this.nonce=Ka||0;this.persistInfo=
null;this.addShapes(...ra);Hc(this);nc(()=>{const fb=0<this.shapes.length?Object.fromEntries(this.shapes.map(ub=>[ub.id,ub.nonce])):null;if(this.lastShapesNounces&&fb){const ub=this.lastShapesNounces,bc=[...(new Set([...Object.keys(fb),...Object.keys(ub)]))].filter(tc=>ub[tc]!==fb[tc]);requestAnimationFrame(()=>{this.cleanup(bc)})}fb&&(this.lastShapesNounces=fb)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(c=>c.serialized).filter(c=>!!c).map(c=>Ab(c)),bindings:to(this.bindings),
nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(c=>[c.id,c]))}update(c){Object.assign(this,c);return this}updateBindings(c){Object.assign(this.bindings,c);return this}updateShapesIndex(c){this.shapes.sort((n,O)=>c.indexOf(n.id)-c.indexOf(O.id));return this}addShapes(...c){if(0!==c.length)return c="getBounds"in c[0]?c:c.map(n=>new (this.app.getShapeClass(n.type))(n)),this.shapes.push(...c),c}parseShapesArg(c){return"string"===typeof c[0]?this.shapes.filter(n=>c.includes(n.id)):
c}removeShapes(...c){const n=this.parseShapesArg(c);this.shapes=this.shapes.filter(O=>!n.includes(O));return n}getBindableShapes(){return this.shapes.filter(c=>c.canBind).sort((c,n)=>n.nonce-c.nonce).map(c=>c.id)}};ye([Ug],Zj.prototype,"id",2);ye([Ug],Zj.prototype,"name",2);ye([Ug],Zj.prototype,"shapes",2);ye([Ug],Zj.prototype,"bindings",2);ye([bh],Zj.prototype,"serialized",1);ye([bh],Zj.prototype,"shapesById",1);ye([Ug],Zj.prototype,"nonce",2);ye([Gg],Zj.prototype,"update",1);ye([Gg],Zj.prototype,
"updateBindings",1);ye([Gg],Zj.prototype,"updateShapesIndex",1);ye([Gg],Zj.prototype,"addShapes",1);ye([Gg],Zj.prototype,"removeShapes",1);ye([Gg],Zj.prototype,"bringForward",2);ye([Gg],Zj.prototype,"sendBackward",2);ye([Gg],Zj.prototype,"bringToFront",2);ye([Gg],Zj.prototype,"sendToBack",2);ye([Gg],Zj.prototype,"cleanup",2);var jj=class{constructor(){yb(this,"shiftKey",!1);yb(this,"ctrlKey",!1);yb(this,"modKey",!1);yb(this,"altKey",!1);yb(this,"spaceKey",!1);yb(this,"isPinching",!1);yb(this,"currentScreenPoint",
[0,0]);yb(this,"currentPoint",[0,0]);yb(this,"previousScreenPoint",[0,0]);yb(this,"previousPoint",[0,0]);yb(this,"originScreenPoint",[0,0]);yb(this,"originPoint",[0,0]);yb(this,"pointerIds",new Set);yb(this,"state","idle");yb(this,"containerOffset",[0,0]);yb(this,"onPointerDown",(c,n)=>{this.pointerIds.add(n.pointerId);this.updateModifiers(n);this.originScreenPoint=this.currentScreenPoint;this.originPoint=c;this.state="pointing"});yb(this,"onPointerMove",(c,n)=>{"pinching"!==this.state&&("panning"===
this.state&&(this.state="idle"),this.updateModifiers(n),this.previousPoint=this.currentPoint,this.currentPoint=c)});yb(this,"onPointerUp",(c,n)=>{this.pointerIds.clear();this.updateModifiers(n);this.state="idle"});yb(this,"onKeyDown",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=!0}});yb(this,"onKeyUp",c=>{this.updateModifiers(c);switch(c.key){case " ":this.spaceKey=!1}});yb(this,"onPinchStart",(c,n)=>{this.updateModifiers(n);this.state="pinching"});yb(this,"onPinch",(c,n)=>{"pinching"===
this.state&&this.updateModifiers(n)});yb(this,"onPinchEnd",(c,n)=>{"pinching"===this.state&&(this.updateModifiers(n),this.state="idle")});Hc(this)}updateContainerOffset(c){Object.assign(this.containerOffset,c)}updateModifiers(c){c.isPrimary&&("clientX"in c&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=ve.sub([c.clientX,c.clientY],this.containerOffset)),"shiftKey"in c&&(this.shiftKey=c.shiftKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.modKey=Zb()?c.metaKey:c.ctrlKey))}};
ye([Ug],jj.prototype,"shiftKey",2);ye([Ug],jj.prototype,"ctrlKey",2);ye([Ug],jj.prototype,"modKey",2);ye([Ug],jj.prototype,"altKey",2);ye([Ug],jj.prototype,"spaceKey",2);ye([Ug],jj.prototype,"isPinching",2);ye([Ug],jj.prototype,"currentScreenPoint",2);ye([Ug],jj.prototype,"currentPoint",2);ye([Ug],jj.prototype,"previousScreenPoint",2);ye([Ug],jj.prototype,"previousPoint",2);ye([Ug],jj.prototype,"originScreenPoint",2);ye([Ug],jj.prototype,"originPoint",2);ye([Ug],jj.prototype,"state",2);ye([Ug],jj.prototype,
"containerOffset",2);ye([Gg],jj.prototype,"updateContainerOffset",1);ye([Gg],jj.prototype,"updateModifiers",1);ye([Gg],jj.prototype,"onPointerDown",2);ye([Gg],jj.prototype,"onPointerMove",2);ye([Gg],jj.prototype,"onPointerUp",2);ye([Gg],jj.prototype,"onKeyDown",2);ye([Gg],jj.prototype,"onKeyUp",2);ye([Gg],jj.prototype,"onPinchStart",2);ye([Gg],jj.prototype,"onPinch",2);ye([Gg],jj.prototype,"onPinchEnd",2);var Iz=(c,n=100)=>-(Math.cos(Math.PI*Hd.clamp(c/n,0,1))-1)/2,so=class{constructor(){yb(this,
"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});yb(this,"camera",{point:[0,0],zoom:1});yb(this,"updateBounds",c=>{this.bounds=c;return this});yb(this,"panCamera",c=>this.update({point:Hd.sub(this.camera.point,Hd.div(c,this.camera.zoom))}));yb(this,"panToPointWhenNearBounds",c=>{const n=Hd.div([so.panThreshold,so.panThreshold],this.camera.zoom),O=Hd.sub([this.currentView.maxX,this.currentView.maxY],Hd.add(c,n));c=Hd.sub([this.currentView.minX,this.currentView.minY],Hd.sub(c,n));
this.panCamera(Hd.mul([0>O[0]?O[0]:0<c[0]?c[0]:0,0>O[1]?O[1]:0<c[1]?c[1]:0],-so.panMultiplier*this.camera.zoom))});yb(this,"update",({point:c,zoom:n})=>{void 0===c||isNaN(c[0])||isNaN(c[1])||(this.camera.point=c);void 0===n||isNaN(n)||(this.camera.zoom=Math.min(4,Math.max(.1,n)));return this});yb(this,"getPagePoint",c=>{const {camera:n,bounds:O}=this;return Hd.sub(Hd.div(Hd.sub(c,[O.minX,O.minY]),n.zoom),n.point)});yb(this,"getScreenPoint",c=>{const {camera:n}=this;return Hd.mul(Hd.add(c,n.point),
n.zoom)});yb(this,"onZoom",(c,n,O=!1)=>this.pinchZoom(c,[0,0],n,O));yb(this,"pinchZoom",(c,n,O,da=!1)=>{var {camera:ra}=this;n=Hd.sub(ra.point,Hd.div(n,ra.zoom));O=Hd.clamp(O,so.minZoom,so.maxZoom);ra=Hd.div(c,ra.zoom);c=Hd.div(c,O);c=Hd.toFixed(Hd.add(n,Hd.sub(c,ra)));da?this.animateCamera({point:c,zoom:O}):this.update({point:c,zoom:O});return this});yb(this,"setZoom",(c,n=!1)=>{const {bounds:O}=this;this.onZoom([O.width/2,O.height/2],c,n)});yb(this,"zoomIn",()=>{const {camera:c}=this;this.setZoom(c.zoom/
.8,!0)});yb(this,"zoomOut",()=>{const {camera:c}=this;this.setZoom(.8*c.zoom,!0)});yb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});yb(this,"animateCamera",({point:c,zoom:n})=>this.animateToViewport({minX:-c[0],minY:-c[1],maxX:this.bounds.width/n-c[0],maxY:this.bounds.height/n-c[1],width:this.bounds.width/n,height:this.bounds.height/n}));yb(this,"animateToViewport",c=>{const n=performance.now(),O=Ff({},this.currentView),da=()=>{var ra=performance.now()-n;ra=Iz(ra);var Ea=O.minX+(c.minX-O.minX)*
ra;this.update({point:[-Ea,-(O.minY+(c.minY-O.minY)*ra)],zoom:this.bounds.width/(O.maxX+(c.maxX-O.maxX)*ra-Ea)});1>ra&&requestAnimationFrame(da)};da()});yb(this,"zoomToBounds",({width:c,height:n,minX:O,minY:da})=>{const {bounds:ra,camera:Ea}=this;let Ka=Math.min((ra.width-100)/c,(ra.height-100)/n);Ka=Math.min(1,Math.max(so.minZoom,Ea.zoom===Ka||1>Ea.zoom?Math.min(1,Ka):Ka));c=Hd.add([-O,-da],[(ra.width-c*Ka)/2/Ka,(ra.height-n*Ka)/2/Ka]);this.animateCamera({point:c,zoom:Ka})});Hc(this)}get currentView(){const {bounds:c,
camera:{point:n,zoom:O}}=this,da=c.width/O,ra=c.height/O;return{minX:-n[0],minY:-n[1],maxX:da-n[0],maxY:ra-n[1],width:da,height:ra}}},yl=so;yb(yl,"minZoom",.1);yb(yl,"maxZoom",4);yb(yl,"panMultiplier",.05);yb(yl,"panThreshold",100);ye([Ug],yl.prototype,"bounds",2);ye([Ug],yl.prototype,"camera",2);ye([Gg],yl.prototype,"updateBounds",2);ye([Gg],yl.prototype,"update",2);ye([bh],yl.prototype,"currentView",1);var Jz=class{constructor(c){yb(this,"app");yb(this,"editShape",n=>{(null==n?0:n.props.isLocked)||
this.app.transition("select").selectedTool.transition("editingShape",{shape:n});return this});yb(this,"hoverShape",n=>{this.app.setHoveredShape(n);return this});yb(this,"createShapes",(...n)=>{this.app.createShapes(n);return this});yb(this,"updateShapes",(...n)=>{this.app.updateShapes(n);return this});yb(this,"deleteShapes",(...n)=>{this.app.deleteShapes(n.length?n:this.app.selectedShapesArray);return this});yb(this,"selectShapes",(...n)=>{this.app.setSelectedShapes(n);return this});yb(this,"deselectShapes",
(...n)=>{const O="string"===typeof n[0]?n:n.map(da=>da.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(da=>!O.includes(da.id)));return this});yb(this,"flipHorizontal",(...n)=>{this.app.flipHorizontal(n);return this});yb(this,"flipVertical",(...n)=>{this.app.flipVertical(n);return this});yb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(n=>!this.app.shapesInGroups().includes(n)));return this});yb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);
return this});yb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});yb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});yb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});yb(this,"zoomToFit",()=>{var {shapes:n}=this.app.currentPage;if(0===n.length)return this;n=Qe.getCommonBounds(n.map(O=>O.bounds));this.app.viewport.zoomToBounds(n);return this});yb(this,"cameraToCenter",()=>{var {shapes:n}=this.app.currentPage;if(0===n.length)return this;n=Qe.getCommonBounds(n.map(O=>
O.bounds));this.app.viewport.update({point:ve.add(ve.neg(Qe.getBoundsCenter(n)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});yb(this,"zoomToSelection",()=>{const {selectionBounds:n}=this.app;if(!n)return this;this.app.viewport.zoomToBounds(n);return this});yb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:ve.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});yb(this,"toggleGrid",()=>{const {settings:n}=
this.app;n.update({showGrid:!n.showGrid});return this});yb(this,"toggleSnapToGrid",()=>{const {settings:n}=this.app;n.update({snapToGrid:!n.snapToGrid});return this});yb(this,"togglePenMode",()=>{const {settings:n}=this.app;n.update({penMode:!n.penMode});return this});yb(this,"setColor",n=>{const {settings:O}=this.app;O.update({color:n});this.app.selectedShapesArray.forEach(da=>{da.props.isLocked||da.update({fill:n,stroke:n})});this.app.persist();return this});yb(this,"setScaleLevel",n=>{const {settings:O}=
this.app;O.update({scaleLevel:n});this.app.selectedShapes.forEach(da=>{da.props.isLocked||da.setScaleLevel(n)});this.app.persist();return this});yb(this,"undo",()=>{this.app.undo();return this});yb(this,"redo",()=>{this.app.redo();return this});yb(this,"persist",()=>{this.app.persist();return this});yb(this,"createNewLineBinding",(n,O)=>this.app.createNewLineBinding(n,O));yb(this,"clone",n=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(nb).some($c=>$c===this.app.selectedShapesArray[0].type)){var O=
this.app.allSelectedShapesArray[0],da=this.app.getShapeClass(O.type),{minX:ra,minY:Ea,maxX:Ka,maxY:fb,width:ub,height:bc}=O.bounds,tc=[0,0];switch(n){case "down":tc=[ra,fb+100];break;case "up":tc=[ra,Ea-100-bc];break;case "left":tc=[ra-100-ub,Ea];break;case "right":tc=[Ka+100,Ea]}var Dc=new da(rg(Ff({},O.serialized),{id:Te(),nonce:Date.now(),refs:[],label:"",point:tc}));this.app.history.pause();this.app.currentPage.addShapes(Dc);this.app.createNewLineBinding(O,Dc);this.app.history.resume();this.app.persist();
setTimeout(()=>this.editShape(Dc))}});yb(this,"cloneShapes",({shapes:n,assets:O,bindings:da,point:ra=[0,0]})=>{const Ea=Qe.getCommonBounds(n.filter(ub=>"group"!==ub.type).map(ub=>{var bc,tc,Dc,$c,sd,od,Gd,Rd,id,qd,xd,Sd,Id,Ve,We,ig;return{minX:null!=(tc=null==(bc=ub.point)?void 0:bc[0])?tc:ra[0],minY:null!=($c=null==(Dc=ub.point)?void 0:Dc[1])?$c:ra[1],width:null!=(od=null==(sd=ub.size)?void 0:sd[0])?od:4,height:null!=(Rd=null==(Gd=ub.size)?void 0:Gd[1])?Rd:4,maxX:(null!=(qd=null==(id=ub.point)?void 0:
id[0])?qd:ra[0])+(null!=(Sd=null==(xd=ub.size)?void 0:xd[0])?Sd:4),maxY:(null!=(Ve=null==(Id=ub.point)?void 0:Id[1])?Ve:ra[1])+(null!=(ig=null==(We=ub.size)?void 0:We[1])?ig:4)}})),Ka=n.map(ub=>rg(Ff({},ub),{id:Te(),point:[ra[0]+ub.point[0]-Ea.minX,ra[1]+ub.point[1]-Ea.minY]}));Ka.forEach(ub=>{var bc;ub.children&&0<(null==(bc=ub.children)?void 0:bc.length)&&(ub.children=ub.children.map(tc=>{var Dc;return null==(Dc=Ka[n.findIndex($c=>$c.id===tc)])?void 0:Dc.id}).filter(Qc))});const fb=[];Ka.flatMap(ub=>
{var bc;return Object.values(null!=(bc=ub.handles)?bc:{})}).forEach(ub=>{if(ub.bindingId){var bc=da[ub.bindingId];if(bc){var tc=n.findIndex($c=>$c.id===bc.fromId);const Dc=n.findIndex($c=>$c.id===bc.toId);bc&&-1!==tc&&-1!==Dc?(tc=rg(Ff({},bc),{id:Te(),fromId:Ka[tc].id,toId:Ka[Dc].id}),fb.push(tc),ub.bindingId=tc.id):ub.bindingId=void 0}else console.warn("binding not found",ub.bindingId)}});O=O.filter(ub=>Ka.some(bc=>bc.assetId===ub.id));return{shapes:Ka,assets:O,bindings:fb}});yb(this,"getClonedShapesFromTldrString",
(n,O)=>{try{{var da;const bc=null==(da=n.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:da[1];if(bc){try{var ra=JSON.parse(bc)}catch(tc){ra=null}var Ea=ra}else Ea=void 0}n=Ea;if(!n)return null;const {shapes:Ka,bindings:fb,assets:ub}=n;return this.cloneShapes({shapes:Ka,bindings:fb,assets:ub,point:O})}catch(Ka){console.log(Ka)}return null});yb(this,"cloneShapesIntoCurrentPage",n=>{(n=this.cloneShapes(n))&&this.addClonedShapes(n);return this});yb(this,"addClonedShapes",n=>{const {shapes:O,
assets:da,bindings:ra}=n;0<da.length&&this.app.createAssets(da);0<O.length&&this.app.createShapes(O);this.app.currentPage.updateBindings(Object.fromEntries(ra.map(Ea=>[Ea.id,Ea])));this.app.selectedTool.transition("idle");return this});yb(this,"addClonedShapesFromTldrString",(n,O)=>{(n=this.getClonedShapesFromTldrString(n,O))&&this.addClonedShapes(n);return this});yb(this,"doGroup",(n=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){this.app.history.pause();var O=[...n.filter(da=>"group"===
da.type),...n.map(da=>this.app.getParentGroup(da))].filter(Qc);this.app.currentPage.removeShapes(...O);n=n.filter(da=>"group"!==da.type);1<n.length&&(O=this.app.getShapeClass("group"),O=new O({id:Te(),type:O.id,parentId:this.app.currentPage.id,children:n.map(da=>da.id)}),this.app.currentPage.addShapes(O),this.app.setSelectedShapes([O]),n.push(O),this.app.bringForward(n));this.app.history.resume();this.app.persist(this.app.currentPage.persistInfo)}});yb(this,"unGroup",(n=this.app.allSelectedShapesArray)=>
{if(!this.app.readOnly){n=[...n.filter(da=>"group"===da.type),...n.map(da=>this.app.getParentGroup(da))].filter(Qc);var O=this.app.shapesInGroups(n);0<n.length&&(this.app.currentPage.removeShapes(...n),this.app.persist(),this.app.setSelectedShapes(O))}});yb(this,"convertShapes",(n,O=this.app.allSelectedShapesArray)=>{const da=this.app.getShapeClass(n);this.app.currentPage.removeShapes(...O);O=O.map(ra=>new da(rg(Ff({},ra.serialized),{type:n,nonce:Date.now()})));this.app.currentPage.addShapes(...O);
this.app.persist();this.app.setSelectedShapes(O)});yb(this,"setCollapsed",(n,O=this.app.allSelectedShapesArray)=>{O.forEach(da=>{"logseq-portal"===da.props.type&&da.setCollapsed(n)});this.app.persist()});this.app=c}},qp=class{constructor(){yb(this,"cursor","default");yb(this,"rotation",0);yb(this,"reset",()=>{this.cursor="default"});yb(this,"setCursor",(c,n=0)=>{if(c!==this.cursor||n!==this.rotation)this.cursor=c,this.rotation=n});yb(this,"setRotation",c=>{c!==this.rotation&&(this.rotation=c)});Hc(this)}};
ye([Ug],qp.prototype,"cursor",2);ye([Ug],qp.prototype,"rotation",2);ye([Gg],qp.prototype,"reset",2);ye([Gg],qp.prototype,"setCursor",2);ye([Gg],qp.prototype,"setRotation",2);var rp=class{constructor(c){yb(this,"app");yb(this,"stack",[]);yb(this,"isPaused",!0);yb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});yb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});yb(this,"persist",n=>{this.isPaused||this.creating||this.app.notify("persist",n)});yb(this,"undo",()=>{this.isPaused||"idle"===
this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});yb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});yb(this,"instantiateShape",n=>new (this.app.getShapeClass(n.type))(n));yb(this,"deserialize",n=>{sc(()=>{var O,{pages:da}=n;const ra=this.isPaused;this.pause();const Ea=[...this.app.selectedIds];try{const Ka=new Map(this.app.pages),fb=[];for(const ub of da){const bc=Ka.get(ub.id);if(void 0!==bc){const tc=
new Map(bc.shapes.map(Dc=>[Dc.props.id,Dc]));da=[];for(const Dc of ub.shapes){const $c=tc.get(Dc.id);void 0!==$c?($c.nonce!==Dc.nonce&&($c.update(Dc,!0),$c.nonce=Dc.nonce,$c.setLastSerialized(Dc)),tc.delete(Dc.id)):da.push(this.instantiateShape(Dc))}0<tc.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&bc.removeShapes(...tc.values());0<da.length&&bc.addShapes(...da);Ka.delete(ub.id);bc.updateBindings(ub.bindings);bc.nonce=null!=(O=ub.nonce)?O:0}else{const {id:tc,name:Dc,shapes:$c,
bindings:sd,nonce:od}=ub;fb.push(new Zj(this.app,{id:tc,name:Dc,nonce:od,bindings:sd,shapes:$c.map(Gd=>this.instantiateShape(Gd))}))}}0<fb.length&&this.app.addPages(fb);0<Ka.size&&this.app.removePages(Array.from(Ka.values()));this.app.setSelectedShapes(Ea).setErasingShapes([])}catch(Ka){console.warn(Ka)}ra||this.resume()})});this.app=c;Hc(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};ye([Ug],rp.prototype,"stack",2);ye([Gg],rp.prototype,"persist",2);ye([Gg],rp.prototype,
"undo",2);ye([Gg],rp.prototype,"redo",2);ye([Gg],rp.prototype,"deserialize",2);var nn=class{constructor(){yb(this,"mode","light");yb(this,"showGrid",!0);yb(this,"snapToGrid",!1);yb(this,"penMode",!1);yb(this,"scaleLevel","md");yb(this,"color","");Hc(this)}update(c){Object.assign(this,c)}};ye([Ug],nn.prototype,"mode",2);ye([Ug],nn.prototype,"showGrid",2);ye([Ug],nn.prototype,"snapToGrid",2);ye([Ug],nn.prototype,"penMode",2);ye([Ug],nn.prototype,"scaleLevel",2);ye([Ug],nn.prototype,"color",2);ye([Gg],
nn.prototype,"update",1);var qh=class extends np{constructor(c,n,O,da){var ra,Ea;super();yb(this,"uuid",Te());yb(this,"readOnly");yb(this,"api");yb(this,"inputs",new jj);yb(this,"cursors",new qp);yb(this,"viewport",new yl);yb(this,"settings",new nn);yb(this,"Tools",[]);yb(this,"history",new rp(this));yb(this,"persist",this.history.persist);yb(this,"undo",this.history.undo);yb(this,"redo",this.history.redo);yb(this,"saving",!1);yb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>
{this.saving&&(this.persist(),this.saving=!1)}))});yb(this,"load",()=>{this.notify("load",null);return this});yb(this,"save",()=>{this.notify("save",null);return this});yb(this,"pages",new Map([["page",new Zj(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));yb(this,"getPageById",Ka=>{const fb=this.pages.get(Ka);if(!fb)throw Error(`Could not find a page named ${Ka}.`);return fb});yb(this,"getShapeById",(Ka,fb=this.currentPage.id)=>{var ub;return null==(ub=this.getPageById(fb))?void 0:ub.shapesById[Ka]});
yb(this,"createShapes",Ka=>{if(this.readOnly)return this;(Ka=this.currentPage.addShapes(...Ka))&&this.notify("create-shapes",Ka);this.persist();return this});yb(this,"updateShapes",Ka=>{if(this.readOnly)return this;Ka.forEach(fb=>{const ub=this.getShapeById(fb.id);null==ub?void 0:ub.update(fb);fb.type!==(null==ub?void 0:ub.type)&&this.api.convertShapes(fb.type,[ub])});this.persist();return this});yb(this,"deleteShapes",Ka=>{if(0===Ka.length||this.readOnly)return this;Ka=Ka.map(tc=>"string"===typeof tc?
this.getShapeById(tc):tc).filter(Qc).filter(tc=>!tc.props.isLocked);const fb=this.shapesInGroups(Ka);Ka.forEach(tc=>{this.getParentGroup(tc)&&fb.push(tc)});let ub=new Set([...Ka,...fb].map(tc=>tc.id));fb.forEach(tc=>{var Dc;const $c=this.getParentGroup(tc);if($c){const sd=null==(Dc=$c.props.children)?void 0:Dc.filter(od=>od!==tc.id);!sd||1>=(null==sd?void 0:sd.length)?ub.add($c.id):$c.update({children:sd})}});const bc=(tc,Dc)=>{var $c;[...ub].includes(tc)&&"line"===(null==($c=this.getShapeById(Dc))?
void 0:$c.type)&&ub.add(Dc)};this.currentPage.shapes.filter(tc=>!tc.props.isLocked).flatMap(tc=>{var Dc;return Object.values(null!=(Dc=tc.props.handles)?Dc:{})}).flatMap(tc=>tc.bindingId).filter(Qc).map(tc=>{var Dc,$c;const sd=null==(Dc=this.currentPage.bindings[tc])?void 0:Dc.toId;tc=null==($c=this.currentPage.bindings[tc])?void 0:$c.fromId;sd&&tc&&(bc(sd,tc),bc(tc,sd))});Ka=[...ub].map(tc=>this.getShapeById(tc));this.setSelectedShapes(this.selectedShapesArray.filter(tc=>!ub.has(tc.id)));(Ka=this.currentPage.removeShapes(...Ka))&&
this.notify("delete-shapes",Ka);this.persist();return this});yb(this,"bringForward",(Ka=this.selectedShapesArray)=>{0<Ka.length&&!this.readOnly&&this.currentPage.bringForward(Ka);return this});yb(this,"sendBackward",(Ka=this.selectedShapesArray)=>{0<Ka.length&&!this.readOnly&&this.currentPage.sendBackward(Ka);return this});yb(this,"sendToBack",(Ka=this.selectedShapesArray)=>{0<Ka.length&&!this.readOnly&&this.currentPage.sendToBack(Ka);return this});yb(this,"bringToFront",(Ka=this.selectedShapesArray)=>
{0<Ka.length&&!this.readOnly&&this.currentPage.bringToFront(Ka);return this});yb(this,"flipHorizontal",(Ka=this.selectedShapesArray)=>{this.currentPage.flip(Ka,"horizontal");return this});yb(this,"flipVertical",(Ka=this.selectedShapesArray)=>{this.currentPage.flip(Ka,"vertical");return this});yb(this,"align",(Ka,fb=this.selectedShapesArray)=>{if(2>fb.length||this.readOnly)return this;const ub=fb.map(sd=>{const od=sd.getBounds();return{id:sd.id,point:[od.minX,od.minY],bounds:od}}),bc=Qe.getCommonBounds(ub.map(({bounds:sd})=>
sd)),tc=bc.minX+bc.width/2,Dc=bc.minY+bc.height/2,$c=Object.fromEntries(ub.map(({id:sd,point:od,bounds:Gd})=>[sd,{prev:od,next:{top:[od[0],bc.minY],centerVertical:[od[0],Dc-Gd.height/2],bottom:[od[0],bc.maxY-Gd.height],left:[bc.minX,od[1]],centerHorizontal:[tc-Gd.width/2,od[1]],right:[bc.maxX-Gd.width,od[1]]}[Ka]}]));fb.forEach(sd=>{$c[sd.id]&&sd.update({point:$c[sd.id].next})});this.persist();return this});yb(this,"distribute",(Ka,fb=this.selectedShapesArray)=>{if(2>fb.length||this.readOnly)return this;
const ub=Object.fromEntries(Qe.getDistributions(fb,Ka).map(bc=>[bc.id,bc]));fb.forEach(bc=>{ub[bc.id]&&bc.update({point:ub[bc.id].next})});this.persist();return this});yb(this,"packIntoRectangle",(Ka=this.selectedShapesArray)=>{if(2>Ka.length||this.readOnly)return this;const fb=Object.fromEntries(Qe.getPackedDistributions(Ka).map(ub=>[ub.id,ub]));Ka.forEach(ub=>{fb[ub.id]&&ub.update({point:fb[ub.id].next})});this.persist();return this});yb(this,"setLocked",Ka=>{if(0===this.selectedShapesArray.length||
this.readOnly)return this;this.selectedShapesArray.forEach(fb=>{fb.update({isLocked:Ka})});this.persist();return this});yb(this,"assets",{});yb(this,"removeUnusedAssets",()=>{const Ka=this.getCleanUpAssets();Object.keys(this.assets).forEach(fb=>{Ka.some(ub=>ub.id===fb)||delete this.assets[fb]});this.persist();return this});yb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const fb=this.allSelectedShapesArray;var Ka=JSON.stringify({shapes:fb.map(bc=>bc.serialized),assets:this.getCleanUpAssets().filter(bc=>
fb.some(tc=>tc.props.assetId===bc.id)),bindings:Ab(this.currentPage.bindings)});Ka=encodeURIComponent(`<whiteboard-tldr>${Ka}</whiteboard-tldr>`);const ub=this.selectedShapesArray.map(bc=>`((${bc.props.id}))`).join(" ");this.notify("copy",{text:ub,html:Ka})}});yb(this,"paste",(Ka,fb)=>{var ub;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!fb,dataTransfer:null!=(ub=null==Ka?void 0:Ka.clipboardData)?ub:void 0})});yb(this,"cut",()=>{this.copy();this.api.deleteShapes()});
yb(this,"drop",(Ka,fb)=>{this.notify("drop",{dataTransfer:Ka,point:fb?this.viewport.getPagePoint(fb):Qe.getBoundsCenter(this.viewport.currentView)})});yb(this,"selectTool",(Ka,fb={})=>{this.readOnly&&!["select","move"].includes(Ka)||this.transition(Ka,fb)});yb(this,"editingId");yb(this,"setEditingShape",Ka=>{this.editingId="string"===typeof Ka?Ka:null==Ka?void 0:Ka.id;return this});yb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});yb(this,"hoveredId");
yb(this,"setHoveredShape",Ka=>{this.hoveredId="string"===typeof Ka?Ka:null==Ka?void 0:Ka.id;return this});yb(this,"selectedIds",new Set);yb(this,"selectedShapes",new Set);yb(this,"selectionRotation",0);yb(this,"setSelectedShapes",Ka=>{var fb;const {selectedIds:ub,selectedShapes:bc}=this;ub.clear();bc.clear();Ka[0]&&"string"===typeof Ka[0]?Ka.forEach(Dc=>ub.add(Dc)):Ka.forEach(Dc=>ub.add(Dc.id));const tc=this.currentPage.shapes.filter(Dc=>ub.has(Dc.id));tc.forEach(Dc=>bc.add(Dc));this.selectionRotation=
1===tc.length?null!=(fb=tc[0].props.rotation)?fb:0:0;0===Ka.length&&this.setEditingShape();return this});yb(this,"erasingIds",new Set);yb(this,"erasingShapes",new Set);yb(this,"setErasingShapes",Ka=>{const {erasingIds:fb,erasingShapes:ub}=this;fb.clear();ub.clear();Ka[0]&&"string"===typeof Ka[0]?Ka.forEach(bc=>fb.add(bc)):Ka.forEach(bc=>fb.add(bc.id));this.currentPage.shapes.filter(bc=>fb.has(bc.id)).forEach(bc=>ub.add(bc));return this});yb(this,"bindingIds");yb(this,"setBindingShapes",Ka=>{this.bindingIds=
Ka;return this});yb(this,"clearBindingShape",()=>this.setBindingShapes());yb(this,"createNewLineBinding",(Ka,fb)=>{Ka="string"===typeof Ka?this.getShapeById(Ka):Ka;fb="string"===typeof fb?this.getShapeById(fb):fb;if((null==Ka?0:Ka.canBind)&&(null==fb?0:fb.canBind)&&(fb=wd(Ka,fb))){const [ub,bc]=fb;this.createShapes([ub]);this.currentPage.updateBindings(Object.fromEntries(bc.map(tc=>[tc.id,tc])));this.persist();return!0}return!1});yb(this,"brush");yb(this,"setBrush",Ka=>{this.brush=Ka;return this});
yb(this,"setCamera",(Ka,fb)=>{this.viewport.update({point:Ka,zoom:fb});return this});yb(this,"getPagePoint",Ka=>{const {camera:fb}=this.viewport;return Hd.sub(Hd.div(Ka,fb.zoom),fb.point)});yb(this,"getScreenPoint",Ka=>{const {camera:fb}=this.viewport;return Hd.mul(Hd.add(Ka,fb.point),fb.zoom)});yb(this,"Shapes",new Map);yb(this,"registerShapes",Ka=>{Ka.forEach(fb=>{if("group"===fb.id){const ub=this;fb.prototype.getShapes=function(){var bc,tc;return null!=(tc=null==(bc=this.props.children)?void 0:
bc.map(Dc=>ub.getShapeById(Dc)).filter(Boolean))?tc:[]}}return this.Shapes.set(fb.id,fb)})});yb(this,"deregisterShapes",Ka=>{Ka.forEach(fb=>this.Shapes.delete(fb.id))});yb(this,"getShapeClass",Ka=>{if(!Ka)throw Error("No shape type provided.");const fb=this.Shapes.get(Ka);if(!fb)throw Error(`Could not find shape class for ${Ka}`);return fb});yb(this,"wrapUpdate",Ka=>{sc(()=>{const fb=!this.history.isPaused;fb&&this.history.pause();Ka();fb&&(this.history.resume(),this.persist())})});yb(this,"subscriptions",
new Set([]));yb(this,"subscribe",(Ka,fb)=>{if(void 0===fb)throw Error("Callback is required.");const ub={event:Ka,callback:fb};this.subscriptions.add(ub);return()=>this.unsubscribe(ub)});yb(this,"unsubscribe",Ka=>{this.subscriptions.delete(Ka);return this});yb(this,"notify",(Ka,fb)=>{this.subscriptions.forEach(ub=>{ub.event===Ka&&ub.callback(this,fb)});return this});yb(this,"onTransition",()=>{});yb(this,"onPointerDown",(Ka,fb)=>{if(!this.editingShape&&1===fb.button&&!this.isIn("move"))this.temporaryTransitionToMove(fb);
else if(2===fb.button&&!this.editingShape)fb.preventDefault(),this.transition("select");else if("clientX"in fb)this.inputs.onPointerDown([...this.viewport.getPagePoint([fb.clientX,fb.clientY]),fb.pressure],fb)});yb(this,"onPointerUp",(Ka,fb)=>{if(!this.editingShape&&1===fb.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),fb.stopPropagation(),fb.preventDefault();else if("clientX"in fb)this.inputs.onPointerUp([...this.viewport.getPagePoint([fb.clientX,fb.clientY]),fb.pressure],
fb)});yb(this,"onPointerMove",(Ka,fb)=>{if("clientX"in fb)this.inputs.onPointerMove([...this.viewport.getPagePoint([fb.clientX,fb.clientY]),fb.pressure],fb)});yb(this,"onKeyDown",(Ka,fb)=>{if(this.editingShape||" "!==fb.key||this.isIn("move"))this.inputs.onKeyDown(fb);else this.temporaryTransitionToMove(fb)});yb(this,"onKeyUp",(Ka,fb)=>{if(!this.editingShape&&" "===fb.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),fb.stopPropagation(),fb.preventDefault();else this.inputs.onKeyUp(fb)});
yb(this,"onPinchStart",(Ka,fb)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(Ka.point),.5],fb)});yb(this,"onPinch",(Ka,fb)=>{this.inputs.onPinch([...this.viewport.getPagePoint(Ka.point),.5],fb)});yb(this,"onPinchEnd",(Ka,fb)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(Ka.point),.5],fb)});this._states=[op,pp];this.readOnly=da;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),da=null!=(ra=this.initial)?ra:this.states[0].id,ra=this.children.get(da))&&
(this.currentState=ra,null==(Ea=this.currentState)?void 0:Ea._events.onEnter({fromId:"initial"}));n&&this.registerShapes(n);O&&this.registerTools(O);this.history.resume();c&&this.history.deserialize(c);this.api=new Jz(this);Hc(this);this.notify("mount",null)}loadDocumentModel(c){this.history.deserialize(c);c.assets&&0<c.assets.length&&this.addAssets(c.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(c){c.forEach(n=>
this.pages.set(n.id,n));this.persist();return this}removePages(c){c.forEach(n=>this.pages.delete(n.id));this.persist();return this}shapesInGroups(c=this.shapes){return c.flatMap(n=>n.props.children).filter(Qc).map(n=>this.getShapeById(n)).filter(Qc)}getParentGroup(c){return this.shapes.find(n=>{var O;return null==(O=n.props.children)?void 0:O.includes(c.id)})}addAssets(c){c.forEach(n=>this.assets[n.id]=n);return this}removeAssets(c){"string"===typeof c[0]?c.forEach(n=>delete this.assets[n]):c.forEach(n=>
delete this.assets[n.id]);this.persist();return this}getCleanUpAssets(){const c=new Set;this.pages.forEach(n=>n.shapes.forEach(O=>{O.props.assetId&&this.assets[O.props.assetId]&&c.add(this.assets[O.props.assetId])}));return Array.from(c)}createAssets(c){this.addAssets(c);this.notify("create-assets",{assets:c});this.persist();return this}get selectedTool(){return this.currentState}registerTools(c){this.Tools=c;return this.registerStates(c)}get editingShape(){const {editingId:c,currentPage:n}=this;
return c?n.shapes.find(O=>O.id===c):void 0}get hoveredShape(){const {hoveredId:c,currentPage:n}=this;return c?n.shapes.find(O=>O.id===c):void 0}get hoveredGroup(){const {hoveredShape:c}=this;return c?this.shapes.find(n=>{var O;return"group"===n.type&&(null==(O=n.props.children)?void 0:O.includes(c.id))}):void 0}get selectedShapesArray(){const {selectedShapes:c,selectedTool:n}=this;return"select"!==n.id?[]:Array.from(c.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:c}=
this;return[...(new Set([...c,...this.shapesInGroups(c)]))]}setSelectionRotation(c){this.selectionRotation=c}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var c;const n=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(da=>{var ra;return Object.values(null!=(ra=da.props.handles)?ra:{})}).flatMap(da=>da.bindingId).filter(Qc).flatMap(da=>{var ra,Ea;return[null==(ra=this.currentPage.bindings[da])?void 0:ra.fromId,null==(Ea=this.currentPage.bindings[da])?
void 0:Ea.toId]}).filter(Qc):[],O=[...(null!=(c=this.bindingIds)?c:[]),...n];return O?this.currentPage.shapes.filter(da=>null==O?void 0:O.includes(da.id)):void 0}get currentGrid(){const {zoom:c}=this.viewport.camera;return.15>c?128:1>c?32:8}get shapes(){const {currentPage:{shapes:c}}=this;return Array.from(c.values())}get shapesInViewport(){const {selectedShapes:c,currentPage:n,viewport:{currentView:O}}=this;return n.shapes.filter(da=>!da.canUnmount||c.has(da)||Qe.boundsContain(O,da.rotatedBounds)||
Qe.boundsCollide(O,da.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:c,viewport:{currentView:n}}=this;if(c&&!Qe.boundsContain(n,c)&&!Qe.boundsCollide(n,c)){var O=Qe.getBoundsCenter(c);return Hd.clampV([(O[0]-n.minX-n.width/2)/n.width,(O[1]-n.minY-n.height/2)/n.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:c}=this;if(0!==c.length)return 1===c.length?rg(Ff({},c[0].bounds),{rotation:c[0].props.rotation}):Qe.getCommonBounds(this.selectedShapesArray.map(n=>n.rotatedBounds))}get showSelection(){var c;
const {selectedShapesArray:n}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===n.length&&!(null==(c=n[0])?0:c.hideSelection)||1<n.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(c=>c.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:c}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<c.length&&!this.readOnly&&!c.every(n=>n.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<c.length&&!this.readOnly&&!c.some(n=>n.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===c.length&&!this.readOnly&&!c.every(n=>n.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:c}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===c.length&&Object.values(nb).some(n=>n===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(c){c.stopPropagation();
c.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};yb(qh,"id","app");yb(qh,"initial","select");ye([bh],qh.prototype,"serialized",1);ye([Ug],qh.prototype,"pages",2);ye([bh],qh.prototype,"currentPageId",1);ye([bh],qh.prototype,"currentPage",1);ye([Gg],qh.prototype,"addPages",1);ye([Gg],qh.prototype,"removePages",1);ye([Gg],qh.prototype,"createShapes",2);ye([Gg],qh.prototype,"updateShapes",2);ye([Gg],qh.prototype,"deleteShapes",2);ye([Ug],
qh.prototype,"assets",2);ye([Gg],qh.prototype,"addAssets",1);ye([Gg],qh.prototype,"removeAssets",1);ye([Gg],qh.prototype,"removeUnusedAssets",2);ye([bh],qh.prototype,"selectedTool",1);ye([Ug],qh.prototype,"editingId",2);ye([bh],qh.prototype,"editingShape",1);ye([Gg],qh.prototype,"setEditingShape",2);ye([Ug],qh.prototype,"hoveredId",2);ye([bh],qh.prototype,"hoveredShape",1);ye([bh],qh.prototype,"hoveredGroup",1);ye([Gg],qh.prototype,"setHoveredShape",2);ye([Ug],qh.prototype,"selectedIds",2);ye([Ug],
qh.prototype,"selectedShapes",2);ye([Ug],qh.prototype,"selectionRotation",2);ye([bh],qh.prototype,"selectedShapesArray",1);ye([bh],qh.prototype,"allSelectedShapes",1);ye([bh],qh.prototype,"allSelectedShapesArray",1);ye([Gg],qh.prototype,"setSelectedShapes",2);ye([Gg],qh.prototype,"setSelectionRotation",1);ye([Ug],qh.prototype,"erasingIds",2);ye([Ug],qh.prototype,"erasingShapes",2);ye([bh],qh.prototype,"erasingShapesArray",1);ye([Gg],qh.prototype,"setErasingShapes",2);ye([Ug],qh.prototype,"bindingIds",
2);ye([bh],qh.prototype,"bindingShapes",1);ye([Gg],qh.prototype,"setBindingShapes",2);ye([Gg],qh.prototype,"createNewLineBinding",2);ye([Ug],qh.prototype,"brush",2);ye([Gg],qh.prototype,"setBrush",2);ye([Gg],qh.prototype,"setCamera",2);ye([bh],qh.prototype,"currentGrid",1);ye([bh],qh.prototype,"shapes",1);ye([bh],qh.prototype,"shapesInViewport",1);ye([bh],qh.prototype,"selectionDirectionHint",1);ye([bh],qh.prototype,"selectionBounds",1);ye([bh],qh.prototype,"showSelection",1);ye([bh],qh.prototype,
"showSelectionDetail",1);ye([bh],qh.prototype,"showSelectionRotation",1);ye([bh],qh.prototype,"showContextBar",1);ye([bh],qh.prototype,"showRotateHandles",1);ye([bh],qh.prototype,"showResizeHandles",1);ye([bh],qh.prototype,"showCloneHandles",1);var Kz=Function.prototype.toString,jt=Object.create,Lz=Object.prototype.toString,Mz=function(){function c(){this._keys=[];this._values=[]}c.prototype.has=function(n){return!!~this._keys.indexOf(n)};c.prototype.get=function(n){return this._values[this._keys.indexOf(n)]};
c.prototype.set=function(n,O){this._keys.push(n);this._values.push(O)};return c}(),Nz="undefined"!==typeof WeakMap?De:ne,Oz="g"===/test/g.flags?qf:Ef,Pz="undefined"!==typeof Symbol?of:Yf,Qz=Object.defineProperty,Rz=Object.getOwnPropertyDescriptor,qw=Object.getOwnPropertyNames,kt=Object.getOwnPropertySymbols,rw=Object.prototype,sw=rw.hasOwnProperty,Sz=rw.propertyIsEnumerable,tw="function"===typeof kt,Tz=tw?xg:qw,Uz=Array.isArray,lt=Object.assign,Vz=Object.getPrototypeOf,uw={array:function(c,n){var O=
new n.Constructor;n.cache.set(c,O);for(var da=0,ra=c.length;da<ra;++da)O[da]=n.copier(c[da],n);return O},arrayBuffer:function(c,n){return c.slice(0)},blob:function(c,n){return c.slice(0,c.size,c.type)},dataView:function(c,n){return new n.Constructor(c.buffer.slice(0))},date:function(c,n){return new n.Constructor(c.getTime())},error:kh,map:Jg,object:tw?yg:Uf,regExp:function(c,n){n=new n.Constructor(c.source,Oz(c));n.lastIndex=c.lastIndex;return n},set:Vh},Wz=lt({},uw,{array:function(c,n){var O=new n.Constructor;
n.cache.set(c,O);return Ag(c,O,n)},map:function(c,n){return Ag(c,Jg(c,n),n)},object:function(c,n){var O=Pe(n.prototype);n.cache.set(c,O);return Ag(c,O,n)},set:function(c,n){return Ag(c,Vh(c,n),n)}});ji(lt({},Wz,{}));var Xz=ji({}),Yz=Sf(ca()),Zz=Sf(ya()),to=Xz,Zk=class{static insertTextFirefox(c,n){c.setRangeText(n,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(c,n){const O=c.ownerDocument,da=O.activeElement;
da!==c&&c.focus();O.execCommand("insertText",!1,n)||Zk.insertTextFirefox(c,n);da===O.body?c.blur():da instanceof HTMLElement&&da!==c&&da.focus()}static set(c,n){c.select();Zk.insert(c,n)}static getSelection(c){const {selectionStart:n,selectionEnd:O}=c;return c.value.slice(n?n:void 0,O?O:void 0)}static wrapSelection(c,n,O){const {selectionStart:da,selectionEnd:ra}=c,Ea=Zk.getSelection(c);Zk.insert(c,n+Ea+(null!=O?O:n));c.selectionStart=(da||0)+n.length;c.selectionEnd=(ra||0)+n.length}static replace(c,
n,O){let da=0;c.value.replace(n,(...ra)=>{const Ea=da+ra[ra.length-2],Ka=ra[0].length;c.selectionStart=Ea;c.selectionEnd=Ea+Ka;ra="string"===typeof O?O:O(...ra);Zk.insert(c,ra);c.selectionStart=Ea;da+=ra.length-Ka;return ra})}static findLineEnd(c,n){const O=c.lastIndexOf("\n",n-1)+1;return"\t"!==c.charAt(O)?n:O+1}static indent(c){var n;const {selectionStart:O,selectionEnd:da,value:ra}=c;var Ea=ra.slice(O,da);if((Ea=null==(n=/\n/g.exec(Ea))?void 0:n.length)&&0<Ea){n=ra.lastIndexOf("\n",O-1)+1;var Ka=
c.value.slice(n,da-1);Ea=Ka.replace(/^|\n/g,`$&${Zk.INDENT}`);Ka=Ea.length-Ka.length;c.setSelectionRange(n,da-1);Zk.insert(c,Ea);c.setSelectionRange(O+1,da+Ka)}else Zk.insert(c,Zk.INDENT)}static unindent(c){const {selectionStart:n,selectionEnd:O,value:da}=c;var ra=da.lastIndexOf("\n",n-1)+1;const Ea=Zk.findLineEnd(da,O);var Ka=c.value.slice(ra,Ea);const fb=Ka.replace(/(^|\n)(\t| {1,2})/g,"$1");Ka=Ka.length-fb.length;c.setSelectionRange(ra,Ea);Zk.insert(c,fb);ra=(ra=/\t| {1,2}/.exec(da.slice(ra,n)))?
ra[0].length:0;c.setSelectionRange(n-ra,Math.max(n-ra,O-Ka))}static normalizeText(c){return c.replace(Zk.fixNewLines,"\n")}},sp=Zk;yb(sp,"fixNewLines",/\r?\n|\r/g);yb(sp,"INDENT","  ");var on;"undefined"!==typeof window&&(on=mf());var mt=new Map,vw=Zb()?"⌘":"ctrl",$z=class extends qh{},ww=Sf(Z(68)),aA=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var xw=Sf(Z(68)),nt={},Hq=Sf(Z(68)),bA=c=>{for(c=c.parentElement;c&&c!==document.body;){const {overflowY:n}=window.getComputedStyle(c);
if(c.scrollHeight>c.clientHeight&&("auto"===n||"scroll"===n||"overlay"===n))return c;c=c.parentElement}return document},ot=Sf(Z(68)),pt=new Map,cA={accent:"var(--lx-accent-09, hsl(var(--primary)))",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedStroke)",selectFill:"var(--color-selectedFill)",binding:"var(--color-binding, rgba(65, 132, 244, 0.5))",background:"var(--ls-primary-background-color, hsl(var(--background)))",
foreground:"var(--ls-primary-text-color, hsl(var(--foreground)))",grid:"var(--ls-quaternary-background-color, hsl(var(--secondary)))"},dA=((c,...n)=>c.reduce((O,da,ra)=>O+da+(ra<n.length?n[ra]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer;
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,yw=Sf(Z(68)),zw=Sf(Z(68)),qt={},kj={toVector(c,n){void 0===c&&(c=n);return Array.isArray(c)?c:[c,c]},add(c,n){return[c[0]+n[0],c[1]+n[1]]},sub(c,n){return[c[0]-n[0],c[1]-n[1]]},addTo(c,n){c[0]+=n[0];c[1]+=n[1]},subTo(c,n){c[0]-=n[0];c[1]-=n[1]}},Aw={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},eA=["enter","leave"],fA=["gotpointercapture","lostpointercapture"],
Bw=class{constructor(c,n,O){this.ctrl=c;this.args=n;this.key=O;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(c){this.ctrl.state[this.key]=c}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:c,
shared:n,ingKey:O,args:da}=this;n[O]=c._active=c.active=c._blocked=c._force=!1;c._step=[!1,!1];c.intentional=!1;c._movement=[0,0];c._distance=[0,0];c._direction=[0,0];c._delta=[0,0];c._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];c.args=da;c.axis=void 0;c.memo=void 0;c.elapsedTime=0;c.direction=[0,0];c.distance=[0,0];c.overflow=[0,0];c._movementBound=[!1,!1];c.velocity=[0,0];c.movement=[0,0];c.delta=[0,0];c.timeStamp=0}start(c){const n=this.state,O=this.config;n._active||(this.reset(),this.computeInitial(),
n._active=!0,n.target=c.target,n.currentTarget=c.currentTarget,n.lastOffset=O.from?de(O.from,n):n.offset,n.offset=n.lastOffset);n.startTime=n.timeStamp=c.timeStamp}computeValues(c){const n=this.state;n._values=c;n.values=this.config.transform(c)}computeInitial(){const c=this.state;c._initial=c._values;c.initial=c.values}compute(c){const {state:n,config:O,shared:da}=this;n.args=this.args;var ra=0;if(c){n.event=c;O.preventDefault&&c.cancelable&&n.event.preventDefault();n.type=c.type;da.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;da.locked=!!document.pointerLockElement;ra=Object;var Ea=ra.assign,Ka={};"buttons"in c&&(Ka.buttons=c.buttons);if("shiftKey"in c){const {shiftKey:Sd,altKey:Id,metaKey:Ve,ctrlKey:We}=c;Object.assign(Ka,{shiftKey:Sd,altKey:Id,metaKey:Ve,ctrlKey:We})}Ea.call(ra,da,Ka);da.down=da.pressed=1===da.buttons%2||0<da.touches;ra=c.timeStamp-n.timeStamp;n.timeStamp=c.timeStamp;n.elapsedTime=n.timeStamp-n.startTime}n._active&&(Ea=n._delta.map(Math.abs),kj.addTo(n._distance,Ea));this.axisIntent&&
this.axisIntent(c);const [fb,ub]=n._movement,[bc,tc]=O.threshold,{_step:Dc,values:$c}=n;O.hasCustomTransform?(!1===Dc[0]&&(Dc[0]=Math.abs(fb)>=bc&&$c[0]),!1===Dc[1]&&(Dc[1]=Math.abs(ub)>=tc&&$c[1])):(!1===Dc[0]&&(Dc[0]=Math.abs(fb)>=bc&&Math.sign(fb)*bc),!1===Dc[1]&&(Dc[1]=Math.abs(ub)>=tc&&Math.sign(ub)*tc));n.intentional=!1!==Dc[0]||!1!==Dc[1];if(n.intentional){Ea=[0,0];if(O.hasCustomTransform){const [Sd,Id]=$c;Ea[0]=!1!==Dc[0]?Sd-Dc[0]:0;Ea[1]=!1!==Dc[1]?Id-Dc[1]:0}else Ea[0]=!1!==Dc[0]?fb-Dc[0]:
0,Ea[1]=!1!==Dc[1]?ub-Dc[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(Ea);Ka=n.offset;var sd=n._active&&!n._blocked||n.active;sd&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=da[this.ingKey]=n._active,c&&(n.first&&("bounds"in O&&(n._bounds=de(O.bounds,n)),this.setup&&this.setup()),n.movement=Ea,this.computeOffset()));var [od,Gd]=n.offset,[[Rd,id],[qd,xd]]=n._bounds;n.overflow=[od<Rd?-1:od>id?1:0,Gd<qd?-1:Gd>xd?1:0];n._movementBound[0]=n.overflow[0]?!1===n._movementBound[0]?
n._movement[0]:n._movementBound[0]:!1;n._movementBound[1]=n.overflow[1]?!1===n._movementBound[1]?n._movement[1]:n._movementBound[1]:!1;n.offset=Rf(n._bounds,n.offset,n._active?O.rubberband||[0,0]:[0,0]);n.delta=kj.sub(n.offset,Ka);this.computeMovement();sd&&(!n.last||32<ra)&&(n.delta=kj.sub(n.offset,Ka),c=n.delta.map(Math.abs),kj.addTo(n.distance,c),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&0<ra&&(n.velocity=[c[0]/ra,c[1]/ra]))}}emit(){const c=this.state;var n=
this.shared;const O=this.config;c._active||this.clean();if(!c._blocked&&c.intentional||c._force||O.triggerAllEvents)n=this.handler(wf(wf(wf({},n),c),{},{[this.aliasKey]:c.values})),void 0!==n&&(c.memo=n)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Iq=class extends Bw{constructor(...c){super(...c);tf(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=kj.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=kj.sub(this.state.offset,this.state.lastOffset)}axisIntent(c){const n=this.state,O=this.config;!n.axis&&c&&(c="object"===typeof O.axisThreshold?O.axisThreshold[Mg(c)]:O.axisThreshold,n.axis=lc(n._movement,c));n._blocked=(O.lockDirection||!!O.axis)&&!n.axis||!!O.axis&&O.axis!==n.axis}restrictToAxis(c){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":c[1]=0;break;case "y":c[0]=0}}},gA=c=>c,Cw={enabled(c=!0){return c},
eventOptions(c,n,O){return wf(wf({},O.shared.eventOptions),c)},preventDefault(c=!1){return c},triggerAllEvents(c=!1){return c},rubberband(c=0){switch(c){case !0:return[.15,.15];case !1:return[0,0];default:return kj.toVector(c)}},from(c){if("function"===typeof c)return c;if(null!=c)return kj.toVector(c)},transform(c,n,O){c=c||O.shared.transform;this.hasCustomTransform=!!c;return c||gA},threshold(c){return kj.toVector(c,0)}},uo=wf(wf({},Cw),{},{axis(c,n,{axis:O}){this.lockDirection="lock"===O;if(!this.lockDirection)return O},
axisThreshold(c=0){return c},bounds(c={}){if("function"===typeof c)return Ea=>uo.bounds(c(Ea));if("current"in c)return()=>c.current;if("function"===typeof HTMLElement&&c instanceof HTMLElement)return c;const {left:n=-Infinity,right:O=Infinity,top:da=-Infinity,bottom:ra=Infinity}=c;return[[n,O],[da,ra]]}}),Dw={ArrowRight:(c=1)=>[10*c,0],ArrowLeft:(c=1)=>[-10*c,0],ArrowUp:(c=1)=>[0,-10*c],ArrowDown:(c=1)=>[0,10*c]},hA=class extends Iq{constructor(...c){super(...c);tf(this,"ingKey","dragging")}reset(){super.reset();
const c=this.state;c._pointerId=void 0;c._pointerActive=!1;c._keyboardActive=!1;c._preventScroll=!1;c._delayed=!1;c.swipe=[0,0];c.tap=!1;c.canceled=!1;c.cancel=this.cancel.bind(this)}setup(){const c=this.state;if(c._bounds instanceof HTMLElement){const n=c._bounds.getBoundingClientRect(),O=c.currentTarget.getBoundingClientRect();c._bounds=uo.bounds({left:n.left-O.left+c.offset[0],right:n.right-O.right+c.offset[0],top:n.top-O.top+c.offset[1],bottom:n.bottom-O.bottom+c.offset[1]})}}cancel(){const c=
this.state;c.canceled||(c.canceled=!0,c._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(c){const n=this.config,O=this.state;if(null==c.buttons||(Array.isArray(n.pointerButtons)?n.pointerButtons.includes(c.buttons):-1===n.pointerButtons||n.pointerButtons===c.buttons)){var da=this.ctrl.setEventIds(c);
n.pointerCapture&&c.target.setPointerCapture(c.pointerId);da&&1<da.size&&O._pointerActive||(this.start(c),this.setupPointer(c),O._pointerId=bd(c),O._pointerActive=!0,this.computeValues(kd(c)),this.computeInitial(),n.preventScrollAxis&&"mouse"!==Mg(c)?(O._active=!1,this.setupScrollPrevention(c)):0<n.delay?(this.setupDelayTrigger(c),n.triggerAllEvents&&(this.compute(c),this.emit())):this.startPointerDrag(c))}}startPointerDrag(c){const n=this.state;n._active=!0;n._preventScroll=!0;n._delayed=!1;this.compute(c);
this.emit()}pointerMove(c){const n=this.state,O=this.config;if(n._pointerActive&&(n.type!==c.type||c.timeStamp!==n.timeStamp)){var da=bd(c);if(void 0===n._pointerId||da===n._pointerId)da=kd(c),document.pointerLockElement===c.target?n._delta=[c.movementX,c.movementY]:(n._delta=kj.sub(da,n._values),this.computeValues(da)),kj.addTo(n._movement,n._delta),this.compute(c),n._delayed&&n.intentional?(this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(c)):O.preventScrollAxis&&!n._preventScroll?
n.axis&&(n.axis===O.preventScrollAxis||"xy"===O.preventScrollAxis?(n._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(c))):this.emit()}}pointerUp(c){this.ctrl.setEventIds(c);try{this.config.pointerCapture&&c.target.hasPointerCapture(c.pointerId)&&c.target.releasePointerCapture(c.pointerId)}catch(Ka){}const n=this.state,O=this.config;if(n._active&&n._pointerActive){var da=bd(c);if(void 0===n._pointerId||da===n._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(c);var [ra,Ea]=n._distance;n.tap=ra<=O.tapsThreshold&&Ea<=O.tapsThreshold;if(n.tap&&O.filterTaps)n._force=!0;else{const [Ka,fb]=n.direction,[ub,bc]=n.velocity,[tc,Dc]=n.movement,[$c,sd]=O.swipe.velocity,[od,Gd]=O.swipe.distance;n.elapsedTime<O.swipe.duration&&(Math.abs(ub)>$c&&Math.abs(tc)>od&&(n.swipe[0]=Ka),Math.abs(bc)>sd&&Math.abs(Dc)>Gd&&(n.swipe[1]=fb))}this.emit()}}}pointerClick(c){!this.state.tap&&0<c.detail&&(c.preventDefault(),c.stopPropagation())}setupPointer(c){const n=this.config,
O=n.device;n.pointerLock&&c.currentTarget.requestPointerLock();n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,O,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,O,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,O,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(c){this.state._preventScroll&&c.cancelable&&
c.preventDefault()}setupScrollPrevention(c){this.state._preventScroll=!1;"persist"in c&&"function"===typeof c.persist&&c.persist();const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n);this.eventStore.add(this.sharedConfig.window,"touch","cancel",n);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,c)}setupDelayTrigger(c){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(c)},this.config.delay)}keyDown(c){const n=Dw[c.key];if(n){const O=this.state,da=c.shiftKey?10:c.altKey?.1:1;this.start(c);O._delta=n(da);O._keyboardActive=!0;kj.addTo(O._movement,O._delta);this.compute(c);this.emit()}}keyUp(c){c.key in Dw&&(this.state._keyboardActive=!1,this.setActive(),this.compute(c),this.emit())}bind(c){const n=this.config.device;c(n,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(c(n,"change",this.pointerMove.bind(this)),c(n,"end",this.pointerUp.bind(this)),c(n,"cancel",this.pointerUp.bind(this)),c("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(c("key","down",this.keyDown.bind(this)),c("key","up",this.keyUp.bind(this)));this.config.filterTaps&&c("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},vo="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Ew="constructor"in GestureEvent}catch(c){Ew=!1}var iA=
Ew,Jq=vo&&"ontouchstart"in window||vo&&1<window.navigator.maxTouchPoints,Fw=vo&&"ontouchstart"in window||vo&&1<window.navigator.maxTouchPoints,Gw=vo&&"onpointerdown"in window,jA=vo&&"exitPointerLock"in window.document,Hw={mouse:0,touch:0,pen:8},kA=wf(wf({},uo),{},{device(c,n,{pointer:{touch:O=!1,lock:da=!1,mouse:ra=!1}={}}){this.pointerLock=da&&jA;return Jq&&O?"touch":this.pointerLock?"mouse":Gw&&!ra?"pointer":Jq?"touch":"mouse"},preventScrollAxis(c,n,{preventScroll:O}){this.preventScrollDelay="number"===
typeof O?O:O||void 0===O&&c?250:void 0;if(Fw&&!1!==O)return c?c:void 0!==O?"y":void 0},pointerCapture(c,n,{pointer:{capture:O=!0,buttons:da=1,keys:ra=!0}={}}){this.pointerButtons=da;this.keys=ra;return!this.pointerLock&&"pointer"===this.device&&O},threshold(c,n,{filterTaps:O=!1,tapsThreshold:da=3,axis:ra}){c=kj.toVector(c,O?da:ra?1:0);this.filterTaps=O;this.tapsThreshold=da;return c},swipe({velocity:c=.5,distance:n=50,duration:O=250}={}){return{velocity:this.transform(kj.toVector(c)),distance:this.transform(kj.toVector(n)),
duration:O}},delay(c=0){switch(c){case !0:return 180;case !1:return 0;default:return c}},axisThreshold(c){return c?wf(wf({},Hw),c):Hw}}),lA=class extends Bw{constructor(...c){super(...c);tf(this,"ingKey","pinching");tf(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const c=this.state;c._touchIds=[];c.canceled=!1;c.cancel=this.cancel.bind(this);c.turns=0}computeOffset(){const {type:c,movement:n,lastOffset:O}=
this.state;this.state.offset="wheel"===c?kj.add(n,O):[(1+n[0])*O[0],n[1]+O[1]]}computeMovement(){const {offset:c,lastOffset:n}=this.state;this.state.movement=[c[0]/n[0],c[1]-n[1]]}axisIntent(){const c=this.state,[n,O]=c._movement;if(!c.axis){const da=30*Math.abs(n)-Math.abs(O);0>da?c.axis="angle":0<da&&(c.axis="scale")}}restrictToAxis(c){this.config.lockDirection&&("scale"===this.state.axis?c[1]=0:"angle"===this.state.axis&&(c[0]=0))}cancel(){const c=this.state;c.canceled||setTimeout(()=>{c.canceled=
!0;c._active=!1;this.compute();this.emit()},0)}touchStart(c){this.ctrl.setEventIds(c);var n=this.state;const O=this.ctrl.touchIds;n._active&&n._touchIds.every(da=>O.has(da))||2>O.size||(this.start(c),n._touchIds=Array.from(O).slice(0,2),n=pc(c,n._touchIds),this.pinchStart(c,n))}pointerStart(c){if(null==c.buttons||1===c.buttons%2){this.ctrl.setEventIds(c);c.target.setPointerCapture(c.pointerId);var n=this.state,O=n._pointerEvents,da=this.ctrl.pointerIds;n._active&&Array.from(O.keys()).every(ra=>da.has(ra))||
(2>O.size&&O.set(c.pointerId,c),2>n._pointerEvents.size||(this.start(c),n=rf(...Array.from(O.values())),this.pinchStart(c,n)))}}pinchStart(c,n){this.state.origin=n.origin;this.computeValues([n.distance,n.angle]);this.computeInitial();this.compute(c);this.emit()}touchMove(c){if(this.state._active){var n=pc(c,this.state._touchIds);this.pinchMove(c,n)}}pointerMove(c){var n=this.state._pointerEvents;n.has(c.pointerId)&&n.set(c.pointerId,c);this.state._active&&(n=rf(...Array.from(n.values())),this.pinchMove(c,
n))}pinchMove(c,n){const O=this.state,da=n.angle-O._values[1];let ra=0;270<Math.abs(da)&&(ra+=Math.sign(da));this.computeValues([n.distance,n.angle-360*ra]);O.origin=n.origin;O.turns=ra;O._movement=[O._values[0]/O._initial[0]-1,O._values[1]-O._initial[1]];this.compute(c);this.emit()}touchEnd(c){this.ctrl.setEventIds(c);this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(c),this.emit())}pointerEnd(c){const n=this.state;this.ctrl.setEventIds(c);
try{c.target.releasePointerCapture(c.pointerId)}catch(O){}n._pointerEvents.has(c.pointerId)&&n._pointerEvents.delete(c.pointerId);n._active&&2>n._pointerEvents.size&&(n._active=!1,this.compute(c),this.emit())}gestureStart(c){c.cancelable&&c.preventDefault();const n=this.state;n._active||(this.start(c),this.computeValues([c.scale,c.rotation]),n.origin=[c.clientX,c.clientY],this.compute(c),this.emit())}gestureMove(c){c.cancelable&&c.preventDefault();if(this.state._active){var n=this.state;this.computeValues([c.scale,
c.rotation]);n.origin=[c.clientX,c.clientY];var O=n._movement;n._movement=[c.scale-1,c.rotation];n._delta=kj.sub(n._movement,O);this.compute(c);this.emit()}}gestureEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}wheel(c){const n=this.config.modifierKey;if(!n||c[n])this.state._active?this.wheelChange(c):this.wheelStart(c),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(c){this.start(c);this.wheelChange(c)}wheelChange(c){"uv"in c||c.cancelable&&c.preventDefault();
const n=this.state;n._delta=[-re(c)[1]/100*n.offset[0],0];kj.addTo(n._movement,n._delta);dd(n);this.state.origin=[c.clientX,c.clientY];this.compute(c);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){const n=this.config.device;n&&(c(n,"start",this[n+"Start"].bind(this)),c(n,"change",this[n+"Move"].bind(this)),c(n,"end",this[n+"End"].bind(this)),c(n,"cancel",this[n+"End"].bind(this)));this.config.pinchOnWheel&&c("wheel","",this.wheel.bind(this),
{passive:!1})}},mA=wf(wf({},Cw),{},{device(c,n,{shared:O,pointer:{touch:da=!1}={}}){if(O.target&&!Jq&&iA)return"gesture";if(Jq&&da)return"touch";if(Fw){if(Gw)return"pointer";if(Jq)return"touch"}},bounds(c,n,{scaleBounds:O={},angleBounds:da={}}){const ra=Ka=>{Ka=de(O,Ka);Ka=Object.assign({},{min:-Infinity,max:Infinity},Ka||{});return[Ka.min,Ka.max]},Ea=Ka=>{Ka=de(da,Ka);Ka=Object.assign({},{min:-Infinity,max:Infinity},Ka||{});return[Ka.min,Ka.max]};return"function"!==typeof O&&"function"!==typeof da?
[ra(),Ea()]:Ka=>[ra(Ka),Ea(Ka)]},threshold(c,n,O){this.lockDirection="lock"===O.axis;return kj.toVector(c,this.lockDirection?[.1,3]:0)},modifierKey(c){return void 0===c?"ctrlKey":c},pinchOnWheel(c=!0){return c}}),nA=class extends Iq{constructor(...c){super(...c);tf(this,"ingKey","moving")}move(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.state._active?this.moveChange(c):this.moveStart(c),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(c){this.start(c);this.computeValues(kd(c));
this.compute(c);this.computeInitial();this.emit()}moveChange(c){if(this.state._active){var n=kd(c),O=this.state;O._delta=kj.sub(n,O._values);kj.addTo(O._movement,O._delta);this.computeValues(n);this.compute(c);this.emit()}}moveEnd(c){this.state._active&&(this.state._active=!1,this.compute(c),this.emit())}bind(c){c("pointer","change",this.move.bind(this));c("pointer","leave",this.moveEnd.bind(this))}},oA=wf(wf({},uo),{},{mouseOnly:(c=!0)=>c}),pA=class extends Iq{constructor(...c){super(...c);tf(this,
"ingKey","scrolling")}scroll(c){this.state._active||this.start(c);this.scrollChange(c);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(c){c.cancelable&&c.preventDefault();const n=this.state;var O,da;const {scrollX:ra,scrollY:Ea,scrollLeft:Ka,scrollTop:fb}=c.currentTarget;var ub=[null!==(O=null!==ra&&void 0!==ra?ra:Ka)&&void 0!==O?O:0,null!==(da=null!==Ea&&void 0!==Ea?Ea:fb)&&void 0!==da?da:0];n._delta=kj.sub(ub,n._values);kj.addTo(n._movement,n._delta);this.computeValues(ub);
this.compute(c);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(c){c("scroll","",this.scroll.bind(this))}},qA=uo,rA=class extends Iq{constructor(...c){super(...c);tf(this,"ingKey","wheeling")}wheel(c){this.state._active||this.start(c);this.wheelChange(c);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(c){const n=this.state;n._delta=re(c);kj.addTo(n._movement,n._delta);dd(n);this.compute(c);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(c){c("wheel","",this.wheel.bind(this))}},sA=uo,tA=class extends Iq{constructor(...c){super(...c);tf(this,"ingKey","hovering")}enter(c){this.config.mouseOnly&&"mouse"!==c.pointerType||(this.start(c),this.computeValues(kd(c)),this.compute(c),this.emit())}leave(c){if(!this.config.mouseOnly||"mouse"===c.pointerType){var n=this.state;if(n._active){n._active=!1;var O=kd(c);n._movement=n._delta=kj.sub(O,n._values);this.computeValues(O);this.compute(c);
n.delta=n.movement;this.emit()}}}bind(c){c("pointer","enter",this.enter.bind(this));c("pointer","leave",this.leave.bind(this))}},uA=wf(wf({},uo),{},{mouseOnly:(c=!0)=>c}),rt=new Map,st=new Map,vA={key:"drag",engine:hA,resolver:kA},wA={key:"hover",engine:tA,resolver:uA},xA={key:"move",engine:nA,resolver:oA},yA={key:"pinch",engine:lA,resolver:mA},zA={key:"scroll",engine:pA,resolver:qA},AA={key:"wheel",engine:rA,resolver:sA},tt=Sf(Z(68)),BA={target(c){if(c)return()=>"current"in c?c.current:c},enabled(c=
!0){return c},window(c=vo?window:void 0){return c},eventOptions({passive:c=!0,capture:n=!1}={}){return{passive:c,capture:n}},transform(c){return c}},CA=["target","eventOptions","window","enabled","transform"],Iw=class{constructor(c,n){tf(this,"_listeners",new Set);this._ctrl=c;this._gestureKey=n}add(c,n,O,da,ra){const Ea=this._listeners,Ka=Lh(n,O),fb=wf(wf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ra);c.addEventListener(Ka,da,fb);const ub=()=>{c.removeEventListener(Ka,
da,fb);Ea.delete(ub)};Ea.add(ub);return ub}clean(){this._listeners.forEach(c=>c());this._listeners.clear()}},DA=class{constructor(){tf(this,"_timeouts",new Map)}add(c,n,O=140,...da){this.remove(c);this._timeouts.set(c,window.setTimeout(n,O,...da))}remove(c){(c=this._timeouts.get(c))&&window.clearTimeout(c)}clean(){this._timeouts.forEach(c=>void window.clearTimeout(c));this._timeouts.clear()}},EA=class{constructor(c){tf(this,"gestures",new Set);tf(this,"_targetEventStore",new Iw(this));tf(this,"gestureEventStores",
{});tf(this,"gestureTimeoutStores",{});tf(this,"handlers",{});tf(this,"config",{});tf(this,"pointerIds",new Set);tf(this,"touchIds",new Set);tf(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});c.drag&&ce(this,"drag");c.wheel&&ce(this,"wheel");c.scroll&&ce(this,"scroll");c.move&&ce(this,"move");c.pinch&&ce(this,"pinch");c.hover&&ce(this,"hover")}setEventIds(c){if("touches"in c)return this.touchIds=new Set(Fb(c));if("pointerId"in c)return"pointerup"===c.type||"pointercancel"===c.type?
this.pointerIds.delete(c.pointerId):"pointerdown"===c.type&&this.pointerIds.add(c.pointerId),this.pointerIds}applyHandlers(c,n){this.handlers=c;this.nativeHandlers=n}applyConfig(c,n){this.config=Xd(c,n,this.config)}clean(){this._targetEventStore.clean();for(const c of this.gestures)this.gestureEventStores[c].clean(),this.gestureTimeoutStores[c].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...c){var n=this.config.shared;const O={};let da;if(n.target&&
(da=n.target(),!da))return;if(n.enabled){for(const ra of this.gestures){const Ea=this.config[ra],Ka=Jw(O,Ea.eventOptions,!!da);Ea.enabled&&(new (rt.get(ra))(this,c,ra)).bind(Ka)}n=Jw(O,n.eventOptions,!!da);for(const ra in this.nativeHandlers)n(ra,"",Ea=>this.nativeHandlers[ra](wf(wf({},this.state.shared),{},{event:Ea,args:c})),void 0,!0)}for(const ra in O)O[ra]=Pb(...O[ra]);if(!da)return O;for(const ra in O){const {device:Ea,capture:Ka,passive:fb}=Nf(ra);this._targetEventStore.add(da,Ea,"",O[ra],
{capture:Ka,passive:fb})}}},Jw=(c,n,O)=>(da,ra,Ea,Ka={},fb=!1)=>{var ub,bc;const tc=null!==(ub=Ka.capture)&&void 0!==ub?ub:n.capture;Ka=null!==(bc=Ka.passive)&&void 0!==bc?bc:n.passive;da=fb?da:sg(da,ra,tc);O&&Ka&&(da+="Passive");c[da]=c[da]||[];c[da].push(Ea)},FA=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Jr=Sf(Z(68)),ut=Sf(Z(68)),Kw=Sf(Z(68)),Lw=Sf(Z(68)),GA=Sf(Z(68)),HA=Sf(Z(68)),IA=Sf(Z(68)),JA=Sf(Z(68)),KA={none:(c,n)=>"none",["default"]:(c,n)=>"default",pointer:(c,n)=>"pointer",crosshair:(c,
n)=>"crosshair",move:(c,n)=>"move",wait:(c,n)=>"wait",progress:(c,n)=>"progress",grab:(c,n)=>Bd('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
c,n),grabbing:(c,n)=>Bd("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
c,n),text:(c,n)=>Bd("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
c,n),["resize-edge"]:(c,n)=>Bd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,n),["resize-corner"]:(c,n)=>Bd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c,n),["ew-resize"]:(c,n)=>Bd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",c,n),["ns-resize"]:(c,n)=>Bd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
c+90,n),["nesw-resize"]:(c,n)=>Bd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",c,n),["nwse-resize"]:(c,n)=>Bd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
c+90,n),rotate:(c,n)=>Bd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+45,n),["nwse-rotate"]:(c,n)=>Bd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c,n),["nesw-rotate"]:(c,n)=>Bd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+90,n),["senw-rotate"]:(c,n)=>Bd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+180,n),["swne-rotate"]:(c,n)=>Bd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
c+270,n)},LA=Sf(Z(68));Sf(Z(68));var Mw=Z(68),Nw=Sf(Z(68));if(!Z(68).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Hc)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var MA=Z(69),Kq=Sf(Z(68)),Ow="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,NA=1E4,OA=function(c){var n="function"===typeof Symbol&&Symbol.iterator,O=n&&c[n],da=0;if(O)return O.call(c);if(c&&"number"===typeof c.length)return{next:function(){c&&da>=
c.length&&(c=void 0);return{value:c&&c[da++],done:!c}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.");},Pw=Ow?ke(Ow):Ne(),PA=Pw.addReactionToTrack,QA=Pw.recordReactionAsCommitted,Qw=function(c,n){var O="function"===typeof Symbol&&c[Symbol.iterator];if(!O)return c;c=O.call(c);var da,ra=[];try{for(;(void 0===n||0<n--)&&!(da=c.next()).done;)ra.push(da.value)}catch(Ka){var Ea={error:Ka}}finally{try{da&&!da.done&&(O=c["return"])&&O.call(c)}finally{if(Ea)throw Ea.error;
}}return ra},RA=function(){return function(){}}(),tp=Z(68),Rw="function"===typeof Symbol&&Symbol.for,Sw=Rw?Symbol.for("react.forward_ref"):"function"===typeof tp.forwardRef&&(0,tp.forwardRef)(function(c){return null}).$$typeof,Tw=Rw?Symbol.for("react.memo"):"function"===typeof tp.memo&&(0,tp.memo)(function(c){return null}).$$typeof,SA={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Hf.displayName="Observer";Z(68);Z(68);Z(68);(function(c){c||=te;qb({reactionScheduler:c})})(MA.unstable_batchedUpdates);
var TA=Sf(Z(68)),vt=Z(282),$k=TA.forwardRef(function(c,n){var {children:O,opacity:da,centered:ra,className:Ea=""}=c,Ka=Zi(c,["children","opacity","centered","className"]);return(0,vt.jsx)(Hf,{children:()=>(0,vt.jsx)("div",{ref:n,className:`tl-positioned-div ${Ea}`,style:da?{opacity:da}:void 0,draggable:!1,children:(0,vt.jsx)("div",rg(Ff({className:`tl-positioned-inner ${ra?"tl-centered":""}`},Ka),{children:O}))})})}),UA=Sf(Z(68)),wt=Z(282),zl=UA.forwardRef(function(c,n){var {id:O,className:da="",
style:ra,children:Ea}=c,Ka=Zi(c,["id","className","style","children"]);return(0,wt.jsx)(Hf,{children:()=>(0,wt.jsx)("svg",{ref:n,style:ra,className:`tl-positioned-svg ${da}`,children:(0,wt.jsx)("g",rg(Ff({id:O,className:"tl-centered-g"},Ka),{children:Ea}))})})}),Lq=Sf(Z(68)),Uw=Sf(Z(68)),Kr=Sf(Z(68)),VA=Z(282),pn=Be(function(c){var {id:n,bounds:O,zIndex:da,rotation:ra=0,className:Ea="",children:Ka}=c;c=Zi(c,"id bounds zIndex rotation className children".split(" "));const fb=Kr.useRef(null);Kr.useLayoutEffect(()=>
{fb.current.style.transform=`translate(
        calc(${O.minX}px - var(--tl-padding)),
        calc(${O.minY}px - var(--tl-padding)))
        rotate(${ra+(O.rotation||0)}rad)`},[O.minX,O.minY,ra,O.rotation]);Kr.useLayoutEffect(()=>{const ub=fb.current;ub.style.width=`calc(${Math.floor(O.width)}px + (var(--tl-padding) * 2))`;ub.style.height=`calc(${Math.floor(O.height)}px + (var(--tl-padding) * 2))`},[O.width,O.height]);Kr.useLayoutEffect(()=>{const ub=fb.current;void 0!==da&&(ub.style.zIndex=da.toString())},[da]);return(0,VA.jsx)("div",rg(Ff({id:n,ref:fb,className:`tl-positioned ${Ea}`,"aria-label":"container"},c),{children:Ka}))}),
WA=Sf(Z(68)),Vw=Z(282),XA=Be(function({shapes:c,hidden:n,bounds:O,rotation:da=0}){const {components:{ContextBar:ra},viewport:{bounds:Ea,camera:{point:[Ka,fb],zoom:ub}}}=ud(),bc=WA.useRef(null);var tc=Qe.getRotatedBounds(O,da);tc=Qe.multiplyBounds(tc,ub);xb(bc,O,da,10005);if(!ra)throw Error("Expected a ContextBar component.");const Dc=Qe.translateBounds(tc,[Ka*ub,fb*ub]);return(0,Vw.jsx)("div",{ref:bc,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,Vw.jsx)(ra,{hidden:n,shapes:c,bounds:O,offsets:{left:Dc.minX,right:Ea.width-Dc.maxX,top:Dc.minY,bottom:Ea.height-Dc.maxY,width:Dc.width,height:Dc.height},scaledBounds:tc,rotation:da})})}),Ww=Sf(Z(68)),YA=Z(282),Xw=Be(function({children:c}){const n=Ww.useRef(null),{viewport:O}=ud(),da=n.current,{zoom:ra,point:Ea}=O.camera;Ww.useEffect(()=>{da&&(da.style.transform=`scale(${ra}) translate3d(${Ea[0]}px, ${Ea[1]}px, 0)`)},[ra,Ea,da]);return(0,YA.jsx)("div",{ref:n,className:"tl-absolute tl-layer",
children:c})}),Lr=Z(282),Yw=Be(function({shape:c,isHovered:n=!1,isSelected:O=!1,isBinding:da=!1,isEditing:ra=!1,isLocked:Ea=!1,meta:Ka}){const {bounds:fb,props:{scale:ub,rotation:bc=0},ReactIndicator:tc}=c;return(0,Lr.jsx)(pn,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:fb,rotation:bc,scale:ub,zIndex:ra?1E3:1E4,children:(0,Lr.jsx)(zl,{children:(0,Lr.jsx)("g",{className:`tl-indicator-container ${O?"tl-selected":"tl-hovered"} ${Ea?"tl-locked":""}`,children:(0,Lr.jsx)(tc,{isEditing:ra,
isBinding:da,isHovered:n,isLocked:Ea,isSelected:O,isErasing:!1,meta:Ka})})})})}),Zw=Sf(Z(68)),Mr=Z(282),ZA=Be(function({bounds:c,shape:n}){const {viewport:{camera:{zoom:O}},components:{QuickLinks:da}}=ud();var ra=$e();const Ea=Ng(n);if(!da)throw Error("Expected a QuickLinks component.");ra=50>c.height*O||!ra.selectedShapesArray.includes(n);return(0,Mr.jsx)(pn,{bounds:c,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,Mr.jsx)($k,{children:(0,Mr.jsx)("span",rg(Ff({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},Ea),{onPointerDown:Ka=>Ka.stopPropagation(),children:(0,Mr.jsx)(da,{className:"tl-backlinks-count "+(ra?"tl-backlinks-count-rounded":""),id:n.id,shape:n})}))})})}),Nr=Z(282),$A=Be(function({bounds:c,shape:n}){const {viewport:{camera:{zoom:O}},components:{BacklinksCount:da}}=ud();var ra=$e();if(!da)throw Error("Expected a BacklinksCount component.");const Ea=Ka=>Ka.stopPropagation();
ra=50>c.height*O||!ra.selectedShapesArray.includes(n)||n.hideSelection;return(0,Nr.jsx)(pn,{bounds:c,className:"tl-backlinks-count-container",children:(0,Nr.jsx)($k,{children:(0,Nr.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:Ea,onWheelCapture:Ea,onKeyDown:Ea,title:"Shape Backlinks",children:(0,Nr.jsx)(da,{className:"tl-backlinks-count "+(ra?"tl-backlinks-count-rounded":""),id:n.id,
shape:n})})})})}),aB=Sf(Z(68)),$w=Z(282),bB=Be(function({bounds:c,hidden:n,shapes:O,rotation:da=0,detail:ra="size"}){const {components:{SelectionDetail:Ea},viewport:{camera:{zoom:Ka}}}=ud(),fb=aB.useRef(null),ub=Qe.multiplyBounds(c,Ka);xb(fb,c,da,10003);if(!Ea)throw Error("Expected a SelectionDetail component.");return(0,$w.jsx)("div",{ref:fb,className:`tl-counter-scaled-positioned ${n?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,$w.jsx)(Ea,
{shapes:O,bounds:c,scaledBounds:ub,zoom:Ka,rotation:da,detail:ra})})}),ax=Z(282),cB=Be(function({shape:c,isHovered:n=!1,isSelected:O=!1,isBinding:da=!1,isErasing:ra=!1,isEditing:Ea=!1,onEditingEnd:Ka,asset:fb,meta:ub,zIndex:bc}){const {bounds:tc,props:{rotation:Dc,scale:$c},ReactComponent:sd}=c,od=$e(),Gd=Ng(c);var Rd=od.getParentGroup(c);Rd=od.selectedIds.has(null==Rd?void 0:Rd.id);return(0,ax.jsx)(pn,{"data-shape-id":c.id,"data-html2canvas-ignore":!O&&!Rd&&0!==od.selectedShapes.size||null,zIndex:bc,
"data-type":"Shape",bounds:tc,rotation:Dc,scale:$c,children:(0,ax.jsx)(sd,{meta:ub,isEditing:Ea,isBinding:da,isHovered:n,isSelected:O,isErasing:ra,events:Gd,asset:fb,onEditingEnd:Ka})})}),up=Z(282),bx=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],dB=Be(function({size:c}){const {viewport:{camera:{point:n,zoom:O}}}=ud();return(0,up.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,up.jsx)("defs",{children:bx.map(([da,ra,
Ea],Ka)=>{Ea=Ea*c*O;var fb=n[0]*O,ub=n[1]*O;fb=0<fb?fb%Ea:Ea+fb%Ea;ub=0<ub?ub%Ea:Ea+ub%Ea;da=Li(O,[da,ra],[0,1]);return(0,up.jsx)("pattern",{id:`grid-${Ka}`,width:Ea,height:Ea,patternUnits:"userSpaceOnUse",children:!(2<da||.1>da)&&(0,up.jsx)("circle",{className:"tl-grid-dot",cx:fb,cy:ub,r:1.5,opacity:Math.max(0,Math.min(da,1))})},`grid-pattern-${Ka}`)})}),bx.map((da,ra)=>(0,up.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ra})`},`grid-rect-${ra}`))]})}),cx=Be(function({size:c}){return(0,up.jsx)(dB,
{size:c})}),dx=Z(282),ex=Be(function({bounds:c}){const n=$d("background");return(0,dx.jsx)(zl,rg(Ff({"data-html2canvas-ignore":"true"},n),{children:(0,dx.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,c.width),height:Math.max(1,c.height),pointerEvents:"all",rx:8,ry:8})}))});Z(68);var fx=Z(282),gx=Be(function({scaledBounds:c,shapes:n,detail:O="size",rotation:da=0}){var ra;const Ea=1===n.length?da:null!=(ra=c.rotation)?ra:0;return(0,fx.jsx)($k,{centered:!0,children:(0,fx.jsx)("div",{className:"tl-bounds-detail",
style:{transform:Ea<fi||Ea>3*fi?`rotate(${Ea}rad) translateY(${c.height/2+24}px)`:`rotate(${Math.PI+Ea}rad) translateY(${c.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===n.length&&"line"===n[0].type?`${ve.dist(n[0].props.handles.start.point,n[0].props.handles.end.point).toFixed()}`:"size"===O?`${c.width.toFixed()} \xD7 ${c.height.toFixed()}`:`\u2220${Fh.radiansToDegrees(Fh.clampRadians(da)).toFixed()}\xB0`})})}),xt=Z(282),eB={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Or=Be(function({cx:c,cy:n,size:O,targetSize:da,corner:ra,isHidden:Ea}){const Ka=$d(ra);return(0,xt.jsxs)("g",rg(Ff({opacity:Ea?0:1},Ka),{children:[(0,xt.jsx)("rect",{className:"tl-transparent "+(Ea?"":eB[ra]),"aria-label":`${ra} target`,x:c-1.25*da,y:n-1.25*da,width:2.5*da,height:2.5*da,pointerEvents:Ea?"none":"all"}),(0,xt.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ra} handle`,x:c-O/2,y:n-O/2,width:O,height:O,
pointerEvents:"none"})]}))}),Pr=Z(282),yt=Be(function({cx:c,cy:n,size:O,direction:da,isHidden:ra}){const Ea=$e();return(0,Pr.jsxs)("g",{className:"tl-clone-handle",opacity:ra?0:1,children:[(0,Pr.jsx)("circle",{"aria-label":`${da} handle`,pointerEvents:"all",onPointerDown:Ka=>Ea.api.clone(da),cx:c,cy:n,r:O}),(0,Pr.jsx)("line",{x1:c-O/2,y1:n,x2:c+O/2,y2:n}),(0,Pr.jsx)("line",{x1:c,y1:n-O/2,x2:c,y2:n+O/2})]})}),fB=Z(282),gB={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",
left_edge:"tl-cursor-ew"},Qr=Be(function({x:c,y:n,width:O,height:da,targetSize:ra,edge:Ea,disabled:Ka,isHidden:fb}){const ub=$d(Ea);return(0,fB.jsx)("rect",Ff({pointerEvents:fb||Ka?"none":"all",className:"tl-transparent tl-edge-handle "+(fb?"":gB[Ea]),"aria-label":`${Ea} target`,opacity:fb?0:1,x:c-ra,y:n-ra,width:Math.max(1,O+2*ra),height:Math.max(1,da+2*ra)},ub))}),zt=Z(282);Be(function({cx:c,cy:n,size:O,targetSize:da,isHidden:ra}){const Ea=$d("rotate");return(0,zt.jsxs)("g",rg(Ff({opacity:ra?0:
1},Ea),{children:[(0,zt.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:c,cy:n,r:da,pointerEvents:ra?"none":"all"}),(0,zt.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:c,cy:n,r:O/2,pointerEvents:"none"})]}))});Z(68);var hx=Z(282),Rr=Be(function({cx:c,cy:n,targetSize:O,corner:da,isHidden:ra}){const Ea=$d(da);return(0,hx.jsx)("g",rg(Ff({opacity:ra?0:1},Ea),{children:(0,hx.jsx)("rect",{className:"tl-transparent","aria-label":`${da} target`,x:c-
2.5*O,y:n-2.5*O,width:3*O,height:3*O,pointerEvents:ra?"none":"all"})}))}),Ij=Z(282),ix=Be(function({bounds:c,showResizeHandles:n,showRotateHandles:O,showCloneHandles:da,shapes:ra}){var Ea,Ka;const fb=$e();let {width:ub,height:bc}=c;var tc=fb.viewport.camera.zoom;c=8/tc;const Dc=6/tc;tc=30/tc;const $c=2*c,sd=1===ra.length?ra[0].canResize:[!0,!0],od=null!=(Ka=null==(Ea=fb.editingShape)?void 0:Ea.props.borderRadius)?Ka:0;return(0,Ij.jsx)(Ij.Fragment,{children:0<ra.length&&(0,Ij.jsxs)(zl,{children:[!fb.editingShape&&
(0,Ij.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(ub,1),height:Math.max(bc,1),rx:od,ry:od,pointerEvents:"none"}),(0,Ij.jsx)(Qr,{x:2*Dc,y:0,width:ub-4*Dc,height:0,targetSize:Dc,edge:"top_edge",disabled:!sd[1],isHidden:!n}),(0,Ij.jsx)(Qr,{x:ub,y:2*Dc,width:0,height:bc-4*Dc,targetSize:Dc,edge:"right_edge",disabled:!sd[0],isHidden:!n}),(0,Ij.jsx)(Qr,{x:2*Dc,y:bc,width:ub-4*Dc,height:0,targetSize:Dc,edge:"bottom_edge",disabled:!sd[1],isHidden:!n}),(0,Ij.jsx)(Qr,{x:0,y:2*Dc,width:0,height:bc-4*
Dc,targetSize:Dc,edge:"left_edge",disabled:!sd[0],isHidden:!n}),(0,Ij.jsx)(Rr,{cx:0,cy:0,targetSize:Dc,corner:"top_left_resize_corner",isHidden:!O}),(0,Ij.jsx)(Rr,{cx:ub+2*Dc,cy:0,targetSize:Dc,corner:"top_right_resize_corner",isHidden:!O}),(0,Ij.jsx)(Rr,{cx:ub+2*Dc,cy:bc+2*Dc,targetSize:Dc,corner:"bottom_right_resize_corner",isHidden:!O}),(0,Ij.jsx)(Rr,{cx:0,cy:bc+2*Dc,targetSize:Dc,corner:"bottom_left_resize_corner",isHidden:!O}),(0,Ij.jsx)(yt,{cx:-tc,cy:bc/2,size:$c,direction:"left",isHidden:!da}),
(0,Ij.jsx)(yt,{cx:ub+tc,cy:bc/2,size:$c,direction:"right",isHidden:!da}),(0,Ij.jsx)(yt,{cx:ub/2,cy:bc+tc,size:$c,direction:"down",isHidden:!da}),(null==sd?void 0:sd.every(Gd=>Gd))&&(0,Ij.jsxs)(Ij.Fragment,{children:[(0,Ij.jsx)(Or,{cx:0,cy:0,size:c,targetSize:Dc,corner:"top_left_corner",isHidden:!n}),(0,Ij.jsx)(Or,{cx:ub,cy:0,size:c,targetSize:Dc,corner:"top_right_corner",isHidden:!n}),(0,Ij.jsx)(Or,{cx:ub,cy:bc,size:c,targetSize:Dc,corner:"bottom_right_corner",isHidden:!n}),(0,Ij.jsx)(Or,{cx:0,cy:bc,
size:c,targetSize:Dc,corner:"bottom_left_corner",isHidden:!n})]})]})})}),At=Z(282),jx=Be(function({bounds:c}){return(0,At.jsx)(pn,{bounds:c,zIndex:10001,children:(0,At.jsx)(zl,{children:(0,At.jsx)("rect",{className:"tl-brush",x:0,y:0,width:c.width,height:c.height})})})}),kx=Z(282);Be(function(){return(0,kx.jsx)(kx.Fragment,{})});var Bt=Z(282),lx=Be(function({shape:c,handle:n,id:O}){c=vd(c,O);const [da,ra]=n.point;return(0,Bt.jsxs)("g",rg(Ff({className:"tl-handle","aria-label":"handle"},c),{transform:`translate(${da}, ${ra})`,
children:[(0,Bt.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Bt.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),mx=Sf(Z(68)),Ct=Z(282),Dt=Be(function({direction:c}){const {viewport:{bounds:n}}=ud(),O=mx.useRef(null);mx.useLayoutEffect(()=>{const da=O.current;if(da){var ra=[n.width/2,n.height/2],Ea=Qe.getRectangleSides([12,12],[n.width-24,n.height-24]);for(const [,[Ka,fb]]of Ea)Ea=p(ra,c,Ka,fb),Ea.didIntersect&&(Ea=Ea.points[0],da.style.transform=
`translate(${Ea[0]-6}px,${Ea[1]-6}px) rotate(${ve.toAngle(c)}rad)`)}},[c,n]);return(0,Ct.jsx)("div",{ref:O,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Ct.jsx)("svg",{height:12,width:12,children:(0,Ct.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),lj=Z(282),hB=Be(function({id:c,className:n,brush:O,shapes:da,assets:ra,bindingShapes:Ea,editingShape:Ka,hoveredShape:fb,hoveredGroup:ub,selectionBounds:bc,selectedShapes:tc,erasingShapes:Dc,selectionDirectionHint:$c,cursor:sd=
"default",cursorRotation:od=0,selectionRotation:Gd=0,showSelection:Rd=!0,showHandles:id=!0,showSelectionRotation:qd=!1,showResizeHandles:xd=!0,showRotateHandles:Sd=!0,showCloneHandles:Id=!0,showSelectionDetail:Ve=!0,showContextBar:We=!0,showGrid:ig=!0,gridSize:kf=8,onEditingEnd:Vf=aA,theme:Lg=Ai,children:dh}){var Ig;const eh=Lq.useRef(null),{viewport:Df,components:Kf,meta:Af}=ud(),ag=$e(),fh=Lq.useCallback(Zg=>{ag.inputs.updateContainerOffset([Zg.minX,Zg.minY])},[]);pe(Lg,c);gd(eh);we(eh,Df,fh);Ue(eh);
ie();Ed(eh,sd,od);Pd(eh);vg(eh);c=$f();const Ih=(sd=1===(null==tc?void 0:tc.length)&&tc[0])&&"handles"in sd.props?null==tc?void 0:tc[0]:void 0,Wi=Lq.useMemo(()=>new Set(tc||[]),[tc]),ii=Lq.useMemo(()=>new Set(Dc||[]),[Dc]);sd=1===(null==tc?void 0:tc.length)?tc[0]:void 0;ub=[...(new Set([ub,fb]))].filter(Qc);return(0,lj.jsxs)("div",{ref:eh,className:`tl-container ${null!=n?n:""}`,children:[(0,lj.jsxs)("div",rg(Ff({tabIndex:-1,className:"tl-absolute tl-canvas"},c),{children:[ig&&Kf.Grid&&(0,lj.jsx)(Kf.Grid,
{size:kf}),(0,lj.jsxs)(Xw,{children:[Kf.SelectionBackground&&tc&&bc&&Rd&&(0,lj.jsx)(pn,{"data-type":"SelectionBackground",bounds:bc,zIndex:2,"data-html2canvas-ignore":"true",children:(0,lj.jsx)(Kf.SelectionBackground,{shapes:tc,bounds:bc,showResizeHandles:xd,showRotateHandles:Sd})}),da&&da.map((Zg,Ki)=>(0,lj.jsx)(cB,{shape:Zg,asset:ra&&Zg.props.assetId?ra[Zg.props.assetId]:void 0,isEditing:Zg===Ka,isHovered:Zg===fb,isBinding:null==Ea?void 0:Ea.includes(Zg),isSelected:Wi.has(Zg),isErasing:ii.has(Zg),
meta:Af,zIndex:1E3+Ki,onEditingEnd:Vf},"shape_"+Zg.id)),!ag.isIn("select.pinching")&&(null==tc?void 0:tc.map(Zg=>(0,lj.jsx)(Yw,{shape:Zg,isEditing:Zg===Ka,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Zg.props.isLocked},"selected_indicator_"+Zg.id))),ub.map(Zg=>Zg!==Ka&&(0,lj.jsx)(Yw,{shape:Zg},"hovered_indicator_"+Zg.id)),sd&&Kf.BacklinksCount&&(0,lj.jsx)($A,{hidden:!1,bounds:sd.bounds,shape:sd}),fb&&fb!==sd&&Kf.QuickLinks&&(0,lj.jsx)(ZA,{hidden:!1,bounds:fb.bounds,shape:fb}),O&&Kf.Brush&&(0,lj.jsx)(Kf.Brush,
{bounds:O}),tc&&bc&&(0,lj.jsxs)(lj.Fragment,{children:[Rd&&Kf.SelectionForeground&&(0,lj.jsx)(pn,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:bc,zIndex:Ka&&tc.includes(Ka)?1002:10002,children:(0,lj.jsx)(Kf.SelectionForeground,{shapes:tc.filter(Zg=>!Zg.props.isLocked),bounds:bc,showResizeHandles:xd,showRotateHandles:Sd,showCloneHandles:Id})}),id&&Ih&&Kf.Handle&&(0,lj.jsx)(pn,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:bc,zIndex:10003,
children:(0,lj.jsx)(zl,{children:Object.entries(null!=(Ig=Ih.props.handles)?Ig:{}).map(([Zg,Ki])=>Lq.createElement(Kf.Handle,{key:`${Ki.id}_handle_${Ki.id}`,shape:Ih,handle:Ki,id:Zg}))})}),tc&&Kf.SelectionDetail&&(0,lj.jsx)(bB,{"data-html2canvas-ignore":"true",shapes:tc,bounds:bc,detail:qd?"rotation":"size",hidden:!Ve,rotation:Gd},"detail"+tc.map(Zg=>Zg.id).join(""))]})]}),$c&&bc&&tc&&(0,lj.jsx)(Dt,{direction:$c,bounds:bc,shapes:tc}),(0,lj.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),
(0,lj.jsx)(Xw,{children:tc&&bc&&(0,lj.jsx)(lj.Fragment,{children:tc&&Kf.ContextBar&&(0,lj.jsx)(XA,{shapes:tc.filter(Zg=>!Zg.props.isLocked),hidden:!We,bounds:sd?sd.bounds:bc,rotation:sd?sd.props.rotation:0},"context"+tc.map(Zg=>Zg.id).join(""))})}),dh]})}),nx=Sf(Z(68)),ox=Sf(Z(68)),px=Z(282);Be(function({children:c}){const n=ox.useRef(null),{viewport:O}=ud();ox.useEffect(()=>nc(()=>{const da=n.current;if(da){var {zoom:ra,point:Ea}=O.camera;da.style.transform=`scale(${ra}) translateX(${Ea[0]}px) translateY(${Ea[1]}px)`}}),
[]);return(0,px.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,px.jsx)("g",{ref:n,pointerEvents:"none",children:c})})});var iB=Z(282),jB=Be(function(c){const n=zc(c),O=Oe(c.id);Yc(n,c);Cc(n,c);return(0,iB.jsx)(O.Provider,{value:n,children:c.children})}),kB=Z(282),lB=Be(function({id:c="noid",viewport:n,inputs:O,callbacks:da=Ai,meta:ra=Ai,components:Ea=Ai,children:Ka}){const [fb,ub]=nx.useState(()=>{const {Brush:tc,ContextBar:Dc,DirectionIndicator:$c,Grid:sd,Handle:od,
SelectionBackground:Gd,SelectionDetail:Rd,SelectionForeground:id}=Ea,qd=Zi(Ea,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:c,viewport:n,inputs:O,callbacks:da,meta:ra,components:rg(Ff({},qd),{Brush:null===tc?void 0:jx,ContextBar:Dc,DirectionIndicator:null===$c?void 0:Dt,Grid:null===sd?void 0:cx,Handle:null===od?void 0:lx,SelectionBackground:null===Gd?void 0:ex,SelectionDetail:null===Rd?void 0:gx,SelectionForeground:null===
id?void 0:ix})}});nx.useLayoutEffect(()=>{const {Brush:tc,ContextBar:Dc,DirectionIndicator:$c,Grid:sd,Handle:od,SelectionBackground:Gd,SelectionDetail:Rd,SelectionForeground:id}=Ea,qd=Zi(Ea,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return nc(()=>{ub({id:c,viewport:n,inputs:O,callbacks:da,meta:ra,components:rg(Ff({},qd),{Brush:null===tc?void 0:jx,ContextBar:Dc,DirectionIndicator:null===$c?void 0:Dt,Grid:null===sd?void 0:cx,
Handle:null===od?void 0:lx,SelectionBackground:null===Gd?void 0:ex,SelectionDetail:null===Rd?void 0:gx,SelectionForeground:null===id?void 0:ix})})})},[]);const bc=jd(c);return(0,kB.jsx)(bc.Provider,{value:fb,children:Ka})}),qx=Z(282),mB=Z(282),nB=Be(function(c){const n=$e();return(0,mB.jsx)(Og,Ff({viewport:n.viewport,inputs:n.inputs,callbacks:n._events,brush:n.brush,editingShape:n.editingShape,hoveredShape:n.hoveredShape,hoveredGroup:n.hoveredGroup,bindingShapes:n.bindingShapes,selectionDirectionHint:n.selectionDirectionHint,
selectionBounds:n.selectionBounds,selectedShapes:n.selectedShapesArray,erasingShapes:n.erasingShapesArray,shapes:n.shapes,assets:n.assets,showGrid:n.settings.showGrid,penMode:n.settings.penMode,showSelection:n.showSelection,showSelectionRotation:n.showSelectionRotation,showResizeHandles:n.showResizeHandles,showRotateHandles:n.showRotateHandles,showCloneHandles:n.showCloneHandles,showSelectionDetail:n.showSelectionDetail,showContextBar:n.showContextBar,cursor:n.cursors.cursor,cursorRotation:n.cursors.rotation,
selectionRotation:n.selectionRotation,onEditingEnd:n.clearEditingState},c))});Z(282);var vp=Sf(Z(68)),qn=Sf(Z(68)),oB=Z(282),pB="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),ih=c=>{var {name:n,className:O}=c;c=Zi(c,["name","className"]);const da=pB.includes(n)?
"tie tie-":"ti ti-";return(0,oB.jsx)("i",Ff({className:[da+n,O].join(" ")},c))},wo=Z(282),Mq=window.LSUI,rx=Z(282),Et=Z(282),qB=({style:c,icon:n,onClick:O})=>(0,Et.jsx)("button",{"data-html2canvas-ignore":"true",style:c,className:"tl-circle-button",onPointerDown:O,children:(0,Et.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,Et.jsx)(ih,{name:n})})}),Ft=Z(282),rB=window.LSUI,wi=Sf(Z(68)).default.createContext({}),sB=Sf(Z(68)),sx=Z(282),ak=c=>{var {action:n,shortcut:O,opts:da}=c;
c=Zi(c,["action","shortcut","opts"]);var {renderers:ra}=sB.useContext(wi);ra=null==ra?void 0:ra.KeyboardShortcut;return(0,sx.jsx)("div",rg(Ff({className:"tl-menu-right-slot"},c),{children:(0,sx.jsx)(ra,{action:n,shortcut:O,opts:da})}))},al=Z(282),rn=window.LSUI,tB=Be(function(){const c=$e(),n=O=>{O.preventDefault()};return(0,al.jsxs)(rn.DropdownMenu,{children:[(0,al.jsx)(rn.DropdownMenuTrigger,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*c.viewport.camera.zoom).toFixed(0)+
"%"}),(0,al.jsxs)(rn.DropdownMenuContent,{onCloseAutoFocus:O=>O.preventDefault(),id:"zoomPopup",sideOffset:12,children:[(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomToFit,children:["Zoom to drawing",(0,al.jsx)(ak,{action:"whiteboard/zoom-to-fit"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomToSelection,disabled:0===c.selectedShapesArray.length,children:["Zoom to fit selection",(0,al.jsx)(ak,{action:"whiteboard/zoom-to-selection"})]}),(0,al.jsxs)(rn.DropdownMenuItem,
{onSelect:n,onClick:c.api.zoomIn,children:["Zoom in",(0,al.jsx)(ak,{action:"whiteboard/zoom-in"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.zoomOut,children:["Zoom out",(0,al.jsx)(ak,{action:"whiteboard/zoom-out"})]}),(0,al.jsxs)(rn.DropdownMenuItem,{onSelect:n,onClick:c.api.resetZoom,children:["Reset zoom",(0,al.jsx)(ak,{action:"whiteboard/reset-zoom"})]})]})]})}),Jj=Z(282),uB=window.LSUI,vB=Be(function(){const c=$e(),{handlers:{t:n}}=qn.useContext(wi),O=qn.useCallback(()=>{c.api.undo()},
[c]),da=qn.useCallback(()=>{c.api.redo()},[c]),ra=qn.useCallback(()=>{c.api.zoomIn()},[c]),Ea=qn.useCallback(()=>{c.api.zoomOut()},[c]),Ka=qn.useCallback(()=>{c.api.toggleGrid()},[c]),fb=qn.useCallback(()=>{c.api.toggleSnapToGrid()},[c]),ub=qn.useCallback(()=>{c.api.togglePenMode()},[c]);return(0,Jj.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!c.readOnly&&(0,Jj.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Jj.jsx)(oh,{tooltip:n("whiteboard/undo"),
onClick:O,children:(0,Jj.jsx)(ih,{name:"arrow-back-up"})}),(0,Jj.jsx)(oh,{tooltip:n("whiteboard/redo"),onClick:da,children:(0,Jj.jsx)(ih,{name:"arrow-forward-up"})})]}),(0,Jj.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Jj.jsx)(oh,{tooltip:n("whiteboard/zoom-in"),onClick:ra,id:"tl-zoom-in",children:(0,Jj.jsx)(ih,{name:"plus"})}),(0,Jj.jsx)(oh,{tooltip:n("whiteboard/zoom-out"),onClick:Ea,id:"tl-zoom-out",children:(0,Jj.jsx)(ih,{name:"minus"})}),(0,Jj.jsx)(uB.Separator,{orientation:"vertical"}),
(0,Jj.jsx)(tB,{})]}),(0,Jj.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Jj.jsx)(Cg,{tooltip:n("whiteboard/toggle-grid"),className:"tl-button",pressed:c.settings.showGrid,id:"tl-show-grid",onPressedChange:Ka,children:(0,Jj.jsx)(ih,{name:"grid-dots"})}),!c.readOnly&&(0,Jj.jsx)(Cg,{tooltip:n("whiteboard/snap-to-grid"),className:"tl-button",pressed:c.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:fb,children:(0,Jj.jsx)(ih,{name:c.settings.snapToGrid?"magnet":"magnet-off"})})]}),
!c.readOnly&&(0,Jj.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Jj.jsx)(Cg,{tooltip:n("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:c.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:ub,children:(0,Jj.jsx)(ih,{name:c.settings.penMode?"pencil":"pencil-off"})})})]})}),tx=Sf(Z(68)),wB=Sf(Z(69)),Gt=Z(282),Sr=c=>`[${c.map(n=>{var O;return null!=(O=null==n?void 0:n.toFixed(2))?O:"-"}).join(", ")}]`,xB=Be(()=>{var c;const {viewport:{bounds:n,camera:{point:O,zoom:da}},
inputs:ra}=ud(),Ea=tx.default.useRef();tx.default.useEffect(()=>{const fb=document.getElementById("tl-statusbar-anchor");Ea.current=fb},[]);const Ka=[["Z",null!=(c=null==da?void 0:da.toFixed(2))?c:"null"],["MP",Sr(ra.currentPoint)],["MS",Sr(ra.currentScreenPoint)],["VP",Sr(O)],["VBR",Sr([n.maxX,n.maxY])]].map(fb=>fb.join("")).join("|");c=Ea.current?wB.default.createPortal((0,Gt.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ka}),Ea.current):null;return(0,Gt.jsx)(Gt.Fragment,
{children:c})}),Nq=Sf(Z(68)),Tr=Z(282),jm=Be(c=>{var {id:n,icon:O,tooltip:da,tooltipSide:ra="left",handleClick:Ea}=c;c=Zi(c,["id","icon","tooltip","tooltipSide","handleClick"]);var Ka;const fb=$e(),ub=null==(Ka=[...fb.Tools,op,pp])?void 0:Ka.find(bc=>bc.id===n);Ka=(Ka=null==ub?void 0:ub.shortcut)&&da?(0,Tr.jsxs)("div",{className:"flex",children:[da,(0,Tr.jsx)(ak,{action:Ka})]}):da;return(0,Tr.jsx)(oh,rg(Ff({},c),{tooltipSide:ra,tooltip:Ka,"data-tool":n,"data-selected":n===fb.selectedTool.id,onClick:Ea,
children:"string"===typeof O?(0,Tr.jsx)(ih,{name:O}):O}))}),yB=Sf(Z(68)),sn=Z(282),Ht=window.LSUI,ux=Be(function(c){var {popoverSide:n="left",setGeometry:O,activeGeometry:da,chevron:ra=!0}=c;c=Zi(c,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:Ea}}=yB.default.useContext(wi);const Ka=[{id:"box",icon:"square",tooltip:Ea("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:Ea("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:Ea("whiteboard/triangle")}];
Ea={id:"shapes",icon:"triangle-square-circle",tooltip:Ea("whiteboard/shape")};Ea=da?Ka.find(fb=>fb.id===da):Ea;return(0,sn.jsxs)(Ht.Popover,{children:[(0,sn.jsx)(Ht.PopoverTrigger,{asChild:!0,children:(0,sn.jsxs)("div",rg(Ff({},c),{className:"tl-geometry-tools-pane-anchor",children:[(0,sn.jsx)(jm,rg(Ff({},Ea),{tooltipSide:n})),ra&&(0,sn.jsx)(ih,{"data-selected":da,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,sn.jsx)(Ht.PopoverContent,{className:"p-0 w-auto",side:n,sideOffset:15,
collisionBoundary:document.querySelector(".logseq-tldraw"),children:(0,sn.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(n)?"flex-col":"flex-row"}`,children:Ka.map(fb=>(0,sn.jsx)(jm,{id:fb.id,icon:fb.icon,handleClick:O,tooltipSide:n},fb.id))})})]})}),Ur=Z(282),Vr=window.LSUI,vx=Sf(Z(68)),bk=Z(282),Wr=window.LSUI,zB=Sf(Z(68)),It=Z(68),AB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",
strokeLinejoin:"round"},BB=((c,n)=>{const O=(0,It.forwardRef)((da,ra)=>{var {color:Ea="currentColor",size:Ka=24,strokeWidth:fb=2,absoluteStrokeWidth:ub,children:bc}=da;da=Zi(da,["color","size","strokeWidth","absoluteStrokeWidth","children"]);return(0,It.createElement)("svg",Ff(rg(Ff({ref:ra},AB),{width:Ka,height:Ka,stroke:Ea,strokeWidth:ub?24*Number(fb)/Number(Ka):fb,className:`lucide lucide-${c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`}),da),[...n.map(([tc,Dc])=>(0,It.createElement)(tc,
Dc)),...((Array.isArray(bc)?bc:[bc])||[])])});O.displayName=`${c}`;return O})("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fm=Z(282),wp=window.LSUI,CB=Sf(Z(68)),DB=Z(282),Dk=Z(282),wx=window.LSUI,EB=Be(function(){const c=$e(),{handlers:{t:n}}=Nq.useContext(wi),O=Nq.useCallback(Ka=>{c.api.setColor(Ka)},[]),da=Nq.useCallback(Ka=>{(Ka=Ka.currentTarget.dataset.tool)&&c.selectTool(Ka)},[]),[ra,Ea]=Nq.useState(()=>{var Ka;return null!=(Ka=Object.values(nb).find(fb=>fb===c.selectedTool.id))?
Ka:Object.values(nb)[0]});Nq.useEffect(()=>{Ea(Ka=>{var fb;return null!=(fb=Object.values(nb).find(ub=>ub===c.selectedTool.id))?fb:Ka})},[c.selectedTool.id]);return(0,Dk.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,Dk.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("select"),tooltip:n("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("move"),
tooltip:n("whiteboard/pan"),id:"move",icon:c.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Dk.jsx)(wx.Separator,{orientation:"horizontal"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("logseq-portal"),tooltip:n("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("pencil"),tooltip:n("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("highlighter"),tooltip:n("whiteboard/highlight"),id:"highlighter",
icon:"highlight"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("erase"),tooltip:n("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("line"),tooltip:n("whiteboard/connector"),id:"line",icon:"connector"}),(0,Dk.jsx)(jm,{handleClick:()=>c.selectTool("text"),tooltip:n("whiteboard/text"),id:"text",icon:"text"}),(0,Dk.jsx)(ux,{activeGeometry:ra,setGeometry:da}),(0,Dk.jsx)(wx.Separator,{orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Dk.jsx)(zf,{popoverSide:"left",
color:c.settings.color,setColor:O}),(0,Dk.jsx)(Ti,{scaleLevel:c.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Jt=Z(282),FB=Be(function(){const c=$e();return(0,Jt.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[c.selectedTool.id," | ",c.selectedTool.currentState.id,(0,Jt.jsx)("div",{style:{flex:1}}),(0,Jt.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),xp=Z(282),GB=Be(function(){const c=$e();return(0,xp.jsxs)(xp.Fragment,{children:[kc()&&
(0,xp.jsx)(FB,{}),kc()&&(0,xp.jsx)(xB,{}),!c.readOnly&&(0,xp.jsx)(EB,{}),(0,xp.jsx)(vB,{})]})}),Oq=Sf(Z(68)),ck=Sf(Z(68)),xx=Sf(Z(68)),HB=Sf(Z(68)),tn=Z(282),yx=({id:c,showReferenceContent:n=!1})=>{var O;const {handlers:{isWhiteboardPage:da,redirectToPage:ra,sidebarAddBlock:Ea,queryBlockByUUID:Ka},renderers:{Breadcrumb:fb,PageName:ub}}=HB.default.useContext(wi);var bc="";let tc=qg(c)?"B":"P",Dc="";if(qg(c)){bc=Ka(c);if(!bc)return(0,tn.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});
Dc=bc.title;bc="whiteboard-shape"===(null==(O=bc.properties)?void 0:O["ls-type"])?"link-to-whiteboard":"link-to-block"}else bc=da(c)?"link-to-whiteboard":"link-to-page";O=Dc&&23<Dc.length?Dc.slice(0,20)+"...":Dc;return(0,tn.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:$c=>{$c.stopPropagation();$c.shiftKey?Ea(c,"B"===tc?"block":"page"):ra(c)},children:[(0,tn.jsx)(ih,{name:bc}),(0,tn.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===
tc?(0,tn.jsx)(ub,{pageName:c}):(0,tn.jsxs)(tn.Fragment,{children:[(0,tn.jsx)(fb,{levelLimit:1,blockId:c,endSeparator:n}),n&&O]})})]})},lk=Sf(Z(68)),Kk=Z(68),IB=["children"],Xr="undefined"!==typeof document?Kk.useLayoutEffect:Kk.useEffect,vh=Sf(Z(68)),Uh=Z(68),JB=Z(69),Pq,dk,KB="undefined"!=typeof document?Uh.useLayoutEffect:Uh.useEffect;!function(c){c[c.DEBUG=0]="DEBUG";c[c.INFO=1]="INFO";c[c.WARN=2]="WARN";c[c.ERROR=3]="ERROR"}(dk||={});var LB=((Pq={})[dk.DEBUG]="debug",Pq[dk.INFO]="log",Pq[dk.WARN]=
"warn",Pq[dk.ERROR]="error",Pq),un=uh(function(){var c=mg(dk.ERROR);return{log:mg(function(n,O,da){var ra;void 0===da&&(da=dk.INFO);da>=(null!=(ra=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?ra:c(4))&&console[LB[da]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,O)}),logLevel:c}},[],{singleton:!0}),Lk=uh(function(){var c=ch(),n=ch(),O=mg(0),da=ch(),ra=mg(0),Ea=ch(),Ka=ch(),fb=mg(0),ub=mg(0),bc=mg(0),tc=mg(0),Dc=ch(),$c=ch(),sd=mg(!1),
od=mg(!1);return Tg(Pf(c,Hg(function(Gd){return Gd.scrollTop})),n),Tg(Pf(c,Hg(function(Gd){return Gd.scrollHeight})),Ka),Tg(n,ra),{scrollContainerState:c,scrollTop:n,viewportHeight:Ea,headerHeight:fb,fixedHeaderHeight:ub,fixedFooterHeight:bc,footerHeight:tc,scrollHeight:Ka,smoothScrollTargetReached:da,react18ConcurrentRendering:od,scrollTo:Dc,scrollBy:$c,statefulScrollTop:ra,deviation:O,scrollingInProgress:sd}},[],{singleton:!0}),qi={lvl:0},Kt=uh(function(){return{recalcInProgress:mg(!1)}},[],{singleton:!0}),
MB={offsetHeight:"height",offsetWidth:"width"},Gm=uh(function(c){var n=c[0].log,O=c[1].recalcInProgress;c=ch();var da=ch(),ra=Vi(da,0),Ea=ch(),Ka=ch(),fb=mg(0),ub=mg([]),bc=mg(void 0),tc=mg(void 0),Dc=mg(function(qd,xd){return Vb(qd,MB[xd])}),$c=mg(void 0),sd=mg(0),od={offsetTree:[],sizeTree:qi,groupOffsetTree:qi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Gd=Vi(Pf(c,Ah(ub,n,sd),zi(wh,od),yh()),od);Tg(Pf(ub,Ch(function(qd){return 0<qd.length}),Ah(Gd,sd),Hg(function(qd){var xd=qd[0],Sd=qd[1],
Id=qd[2];qd=xd.reduce(function(Ve,We,ig){return Md(Ve,We,$i(We,Sd.offsetTree,Id)||ig)},qi);return Ha({},Sd,{groupIndices:xd,groupOffsetTree:qd})})),Gd);Tg(Pf(da,Ah(Gd),Ch(function(qd){return qd[0]<qd[1].lastIndex}),Hg(function(qd){var xd=qd[1];return[{startIndex:qd[0],endIndex:xd.lastIndex,size:xd.lastSize}]})),c);Tg(bc,tc);var Rd=Vi(Pf(bc,Hg(function(qd){return void 0===qd})),!0);Tg(Pf(tc,Ch(function(qd){return void 0!==qd&&Gd(4).sizeTree===qi}),Hg(function(qd){return[{startIndex:0,endIndex:0,size:qd}]})),
c);od=Yi(Pf(c,Ah(Gd),zi(function(qd,xd){xd=xd[1];return{changed:xd!==qd.sizes,sizes:xd}},{changed:!1,sizes:od}),Hg(function(qd){return qd.changed})));bi(Pf(fb,zi(function(qd,xd){return{diff:qd.prev-xd,prev:xd}},{diff:0,prev:0}),Hg(function(qd){return qd.diff})),function(qd){0<qd?(O(0,!0),Ea(0,qd)):0>qd&&Ka(0,qd)});bi(Pf(fb,Ah(n)),function(qd){0>qd[0]&&(0,qd[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:fb},
dk.ERROR)});n=Yi(Ea);Tg(Pf(Ea,Ah(Gd),Hg(function(qd){var xd=qd[0];qd=qd[1];if(0<qd.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return ze(qd.sizeTree).reduce(function(Sd,Id){var Ve=Id.k;Id=Id.v;return{ranges:[].concat(Sd.ranges,[{startIndex:Sd.prevIndex,endIndex:Ve+xd-1,size:Sd.prevSize}]),prevIndex:Ve+xd,prevSize:Id}},{ranges:[],prevIndex:0,prevSize:qd.lastSize}).ranges})),c);var id=Yi(Pf(Ka,Ah(Gd,sd),Hg(function(qd){return $i(-qd[0],qd[1].offsetTree,qd[2])})));
return Tg(Pf(Ka,Ah(Gd,sd),Hg(function(qd){var xd=qd[0],Sd=qd[1];qd=qd[2];if(0<Sd.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Id=ze(Sd.sizeTree).reduce(function(Ve,We){return Md(Ve,Math.max(0,We.k+xd),We.v)},qi);return Ha({},Sd,{sizeTree:Id},li(Sd.offsetTree,0,Id,qd))})),Gd),{data:$c,totalCount:da,sizeRanges:c,groupIndices:ub,defaultItemSize:tc,fixedItemSize:bc,unshiftWith:Ea,shiftWith:Ka,shiftWithOffset:id,beforeUnshiftWith:n,firstItemIndex:fb,gap:sd,
sizes:Gd,listRefresh:od,statefulTotalCount:ra,trackItemSizes:Rd,itemSize:Dc}},ai(un,Kt),{singleton:!0}),NB="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Qq=uh(function(c){function n(){Rd&&(Rd(),Rd=null);qd&&(qd(),qd=null);id&&(clearTimeout(id),id=null);fb(0,!1)}var O=c[0],da=O.sizes,ra=O.totalCount,Ea=O.listRefresh;O=O.gap;var Ka=c[1],fb=Ka.scrollingInProgress,ub=Ka.viewportHeight,bc=Ka.scrollTo,tc=Ka.smoothScrollTargetReached,Dc=Ka.headerHeight,$c=Ka.footerHeight,
sd=Ka.fixedHeaderHeight;Ka=Ka.fixedFooterHeight;c=c[2].log;var od=ch(),Gd=mg(0),Rd=null,id=null,qd=null;return Tg(Pf(od,Ah(da,ub,ra,Gd,Dc,$c,c),Ah(O,sd,Ka),Hg(function(xd){var Sd=xd[0],Id=Sd[0],Ve=Sd[1],We=Sd[2],ig=Sd[3],kf=Sd[4],Vf=Sd[5],Lg=Sd[6],dh=Sd[7],Ig=xd[1];Sd=xd[2];xd=xd[3];var eh=qj(Id),Df=eh.align,Kf=eh.behavior,Af=eh.offset;--ig;eh=Jh(eh,Ve,ig);Vf=$i(eh,Ve.offsetTree,Ig)+Vf;"end"===Df?(Vf+=Sd+Fd(Ve.sizeTree,eh)[1]-We+xd,eh===ig&&(Vf+=Lg)):"center"===Df?Vf+=(Sd+Fd(Ve.sizeTree,eh)[1]-We+
xd)/2:Vf-=kf;Af&&(Vf+=Af);var ag=function(Ih){n();Ih?(dh("retrying to scroll to",{location:Id},dk.DEBUG),od(0,Id)):dh("list did not change, scroll successful",{},dk.DEBUG)};if(n(),"smooth"===Kf){var fh=!1;qd=bi(Ea,function(Ih){fh=fh||Ih});Rd=kk(tc,function(){ag(fh)})}else Rd=kk(Pf(Ea,function(Ih){var Wi=setTimeout(function(){Ih(!1)},150);return function(ii){ii&&(Ih(!0),clearTimeout(Wi))}}),ag);id=setTimeout(function(){n()},1200);fb(0,!0);return dh("scrolling from index to",{index:eh,top:Vf,behavior:Kf},
dk.DEBUG),{top:Vf,behavior:Kf}})),bc),{scrollToIndex:od,topListHeight:Gd}},ai(Gm,Lk,un),{singleton:!0}),OB={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Rq=uh(function(c){var n=c[0],O=n.scrollContainerState;c=n.scrollTop;var da=n.viewportHeight,ra=n.headerHeight,Ea=n.footerHeight,Ka=n.scrollBy;n=mg(!1);var fb=mg(!0),ub=ch(),bc=ch(),tc=mg(4),Dc=mg(0),$c=Vi(Pf(Am(Pf(Nh(c),gk(1),Kj(!0)),Pf(Nh(c),gk(1),Kj(!1),Gl(100))),yh()),
!1),sd=Vi(Pf(Am(Pf(Ka,Kj(!0)),Pf(Ka,Kj(!1),Gl(200))),yh()),!1);Tg(Pf(Ci(Nh(c),Nh(Dc)),Hg(function(od){return od[0]<=od[1]}),yh()),fb);Tg(Pf(fb,hk(50)),bc);da=Yi(Pf(Ci(O,Nh(da),Nh(ra),Nh(Ea),Nh(tc)),zi(function(od,Gd){var Rd,id,qd=Gd[0],xd=qd.scrollTop;qd=qd.scrollHeight;var Sd=Gd[1],Id={viewportHeight:Sd,scrollTop:xd,scrollHeight:qd};return xd+Sd-qd>-Gd[4]?(xd>od.state.scrollTop?(Rd="SCROLLED_DOWN",id=od.state.scrollTop-xd):(Rd="SIZE_DECREASED",id=od.state.scrollTop-xd||od.scrollTopDelta),{atBottom:!0,
state:Id,atBottomBecause:Rd,scrollTopDelta:id}):{atBottom:!1,notAtBottomBecause:Id.scrollHeight>od.state.scrollHeight?"SIZE_INCREASED":Sd<od.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":xd<od.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Id}},OB),yh(function(od,Gd){return od&&od.atBottom===Gd.atBottom})));ra=Vi(Pf(O,zi(function(od,Gd){var Rd=Gd.scrollTop,id=Gd.scrollHeight;Gd=Gd.viewportHeight;return 1.01>Math.abs(od.scrollHeight-id)?{scrollTop:Rd,scrollHeight:id,
jump:0,changed:!1}:od.scrollTop!==Rd&&1>id-(Rd+Gd)?{scrollHeight:id,scrollTop:Rd,jump:od.scrollTop-Rd,changed:!0}:{scrollHeight:id,scrollTop:Rd,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ch(function(od){return od.changed}),Hg(function(od){return od.jump})),0);Tg(Pf(da,Hg(function(od){return od.atBottom})),n);Tg(Pf(n,hk(50)),ub);Ea=mg("down");Tg(Pf(O,Hg(function(od){return od.scrollTop}),yh(),zi(function(od,Gd){return sd(4)?{direction:od.direction,prevScrollTop:Gd}:{direction:Gd<
od.prevScrollTop?"up":"down",prevScrollTop:Gd}},{direction:"down",prevScrollTop:0}),Hg(function(od){return od.direction})),Ea);Tg(Pf(O,hk(50),Kj("none")),Ea);O=mg(0);return Tg(Pf($c,Ch(function(od){return!od}),Kj(0)),O),Tg(Pf(c,hk(100),Ah($c),Ch(function(od){return!!od[1]}),zi(function(od,Gd){return[od[1],Gd[0]]},[0,0]),Hg(function(od){return od[1]-od[0]})),O),{isScrolling:$c,isAtTop:fb,isAtBottom:n,atBottomState:da,atTopStateChange:bc,atBottomStateChange:ub,scrollDirection:Ea,atBottomThreshold:tc,
atTopThreshold:Dc,scrollVelocity:O,lastJumpDueToItemResize:ra}},ai(Lk)),xo=uh(function(c){var n=c[0].log;c=mg(!1);var O=Yi(Pf(c,Ch(function(da){return da}),yh()));return bi(c,function(da){da&&n(4)("props updated",{},dk.DEBUG)}),{propsReady:c,didMount:O}},ai(un),{singleton:!0}),Lt=uh(function(c){var n=c[0],O=n.sizes,da=n.listRefresh;n=n.defaultItemSize;var ra=c[1].scrollTop,Ea=c[2].scrollToIndex;c=c[3].didMount;var Ka=mg(!0),fb=mg(0);return Tg(Pf(c,Ah(fb),Ch(function(ub){return!!ub[1]}),Kj(!1)),Ka),
bi(Pf(Ci(da,c),Ah(Ka,O,n),Ch(function(ub){var bc=ub[1],tc=ub[3];return ub[0][1]&&(ub[2].sizeTree!==qi||void 0!==tc)&&!bc}),Ah(fb)),function(ub){var bc=ub[1];setTimeout(function(){kk(ra,function(){Ka(0,!0)});Ea(0,bc)})}),{scrolledToInitialItem:Ka,initialTopMostItemIndex:fb}},ai(Gm,Lk,Qq,xo),{singleton:!0}),PB=uh(function(c){function n(Gd){ub(0,{index:"LAST",align:"end",behavior:Gd})}function O(Gd){var Rd=kk(fb,function(id){!Gd||id.atBottom||"SIZE_INCREASED"!==id.notAtBottomBecause||od||(Dc(4)("scrolling to bottom due to increased size",
{},dk.DEBUG),n("auto"))});setTimeout(Rd,100)}var da=c[0],ra=da.totalCount,Ea=da.listRefresh,Ka=c[1];da=Ka.isAtBottom;var fb=Ka.atBottomState,ub=c[2].scrollToIndex;Ka=c[3].scrolledToInitialItem;var bc=c[4],tc=bc.propsReady;bc=bc.didMount;var Dc=c[5].log;c=c[6].scrollingInProgress;var $c=mg(!1),sd=ch(),od=null;return bi(Pf(Ci(Pf(Nh(ra),gk(1)),bc),Ah(Nh($c),da,Ka,c),Hg(function(Gd){var Rd=Gd[0],id=Rd[0];Rd=Rd[1]&&Gd[3];var qd="auto";Rd&&(qd=Gd[1],Gd=Gd[2]||Gd[4],qd="function"==typeof qd?Qn(qd(Gd)):Gd&&
Qn(qd),Rd=Rd&&!!qd);return{totalCount:id,shouldFollow:Rd,followOutputBehavior:qd}}),Ch(function(Gd){return Gd.shouldFollow})),function(Gd){var Rd=Gd.totalCount,id=Gd.followOutputBehavior;od&&(od(),od=null);od=kk(Ea,function(){Dc(4)("following output to ",{totalCount:Rd},dk.DEBUG);n(id);od=null})}),bi(Pf(Ci(Nh($c),ra,tc),Ch(function(Gd){return Gd[0]&&Gd[2]}),zi(function(Gd,Rd){Rd=Rd[1];return{refreshed:Gd.value===Rd,value:Rd}},{refreshed:!1,value:0}),Ch(function(Gd){return Gd.refreshed}),Ah($c,ra)),
function(Gd){O(!1!==Gd[1])}),bi(sd,function(){O(!1!==$c(4))}),bi(Ci(Nh($c),fb),function(Gd){var Rd=Gd[1];Gd[0]&&!Rd.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===Rd.notAtBottomBecause&&n("auto")}),{followOutput:$c,autoscrollToBottom:sd}},ai(Gm,Rq,Qq,Lt,xo,un,Lk)),zx=uh(function(c){var n=c[0],O=n.totalCount,da=n.groupIndices;n=n.sizes;var ra=c[1];c=ra.scrollTop;ra=ra.headerHeight;var Ea=ch(),Ka=ch(),fb=Yi(Pf(Ea,Hg(ll)));return Tg(Pf(fb,Hg(function(ub){return ub.totalCount})),O),Tg(Pf(fb,Hg(function(ub){return ub.groupIndices})),
da),Tg(Pf(Ci(c,n,ra),Ch(function(ub){return ub[1].groupOffsetTree!==qi}),Hg(function(ub){return Fd(ub[1].groupOffsetTree,Math.max(ub[0]-ub[2],0),"v")[0]}),yh(),Hg(function(ub){return[ub]})),Ka),{groupCounts:Ea,topItemsIndexes:Ka}},ai(Gm,Lk)),Mt=uh(function(c){var n=c[0];c=n.scrollTop;var O=n.viewportHeight,da=n.deviation,ra=n.headerHeight,Ea=n.fixedHeaderHeight;n=ch();var Ka=mg(0),fb=mg(0),ub=mg(0);c=Vi(Pf(Ci(Nh(c),Nh(O),Nh(ra),Nh(n,Pm),Nh(ub),Nh(Ka),Nh(Ea),Nh(da),Nh(fb)),Hg(function(bc){var tc=bc[0],
Dc=bc[1],$c=bc[2],sd=bc[3],od=sd[0];sd=sd[1];var Gd=bc[4],Rd=bc[6],id=bc[7],qd=bc[8],xd=tc-id;bc=bc[5]+Rd;var Sd=Math.max($c-xd,0),Id="none",Ve="number"==typeof qd?qd:qd.top||0;qd="number"==typeof qd?qd:qd.bottom||0;return od-=id,sd+=$c+Rd,od+($c+Rd)>tc+bc-Ve&&(Id="up"),sd-id<tc-Sd+Dc+qd&&(Id="down"),"none"!==Id?[Math.max(xd-$c-Rn(Gd,"top",Id)-Ve,0),xd-Sd-Rd+Dc+Rn(Gd,"bottom",Id)+qd]:null}),Ch(function(bc){return null!=bc}),yh(Pm)),[0,0]);return{listBoundary:n,overscan:ub,topListHeight:Ka,increaseViewportBy:fb,
visibleRange:c}},ai(Lk),{singleton:!0}),Ax={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},yp=uh(function(c){var n=c[0],O=n.sizes,da=n.totalCount,ra=n.data,Ea=n.firstItemIndex,Ka=n.gap,fb=c[1],ub=c[2],bc=ub.visibleRange;n=ub.listBoundary;ub=ub.topListHeight;var tc=c[3],Dc=tc.scrolledToInitialItem,$c=tc.initialTopMostItemIndex;tc=c[4].topListHeight;var sd=c[5],od=c[6].didMount,Gd=c[7].recalcInProgress;c=mg([]);var Rd=ch();Tg(fb.topItemsIndexes,
c);O=Vi(Pf(Ci(od,Gd,Nh(bc,Pm),Nh(da),Nh(O),Nh($c),Dc,Nh(c),Nh(Ea),Nh(Ka),ra),Ch(function(id){return id[0]&&!id[1]}),Hg(function(id){var qd=id[2],xd=qd[0],Sd=qd[1];qd=id[3];var Id=id[5],Ve=id[6],We=id[7],ig=id[8],kf=id[9],Vf=id[10];id=id[4];var Lg=id.sizeTree,dh=id.offsetTree;if(0===qd||0===xd&&0===Sd)return Ha({},Ax,{totalCount:qd});if(Lg===qi)return Lo(function(ii,Zg,Ki){return Zg.groupOffsetTree!==qi?(ii=Di(ii,Zg),[{index:Fd(Zg.groupOffsetTree,ii)[0],size:0,offset:0},{index:ii,size:0,offset:0,data:Ki&&
Ki[0]}]):[{index:ii,size:0,offset:0,data:Ki&&Ki[0]}]}("number"==typeof Id?Id:"LAST"===Id.index?qd-1:Id.index,id,Vf),[],qd,kf,id,ig);Id=[];if(0<We.length){var Ig,eh=We[0],Df=We[We.length-1],Kf=0;for(Lg=Xb(Xg(Lg,eh,Df));!(Ig=Lg()).done;){var Af=Ig.value;Ig=Af.value;var ag=Math.min(Af.end,Df);for(Af=Math.max(Af.start,eh);Af<=ag;Af++)Id.push({index:Af,size:Ig,offset:Kf,data:Vf&&Vf[Af]}),Kf+=Ig}}if(!Ve)return Lo([],Id,qd,kf,id,ig);var fh=0<We.length?We[We.length-1]+1:0,Ih=function(ii,Zg,Ki,Oi){return void 0===
Oi&&(Oi=0),0<Oi&&(Zg=Math.max(Zg,ii[ph(ii,Oi,If)].offset)),Fg((Pk=Ki,tu=ph(cj=ii,Zg,zn=si),uu=ph(cj,Pk,zn,tu),cj.slice(tu,uu+1)),Eh);var cj,Pk,zn,tu,uu}(dh,xd,Sd,fh);if(0===Ih.length)return null;var Wi=qd-1;return Lo(bj([],function(ii){for(var Zg,Ki=Xb(Ih);!(Zg=Ki()).done;){var Oi=Zg.value,cj=Oi.value;Zg=cj.offset;var Pk=Oi.start,zn=cj.size;cj.offset<xd&&(cj=(Pk+=Math.floor((xd-cj.offset+kf)/(zn+kf)))-Oi.start,Zg+=cj*zn+cj*kf);Pk<fh&&(Zg+=(fh-Pk)*zn,Pk=fh);for(Oi=Math.min(Oi.end,Wi);Pk<=Oi&&!(Zg>=
Sd);Pk++)ii.push({index:Pk,size:zn,offset:Zg,data:Vf&&Vf[Pk]}),Zg+=zn+kf}}),Id,qd,kf,id,ig)}),Ch(function(id){return null!==id}),yh()),Ax);return Tg(Pf(ra,Ch(function(id){return void 0!==id}),Hg(function(id){return id.length})),da),Tg(Pf(O,Hg(function(id){return id.topListHeight})),tc),Tg(tc,ub),Tg(Pf(O,Hg(function(id){return[id.top,id.bottom]})),n),Tg(Pf(O,Hg(function(id){return id.items})),Rd),Ha({listState:O,topItemsIndexes:c,endReached:Yi(Pf(O,Ch(function(id){return 0<id.items.length}),Ah(da,
ra),Ch(function(id){var qd=id[0].items;return qd[qd.length-1].originalIndex===id[1]-1}),Hg(function(id){return[id[1]-1,id[2]]}),yh(Pm),Hg(function(id){return id[0]}))),startReached:Yi(Pf(O,hk(200),Ch(function(id){var qd=id.items;return 0<qd.length&&qd[0].originalIndex===id.topItems.length}),Hg(function(id){return id.items[0].index}),yh())),rangeChanged:Yi(Pf(O,Ch(function(id){return 0<id.items.length}),Hg(function(id){id=id.items;for(var qd=0,xd=id.length-1;"group"===id[qd].type&&qd<xd;)qd++;for(;"group"===
id[xd].type&&xd>qd;)xd--;return{startIndex:id[qd].index,endIndex:id[xd].index}}),yh(Fk))),itemsRendered:Rd},sd)},ai(Gm,zx,Mt,Lt,Qq,Rq,xo,Kt),{singleton:!0}),QB=uh(function(c){var n=c[0],O=n.sizes,da=n.firstItemIndex,ra=n.data;n=n.gap;var Ea=c[1].listState;c=c[2].didMount;var Ka=mg(0);return Tg(Pf(c,Ah(Ka),Ch(function(fb){return 0!==fb[1]}),Ah(O,da,n,ra),Hg(function(fb){var ub=fb[0][1],bc=fb[1],tc=fb[2],Dc=fb[3];fb=fb[4];var $c=void 0===fb?[]:fb;fb=0;if(0<bc.groupIndices.length)for(var sd,od=Xb(bc.groupIndices);!((sd=
od()).done||sd.value-fb>=ub);)fb++;ub+=fb;return Lo(Array.from({length:ub}).map(function(Gd,Rd){return{index:Rd,size:0,offset:0,data:$c[Rd]}}),[],ub,Dc,bc,tc)})),Ea),{initialItemCount:Ka}},ai(Gm,yp,xo),{singleton:!0}),Bx=uh(function(c){c=c[0].scrollVelocity;var n=mg(!1),O=ch(),da=mg(!1);return Tg(Pf(c,Ah(da,n,O),Ch(function(ra){return!!ra[1]}),Hg(function(ra){var Ea=ra[0],Ka=ra[1],fb=ra[2];ra=ra[3];var ub=Ka.enter;if(fb){if((0,Ka.exit)(Ea,ra))return!1}else if(ub(Ea,ra))return!0;return fb}),yh()),
n),bi(Pf(Ci(n,c,O),Ah(da)),function(ra){var Ea=ra[0];ra=ra[1];return Ea[0]&&ra&&ra.change&&ra.change(Ea[1],Ea[2])}),{isSeeking:n,scrollSeekConfiguration:da,scrollVelocity:c,scrollSeekRangeChanged:O}},ai(Rq),{singleton:!0}),RB=uh(function(c){c=c[0].topItemsIndexes;var n=mg(0);return Tg(Pf(n,Ch(function(O){return 0<O}),Hg(function(O){return Array.from({length:O}).map(function(da,ra){return ra})})),c),{topItemCount:n}},ai(yp)),Nt=uh(function(c){var n=c[0],O=n.footerHeight,da=n.headerHeight,ra=n.fixedHeaderHeight;
n=n.fixedFooterHeight;var Ea=c[1].listState;c=ch();O=Vi(Pf(Ci(O,n,da,ra,Ea),Hg(function(Ka){var fb=Ka[4];return Ka[0]+Ka[1]+Ka[2]+Ka[3]+fb.offsetBottom+fb.bottom})),0);return Tg(Nh(O),c),{totalListHeight:O,totalListHeightChanged:c}},ai(Lk,yp),{singleton:!0}),SB=Qm(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),TB=uh(function(c){function n(Rd){0<Rd?(da(0,{top:-Rd,behavior:"auto"}),Ea(0,0)):(Ea(0,0),da(0,{top:-Rd,behavior:"auto"}))}var O=c[0],da=O.scrollBy,ra=
O.scrollTop,Ea=O.deviation,Ka=O.scrollingInProgress,fb=c[1];O=fb.isScrolling;var ub=fb.isAtBottom,bc=fb.scrollDirection,tc=c[3],Dc=tc.beforeUnshiftWith,$c=tc.shiftWithOffset,sd=tc.sizes;tc=tc.gap;var od=c[4].log,Gd=c[5].recalcInProgress;c=Yi(Pf(c[2].listState,Ah(fb.lastJumpDueToItemResize),zi(function(Rd,id){var qd=Rd[1],xd=id[0],Sd=xd.items,Id=xd.totalCount;xd=xd.bottom+xd.offsetBottom;var Ve=0;return Rd[2]===Id&&0<qd.length&&0<Sd.length&&(0===Sd[0].originalIndex&&0===qd[0].originalIndex||0!=(Ve=
xd-Rd[3])&&(Ve+=id[1])),[Ve,Sd,Id,xd]},[0,[],0,0]),Ch(function(Rd){return 0!==Rd[0]}),Ah(ra,bc,Ka,ub,od),Ch(function(Rd){return!Rd[3]&&0!==Rd[1]&&"up"===Rd[2]}),Hg(function(Rd){var id=Rd[0][0];return(0,Rd[5])("Upward scrolling compensation",{amount:id},dk.DEBUG),id})));return bi(Pf(c,Ah(Ea,O)),function(Rd){var id=Rd[0],qd=Rd[1];Rd[2]&&SB()?Ea(0,qd-id):n(-id)}),bi(Pf(Ci(Vi(O,!1),Ea,Gd),Ch(function(Rd){return!Rd[0]&&!Rd[2]&&0!==Rd[1]}),Hg(function(Rd){return Rd[1]}),hk(1)),n),Tg(Pf($c,Hg(function(Rd){return{top:-Rd}})),
da),bi(Pf(Dc,Ah(sd,tc),Hg(function(Rd){var id=Rd[0];return id*Rd[1].lastSize+id*Rd[2]})),function(Rd){Ea(0,Rd);requestAnimationFrame(function(){Ik(da,{top:Rd});requestAnimationFrame(function(){Ea(0,0);Gd(0,!1)})})}),{deviation:Ea}},ai(Lk,Rq,yp,Gm,un,Kt)),UB=uh(function(c){var n=c[0].totalListHeight,O=c[1].didMount,da=c[2].scrollTo;c=mg(0);return bi(Pf(O,Ah(c),Ch(function(ra){return 0!==ra[1]}),Hg(function(ra){return{top:ra[1]}})),function(ra){kk(Pf(n,Ch(function(Ea){return 0!==Ea})),function(){setTimeout(function(){da(0,
ra)})})}),{initialScrollTop:c}},ai(Nt,xo,Lk),{singleton:!0}),VB=uh(function(c){var n=c[0].viewportHeight;c=c[1].totalListHeight;var O=mg(!1);return{alignToBottom:O,paddingTopAddition:Vi(Pf(Ci(O,n,c),Ch(function(da){return da[0]}),Hg(function(da){return Math.max(0,da[1]-da[2])}),yh()),0)}},ai(Lk,Nt),{singleton:!0}),Cx=uh(function(c){var n=c[0];c=n.scrollTo;n=n.scrollContainerState;var O=ch(),da=ch(),ra=ch(),Ea=mg(!1),Ka=mg(void 0);return Tg(Pf(Ci(O,da),Hg(function(fb){var ub=fb[0];return{scrollTop:Math.max(0,
ub.scrollTop-fb[1].offsetTop),scrollHeight:ub.scrollHeight,viewportHeight:ub.viewportHeight}})),n),Tg(Pf(c,Ah(da),Hg(function(fb){var ub=fb[0];return Ha({},ub,{top:ub.top+fb[1].offsetTop})})),ra),{useWindowScroll:Ea,customScrollParent:Ka,windowScrollContainerState:O,windowViewportRect:da,windowScrollTo:ra}},ai(Lk)),WB=["done","behavior","align"],XB=uh(function(c){var n=c[0],O=n.sizes,da=n.totalCount;n=n.gap;var ra=c[1],Ea=ra.scrollTop,Ka=ra.viewportHeight,fb=ra.headerHeight,ub=ra.fixedHeaderHeight,
bc=ra.fixedFooterHeight,tc=ra.scrollingInProgress;c=c[2].scrollToIndex;ra=ch();return Tg(Pf(ra,Ah(O,Ka,da,fb,ub,bc,Ea),Ah(n),Hg(function(Dc){var $c=Dc[0],sd=$c[0],od=$c[1],Gd=$c[2],Rd=$c[3],id=$c[4],qd=$c[5],xd=$c[6];$c=$c[7];var Sd=Dc[1];Dc=sd.done;var Id=sd.behavior,Ve=sd.align,We=Kc(sd,WB),ig=null;sd=Jh(sd,od,Rd-1);id=$i(sd,od.offsetTree,Sd)+id+qd;return id<$c+qd?ig=Ha({},We,{behavior:Id,align:null!=Ve?Ve:"start"}):id+Fd(od.sizeTree,sd)[1]>$c+Gd-xd&&(ig=Ha({},We,{behavior:Id,align:null!=Ve?Ve:
"end"})),ig?Dc&&kk(Pf(tc,gk(1),Ch(function(kf){return!1===kf})),Dc):Dc&&Dc(),ig}),Ch(function(Dc){return null!==Dc})),c),{scrollIntoView:ra}},ai(Gm,Lk,Qq,yp,un),{singleton:!0}),YB=["listState","topItemsIndexes"],ZB=uh(function(c){return Ha({},c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},ai(Mt,QB,xo,Bx,Nt,UB,VB,Cx,XB)),Dx=uh(function(c){var n=c[0],O=n.totalCount,da=n.sizeRanges,ra=n.fixedItemSize,Ea=n.defaultItemSize,Ka=n.trackItemSizes,fb=n.itemSize,ub=n.data,bc=n.firstItemIndex,tc=n.groupIndices,
Dc=n.statefulTotalCount;n=n.gap;var $c=c[1],sd=$c.initialTopMostItemIndex;$c=$c.scrolledToInitialItem;var od=c[2],Gd=c[3],Rd=c[4],id=Rd.listState,qd=Rd.topItemsIndexes;Rd=Kc(Rd,YB);var xd=c[5].scrollToIndex,Sd=c[7].topItemCount,Id=c[8].groupCounts,Ve=c[9];c=c[10];return Tg(Rd.rangeChanged,Ve.scrollSeekRangeChanged),Tg(Pf(Ve.windowViewportRect,Hg(function(We){return We.visibleHeight})),od.viewportHeight),Ha({totalCount:O,data:ub,firstItemIndex:bc,sizeRanges:da,initialTopMostItemIndex:sd,scrolledToInitialItem:$c,
topItemsIndexes:qd,topItemCount:Sd,groupCounts:Id,fixedItemHeight:ra,defaultItemHeight:Ea,gap:n},Gd,{statefulTotalCount:Dc,listState:id,scrollToIndex:xd,trackItemSizes:Ka,itemSize:fb,groupIndices:tc},Rd,Ve,od,c)},ai(Gm,Lt,Lk,PB,yp,Qq,TB,RB,zx,ZB,un)),Ex=Qm(function(){if("undefined"==typeof document)return"sticky";var c=document.createElement("div");return c.style.position="-webkit-sticky","-webkit-sticky"===c.style.position?"-webkit-sticky":"sticky"}),Yr=vh.createContext(void 0),Fx=vh.createContext(void 0),
$B=["placeholder"],aC=["style","children"],bC=["style","children"],cC=uh(function(){var c=mg(function(ub){return"Item "+ub}),n=mg(null),O=mg(function(ub){return"Group "+ub}),da=mg({}),ra=mg(um),Ea=mg("div"),Ka=mg(Ji),fb=function(ub,bc){return void 0===bc&&(bc=null),Vi(Pf(da,Hg(function(tc){return tc[ub]}),yh()),bc)};return{context:n,itemContent:c,groupContent:O,components:da,computeItemKey:ra,headerFooterTag:Ea,scrollerRef:Ka,FooterComponent:fb("Footer"),HeaderComponent:fb("Header"),TopItemListComponent:fb("TopItemList"),
ListComponent:fb("List","div"),ItemComponent:fb("Item","div"),GroupComponent:fb("Group","div"),ScrollerComponent:fb("Scroller","div"),EmptyPlaceholder:fb("EmptyPlaceholder"),ScrollSeekPlaceholder:fb("ScrollSeekPlaceholder")}}),dC=uh(function(c){function n(ra,Ea,Ka){Tg(Pf(ra,Ah(da.components),Hg(function(fb){var ub,bc=fb[0];fb=fb[1];return console.warn("react-virtuoso: "+Ka+" property is deprecated. Pass components."+Ea+" instead."),Ha({},fb,((ub={})[Ea]=bc,ub))})),da.components)}var O=c[0],da=c[1];
c={item:Uj(da.itemContent,"Rename the %citem%c prop to %citemContent."),group:Uj(da.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Uj(O.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Uj(O.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Uj(O.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:ch(),maxHeightCacheSize:ch(),footer:ch(),header:ch(),HeaderContainer:ch(),
FooterContainer:ch(),ItemContainer:ch(),ScrollContainer:ch(),GroupContainer:ch(),ListContainer:ch(),emptyComponent:ch(),scrollSeek:ch()};return bi(c.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),bi(c.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
bi(c.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),bi(c.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),bi(c.scrollSeek,function(ra){var Ea=ra.placeholder;
ra=Kc(ra,$B);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");Ea=Ha({},(0,da.components)(4),{ScrollSeekPlaceholder:Ea});(0,da.components)(0,Ea);(0,O.scrollSeekConfiguration)(0,ra)}),n(c.footer,"Footer","footer"),n(c.header,"Header","header"),n(c.ItemContainer,"Item","ItemContainer"),n(c.ListContainer,"List","ListContainer"),n(c.ScrollContainer,"Scroller","ScrollContainer"),n(c.emptyComponent,
"EmptyPlaceholder","emptyComponent"),n(c.GroupContainer,"Group","GroupContainer"),Ha({},O,da,c)},ai(Dx,cC)),eC=function(c){return vh.createElement("div",{style:{height:c.height}})},fC={position:Ex(),zIndex:1,overflowAnchor:"none"},gC={overflowAnchor:"none"},Gx=vh.memo(function(c){c=c.showTopList;c=void 0!==c&&c;var n=Bi("listState"),O=Al("sizeRanges"),da=Bi("useWindowScroll"),ra=Bi("customScrollParent"),Ea=Al("windowScrollContainerState"),Ka=Al("scrollContainerState");da=ra||da?Ea:Ka;var fb=Bi("itemContent"),
ub=Bi("context"),bc=Bi("groupContent");Ea=Bi("trackItemSizes");Ka=Bi("itemSize");var tc=Bi("log"),Dc=Al("gap");O=$b(O,Ka,Ea,c?Ji:da,tc,Dc,ra).callbackRef;ra=vh.useState(0);var $c=ra[0],sd=ra[1];Ot("deviation",function(Sd){$c!==Sd&&sd(Sd)});ra=Bi("EmptyPlaceholder");var od=Bi("ScrollSeekPlaceholder")||eC;da=Bi("ListComponent");var Gd=Bi("ItemComponent"),Rd=Bi("GroupComponent"),id=Bi("computeItemKey"),qd=Bi("isSeeking"),xd=0<Bi("groupIndices").length;Ea=Bi("paddingTopAddition");Ea=c?{}:{boxSizing:"border-box",
paddingTop:n.offsetTop+Ea,paddingBottom:n.offsetBottom,marginTop:$c};return!c&&0===n.totalCount&&ra?(0,Uh.createElement)(ra,uj(ra,ub)):(0,Uh.createElement)(da,Ha({},uj(da,ub),{ref:O,style:Ea,"data-test-id":c?"virtuoso-top-item-list":"virtuoso-item-list"}),(c?n.topItems:n.items).map(function(Sd){var Id=Sd.originalIndex,Ve=id(Id+n.firstItemIndex,Sd.data,ub);return qd?(0,Uh.createElement)(od,Ha({},uj(od,ub),{key:Ve,index:Sd.index,height:Sd.size,type:Sd.type||"item"},"group"===Sd.type?{}:{groupIndex:Sd.groupIndex})):
"group"===Sd.type?(0,Uh.createElement)(Rd,Ha({},uj(Rd,ub),{key:Ve,"data-index":Id,"data-known-size":Sd.size,"data-item-index":Sd.index,style:fC}),bc(Sd.index)):(0,Uh.createElement)(Gd,Ha({},uj(Gd,ub),{key:Ve,"data-index":Id,"data-known-size":Sd.size,"data-item-index":Sd.index,"data-item-group-index":Sd.groupIndex,style:gC}),xd?fb(Sd.index,Sd.groupIndex,Sd.data,ub):fb(Sd.index,Sd.data,ub))}))}),hC={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},zp=
{width:"100%",height:"100%",position:"absolute",top:0},iC={width:"100%",position:Ex(),top:0},jC=vh.memo(function(){var c=Bi("HeaderComponent"),n=Al("headerHeight"),O=Bi("headerFooterTag"),da=rc(function(Ea){return n(Vb(Ea,"height"))}),ra=Bi("context");return c?(0,Uh.createElement)(O,{ref:da},(0,Uh.createElement)(c,uj(c,ra))):null}),kC=vh.memo(function(){var c=Bi("FooterComponent"),n=Al("footerHeight"),O=Bi("headerFooterTag"),da=rc(function(Ea){return n(Vb(Ea,"height"))}),ra=Bi("context");return c?
(0,Uh.createElement)(O,{ref:da},(0,Uh.createElement)(c,uj(c,ra))):null}),lC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),O=Al("viewportHeight"),da=Al("fixedItemHeight"),ra=rc($h(O,function(Ea){return Vb(Ea,"height")}));return vh.useEffect(function(){n&&(O(n.viewportHeight),da(n.itemHeight))},[n,O,da]),vh.createElement("div",{style:zp,ref:ra,"data-viewport-type":"element"},c)},mC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),O=Al("windowViewportRect"),da=Al("fixedItemHeight"),ra=Bi("customScrollParent");
ra=Rm(O,ra);return vh.useEffect(function(){n&&(da(n.itemHeight),O({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},[n,O,da]),vh.createElement("div",{ref:ra,style:zp,"data-viewport-type":"window"},c)},nC=function(c){c=c.children;var n=Bi("TopItemListComponent"),O=Bi("headerHeight");O=Ha({},iC,{marginTop:O+"px"});var da=Bi("context");return(0,Uh.createElement)(n||"div",{style:O,context:da},c)},Zr=vc(dC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},vh.memo(function(c){var n=Bi("useWindowScroll"),O=0<Bi("topItemsIndexes").length,da=Bi("customScrollParent"),ra=da||n?mC:lC;return vh.createElement(da||n?qC:pC,Ha({},c),vh.createElement(ra,null,vh.createElement(jC,null),vh.createElement(Gx,null),vh.createElement(kC,
null)),O&&vh.createElement(nC,null,vh.createElement(Gx,{showTopList:!0})))})),oC=Zr.Component,Al=Zr.usePublisher,Bi=Zr.useEmitterValue,Ot=Zr.useEmitter,pC=vq({usePublisher:Al,useEmitterValue:Bi,useEmitter:Ot}),qC=fm({usePublisher:Al,useEmitterValue:Bi,useEmitter:Ot}),Hx={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},rC={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Ix=Math.round,Jx=Math.ceil,$r=Math.floor,Pt=Math.min,Ap=Math.max,
sC=uh(function(c){var n=c[0],O=n.overscan,da=n.visibleRange,ra=n.listBoundary,Ea=c[1];n=Ea.scrollTop;var Ka=Ea.viewportHeight,fb=Ea.scrollBy,ub=Ea.scrollTo,bc=Ea.smoothScrollTargetReached,tc=Ea.scrollContainerState,Dc=Ea.footerHeight;Ea=Ea.headerHeight;var $c=c[2],sd=c[3],od=c[4],Gd=od.propsReady,Rd=od.didMount,id=c[5];od=id.windowViewportRect;var qd=id.windowScrollTo,xd=id.useWindowScroll,Sd=id.customScrollParent;id=id.windowScrollContainerState;c=c[6];var Id=mg(0),Ve=mg(0),We=mg(Hx),ig=mg({height:0,
width:0}),kf=mg({height:0,width:0}),Vf=ch(),Lg=ch(),dh=mg(0),Ig=mg(void 0),eh=mg({row:0,column:0});Tg(Pf(Ci(Rd,Ve,Ig),Ch(function(Df){return 0!==Df[1]}),Hg(function(Df){return{items:$o(0,Df[1]-1,Df[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),We);Tg(Pf(Ci(Nh(Id),da,Nh(eh,qq),Nh(kf,function(Df,Kf){return Df&&Df.width===Kf.width&&Df.height===Kf.height}),Ig),Ah(ig),Hg(function(Df){var Kf=Df[0],Af=Kf[0],ag=Kf[1],fh=ag[0],Ih=ag[1],Wi=Kf[2],ii=Kf[3],Zg=Kf[4],Ki=Df[1];Df=Wi.row;
var Oi=Wi.column;Kf=ii.height;ag=ii.width;var cj=Ki.width;if(0===Af||0===cj)return Hx;if(0===ag)return Ha({},rC,{items:$o(0,0,Zg)});Oi=Ap(1,$r((cj+Oi)/(ag+Oi)));fh=Oi*$r((fh+Df)/(Kf+Df));Ih=Oi*Jx((Ih+Df)/(Kf+Df))-1;Ih=Pt(Af-1,Ap(Ih,Oi-1));fh=$o(Pt(Ih,Ap(0,fh)),Ih,Zg);ii=em(Ki,Wi,ii,fh);Wi=ii.top;ii=ii.bottom;Af=Jx(Af/Oi);return{items:fh,offsetTop:Wi,offsetBottom:Af*Kf+(Af-1)*Df-ii,top:Wi,bottom:ii,itemHeight:Kf,itemWidth:ag}})),We);Tg(Pf(Ig,Ch(function(Df){return void 0!==Df}),Hg(function(Df){return Df.length})),
Id);Tg(Pf(ig,Hg(function(Df){return Df.height})),Ka);Tg(Pf(Ci(ig,kf,We,eh),Hg(function(Df){Df=em(Df[0],Df[3],Df[1],Df[2].items);return[Df.top,Df.bottom]}),yh(Pm)),ra);da=Yi(Pf(Nh(We),Ch(function(Df){return 0<Df.items.length}),Ah(Id),Ch(function(Df){var Kf=Df[0].items;return Kf[Kf.length-1].index===Df[1]-1}),Hg(function(Df){return Df[1]-1}),yh()));ra=Yi(Pf(Nh(We),Ch(function(Df){Df=Df.items;return 0<Df.length&&0===Df[0].index}),Kj(0),yh()));Ka=Yi(Pf(Nh(We),Ch(function(Df){return 0<Df.items.length}),
Hg(function(Df){Df=Df.items;return{startIndex:Df[0].index,endIndex:Df[Df.length-1].index}}),yh(Fk)));Tg(Ka,sd.scrollSeekRangeChanged);Tg(Pf(Vf,Ah(ig,kf,Id,eh),Hg(function(Df){var Kf=Df[1],Af=Df[2],ag=Df[3],fh=Df[4],Ih=qj(Df[0]);Df=Ih.align;var Wi=Ih.behavior,ii=Ih.offset;Ih=Ih.index;"LAST"===Ih&&(Ih=ag-1);ag=ym(Kf,fh,Af,Ap(0,Ih,Pt(ag-1,Ih)));return"end"===Df?ag=Ix(ag-Kf.height+Af.height):"center"===Df&&(ag=Ix(ag-Kf.height/2+Af.height/2)),ii&&(ag+=ii),{top:ag,behavior:Wi}})),ub);Rd=Vi(Pf(We,Hg(function(Df){return Df.offsetBottom+
Df.bottom})),0);return Tg(Pf(od,Hg(function(Df){return{width:Df.visibleWidth,height:Df.visibleHeight}})),ig),Ha({data:Ig,totalCount:Id,viewportDimensions:ig,itemDimensions:kf,scrollTop:n,scrollHeight:Lg,overscan:O,scrollBy:fb,scrollTo:ub,scrollToIndex:Vf,smoothScrollTargetReached:bc,windowViewportRect:od,windowScrollTo:qd,useWindowScroll:xd,customScrollParent:Sd,windowScrollContainerState:id,deviation:dh,scrollContainerState:tc,footerHeight:Dc,headerHeight:Ea,initialItemCount:Ve,gap:eh},sd,{gridState:We,
totalListHeight:Rd},$c,{startReached:ra,endReached:da,rangeChanged:Ka,propsReady:Gd},c)},ai(Mt,Lk,Rq,Bx,xo,Cx,un)),tC=["placeholder"],uC=uh(function(){var c=mg(function(bc){return"Item "+bc}),n=mg({}),O=mg(null),da=mg("virtuoso-grid-item"),ra=mg("virtuoso-grid-list"),Ea=mg(um),Ka=mg("div"),fb=mg(Ji),ub=function(bc,tc){return void 0===tc&&(tc=null),Vi(Pf(n,Hg(function(Dc){return Dc[bc]}),yh()),tc)};return{context:O,itemContent:c,components:n,computeItemKey:Ea,itemClassName:da,listClassName:ra,headerFooterTag:Ka,
scrollerRef:fb,FooterComponent:ub("Footer"),HeaderComponent:ub("Header"),ListComponent:ub("List","div"),ItemComponent:ub("Item","div"),ScrollerComponent:ub("Scroller","div"),ScrollSeekPlaceholder:ub("ScrollSeekPlaceholder","div")}}),vC=uh(function(c){function n(ra,Ea,Ka){Tg(Pf(ra,Ah(da.components),Hg(function(fb){var ub,bc=fb[0];fb=fb[1];return console.warn("react-virtuoso: "+Ka+" property is deprecated. Pass components."+Ea+" instead."),Ha({},fb,((ub={})[Ea]=bc,ub))})),da.components)}var O=c[0],
da=c[1];c={item:Uj(da.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:ch(),ScrollContainer:ch(),ListContainer:ch(),emptyComponent:ch(),scrollSeek:ch()};return bi(c.scrollSeek,function(ra){var Ea=ra.placeholder;ra=Kc(ra,tC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");Ea=Ha({},(0,da.components)(4),{ScrollSeekPlaceholder:Ea});(0,da.components)(0,Ea);(0,O.scrollSeekConfiguration)(0,
ra)}),n(c.ItemContainer,"Item","ItemContainer"),n(c.ListContainer,"List","ListContainer"),n(c.ScrollContainer,"Scroller","ScrollContainer"),Ha({},O,da,c)},ai(sC,uC)),wC=vh.memo(function(){var c=Fj("gridState"),n=Fj("listClassName"),O=Fj("itemClassName"),da=Fj("itemContent"),ra=Fj("computeItemKey"),Ea=Fj("isSeeking"),Ka=Ml("scrollHeight"),fb=Fj("ItemComponent"),ub=Fj("ListComponent"),bc=Fj("ScrollSeekPlaceholder"),tc=Fj("context"),Dc=Ml("itemDimensions"),$c=Ml("gap"),sd=Fj("log"),od=rc(function(Gd){Ka(Gd.parentElement.parentElement.scrollHeight);
var Rd=Gd.firstChild;Rd&&Dc(Rd.getBoundingClientRect());$c({row:Um("row-gap",getComputedStyle(Gd).rowGap,sd),column:Um("column-gap",getComputedStyle(Gd).columnGap,sd)})});return(0,Uh.createElement)(ub,Ha({ref:od,className:n},uj(ub,tc),{style:{paddingTop:c.offsetTop,paddingBottom:c.offsetBottom}}),c.items.map(function(Gd){var Rd=ra(Gd.index,Gd.data,tc);return Ea?(0,Uh.createElement)(bc,Ha({key:Rd},uj(bc,tc),{index:Gd.index,height:c.itemHeight,width:c.itemWidth})):(0,Uh.createElement)(fb,Ha({},uj(fb,
tc),{className:O,"data-index":Gd.index,key:Rd}),da(Gd.index,Gd.data,tc))}))}),xC=vh.memo(function(){var c=Fj("HeaderComponent"),n=Ml("headerHeight"),O=Fj("headerFooterTag"),da=rc(function(Ea){return n(Vb(Ea,"height"))}),ra=Fj("context");return c?(0,Uh.createElement)(O,{ref:da},(0,Uh.createElement)(c,uj(c,ra))):null}),yC=vh.memo(function(){var c=Fj("FooterComponent"),n=Ml("footerHeight"),O=Fj("headerFooterTag"),da=rc(function(Ea){return n(Vb(Ea,"height"))}),ra=Fj("context");return c?(0,Uh.createElement)(O,
{ref:da},(0,Uh.createElement)(c,uj(c,ra))):null}),zC=function(c){c=c.children;var n=(0,Uh.useContext)(Fx),O=Ml("itemDimensions"),da=Ml("viewportDimensions"),ra=rc(function(Ea){da(Ea.getBoundingClientRect())});return vh.useEffect(function(){n&&(da({height:n.viewportHeight,width:n.viewportWidth}),O({height:n.itemHeight,width:n.itemWidth}))},[n,da,O]),vh.createElement("div",{style:zp,ref:ra},c)},AC=function(c){c=c.children;var n=(0,Uh.useContext)(Fx),O=Ml("windowViewportRect"),da=Ml("itemDimensions"),
ra=Fj("customScrollParent");ra=Rm(O,ra);return vh.useEffect(function(){n&&(da({height:n.itemHeight,width:n.itemWidth}),O({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:n.viewportWidth}))},[n,O,da]),vh.createElement("div",{ref:ra,style:zp},c)},Qt=vc(vC,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",
atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},vh.memo(function(c){c=Ha({},c);var n=Fj("useWindowScroll"),O=Fj("customScrollParent"),da=O||n?AC:zC;return vh.createElement(O||n?CC:BC,Ha({},c),vh.createElement(da,null,vh.createElement(xC,null),vh.createElement(wC,null),vh.createElement(yC,null)))})),Ml=Qt.usePublisher,Fj=Qt.useEmitterValue,Kx=Qt.useEmitter,BC=vq({usePublisher:Ml,useEmitterValue:Fj,useEmitter:Kx}),CC=fm({usePublisher:Ml,useEmitterValue:Fj,useEmitter:Kx}),
DC=uh(function(){var c=mg(function(ub){return vh.createElement("td",null,"Item $",ub)}),n=mg(null),O=mg(null),da=mg(null),ra=mg({}),Ea=mg(um),Ka=mg(Ji),fb=function(ub,bc){return void 0===bc&&(bc=null),Vi(Pf(ra,Hg(function(tc){return tc[ub]}),yh()),bc)};return{context:n,itemContent:c,fixedHeaderContent:O,fixedFooterContent:da,components:ra,computeItemKey:Ea,scrollerRef:Ka,TableComponent:fb("Table","table"),TableHeadComponent:fb("TableHead","thead"),TableFooterComponent:fb("TableFoot","tfoot"),TableBodyComponent:fb("TableBody",
"tbody"),TableRowComponent:fb("TableRow","tr"),ScrollerComponent:fb("Scroller","div"),EmptyPlaceholder:fb("EmptyPlaceholder"),ScrollSeekPlaceholder:fb("ScrollSeekPlaceholder"),FillerRow:fb("FillerRow")}}),EC=uh(function(c){return Ha({},c[0],c[1])},ai(Dx,DC)),FC=function(c){return vh.createElement("tr",null,vh.createElement("td",{style:{height:c.height}}))},GC=function(c){return vh.createElement("tr",null,vh.createElement("td",{style:{height:c.height,padding:0,border:0}}))},HC=vh.memo(function(){var c=
Ni("listState"),n=Nl("sizeRanges"),O=Ni("useWindowScroll"),da=Ni("customScrollParent"),ra=Nl("windowScrollContainerState"),Ea=Nl("scrollContainerState");O=da||O?ra:Ea;var Ka=Ni("itemContent");ra=Ni("trackItemSizes");da=$b(n,Ni("itemSize"),ra,O,Ni("log"),void 0,da);n=da.callbackRef;var fb=da.ref;da=vh.useState(0);var ub=da[0],bc=da[1];St("deviation",function(id){ub!==id&&(fb.current.style.marginTop=id+"px",bc(id))});ra=Ni("EmptyPlaceholder");var tc=Ni("ScrollSeekPlaceholder")||FC;O=Ni("FillerRow")||
GC;da=Ni("TableBodyComponent");var Dc=Ni("TableRowComponent"),$c=Ni("computeItemKey"),sd=Ni("isSeeking");Ea=Ni("paddingTopAddition");var od=Ni("firstItemIndex"),Gd=Ni("statefulTotalCount"),Rd=Ni("context");if(0===Gd&&ra)return(0,Uh.createElement)(ra,uj(ra,Rd));ra=c.offsetTop+Ea+ub;Ea=c.offsetBottom;ra=0<ra?vh.createElement(O,{height:ra,key:"padding-top"}):null;O=0<Ea?vh.createElement(O,{height:Ea,key:"padding-bottom"}):null;c=c.items.map(function(id){var qd=id.originalIndex,xd=$c(qd+od,id.data,Rd);
return sd?(0,Uh.createElement)(tc,Ha({},uj(tc,Rd),{key:xd,index:id.index,height:id.size,type:id.type||"item"})):(0,Uh.createElement)(Dc,Ha({},uj(Dc,Rd),{key:xd,"data-index":qd,"data-known-size":id.size,"data-item-index":id.index,style:{overflowAnchor:"none"}}),Ka(id.index,id.data,Rd))});return(0,Uh.createElement)(da,Ha({ref:n,"data-test-id":"virtuoso-item-list"},uj(da,Rd)),[ra].concat(c,[O]))}),IC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),O=Nl("viewportHeight"),da=Nl("fixedItemHeight"),
ra=rc($h(O,function(Ea){return Vb(Ea,"height")}));return vh.useEffect(function(){n&&(O(n.viewportHeight),da(n.itemHeight))},[n,O,da]),vh.createElement("div",{style:zp,ref:ra,"data-viewport-type":"element"},c)},JC=function(c){c=c.children;var n=(0,Uh.useContext)(Yr),O=Nl("windowViewportRect"),da=Nl("fixedItemHeight"),ra=Ni("customScrollParent");ra=Rm(O,ra);return vh.useEffect(function(){n&&(da(n.itemHeight),O({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},[n,O,da]),vh.createElement("div",
{ref:ra,style:zp,"data-viewport-type":"window"},c)},Rt=vc(EC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",
atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",
scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},vh.memo(function(c){var n=Ni("useWindowScroll"),O=Ni("customScrollParent"),da=Nl("fixedHeaderHeight"),ra=Nl("fixedFooterHeight"),
Ea=Ni("fixedHeaderContent"),Ka=Ni("fixedFooterContent"),fb=Ni("context");da=rc($h(da,function(Dc){return Vb(Dc,"height")}));var ub=rc($h(ra,function(Dc){return Vb(Dc,"height")}));ra=O||n?LC:KC;n=O||n?JC:IC;O=Ni("TableComponent");var bc=Ni("TableHeadComponent"),tc=Ni("TableFooterComponent");Ea=Ea?vh.createElement(bc,Ha({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:da},uj(bc,fb)),Ea()):null;Ka=Ka?vh.createElement(tc,Ha({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:ub},
uj(tc,fb)),Ka()):null;return vh.createElement(ra,Ha({},c),vh.createElement(n,null,vh.createElement(O,Ha({style:{borderSpacing:0}},uj(O,fb)),[Ea,vh.createElement(HC,{key:"TableBody"}),Ka])))})),Nl=Rt.usePublisher,Ni=Rt.useEmitterValue,St=Rt.useEmitter,KC=vq({usePublisher:Nl,useEmitterValue:Ni,useEmitter:St}),LC=fm({usePublisher:Nl,useEmitterValue:Ni,useEmitter:St}),Lx=Sf(Z(68)),km=function(c){function n(O){O=c.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+
O+" for more information.")||this;if(void 0===O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}rl(n,c);return n}(lq(Error)),Mx={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",
crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",
firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",
lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",
midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",
salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},MC=/^#[a-fA-F0-9]{6}$/,NC=/^#[a-fA-F0-9]{8}$/,OC=/^#[a-fA-F0-9]{3}$/,PC=/^#[a-fA-F0-9]{4}$/,
Tt=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,QC=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,RC=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,SC=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ut=function(c){return 7===c.length&&c[1]===c[2]&&
c[3]===c[4]&&c[5]===c[6]?"#"+c[1]+c[3]+c[5]:c},TC=Po(ap,ap.length,[]),Nx=Z(282),Ol=Sf(Z(68)),bl=class{static insertTextFirefox(c,n){c.setRangeText(n,c.selectionStart||0,c.selectionEnd||0,"end");c.dispatchEvent(new InputEvent("input",{data:n,inputType:"insertText",isComposing:!1}))}static insert(c,n){const O=c.ownerDocument,da=O.activeElement;da!==c&&c.focus();O.execCommand("insertText",!1,n)||bl.insertTextFirefox(c,n);da===O.body?c.blur():da instanceof HTMLElement&&da!==c&&da.focus()}static set(c,
n){c.select();bl.insert(c,n)}static getSelection(c){const {selectionStart:n,selectionEnd:O}=c;return c.value.slice(n?n:void 0,O?O:void 0)}static wrapSelection(c,n,O){const {selectionStart:da,selectionEnd:ra}=c,Ea=bl.getSelection(c);bl.insert(c,n+Ea+(null!=O?O:n));c.selectionStart=(da||0)+n.length;c.selectionEnd=(ra||0)+n.length}static replace(c,n,O){let da=0;c.value.replace(n,(...ra)=>{const Ea=da+ra[ra.length-2],Ka=ra[0].length;c.selectionStart=Ea;c.selectionEnd=Ea+Ka;ra="string"===typeof O?O:O(...ra);
bl.insert(c,ra);c.selectionStart=Ea;da+=ra.length-Ka;return ra})}static findLineEnd(c,n){const O=c.lastIndexOf("\n",n-1)+1;return"\t"!==c.charAt(O)?n:O+1}static indent(c){var n;const {selectionStart:O,selectionEnd:da,value:ra}=c;var Ea=ra.slice(O,da);if((Ea=null==(n=/\n/g.exec(Ea))?void 0:n.length)&&0<Ea){n=ra.lastIndexOf("\n",O-1)+1;var Ka=c.value.slice(n,da-1);Ea=Ka.replace(/^|\n/g,"$\x26  ");Ka=Ea.length-Ka.length;c.setSelectionRange(n,da-1);bl.insert(c,Ea);c.setSelectionRange(O+1,da+Ka)}else bl.insert(c,
"  ")}static unindent(c){const {selectionStart:n,selectionEnd:O,value:da}=c;var ra=da.lastIndexOf("\n",n-1)+1;const Ea=bl.findLineEnd(da,O);var Ka=c.value.slice(ra,Ea);const fb=Ka.replace(/(^|\n)(\t| {1,2})/g,"$1");Ka=Ka.length-fb.length;c.setSelectionRange(ra,Ea);bl.insert(c,fb);ra=(ra=/\t| {1,2}/.exec(da.slice(ra,n)))?ra[0].length:0;c.setSelectionRange(n-ra,Math.max(n-ra,O-Ka))}},Vt=Z(282),as=c=>c.stopPropagation(),bs=Ol.memo(function({font:c,text:n,color:O,fontStyle:da,fontSize:ra,fontWeight:Ea,
offsetX:Ka=0,offsetY:fb=0,scale:ub=1,isEditing:bc=!1,pointerEvents:tc=!1,onBlur:Dc,onChange:$c}){const sd=Ol.useRef(null),od=Ol.useRef(!1),Gd=Ol.useCallback(Id=>{$c(sp.normalizeText(Id.currentTarget.value))},[$c]),Rd=Ol.useCallback(Id=>{if("Escape"!==Id.key)if("Tab"===Id.key&&0===n.length)Id.preventDefault();else{if("Meta"!==Id.key&&!Id.metaKey)Id.stopPropagation();else if("z"===Id.key&&Id.metaKey){document.execCommand(Id.shiftKey?"redo":"undo",!1);Id.stopPropagation();Id.preventDefault();return}"Tab"===
Id.key&&(Id.preventDefault(),Id.shiftKey?bl.unindent(Id.currentTarget):bl.indent(Id.currentTarget),null==$c?void 0:$c(sp.normalizeText(Id.currentTarget.value)))}},[$c]),id=Ol.useCallback(Id=>{bc&&(Id.currentTarget.setSelectionRange(0,0),null==Dc?void 0:Dc())},[Dc]),qd=Ol.useCallback(Id=>{bc&&od.current&&document.activeElement===Id.currentTarget&&Id.currentTarget.select()},[bc]),xd=Ol.useCallback(Id=>{bc&&Id.stopPropagation()},[bc]);Ol.useEffect(()=>{bc&&requestAnimationFrame(()=>{od.current=!0;const Id=
sd.current;Id&&(Id.focus(),Id.select())})},[bc,Dc]);const Sd=Ol.useRef(null);Ol.useLayoutEffect(()=>{const Id=Sd.current;if(Id){var Ve=gg(n||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ra,lineHeight:1,fontWeight:Ea},4);Id.style.transform=`scale(${ub}, ${ub}) translate(${Ka}px, ${fb}px)`;Id.style.width=Ve[0]+1+"px";Id.style.height=Ve[1]+1+"px"}},[n,Ea,ra,fb,Ka,ub]);return(0,Vt.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Vt.jsxs)("div",{className:"tl-text-label-inner-wrapper",
ref:Sd,style:{font:c,fontStyle:da,fontSize:ra,fontWeight:Ea,color:O,pointerEvents:tc?"all":"none",userSelect:bc?"text":"none"},children:[bc?(0,Vt.jsx)("textarea",{ref:sd,style:{font:c,color:O,fontStyle:da,fontSize:ra,fontWeight:Ea},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,color:O,onFocus:qd,
onChange:Gd,onKeyDown:Rd,onBlur:id,onPointerDown:xd,onContextMenu:as,onCopy:as,onPaste:as,onCut:as}):n,"​"]})})}),vn=Z(282),Ox={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Bp=class extends xk{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Be(({events:c,isErasing:n,isBinding:O,isSelected:da,isEditing:ra,onEditingEnd:Ea})=>{const {props:{size:[Ka,fb],stroke:ub,fill:bc,noFill:tc,strokeWidth:Dc,strokeType:$c,borderRadius:sd,opacity:od,label:Gd,italic:Rd,fontWeight:id,fontSize:qd}}=
this;var xd=Gd||ra?gg(Gd,{fontFamily:"var(--ls-font-family)",fontSize:qd,lineHeight:1,fontWeight:id},4):[0,0];const Sd=ve.mul(this.props.size,.5);xd=Math.max(.5,Math.min(1,Ka/xd[0],fb/xd[1]));const Id=this.getBounds(),Ve=Lx.useMemo(()=>ve.sub(Sd,ve.toFixed([Id.width/2,Id.height/2])),[Id,xd,Sd]),We=Lx.useCallback(ig=>{var kf;null==(kf=this.update)?void 0:kf.call(this,{label:ig})},[Gd]);return(0,vn.jsxs)("div",rg(Ff({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",
children:[(0,vn.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:Gd,color:vf(ub,"text"),offsetX:Ve[0],offsetY:Ve[1],fontSize:qd,scale:xd,isEditing:ra,onChange:We,onBlur:Ea,fontStyle:Rd?"italic":"normal",fontWeight:id,pointerEvents:!!Gd}),(0,vn.jsxs)(zl,{opacity:n?.2:od,children:[O&&(0,vn.jsx)(sq,{mode:"svg",strokeWidth:Dc,size:[Ka,fb]}),(0,vn.jsx)("rect",{className:da||!tc?"tl-hitarea-fill":"tl-hitarea-stroke",x:Dc/2,y:Dc/2,rx:sd,ry:sd,width:Math.max(.01,Ka-Dc),height:Math.max(.01,fb-Dc),pointerEvents:"all"}),
(0,vn.jsx)("rect",{x:Dc/2,y:Dc/2,rx:sd,ry:sd,width:Math.max(.01,Ka-Dc),height:Math.max(.01,fb-Dc),strokeWidth:Dc,stroke:vf(ub,"stroke"),strokeDasharray:"dashed"===$c?"8 2":void 0,fill:tc?"none":vf(bc,"background")})]})]}))}));yb(this,"setScaleLevel",c=>ci(this,null,function*(){this.update({scaleLevel:c,fontSize:Ox[null!=c?c:"md"],strokeWidth:Ox[null!=c?c:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],borderRadius:O,isLocked:da}}=this;return(0,vn.jsx)("g",
{children:(0,vn.jsx)("rect",{width:c,height:n,rx:O,ry:O,fill:"transparent",strokeDasharray:da?"8 2":void 0})})}));yb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));void 0!==c.borderRadius&&(c.borderRadius=Math.max(0,c.borderRadius));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}};yb(Bp,"id","box");yb(Bp,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,
stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ye([bh],Bp.prototype,"scaleLevel",1);ye([Gg],Bp.prototype,"setScaleLevel",2);var Px=Sf(Z(68)),lm=Z(282),Qx={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Cp=class extends ct{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Be(({isSelected:c,isErasing:n,events:O,isEditing:da,onEditingEnd:ra})=>{const {size:[Ea,Ka],stroke:fb,fill:ub,noFill:bc,strokeWidth:tc,strokeType:Dc,
opacity:$c,label:sd,italic:od,fontWeight:Gd,fontSize:Rd}=this.props;var id=sd||da?gg(sd,{fontFamily:"var(--ls-font-family)",fontSize:Rd,lineHeight:1,fontWeight:Gd},4):[0,0];const qd=ve.mul(this.props.size,.5);id=Math.max(.5,Math.min(1,Ea/id[0],Ka/id[1]));const xd=this.getBounds(),Sd=Px.useMemo(()=>ve.sub(qd,ve.toFixed([xd.width/2,xd.height/2])),[xd,id,qd]),Id=Px.useCallback(Ve=>{var We;null==(We=this.update)?void 0:We.call(this,{label:Ve})},[sd]);return(0,lm.jsxs)("div",rg(Ff({},O),{style:{width:"100%",
height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,lm.jsx)(bs,{font:"18px / 1 var(--ls-font-family)",text:sd,color:vf(fb,"text"),offsetX:Sd[0],offsetY:Sd[1],scale:id,isEditing:da,onChange:Id,onBlur:ra,fontStyle:od?"italic":"normal",fontSize:Rd,fontWeight:Gd,pointerEvents:!!sd}),(0,lm.jsxs)(zl,rg(Ff({},O),{opacity:n?.2:$c,children:[(0,lm.jsx)("ellipse",{className:c||!bc?"tl-hitarea-fill":"tl-hitarea-stroke",cx:Ea/2,cy:Ka/2,rx:Math.max(.01,(Ea-tc)/2),ry:Math.max(.01,(Ka-
tc)/2)}),(0,lm.jsx)("ellipse",{cx:Ea/2,cy:Ka/2,rx:Math.max(.01,(Ea-tc)/2),ry:Math.max(.01,(Ka-tc)/2),strokeWidth:tc,stroke:vf(fb,"stroke"),strokeDasharray:"dashed"===Dc?"8 2":void 0,fill:bc?"none":vf(ub,"background")})]}))]}))}));yb(this,"setScaleLevel",c=>ci(this,null,function*(){this.update({scaleLevel:c,fontSize:Qx[null!=c?c:"md"],strokeWidth:Qx[null!=c?c:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Be(()=>{const {size:[c,n],isLocked:O}=this.props;return(0,lm.jsx)("g",{children:(0,lm.jsx)("ellipse",
{cx:c/2,cy:n/2,rx:c/2,ry:n/2,strokeWidth:2,fill:"transparent",strokeDasharray:O?"8 2":"undefined"})})}));yb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(c){const {size:[n,O],stroke:da,fill:ra,noFill:Ea,strokeWidth:Ka,strokeType:fb,opacity:ub}=this.props;return(0,lm.jsxs)("g",{opacity:ub,children:[(0,lm.jsx)("ellipse",{className:Ea?"tl-hitarea-stroke":
"tl-hitarea-fill",cx:n/2,cy:O/2,rx:Math.max(.01,(n-Ka)/2),ry:Math.max(.01,(O-Ka)/2)}),(0,lm.jsx)("ellipse",{cx:n/2,cy:O/2,rx:Math.max(.01,(n-Ka)/2),ry:Math.max(.01,(O-Ka)/2),strokeWidth:Ka,stroke:vf(da,"stroke"),strokeDasharray:"dashed"===fb?"8 2":void 0,fill:Ea?"none":vf(ra,"background")})]})}};yb(Cp,"id","ellipse");yb(Cp,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});ye([bh],Cp.prototype,"scaleLevel",1);ye([Gg],Cp.prototype,"setScaleLevel",2);var Sq=Z(282),Wt=class extends Fr{constructor(){super(...arguments);yb(this,"ReactComponent",Be(({events:c})=>{const n=this.getBounds(),O=$e(),da=O.selectedShapesArray.some(Ea=>O.shapesInGroups([this]).includes(Ea)),ra=this.ReactIndicator;return(0,Sq.jsxs)(zl,rg(Ff({},c),{className:"tl-group-container",children:[(0,Sq.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,n.width-2),height:Math.max(.01,
n.height-2),pointerEvents:"all"}),da&&(0,Sq.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,Sq.jsx)(ra,{})})]}))}));yb(this,"ReactIndicator",Be(()=>{const c=this.getBounds();return(0,Sq.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:c.width+16,height:c.height+16,fill:"transparent"})}))}};yb(Wt,"id","group");yb(Wt,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var cs=Z(282),UC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},yo=class extends lp{constructor(c=
{}){super(c);yb(this,"ReactComponent",Be(({events:n,isErasing:O})=>{const {pointsPath:da,props:{stroke:ra,strokeWidth:Ea,opacity:Ka}}=this;return(0,cs.jsx)(zl,rg(Ff({},n),{opacity:O?.2:1,children:(0,cs.jsx)("path",{d:da,strokeWidth:16*Ea,stroke:vf(ra,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:Ka})}))}));yb(this,"setScaleLevel",n=>ci(this,null,function*(){this.update({scaleLevel:n,strokeWidth:UC[null!=n?n:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",
Be(()=>{const {pointsPath:n,props:O}=this;return(0,cs.jsx)("path",{d:n,fill:"none",strokeDasharray:O.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",n=>{n=Vk(this,n);void 0!==n.strokeWidth&&(n.strokeWidth=Math.max(n.strokeWidth,1));return n});Hc(this)}get pointsPath(){const {points:c}=this.props;return Xj.getCurvedPathForPoints(c)}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:n,strokeWidth:O,opacity:da}}=this;return(0,cs.jsx)("path",
{d:c,strokeWidth:16*O,stroke:vf(n,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:da})}};yb(yo,"id","highlighter");yb(yo,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});ye([bh],yo.prototype,"pointsPath",1);ye([bh],yo.prototype,"scaleLevel",1);ye([Gg],yo.prototype,"setScaleLevel",2);var Xt=Sf(Z(68)),ds=Z(282),Yt={xs:.5,sm:.8,
md:1,lg:1.5,xl:2,xxl:3},wn=class extends xk{constructor(){super(...arguments);yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"htmlAnchorRef",Xt.createRef());yb(this,"setScaleLevel",c=>ci(this,null,function*(){var n;const O=ve.mul(this.props.size,Yt[null!=c?c:"md"]/Yt[null!=(n=this.props.scaleLevel)?n:"md"]);this.update({scaleLevel:c});yield Mc();this.update({size:O})}));yb(this,"onResetBounds",c=>{var n;if(this.htmlAnchorRef.current){const O=this.htmlAnchorRef.current.getBoundingClientRect(),
[da,ra]=ve.div([O.width,O.height],null!=(n=null==c?void 0:c.zoom)?n:1);this.update({size:[Math.max(Math.min(da||400,1400),10),Math.max(Math.min(ra||400,1400),10)]})}return this});yb(this,"ReactComponent",Be(({events:c,isErasing:n,isEditing:O})=>{const {props:{html:da,scaleLevel:ra}}=this,Ea=Sm(),Ka=$e(),fb=Ka.selectedIds.has(this.id),ub=Ea||fb&&!O||"select"!==Ka.selectedTool.id,bc=Xt.useCallback(Dc=>{ub||Dc.stopPropagation()},[ub]),tc=Yt[null!=ra?ra:"md"];Xt.useEffect(()=>{0===this.props.size[1]&&
(this.onResetBounds({zoom:Ka.viewport.camera.zoom}),Ka.persist())},[]);return(0,ds.jsx)($k,rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,ds.jsx)("div",{onWheelCapture:bc,onPointerDown:bc,onPointerUp:bc,className:"tl-html-container",style:{pointerEvents:Ea||!O&&!fb?"none":"all",overflow:O?"auto":"hidden",width:`calc(100% / ${tc})`,height:`calc(100% / ${tc})`,transform:`scale(${tc})`},children:(0,ds.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",
dangerouslySetInnerHTML:{__html:da.trim()}})})}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,ds.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:O?"8 2":"undefined"})}));yb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}};yb(wn,"id","html");yb(wn,"defaultProps",{id:"html",type:"html",parentId:"page",
point:[0,0],size:[600,0],html:""});ye([bh],wn.prototype,"scaleLevel",1);ye([Gg],wn.prototype,"setScaleLevel",2);var Rx=Sf(Z(68)),Tq=Z(282),zo=class extends xk{constructor(){super(...arguments);yb(this,"frameRef",Rx.createRef());yb(this,"canEdit",!0);yb(this,"onIFrameSourceChange",c=>{this.update({url:c})});yb(this,"reload",()=>{var c,n;this.frameRef.current&&(this.frameRef.current.src=null==(n=null==(c=this.frameRef)?void 0:c.current)?void 0:n.src)});yb(this,"ReactComponent",Be(({events:c,isErasing:n,
isEditing:O})=>{Rx.useRef(null);const da=$e();return(0,Tq.jsx)($k,rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,Tq.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:O||da.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,Tq.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Tq.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,
frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,Tq.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:O?"8 2":"undefined"})}))}};yb(zo,"id","iframe");yb(zo,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});ye([Gg],zo.prototype,"onIFrameSourceChange",2);ye([Gg],zo.prototype,"reload",2);var VC=Sf(Z(68)),Dp=Z(282),
es=class extends dt{constructor(){super(...arguments);yb(this,"ReactComponent",Be(({events:c,isErasing:n,isBinding:O,asset:da})=>{const {props:{opacity:ra,objectFit:Ea,clipping:Ka,size:[fb,ub]}}=this,[bc,tc,Dc,$c]=Array.isArray(Ka)?Ka:[Ka,Ka,Ka,Ka],{handlers:sd}=VC.useContext(wi);return(0,Dp.jsxs)($k,rg(Ff({},c),{opacity:n?.2:ra,children:[O&&(0,Dp.jsx)(sq,{mode:"html",strokeWidth:4,size:[fb,ub]}),(0,Dp.jsx)("div",{"data-asset-loaded":!!da,className:"tl-image-shape-container",children:da?(0,Dp.jsx)("img",
{src:sd?sd.makeAssetUrl(da.src):da.src,draggable:!1,style:{position:"relative",top:-bc,left:-$c,width:fb+($c-tc),height:ub+(bc-Dc),objectFit:Ea}}):"Asset is missing"})]}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,Dp.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:O?"8 2":"undefined"})}))}getShapeSVGJsx({assets:c}){var n,O;const da=this.getBounds(),{assetId:ra,clipping:Ea}=this.props;if(c=c.find(Ka=>Ka.id===ra)){Array.isArray(Ea);const Ka=
null==(O=null==(n=window.logseq)?void 0:n.api)?void 0:O.make_asset_url;return(0,Dp.jsx)("image",{width:da.width,height:da.height,href:Ka?Ka(c.src):c.src})}return super.getShapeSVGJsx({})}};yb(es,"id","image");yb(es,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Zt=Sf(Z(68)),WC=Sf(Z(68)),$t=Z(282),Ep=Z(282),Sx={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},XC=WC.memo(function({style:c,start:n,
end:O,decorationStart:da,decorationEnd:ra,scaleLevel:Ea}){const Ka=ve.dist(n,O);if(2>Ka)return null;const {strokeWidth:fb}=c,ub=1+fb*Sx[null!=Ea?Ea:"md"]/10,bc="M"+ve.toFixed(n)+"L"+ve.toFixed(O);Ea=Math.min(Ka/3,fb*Sx[null!=Ea?Ea:"md"]);da=da?Wl(n,O,Ea):null;ra=ra?Wl(O,n,Ea):null;return(0,Ep.jsxs)(Ep.Fragment,{children:[(0,Ep.jsx)("path",{className:"tl-stroke-hitarea",d:bc}),(0,Ep.jsx)("path",{d:bc,strokeWidth:ub,stroke:c.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===
c.strokeType?"8 4":void 0,pointerEvents:"stroke"}),da&&(0,Ep.jsx)(No,{left:da.left,middle:n,right:da.right,stroke:c.stroke,strokeWidth:ub}),ra&&(0,Ep.jsx)(No,{left:ra.left,middle:O,right:ra.right,stroke:c.stroke,strokeWidth:ub})]})}),fs=Z(282),Mk=Z(282),YC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Fp=class extends Fq{constructor(){super(...arguments);yb(this,"hideSelection",!0);yb(this,"canEdit",!0);yb(this,"ReactComponent",Be(({events:c,isErasing:n,isEditing:O,onEditingEnd:da})=>{const {stroke:ra,handles:{start:Ea,
end:Ka},opacity:fb,label:ub,italic:bc,fontWeight:tc,fontSize:Dc,id:$c}=this.props,sd=ub||O?gg(ub||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:Dc,lineHeight:1,fontWeight:tc},6):[0,0],od=ve.med(Ea.point,Ka.point);var Gd=ve.dist(Ea.point,Ka.point);Gd=Math.max(.5,Math.min(1,Math.max(Gd/(sd[1]+128),Gd/(sd[0]+128))));const Rd=this.getBounds(),id=Zt.useMemo(()=>ve.sub(od,ve.toFixed([Rd.width/2,Rd.height/2])),[Rd,Gd,od]),qd=Zt.useCallback(xd=>{var Sd;null==(Sd=this.update)?void 0:Sd.call(this,
{label:xd})},[ub]);return(0,Mk.jsxs)("div",rg(Ff({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,Mk.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:ub,fontSize:Dc,color:vf(ra,"text"),offsetX:id[0],offsetY:id[1],scale:Gd,isEditing:O,onChange:qd,onBlur:da,fontStyle:bc?"italic":"normal",fontWeight:tc,pointerEvents:!!ub}),(0,Mk.jsxs)(zl,{opacity:n?.2:fb,id:$c+"_svg",children:[(0,Mk.jsx)(bp,{id:$c,bounds:Rd,labelSize:sd,offset:id,scale:Gd}),(0,Mk.jsx)("g",
{pointerEvents:"none",mask:ub||O?`url(#${$c}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));yb(this,"setScaleLevel",c=>ci(this,null,function*(){this.update({scaleLevel:c,fontSize:YC[null!=c?c:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Be(({isEditing:c})=>{const {id:n,decorations:O,label:da,strokeWidth:ra,fontSize:Ea,fontWeight:Ka,handles:{start:fb,end:ub},isLocked:bc}=this.props,tc=this.getBounds(),Dc=da||c?gg(da,{fontFamily:"var(--ls-font-family)",fontSize:Ea,lineHeight:1,
fontWeight:Ka},6):[0,0],$c=ve.med(fb.point,ub.point);var sd=ve.dist(fb.point,ub.point);sd=Math.max(.5,Math.min(1,Math.max(sd/(Dc[1]+128),sd/(Dc[0]+128))));const od=Zt.useMemo(()=>ve.sub($c,ve.toFixed([tc.width/2,tc.height/2])),[tc,sd,$c]);return(0,Mk.jsxs)("g",{children:[(0,Mk.jsx)("path",{mask:da?`url(#${n}_clip)`:"",d:Bj({strokeWidth:ra},fb.point,ub.point,null==O?void 0:O.start,null==O?void 0:O.end),strokeDasharray:bc?"8 2":"undefined"}),da&&!c&&(0,Mk.jsx)("rect",{x:tc.width/2-Dc[0]/2*sd+od[0],
y:tc.height/2-Dc[1]/2*sd+od[1],width:Dc[0]*sd,height:Dc[1]*sd,rx:4*sd,ry:4*sd,fill:"transparent"})]})}));yb(this,"validateProps",c=>Vk(this,c))}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx({preview:c}){const {stroke:n,fill:O,strokeWidth:da,strokeType:ra,decorations:Ea,label:Ka,scaleLevel:fb,handles:{start:ub,end:bc}}=this.props,tc=ve.med(ub.point,bc.point);return(0,Mk.jsxs)(Mk.Fragment,{children:[(0,Mk.jsx)(XC,{style:{stroke:vf(n,"text"),fill:O,strokeWidth:da,
strokeType:ra},scaleLevel:fb,start:ub.point,end:bc.point,decorationStart:null==Ea?void 0:Ea.start,decorationEnd:null==Ea?void 0:Ea.end}),c&&(0,Mk.jsx)(Mk.Fragment,{children:(0,Mk.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${tc[0]}, ${tc[1]})`,textAnchor:"middle",fill:vf(n,"text"),stroke:vf(n,"text"),children:Ka})})]})}};yb(Fp,"id","line");yb(Fp,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});ye([bh],Fp.prototype,"scaleLevel",1);ye([Gg],Fp.prototype,"setScaleLevel",2);var Nk=Sf(Z(68)),mj=Z(282),Uq={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},ZC=Be(({type:c,fill:n,opacity:O,children:da})=>{const ra="var(--ls-secondary-background-color)"!==n?vf(n,"background"):"var(--ls-tertiary-background-color)";n=n&&
"var(--ls-secondary-background-color)"!==n?yf(n)?`var(--ls-highlight-color-${n})`:n:"var(--ls-secondary-background-color)";return(0,mj.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===c?"page":"block"}`,children:[(0,mj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:O,background:"P"===c?ra:`linear-gradient(0deg, ${n}, ${ra})`}}),(0,mj.jsx)("div",{className:"relative",children:da})]})}),Gj=class extends xk{constructor(c={}){var n;super(c);
yb(this,"hideRotateHandle",!0);yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!0);yb(this,"persist",null);yb(this,"initialHeightCalculated",!0);yb(this,"getInnerHeight",null);yb(this,"setCollapsed",O=>ci(this,null,function*(){var da;if("B"===this.props.blockType){if(this.update({compact:O}),this.canResize[1]=!O,!O)this.onResetBounds()}else{const ra=this.props.size[1];this.canResize[1]=!O;this.update({isAutoResizing:!O,collapsed:O,size:[this.props.size[0],O?this.getHeaderHeight():
this.props.collapsedHeight],collapsedHeight:O?ra:this.props.collapsedHeight})}null==(da=this.persist)?void 0:da.call(this)}));yb(this,"setScaleLevel",O=>ci(this,null,function*(){var da;const ra=ve.mul(this.props.size,Uq[null!=O?O:"md"]/Uq[null!=(da=this.props.scaleLevel)?da:"md"]);this.update({scaleLevel:O});yield Mc();this.update({size:ra})}));yb(this,"onResetBounds",O=>{O=this.getAutoResizeHeight();null!==O&&1<Math.abs(O-this.props.size[1])&&(this.update({size:[this.props.size[0],O]}),this.initialHeightCalculated=
!0);return this});yb(this,"onResize",(O,da)=>{var ra;const {bounds:Ea,rotation:Ka,scale:[fb,ub]}=da;O=[...this.scale];0>fb&&(O[0]*=-1);0>ub&&(O[1]*=-1);da=Ea.height;this.props.isAutoResizing&&(da=null!=(ra=this.getAutoResizeHeight())?ra:da);return this.update({point:[Ea.minX,Ea.minY],size:[Math.max(1,Ea.width),Math.max(1,da)],scale:O,rotation:Ka})});yb(this,"PortalComponent",Be(({})=>{const {props:{pageId:O,fill:da,opacity:ra}}=this,{renderers:Ea}=Nk.useContext(wi),Ka=$e(),fb=Nk.useRef(null),[,ub]=
this.useComponentSize(fb,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==Ea||!Ea.Page)return null;const {Page:bc,Block:tc}=Ea,[Dc,$c]=Nk.useState(!1);Nk.useEffect(()=>{var sd,od;if(this.props.isAutoResizing){const Gd=(null!=(od=null==(sd=this.getInnerHeight)?void 0:sd.call(this))?od:ub)+this.getHeaderHeight();ub&&1<Math.abs(Gd-this.props.size[1])&&(this.update({size:[this.props.size[0],Gd]}),Dc&&Ka.persist({}))}},[ub,this.props.isAutoResizing]);
Nk.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();Ka.persist({})})},[this.initialHeightCalculated]);Nk.useEffect(()=>{setTimeout(function(){$c(!0)})},[]);return(0,mj.jsxs)(mj.Fragment,{children:[(0,mj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>Ka.viewport.camera.zoom?"optimizeSpeed":"auto",background:da&&"var(--ls-secondary-background-color)"!==da?yf(da)?`var(--ls-highlight-color-${da})`:da:"var(--ls-secondary-background-color)",
opacity:ra}}),(0,mj.jsx)("div",{ref:fb,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(Dc||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,mj.jsx)(tc,{blockId:O}):(0,mj.jsx)(bc,{pageName:O}))})]})}));yb(this,"ReactComponent",Be(O=>{var da;const {events:ra,isErasing:Ea,isEditing:Ka,isBinding:fb}=O,{props:{opacity:ub,pageId:bc,fill:tc,scaleLevel:Dc,strokeWidth:$c,size:sd}}=this,od=$e(),{renderers:Gd,
handlers:Rd}=Nk.useContext(wi);this.persist=()=>od.persist();const id=Sm(),qd=od.selectedIds.has(this.id)&&1===od.selectedIds.size,xd=od.isIn("logseq-portal.creating")&&!bc,Sd=(id||qd&&!Ka||"select"!==od.selectedTool.id)&&!xd,Id=Nk.useCallback(Df=>{Sd||Df.stopPropagation()},[Sd]),Ve=1===od.selectedShapesArray.length&&od.selectedShapesArray.some(Df=>"logseq-portal"===Df.type&&Df.props.id!==this.props.id&&bc&&Df.props.pageId===bc),We=Uq[null!=Dc?Dc:"md"];Nk.useEffect(()=>this.props.collapsed&&Ka?(this.update({size:[this.props.size[0],
this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[Ka,this.props.collapsed]);Nk.useEffect(()=>{if(xd){const Df=[od.viewport.bounds.width,od.viewport.bounds.height],Kf=od.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Kf[0]>Df[0]-400||Kf[1]>Df[1]-240||1.5<od.viewport.camera.zoom||.5>od.viewport.camera.zoom)&&od.viewport.zoomToBounds(rg(Ff({},this.bounds),{minY:this.bounds.maxY+25}))}},[od.viewport.bounds.height.toFixed(2)]);const ig=
Nk.useCallback((Df,Kf)=>{this.initialHeightCalculated=!1;const Af=Kf?"P":"B";this.update({pageId:Df,size:[400,Kf?320:40],blockType:Af,compact:"B"===Af});od.selectTool("select");od.history.resume();od.history.persist()},[]),kf=this.PortalComponent;var Vf=Nk.useMemo(()=>{var Df;if(bc&&"B"===this.props.blockType)return null==(Df=null==Rd?void 0:Rd.queryBlockByUUID(bc))?void 0:Df.title},[null==Rd?void 0:Rd.queryBlockByUUID,bc]);Vf="B"===this.props.blockType&&"string"!==typeof Vf;const Lg=(!this.props.collapsed||
Ka)&&!Vf;if(null==Gd||!Gd.Page)return null;const {Breadcrumb:dh,PageName:Ig}=Gd,eh={width:`calc(100% / ${We})`,height:`calc(100% / ${We})`,opacity:Ea?.2:1};1!==We&&(eh.transform=`scale(${We})`);return(0,mj.jsxs)($k,rg(Ff({style:{pointerEvents:"all"}},ra),{children:[fb&&(0,mj.jsx)(sq,{mode:"html",strokeWidth:$c,size:sd}),(0,mj.jsx)("div",{"data-inner-events":!Sd,onWheelCapture:Id,onPointerDown:Id,onPointerUp:Id,style:{width:"100%",height:"100%",pointerEvents:id||!Ka&&!qd?"none":"all"},children:xd?
(0,mj.jsx)(Vs,{onChange:ig,onAddBlock:Df=>{setTimeout(()=>{var Kf,Af,ag;od.api.editShape(this);null==(ag=null==(Af=null==(Kf=window.logseq)?void 0:Kf.api)?void 0:Af.edit_block)?void 0:ag.call(Af,Df)},128)},placeholder:"Create or search your graph..."}):(0,mj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":bc,"data-portal-selected":Ve,"data-editing":Ka,style:eh,children:[!this.props.compact&&!Vf&&(0,mj.jsx)(ZC,{type:null!=(da=this.props.blockType)?
da:"P",fill:tc,opacity:ub,children:"P"===this.props.blockType?(0,mj.jsx)(Ig,{pageName:bc}):(0,mj.jsx)(dh,{blockId:bc})}),Vf&&(0,mj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Lg&&(0,mj.jsx)(kf,Ff({},O))]})})]}))}));yb(this,"ReactIndicator",Be(()=>{const O=this.getBounds();return(0,mj.jsx)("rect",{width:O.width,height:O.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",O=>{var da;if(void 0!==O.size){const ra=
Uq[null!=(da=this.props.scaleLevel)?da:"md"];O.size[0]=Math.max(O.size[0],60*ra);O.size[1]=Math.max(O.size[1],40*ra)}return Vk(this,O)});Hc(this);c.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(n=c.size)?void 0:n[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(c){return c?/^\(\(.*\)\)$/.test(c)&&40===c.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:
"md"}useComponentSize(c,n=""){const [O,da]=Nk.useState([0,0]),ra=$e();Nk.useEffect(()=>{setTimeout(()=>{if(null==c?0:c.current){const Ea=n?c.current.querySelector(n):c.current;if(Ea){const Ka=()=>{const {width:ub,height:bc}=Ea.getBoundingClientRect(),tc=ve.div([ub,bc],ra.viewport.camera.zoom);da(tc);return tc};Ka();this.getInnerHeight=()=>Ka()[1];const fb=new ResizeObserver(()=>{Ka()});fb.observe(Ea);return()=>{fb.disconnect()}}}return()=>{}},10)},[c,n]);return O}getHeaderHeight(){var c;const n=Uq[null!=
(c=this.props.scaleLevel)?c:"md"];return this.props.compact?0:40*n}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var c,n,O;const da=this.getBounds();return(0,mj.jsxs)(mj.Fragment,{children:[(0,mj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?yf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:vf(this.props.fill,
"background"),strokeWidth:null!=(c=this.props.strokeWidth)?c:2,fillOpacity:null!=(n=this.props.opacity)?n:.2,width:da.width,rx:8,ry:8,height:da.height}),!this.props.compact&&(0,mj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?vf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(O=this.props.opacity)?O:.2,x:1,y:1,width:da.width-2,height:38,rx:8,ry:8}),(0,mj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${da.width/
2}, ${10+da.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageName:""})]})}};yb(Gj,"id","logseq-portal");yb(Gj,"defaultSearchQuery","");yb(Gj,"defaultSearchFilter",null);yb(Gj,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,
strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});ye([bh],Gj.prototype,"collapsed",1);ye([Gg],Gj.prototype,"setCollapsed",2);ye([bh],Gj.prototype,"scaleLevel",1);ye([Gg],Gj.prototype,"setScaleLevel",2);var {min:Gp,PI:$C}=Math,Vq=$C+1E-4,au=Z(282),aD={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},bD={easing:c=>Math.sin(c*Math.PI/2),simulatePressure:!0},cD={easing:c=>c*c,simulatePressure:!1},Ao=class extends lp{constructor(c={}){super(c);yb(this,"ReactComponent",
Be(({events:n,isErasing:O})=>{const {props:{opacity:da}}=this;return(0,au.jsx)(zl,rg(Ff({},n),{opacity:O?.2:da,children:this.getShapeSVGJsx()}))}));yb(this,"setScaleLevel",n=>ci(this,null,function*(){this.update({scaleLevel:n,strokeWidth:aD[null!=n?n:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Be(()=>{const {pointsPath:n}=this;return(0,au.jsx)("path",{d:n,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",n=>{n=Vk(this,n);void 0!==n.strokeWidth&&(n.strokeWidth=
Math.max(n.strokeWidth,1));return n});Hc(this)}get pointsPath(){var c=this.props;if(2>c.points.length)var n="";else n=rg(Ff({size:1+1.5*c.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===c.points[1][2]?bD:cD),{last:c.isComplete}),c=Ws(c.points,n),n=Xj.getSvgPathFromStroke(uq(c,n));return n}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(){const {pointsPath:c,props:{stroke:n,strokeWidth:O,strokeType:da}}=this;return(0,au.jsx)("path",{pointerEvents:"all",
d:c,strokeWidth:O/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:vf(n,"text"),fill:vf(n,"text"),strokeDasharray:"dashed"===da?"12 4":void 0})}};yb(Ao,"id","pencil");yb(Ao,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});ye([bh],Ao.prototype,"pointsPath",1);ye([bh],Ao.prototype,"scaleLevel",1);ye([Gg],Ao.prototype,"setScaleLevel",2);var Tx=Sf(Z(68)),Pl=Z(282),Ux={xs:10,sm:16,
md:20,lg:32,xl:48,xxl:60},Hp=class extends ln{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Be(({events:c,isErasing:n,isSelected:O,isEditing:da,onEditingEnd:ra})=>{const {offset:[Ea,Ka],props:{stroke:fb,fill:ub,noFill:bc,strokeWidth:tc,opacity:Dc,strokeType:$c,label:sd,italic:od,fontWeight:Gd,fontSize:Rd}}=this,id=this.getVertices(tc/2).join();var qd=sd||da?gg(sd,{fontFamily:"var(--ls-font-family)",fontSize:Rd,lineHeight:1,fontWeight:Gd},4):[0,0];const xd=[this.props.size[0]/
2,2*this.props.size[1]/3];qd=Math.max(.5,Math.min(1,this.props.size[0]/(2*qd[0]),this.props.size[1]/(2*qd[1])));const Sd=this.getBounds(),Id=Tx.useMemo(()=>ve.sub(xd,ve.toFixed([Sd.width/2,Sd.height/2])),[Sd,qd,xd]),Ve=Tx.useCallback(We=>{var ig;null==(ig=this.update)?void 0:ig.call(this,{label:We})},[sd]);return(0,Pl.jsxs)("div",rg(Ff({},c),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Pl.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:sd,fontSize:Rd,color:vf(fb,"text"),
offsetX:Id[0],offsetY:Id[1]/qd,scale:qd,isEditing:da,onChange:Ve,onBlur:ra,fontStyle:od?"italic":"normal",fontWeight:Gd,pointerEvents:!!sd}),(0,Pl.jsx)(zl,{opacity:n?.2:Dc,children:(0,Pl.jsxs)("g",{transform:`translate(${Ea}, ${Ka})`,children:[(0,Pl.jsx)("polygon",{className:O||!bc?"tl-hitarea-fill":"tl-hitarea-stroke",points:id}),(0,Pl.jsx)("polygon",{points:id,stroke:vf(fb,"stroke"),fill:bc?"none":vf(ub,"background"),strokeWidth:tc,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===$c?
"8 2":void 0})]})})]}))}));yb(this,"setScaleLevel",c=>ci(this,null,function*(){this.update({scaleLevel:c,fontSize:Ux[null!=c?c:"md"],strokeWidth:Ux[null!=c?c:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Be(()=>{const {offset:[c,n],props:{strokeWidth:O,isLocked:da}}=this;return(0,Pl.jsx)("g",{children:(0,Pl.jsx)("polygon",{transform:`translate(${c}, ${n})`,points:this.getVertices(O/2).join(),strokeDasharray:da?"8 2":"undefined"})})}));yb(this,"validateProps",c=>{void 0!==c.sides&&(c.sides=
Math.max(c.sides,3));return Vk(this,c)})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getShapeSVGJsx(c){const {offset:[n,O],props:{stroke:da,fill:ra,noFill:Ea,strokeWidth:Ka,opacity:fb,strokeType:ub}}=this;c=this.getVertices(Ka/2).join();return(0,Pl.jsxs)("g",{transform:`translate(${n}, ${O})`,opacity:fb,children:[(0,Pl.jsx)("polygon",{className:Ea?"tl-hitarea-stroke":"tl-hitarea-fill",points:c}),(0,Pl.jsx)("polygon",{points:c,stroke:vf(da,"stroke"),fill:Ea?"none":vf(ra,"background"),
strokeWidth:Ka,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===ub?"8 2":void 0})]})}};yb(Hp,"id","polygon");yb(Hp,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ye([bh],Hp.prototype,"scaleLevel",1);ye([Gg],Hp.prototype,"setScaleLevel",2);var mm=Sf(Z(68)),xn=Z(282),dD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},
Ip=class extends et{constructor(){super(...arguments);yb(this,"ReactComponent",Be(({events:c,isErasing:n,isEditing:O,onEditingEnd:da})=>{const {props:{opacity:ra,fontFamily:Ea,fontSize:Ka,fontWeight:fb,italic:ub,lineHeight:bc,text:tc,stroke:Dc,padding:$c}}=this,sd=mm.useRef(null),od=mm.useRef(!1),Gd=mm.useRef(null),Rd=mm.useCallback(Id=>{const {isSizeLocked:Ve}=this.props;Id=sp.normalizeText(Id.currentTarget.value);Ve?this.update({text:Id,size:this.getAutoSizedBoundingBox({text:Id})}):this.update({text:Id})},
[]),id=mm.useCallback(Id=>{if("Escape"!==Id.key)if("Tab"===Id.key&&0===tc.length)Id.preventDefault();else{if("Meta"!==Id.key&&!Id.metaKey)Id.stopPropagation();else if("z"===Id.key&&Id.metaKey){Id.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Id.stopPropagation();Id.preventDefault();return}"Tab"===Id.key&&(Id.preventDefault(),Id.shiftKey?bl.unindent(Id.currentTarget):bl.indent(Id.currentTarget),this.update({text:sp.normalizeText(Id.currentTarget.value)}))}},[]),qd=mm.useCallback(Id=>
{O&&(null==da?void 0:da())},[da]),xd=mm.useCallback(Id=>{O&&od.current&&document.activeElement===Id.currentTarget&&Id.currentTarget.select()},[O]),Sd=mm.useCallback(Id=>{O&&Id.stopPropagation()},[O]);mm.useEffect(()=>{O&&requestAnimationFrame(()=>{od.current=!0;const Id=sd.current;Id&&(Id.focus(),Id.select())})},[O,da]);mm.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,xn.jsx)($k,rg(Ff({},c),{opacity:n?.2:ra,children:(0,xn.jsx)("div",{ref:Gd,
className:"tl-text-shape-wrapper","data-hastext":!!tc,"data-isediting":O,style:{fontFamily:Ea,fontStyle:ub?"italic":"normal",fontSize:Ka,fontWeight:fb,padding:$c,lineHeight:bc,color:vf(Dc,"text")},children:O?(0,xn.jsx)("textarea",{ref:sd,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:tc,onFocus:xd,onChange:Rd,onKeyDown:id,
onBlur:qd,onPointerDown:Sd}):(0,xn.jsxs)(xn.Fragment,{children:[tc,"​"]})})}))}));yb(this,"setScaleLevel",c=>ci(this,null,function*(){this.update({scaleLevel:c,fontSize:dD[null!=c?c:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Be(({isEditing:c})=>{const {props:{borderRadius:n,isLocked:O},bounds:da}=this;return c?null:(0,xn.jsx)("rect",{width:da.width,height:da.height,rx:n,ry:n,fill:"transparent",strokeDasharray:O?"8 2":"undefined"})}));yb(this,"validateProps",c=>Vk(this,c));yb(this,"getBounds",
()=>{const [c,n]=this.props.point,[O,da]=this.props.size;return{minX:c,minY:n,maxX:c+O,maxY:n+da,width:O,height:da}});yb(this,"onResizeStart",({isSingle:c})=>{var n;if(!c)return this;this.scale=[...(null!=(n=this.props.scale)?n:[1,1])];return this.update({isSizeLocked:!1})});yb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var c;return null!=(c=this.props.scaleLevel)?c:"md"}getAutoSizedBoundingBox(c={}){const {text:n=this.props.text,
fontFamily:O=this.props.fontFamily,fontSize:da=this.props.fontSize,fontWeight:ra=this.props.fontWeight,lineHeight:Ea=this.props.lineHeight,padding:Ka=this.props.padding}=c,[fb,ub]=gg(n,{fontFamily:O,fontSize:da,lineHeight:Ea,fontWeight:ra},Ka);return[fb,ub]}getShapeSVGJsx(){var c=window.navigator.userAgent.toLowerCase();if(c.includes("webkit")&&!c.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:n,stroke:O,fontSize:da,fontFamily:ra}}=this;c=this.getBounds();return(0,xn.jsx)("foreignObject",
{width:c.width,height:c.height,children:(0,xn.jsx)("div",{style:{color:vf(O,"text"),fontSize:da,fontFamily:ra,display:"contents"},children:n})})}};yb(Ip,"id","text");yb(Ip,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});ye([bh],Ip.prototype,"scaleLevel",1);ye([Gg],
Ip.prototype,"setScaleLevel",2);var Vx=Sf(Z(68)),gs=Z(282),hs=class extends xk{constructor(){super(...arguments);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"canChangeAspectRatio",!1);yb(this,"ReactComponent",Be(({events:c,isErasing:n,asset:O,isEditing:da})=>{const {props:{opacity:ra}}=this,Ea=Sm();var Ka=$e();const fb=Ka.selectedIds.has(this.id),ub=Ea||fb&&!da||"select"!==Ka.selectedTool.id;Ka=Vx.useCallback(tc=>{ub||tc.stopPropagation()},[ub]);const {handlers:bc}=Vx.useContext(wi);return(0,gs.jsx)($k,
rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:ra}},c),{children:(0,gs.jsx)("div",{onWheelCapture:Ka,onPointerDown:Ka,onPointerUp:Ka,className:"tl-video-container",style:{pointerEvents:Ea||!da&&!fb?"none":"all",overflow:da?"auto":"hidden"},children:O&&(0,gs.jsx)("video",{controls:!0,src:bc?bc.makeAssetUrl(O.src):O.src})})}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,gs.jsx)("rect",{width:c,height:n,fill:"transparent",strokeDasharray:O?
"8 2":"undefined"})}))}};yb(hs,"id","video");yb(hs,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var mk=Z(282),Wx=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Xx=class extends xk{constructor(){super(...arguments);yb(this,"aspectRatio",480/853);yb(this,"canChangeAspectRatio",!1);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"onYoutubeLinkChange",
c=>{this.update({url:c,size:Xx.defaultProps.size})});yb(this,"ReactComponent",Be(({events:c,isErasing:n,isEditing:O})=>{const da=$e();return(0,mk.jsx)($k,rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,mk.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:O||da.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},
children:this.embedId?(0,mk.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,mk.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,mk.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,mk.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,mk.jsxs)("g",{children:[(0,mk.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,mk.jsx)("g",{children:(0,mk.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,mk.jsxs)("g",{fill:"#fff",children:[(0,mk.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,mk.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,mk.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:O?"8 2":"undefined"})}));yb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.max(c.size[0],1),c.size[1]=Math.max(c.size[0]*this.aspectRatio,1));return Vk(this,c)})}get embedId(){var c,n;const O=this.props.url,
da=O.match(Wx);return null!=(n=null!=(c=null==da?void 0:da[1])?c:O)?n:""}getShapeSVGJsx(){const c=this.getBounds(),n=this.embedId;return n?(0,mk.jsxs)("g",{children:[(0,mk.jsx)("image",{width:c.width,height:c.height,href:`https://img.youtube.com/vi/${n}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,mk.jsx)("svg",{x:c.width/4,y:c.height/4,width:c.width/2,height:c.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,mk.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Bo=Xx;yb(Bo,"id","youtube");yb(Bo,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});ye([bh],Bo.prototype,"embedId",1);ye([Gg],Bo.prototype,"onYoutubeLinkChange",2);var Jp=Sf(Z(68)),Hm=Z(282),Yx=/https?:\/\/(x|twitter).com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Zx=class extends xk{constructor(){super(...arguments);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"initialHeightCalculated",
!0);yb(this,"getInnerHeight",null);yb(this,"onTwitterLinkChange",c=>{this.update({url:c,size:Zx.defaultProps.size})});yb(this,"ReactComponent",Be(({events:c,isErasing:n,isEditing:O})=>{const {renderers:{Tweet:da}}=Jp.useContext(wi),ra=$e(),Ea=Jp.useRef(null),[,Ka]=this.useComponentSize(Ea);Jp.useEffect(()=>{var fb,ub;const bc=null!=(ub=null==(fb=this.getInnerHeight)?void 0:fb.call(this))?ub:Ka;Ka&&1<Math.abs(bc-this.props.size[1])&&(this.update({size:[this.props.size[0],bc]}),ra.persist())},[Ka]);
Jp.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ra.persist()})},[this.initialHeightCalculated]);return(0,Hm.jsx)($k,rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},c),{children:(0,Hm.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:O||ra.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Hm.jsx)("div",{ref:Ea,children:(0,Hm.jsx)(da,{tweetId:this.embedId})}):null})}))}));
yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,n],isLocked:O}}=this;return(0,Hm.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:O?"8 2":"undefined"})}));yb(this,"onResetBounds",c=>{c=this.getAutoResizeHeight();null!==c&&1<Math.abs(c-this.props.size[1])&&(this.update({size:[this.props.size[0],c]}),this.initialHeightCalculated=!0);return this});yb(this,"onResize",(c,n)=>{var O;const {bounds:da,rotation:ra,scale:[Ea,Ka]}=n;c=[...this.scale];0>Ea&&(c[0]*=-1);0>Ka&&(c[1]*=
-1);n=null!=(O=this.getAutoResizeHeight())?O:da.height;return this.update({point:[da.minX,da.minY],size:[Math.max(1,da.width),Math.max(1,n)],scale:c,rotation:ra})});yb(this,"validateProps",c=>{void 0!==c.size&&(c.size[0]=Math.min(Math.max(c.size[0],300),550),c.size[1]=Math.max(c.size[1],1));return Vk(this,c)})}get embedId(){var c,n;const O=this.props.url,da=O.match(Yx);return null!=(n=null!=(c=null==da?void 0:da[1])?c:O)?n:""}useComponentSize(c,n=""){const [O,da]=Jp.useState([0,0]),ra=$e();Jp.useEffect(()=>
{if(null==c?0:c.current){const Ea=n?c.current.querySelector(n):c.current;if(Ea){const Ka=()=>{const {width:ub,height:bc}=Ea.getBoundingClientRect(),tc=ve.div([ub,bc],ra.viewport.camera.zoom);da(tc);return tc};Ka();this.getInnerHeight=()=>Ka()[1];const fb=new ResizeObserver(()=>{Ka()});fb.observe(Ea);return()=>{fb.disconnect()}}}return()=>{}},[c,n]);return O}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const c=this.getBounds();return this.embedId?(0,Hm.jsxs)("g",
{children:[(0,Hm.jsx)("rect",{width:c.width,height:c.height,fill:"#15202b",rx:8,ry:8}),(0,Hm.jsx)("svg",{x:c.width/4,y:c.height/4,width:c.width/2,height:c.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Hm.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Kp=Zx;yb(Kp,"id","tweet");yb(Kp,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});ye([bh],Kp.prototype,"embedId",1);ye([Gg],Kp.prototype,"onTwitterLinkChange",2);var bu=Sf(Z(68)),cu=Z(282),Wq=class extends xk{constructor(){super(...arguments);yb(this,"frameRef",bu.createRef());yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!0);yb(this,"ReactComponent",
Be(({events:c,asset:n,isErasing:O,isEditing:da})=>{bu.useRef(null);const {handlers:ra}=bu.useContext(wi);$e();const Ea=Sm();return(0,cu.jsx)($k,rg(Ff({style:{overflow:"hidden",pointerEvents:"all",opacity:O?.2:1}},c),{children:n?(0,cu.jsx)("embed",{src:ra?ra.inflateAsset(n.src).url:n.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!Ea&&da?"all":"none"}}):null}))}));yb(this,"ReactIndicator",Be(()=>{const {props:{size:[c,
n],isLocked:O}}=this;return(0,cu.jsx)("rect",{width:c,height:n,fill:"transparent",rx:8,ry:8,strokeDasharray:O?"8 2":"undefined"})}))}};yb(Wq,"id","pdf");yb(Wq,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});Z(282);var $x=[Bp,Cp,yo,es,hs,Fp,Ao,Hp,Ip,Bo,Kp,zo,wn,Wq,Gj,Wt],du=class extends Em{constructor(){super(...arguments);yb(this,"Shape",Bp)}};yb(du,"id","box");yb(du,"shortcut","whiteboard/rectangle");var eu=class extends Em{constructor(){super(...arguments);
yb(this,"Shape",Cp)}};yb(eu,"id","ellipse");yb(eu,"shortcut","whiteboard/ellipse");var fu=class extends Gr{};yb(fu,"id","erase");yb(fu,"shortcut","whiteboard/eraser");var gu=class extends Gq{constructor(){super(...arguments);yb(this,"Shape",yo);yb(this,"simplify",!0);yb(this,"simplifyTolerance",.618)}};yb(gu,"id","highlighter");yb(gu,"shortcut","whiteboard/highlighter");var cl=class extends Hr{constructor(){super(...arguments);yb(this,"Shape",Fp)}};yb(cl,"id","line");yb(cl,"shortcut","whiteboard/connector");
var hu=class extends Gq{constructor(){super(...arguments);yb(this,"Shape",Ao);yb(this,"simplify",!1)}};yb(hu,"id","pencil");yb(hu,"shortcut","whiteboard/pencil");var ay=class extends Em{constructor(){super(...arguments);yb(this,"Shape",Hp)}};yb(ay,"id","polygon");var iu=class extends Ir{constructor(){super(...arguments);yb(this,"Shape",Ip)}};yb(iu,"id","text");yb(iu,"shortcut","whiteboard/text");var ju=class extends Em{constructor(){super(...arguments);yb(this,"Shape",Bo)}};yb(ju,"id","youtube");
var qk=class extends hi{constructor(){super(...arguments);yb(this,"creatingShape");yb(this,"offset",[0,0]);yb(this,"onEnter",()=>{this.app.history.pause();sc(()=>{var c=ve.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(c=ve.snap(c,8));this.creatingShape=c=new Gj({id:Te(),parentId:this.app.currentPage.id,point:c,size:Gj.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(c);this.app.setEditingShape(c);this.app.setSelectedShapes([c])})});
yb(this,"onPointerDown",c=>{switch(c.type){case "shape":if(c.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":c.order||this.app.selectTool("select")}});yb(this,"onExit",()=>{var c;this.creatingShape&&(this.app.history.resume(),(null==(c=this.creatingShape)?0:c.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};yb(qk,"id","creating");var Ok=class extends hi{constructor(){super(...arguments);
yb(this,"cursor","crosshair");yb(this,"onPointerDown",c=>{this.tool.transition("creating")})}};yb(Ok,"id","idle");var Pn=class extends mn{constructor(){super(...arguments);yb(this,"Shape",Gj);yb(this,"onPinch",c=>{this.app.viewport.pinchZoom(c.point,c.delta,c.delta[2])})}};yb(Pn,"id","logseq-portal");yb(Pn,"shortcut","whiteboard/portal");yb(Pn,"states",[Ok,qk]);yb(Pn,"initial","idle");var iv=class extends Em{constructor(){super(...arguments);yb(this,"Shape",wn)}};yb(iv,"id","youtube");var jv=class extends Em{constructor(){super(...arguments);
yb(this,"Shape",zo)}};yb(jv,"id","iframe");var kv=Sf(Z(658)),sl=Z(282),Mo=new Map($x.map(c=>[c.id,c])),tq=class{constructor(c){yb(this,"shapes");yb(this,"pageId");yb(this,"assets");c&&this.load(c)}load(c){var n;const O=null==(n=null==c?void 0:c.pages)?void 0:n[0];this.pageId=null==O?void 0:O.id;this.assets=c.assets;this.shapes=null==O?void 0:O.shapes.map(da=>{var ra=da.type;if(!ra)throw Error("No shape type provided.");const Ea=Mo.get(ra);if(!Ea)throw Error(`Could not find shape class for ${ra}`);
return new Ea(da)}).filter(da=>"group"!==da.type)}generatePreviewJsx(c,n){var O,da;const ra=[...(null!=(O=this.shapes)?O:[]).map(bc=>bc.getRotatedBounds())];(O=null==c?void 0:c.currentView)&&ra.push(O);let Ea=Qe.getCommonBounds(ra);if(!Ea)return null;Ea=Qe.expandBounds(Ea,16);Ea=n?Qe.ensureRatio(Ea,n):Ea;const Ka=bc=>[(bc[0]-Ea.minX).toFixed(2),(bc[1]-Ea.minY).toFixed(2)],[fb,ub]=O?Ka([O.minX,O.minY]):[0,0];return Ea&&(0,sl.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":Ea.minX.toFixed(2),
"data-common-bound-y":Ea.minY.toFixed(2),"data-common-bound-width":Ea.width.toFixed(2),"data-common-bound-height":Ea.height.toFixed(2),viewBox:[0,0,Ea.width,Ea.height].join(" "),children:[(0,sl.jsx)("defs",{children:O&&(0,sl.jsxs)(sl.Fragment,{children:[(0,sl.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${fb}, ${ub})`,width:O.width,height:O.height}),(0,sl.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,sl.jsx)("rect",{width:Ea.width,height:Ea.height,fill:"white"}),(0,sl.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,sl.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(da=this.shapes)?void 0:da.map(bc=>{var tc,Dc;const {bounds:$c,props:{rotation:sd}}=bc,[od,Gd]=Ka([$c.minX,$c.minY]),Rd=+(180*((null!=sd?sd:0)+(null!=(tc=$c.rotation)?tc:0))/Math.PI).toFixed(2),[id,qd]=[($c.width/2).toFixed(2),($c.height/2).toFixed(2)];return(0,sl.jsx)("g",{transform:[`translate(${od}, ${Gd})`,`rotate(${Rd}, ${id}, ${qd})`].join(" "),children:bc.getShapeSVGJsx({assets:null!=
(Dc=this.assets)?Dc:[]})},bc.id)})}),(0,sl.jsx)("rect",{mask:O?`url(#${this.pageId}-camera-mask)`:"",width:Ea.width,height:Ea.height,fill:"transparent"}),O&&(0,sl.jsx)("use",{id:"minimap-camera-rect","data-x":fb,"data-y":ub,"data-width":O.width,"data-height":O.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/c.camera.zoom})]})}exportAsSVG(c){return(c=this.generatePreviewJsx(void 0,c))?kv.default.renderToString(c):""}},eD=Sf(Z(68)),Xq=Z(282),Yq=eD.forwardRef((c,
n)=>{var {value:O,className:da}=c;c=Zi(c,["autoResize","value","className"]);return(0,Xq.jsx)("div",{className:"tl-input"+(da?" "+da:""),children:(0,Xq.jsxs)("div",{className:"tl-input-sizer",children:[(0,Xq.jsx)("div",{className:"tl-input-hidden",children:O}),(0,Xq.jsx)("input",Ff({ref:n,value:O,className:"tl-text-input",type:"text"},c))]})})}),ei=Z(282),Im=({type:c,active:n})=>(0,ei.jsx)("span",{className:"tl-type-tag","data-active":n,children:(0,ei.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[c]}`})}),lv=(c,n)=>(0,ei.jsx)("span",{children:c.split(new RegExp(`(${n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((O,da)=>1===da%2?(0,ei.jsx)("mark",{className:"tl-highlighted",children:O}):O).map((O,da)=>(0,ei.jsx)(lk.default.Fragment,{children:O},da))}),tr=(c,n)=>{const {handlers:O}=lk.default.useContext(wi),[da,ra]=lk.default.useState(null),Ea=ge(c,200);lk.default.useEffect(()=>
{let Ka=!1;if(0<Ea.length){const fb={"pages?":!0,"blocks?":!0,"files?":!1};"B"===n?fb["pages?"]=!1:"P"===n&&(fb["blocks?"]=!1);O.search(Ea,fb).then(ub=>{Ka||ra(ub)})}else ra(null);return()=>{Ka=!0}},[Ea,null==O?void 0:O.search]);return da},Vs=Be(({className:c,style:n,placeholder:O,onChange:da,onBlur:ra,onAddBlock:Ea})=>{const [Ka,fb]=lk.default.useState(Gj.defaultSearchQuery),[ub,bc]=lk.default.useState(Gj.defaultSearchFilter),tc=lk.default.useRef(null),{handlers:Dc,renderers:$c}=lk.default.useContext(wi),
sd=Dc.t,od=lk.default.useCallback((kf,Vf)=>{var Lg;console.log({id:kf,isPage:Vf});setTimeout(()=>da(kf,Vf));null==(Lg=tc.current)?void 0:Lg.blur();kf&&(Gj.defaultSearchQuery="",Gj.defaultSearchFilter=null)},[]),Gd=lk.default.useCallback(kf=>ci(void 0,null,function*(){const Vf=yield null==Dc?void 0:Dc.addNewBlock(kf);Vf&&(od(Vf),null==Ea?void 0:Ea(Vf));return Vf}),[Ea]),Rd=lk.default.useRef(null),[id,qd]=lk.default.useState(0),xd=tr(Ka,ub),[Sd,Id]=lk.default.useState("circle-plus"),[Ve,We]=lk.default.useState(!1);
lk.default.useEffect(()=>{setTimeout(()=>{var kf;null==(kf=tc.current)?void 0:kf.focus()})},[ub]);lk.default.useEffect(()=>{Gj.defaultSearchQuery=Ka;Gj.defaultSearchFilter=ub},[Ka,ub]);const ig=lk.default.useMemo(()=>{var kf;const Vf=[];if(null==$c||!$c.Breadcrumb||!Dc)return[];Ea&&Vf.push({actionIcon:"circle-plus",onChosen:()=>!!Gd(Ka),element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{active:!0,type:"BA"}),0<Ka.length?(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)("strong",
{children:sd("whiteboard/new-block")}),Ka]}):(0,ei.jsx)("strong",{children:sd("whiteboard/new-block-no-colon")})]})});(null==(kf=null==xd?void 0:xd.pages)?0:kf.some(Lg=>Lg.title.toLowerCase()===Ka.toLowerCase()))||!Ka||Vf.push({actionIcon:"circle-plus",onChosen:()=>ci(void 0,null,function*(){let Lg=yield null==Dc?void 0:Dc.addNewPage(Ka);od(Lg,!0);return!0}),element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{active:!0,type:"PA"}),(0,ei.jsx)("strong",{children:sd("whiteboard/new-page")}),
Ka]})},{actionIcon:"circle-plus",onChosen:()=>ci(void 0,null,function*(){let Lg=yield null==Dc?void 0:Dc.addNewWhiteboard(Ka);od(Lg,!0);return!0}),element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{active:!0,type:"WA"}),(0,ei.jsx)("strong",{children:sd("whiteboard/new-whiteboard")}),Ka]})});0===Ka.length&&null===ub&&Vf.push({actionIcon:"search",onChosen:()=>{bc("B");return!0},element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,
{type:"BS"}),sd("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{bc("P");return!0},element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{type:"PS"}),sd("whiteboard/search-only-pages")]})});ub&&"P"!==ub||!xd||!xd.pages||Vf.push(...xd.pages.map(Lg=>({actionIcon:"search",onChosen:()=>{od(Lg.id,!0);return!0},element:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{type:Dc.isWhiteboardPage(Lg.id)?"WP":"P"}),lv(Lg.title,
Ka)]})})));ub&&"B"!==ub||!xd||!xd.blocks||Vf.push(...xd.blocks.filter(Lg=>Lg.title&&Lg.uuid).map(({title:Lg,uuid:dh})=>{const Ig=Dc.queryBlockByUUID(dh);return{actionIcon:"search",onChosen:()=>{var eh,Df,Kf;return Ig?(od(dh),null==(Kf=null==(Df=null==(eh=window.logseq)?void 0:eh.api)?void 0:Df.set_blocks_id)?void 0:Kf.call(Df,[dh]),!0):!1},element:(0,ei.jsx)(ei.Fragment,{children:(0,ei.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ei.jsx)(Im,{type:"B"}),lv(Lg,Ka)]})})}}));return Vf},
[Ka,ub,xd,null==$c?void 0:$c.Breadcrumb,Dc]);lk.default.useEffect(()=>{const kf=Vf=>{var Lg,dh;let Ig=id;"ArrowDown"===Vf.key?Ig=Math.min(ig.length-1,id+1):"ArrowUp"===Vf.key?Ig=Math.max(0,id-1):"Enter"===Vf.key?(null==(Lg=ig[id])?void 0:Lg.onChosen(),Vf.stopPropagation(),Vf.preventDefault()):"Backspace"===Vf.key&&0===Ka.length?bc(null):"Escape"===Vf.key&&od("");Ig!==id&&(Lg=ig[Ig],qd(Ig),Id(Lg.actionIcon),Vf.stopPropagation(),Vf.preventDefault(),(Vf=null==(dh=Rd.current)?void 0:dh.querySelector(".tl-quick-search-option:nth-child("+
(Ig+1)+")"))&&(null==Vf?void 0:Vf.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",kf,!0);return()=>{document.removeEventListener("keydown",kf,!0)}},[ig,id,Ka]);return(0,ei.jsxs)("div",{className:"tl-quick-search "+(null!=c?c:""),style:n,children:[(0,ei.jsx)(qB,{icon:Sd,onClick:()=>{var kf;null==(kf=ig[id])?void 0:kf.onChosen()}}),(0,ei.jsxs)("div",{className:"tl-quick-search-input-container",children:[ub&&(0,ei.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ei.jsx)(Im,
{type:ub}),"B"===ub?"Search blocks":"Search pages",(0,ei.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>bc(null),children:(0,ei.jsx)(ih,{name:"x"})})]}),(0,ei.jsx)(Yq,{ref:tc,type:"text",value:Ka,className:"tl-quick-search-input",placeholder:null!=O?O:"Create or search your graph...",onChange:kf=>fb(kf.target.value),onKeyDown:kf=>{"Enter"===kf.key&&od(Ka);kf.stopPropagation()},onFocus:()=>{We(!0)},onBlur:()=>{We(!1);null==ra?void 0:ra()}})]}),0<ig.length&&(0,ei.jsx)("div",
{onWheelCapture:kf=>kf.stopPropagation(),className:"tl-quick-search-options",ref:Rd,style:{visibility:Ve?"visible":"hidden",pointerEvents:Ve?"all":"none"},children:(0,ei.jsx)(oC,{style:{height:40*Math.min(Math.max(1,ig.length),12)},totalCount:ig.length,itemContent:kf=>{const {actionIcon:Vf,onChosen:Lg,element:dh}=ig[kf];return(0,ei.jsx)("div",{"data-focused":kf===id,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Id(Vf);qd(kf)},onPointerDownCapture:Ig=>{Lg()&&(Ig.stopPropagation(),
Ig.preventDefault())},children:dh},kf)}})})]})}),Xi=Z(282),fD=Be(function(c){var {pageId:n,portalType:O,refs:da,side:ra,onRefsChange:Ea}=c;c=Zi(c,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:Ka}}=xx.default.useContext(wi),fb=da.length+(n?1:0),ub=0===da.length,bc=Dc=>{Dc&&!da.includes(Dc)&&ub&&Ea([...da,Dc])},tc=!(!n||!O);return(0,Xi.jsx)(ij,rg(Ff({},c),{side:ra,align:"start",alignOffset:-6,label:(0,Xi.jsx)(Wg,{content:Ka("whiteboard/link"),sideOffset:14,children:(0,Xi.jsxs)("div",
{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Xi.jsx)(ih,{name:0<fb?"link":"add-link"}),0<fb&&(0,Xi.jsx)("div",{className:"tl-shape-links-count",children:fb})]})}),children:(0,Xi.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":tc,children:[tc&&(0,Xi.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(ih,{className:"opacity-50",name:"internal-link"}),
Ka("whiteboard/references")]}),(0,Xi.jsx)(vl,{type:O,id:n})]}),(0,Xi.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Xi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Xi.jsx)(ih,{className:"opacity-50",name:"add-link"}),Ka("whiteboard/link-to-any-page-or-block")]}),ub&&(0,Xi.jsx)(Vs,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:Ka("whiteboard/start-typing-to-search"),onChange:bc}),0<da.length&&(0,Xi.jsx)("div",{className:"flex flex-col items-stretch gap-2",
children:da.map((Dc,$c)=>(0,Xi.jsx)(vl,{id:Dc,type:qg(Dc)?"B":"P",onRemove:()=>{Ea(da.filter((sd,od)=>$c!==od))},showContent:!0},Dc))})]})]})}))}),yn=Z(282),is=window.LSUI,ri=Z(282),js="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),nj=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],oj=new Map,rj={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing",
"Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle",
"Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},Co=Object.entries(rj).filter(([,c])=>c.includes("NoFill")&&c.includes("Swatch")).map(([c])=>c),nk=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("AutoResizing"),da=O.every(ra=>ra.props.isAutoResizing);return(0,ri.jsx)(Cg,{tooltip:n("whiteboard/auto-resize"),toggle:O.every(ra=>"logseq-portal"===ra.props.type),className:"tl-button",pressed:da,
onPressedChange:ra=>{O.forEach(Ea=>{if("logseq-portal"===Ea.props.type)Ea.update({isAutoResizing:ra});else Ea.onResetBounds({zoom:c.viewport.camera.zoom})});c.persist()},children:(0,ri.jsx)(ih,{name:"dimensions"})})}),dl=Be(()=>{const c=$e();var {handlers:{t:n}}=ck.default.useContext(wi);const O=tk("LogseqPortalViewMode"),da=O.every(ra=>ra.collapsed);if(!da&&!O.every(ra=>!ra.collapsed))return null;n=(0,ri.jsxs)("div",{className:"flex",children:[da?n("whiteboard/expand"):n("whiteboard/collapse"),(0,ri.jsx)(ak,
{action:da?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,ri.jsx)(Cg,{tooltip:n,toggle:O.every(ra=>"logseq-portal"===ra.props.type),className:"tl-button",pressed:da,onPressedChange:()=>c.api.setCollapsed(!da),children:(0,ri.jsx)(ih,{name:da?"object-expanded":"object-compact"})})}),xi=Be(()=>{const {handlers:{isMobile:c}}=ck.default.useContext(wi);var n=tk("ScaleLevel");n=1<(new Set(n.map(O=>O.scaleLevel))).size?"":n[0].scaleLevel;return(0,ri.jsx)(Ti,{scaleLevel:n,compact:c()})}),
by=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("IFrameSource")[0],da=ck.default.useCallback(Ea=>{O.onIFrameSourceChange(Ea.target.value.trim().toLowerCase());c.persist()},[]),ra=ck.default.useCallback(()=>{O.reload()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",children:[(0,ri.jsx)(oh,{tooltip:n("whiteboard/reload"),type:"button",onClick:ra,children:(0,ri.jsx)(ih,{name:"refresh"})}),(0,ri.jsx)(Yq,{title:n("whiteboard/website-url"),className:"tl-iframe-src",value:`${O.props.url}`,
onChange:da}),(0,ri.jsx)(oh,{tooltip:n("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(O.props.url),children:(0,ri.jsx)(ih,{name:"external-link"})})]})}),ks=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("YoutubeLink")[0],da=ck.default.useCallback(ra=>{O.onYoutubeLinkChange(ra.target.value);c.persist()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",children:[(0,ri.jsx)(Yq,{title:n("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${O.props.url}`,
onChange:da}),(0,ri.jsx)(oh,{tooltip:n("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ra,Ea,Ka;return null==(Ka=null==(Ea=null==(ra=window.logseq)?void 0:ra.api)?void 0:Ea.open_external_link)?void 0:Ka.call(Ea,O.props.url)},children:(0,ri.jsx)(ih,{name:"external-link"})})]})}),ls=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("TwitterLink")[0],da=ck.default.useCallback(ra=>{O.onTwitterLinkChange(ra.target.value);c.persist()},[]);return(0,ri.jsxs)("span",{className:"flex gap-3",
children:[(0,ri.jsx)(Yq,{title:n("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${O.props.url}`,onChange:da}),(0,ri.jsx)(oh,{tooltip:n("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var ra,Ea,Ka;return null==(Ka=null==(Ea=null==(ra=window.logseq)?void 0:ra.api)?void 0:Ea.open_external_link)?void 0:Ka.call(Ea,O.props.url)},children:(0,ri.jsx)(ih,{name:"external-link"})})]})}),ku=Be(()=>{const c=$e(),{handlers:{t:n,setCurrentPdf:O}}=ck.default.useContext(wi),da=c.selectedShapesArray[0];
return(0,ri.jsx)(oh,{tooltip:n("whiteboard/edit-pdf"),type:"button",onClick:()=>O(c.assets[da.props.assetId].src),children:(0,ri.jsx)(ih,{name:"edit"})})}),cy=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi);var O=tk("NoFill");const da=ck.default.useCallback(ra=>{c.selectedShapesArray.forEach(Ea=>Ea.update({noFill:ra}));c.persist()},[]);O=O.every(ra=>ra.props.noFill);return(0,ri.jsx)(Cg,{tooltip:n("whiteboard/fill"),className:"tl-button",pressed:O,onPressedChange:da,children:(0,ri.jsx)(ih,
{name:O?"droplet-off":"droplet"})})}),lu=Be(()=>{const c=$e(),n=tk("Swatch"),O=ck.default.useCallback(ra=>{c.selectedShapesArray.forEach(Ea=>{Ea.update({fill:ra,stroke:ra})});c.persist()},[]),da=ck.default.useCallback(ra=>{c.selectedShapesArray.forEach(Ea=>{Ea.update({opacity:ra})});c.persist()},[]);return(0,ri.jsx)(zf,{popoverSide:"top",color:n[0].props.noFill?n[0].props.stroke:n[0].props.fill,opacity:n[0].props.opacity,setOpacity:da,setColor:O})}),yi=Be(()=>{const c=$e(),n=ck.default.useCallback(O=>
{c.api.convertShapes(O.currentTarget.dataset.tool)},[]);return(0,ri.jsx)(ux,{popoverSide:"top",chevron:!1,setGeometry:n})}),mu=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("StrokeType"),da=O.every(ra=>"dashed"===ra.props.strokeType)?"dashed":O.every(ra=>"line"===ra.props.strokeType)?"line":"mixed";return(0,ri.jsx)(Bk,{title:n("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:da,onValueChange:ra=>
{O.forEach(Ea=>{Ea.update({strokeType:ra})});c.persist()}})}),nu=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("ArrowMode");var da=O.every(Ea=>{var Ka;return"arrow"===(null==(Ka=Ea.props.decorations)?void 0:Ka.start)});const ra=O.every(Ea=>{var Ka;return"arrow"===(null==(Ka=Ea.props.decorations)?void 0:Ka.end)});da=[da?"start":null,ra?"end":null].filter(Qc);return(0,ri.jsx)(vi,{title:n("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],
value:da,onValueChange:Ea=>{O.forEach(Ka=>{var fb=Ka.update;var ub={start:Ea.includes("start")?"arrow":null,end:Ea.includes("end")?"arrow":null};fb.call(Ka,{decorations:ub})});c.persist()}})}),ou=Be(()=>{const c=$e(),{handlers:{t:n}}=ck.default.useContext(wi),O=tk("TextStyle"),da=O.every(Ea=>500<Ea.props.fontWeight),ra=O.every(Ea=>Ea.props.italic);return(0,ri.jsxs)("span",{className:"flex gap-1",children:[(0,ri.jsx)(Cg,{tooltip:n("whiteboard/bold"),className:"tl-button",pressed:da,onPressedChange:Ea=>
{O.forEach(Ka=>{Ka.update({fontWeight:Ea?700:400});Ka.onResetBounds()});c.persist()},children:(0,ri.jsx)(ih,{name:"bold"})}),(0,ri.jsx)(Cg,{tooltip:n("whiteboard/italic"),className:"tl-button",pressed:ra,onPressedChange:Ea=>{O.forEach(Ka=>{Ka.update({italic:Ea});Ka.onResetBounds()});c.persist()},children:(0,ri.jsx)(ih,{name:"italic"})})]})}),Lp=Be(()=>{var c;const n=$e(),O=n.selectedShapesArray[0];return(0,ri.jsx)(fD,{onRefsChange:da=>{O.update({refs:da});n.persist()},refs:null!=(c=O.props.refs)?
c:[],shapeType:O.props.type,side:"right",pageId:"logseq-portal"===O.props.type?O.props.pageId:void 0,portalType:"logseq-portal"===O.props.type?O.props.blockType:void 0})});oj.set("Geometry",yi);oj.set("AutoResizing",nk);oj.set("LogseqPortalViewMode",dl);oj.set("ScaleLevel",xi);oj.set("YoutubeLink",ks);oj.set("TwitterLink",ls);oj.set("IFrameSource",by);oj.set("NoFill",cy);oj.set("Swatch",lu);oj.set("StrokeType",mu);oj.set("ArrowMode",nu);oj.set("TextStyle",ou);oj.set("Links",Lp);oj.set("EditPdf",ku);
var pu=c=>{var n;return(null!=(n=rj[c])?n:[]).filter(Qc)},Do=c=>{const n=c.map(da=>da.props.type),O=new Set(0<c.length?pu(n[0]):[]);for(let da=1;da<n.length&&0<O.size;da++){const ra=pu(n[da]);O.forEach(Ea=>{ra.includes(Ea)||O.delete(Ea)})}1<c.length&&nj.forEach(da=>{O.has(da)&&O.delete(da)});return Array.from(O).sort((da,ra)=>js.indexOf(da)-js.indexOf(ra)).map(da=>oj.get(da))},Zq=Z(282),ms=window.LSUI,ns=Be(({shapes:c,offsets:n,hidden:O})=>{const da=$e(),ra=Oq.useRef(null),Ea=Oq.useRef(null);Oq.useLayoutEffect(()=>
{setTimeout(()=>{const fb=Ea.current;if(fb){var {offsetWidth:ub,offsetHeight:bc}=fb;ra.current=[ub,bc]}})});Oq.useLayoutEffect(()=>{var fb;const ub=Ea.current;if(ub){var bc=null!=(fb=ra.current)?fb:[0,0];fb=0;if(116>n.top){var tc=n.height/2+40;140>n.bottom&&(tc+=n.bottom-140)}else tc=-(n.height/2+40);16>n.left+n.width/2-bc[0]/2?fb+=-(n.left+n.width/2-bc[0]/2-16):16>n.right+n.width/2-bc[0]/2&&(fb+=n.right+n.width/2-bc[0]/2-16);var [Dc,$c]=[fb,tc];ub.style.transform=`translateX(${Dc}px) translateY(${$c}px)`}},
[n]);if(!da)return null;const Ka=Do(c);return(0,Zq.jsx)($k,{centered:!0,children:0<Ka.length&&(0,Zq.jsx)("div",{ref:Ea,className:"tl-toolbar tl-context-bar",style:{visibility:O?"hidden":"visible",pointerEvents:O?"none":"all"},children:Ka.map((fb,ub)=>(0,Zq.jsxs)(Oq.Fragment,{children:[(0,Zq.jsx)(fb,{}),ub<Ka.length-1&&(0,Zq.jsx)(ms.Separator,{className:"tl-toolbar-separator",orientation:"vertical"})]},ub))})})}),$q=Sf(Z(68)),Tf=Z(282),ti=window.LSUI,ar=Be(function({children:c,collisionRef:n}){var O,
da,ra,Ea,Ka,fb,ub,bc,tc,Dc,$c,sd,od,Gd,Rd,id,qd;const xd=$e(),{handlers:Sd}=$q.useContext(wi),Id=Sd.t,Ve=$q.useRef(null),We=kf=>{kf();xd.transition("select")},ig=$q.useMemo(()=>kc(),[]);return(0,Tf.jsxs)(ti.ContextMenu,{onOpenChange:kf=>{kf&&!xd.isIn("select.contextMenu")?xd.transition("select").selectedTool.transition("contextMenu"):!kf&&xd.isIn("select.contextMenu")&&xd.selectedTool.transition("idle")},children:[(0,Tf.jsx)(ti.ContextMenuTrigger,{disabled:xd.editingShape&&0!==Object.keys(xd.editingShape).length,
children:c}),(0,Tf.jsx)(ti.ContextMenuContent,{className:"tl-menu tl-context-menu",ref:Ve,onEscapeKeyDown:()=>xd.transition("select"),collisionBoundary:n.current,asChild:!0,tabIndex:-1,children:(0,Tf.jsxs)("div",{children:[1<(null==(O=xd.selectedShapes)?void 0:O.size)&&!xd.readOnly&&(null==(da=xd.selectedShapesArray)?void 0:da.some(kf=>!kf.props.isLocked))&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-button-row-wrap",children:[(0,Tf.jsxs)("div",{className:"tl-menu-button-row pb-0",
children:[(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-left"),onClick:()=>We(()=>xd.align("left")),children:(0,Tf.jsx)(ih,{name:"layout-align-left"})}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-center-horizontally"),onClick:()=>We(()=>xd.align("centerHorizontal")),children:(0,Tf.jsx)(ih,{name:"layout-align-center"})}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-right"),onClick:()=>We(()=>xd.align("right")),children:(0,Tf.jsx)(ih,{name:"layout-align-right"})}),(0,Tf.jsx)(ti.Separator,{className:"tl-toolbar-separator",
orientation:"vertical"}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/distribute-horizontally"),onClick:()=>We(()=>xd.distribute("horizontal")),children:(0,Tf.jsx)(ih,{name:"layout-distribute-vertical"})})]}),(0,Tf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-top"),onClick:()=>We(()=>xd.align("top")),children:(0,Tf.jsx)(ih,{name:"layout-align-top"})}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-center-vertically"),onClick:()=>We(()=>xd.align("centerVertical")),
children:(0,Tf.jsx)(ih,{name:"layout-align-middle"})}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/align-bottom"),onClick:()=>We(()=>xd.align("bottom")),children:(0,Tf.jsx)(ih,{name:"layout-align-bottom"})}),(0,Tf.jsx)(ti.Separator,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Tf.jsx)(oh,{tooltip:Id("whiteboard/distribute-vertically"),onClick:()=>We(()=>xd.distribute("vertical")),children:(0,Tf.jsx)(ih,{name:"layout-distribute-horizontal"})})]})]}),(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"}),
(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.packIntoRectangle),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"layout-grid"}),Id("whiteboard/pack-into-rectangle")]}),(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"})]}),0<(null==(ra=xd.selectedShapes)?void 0:ra.size)&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.api.zoomToSelection),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",
name:"circle-dotted"}),Id("whiteboard/zoom-to-fit"),(0,Tf.jsx)(ak,{action:"whiteboard/zoom-to-fit"})]}),(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"})]}),(xd.selectedShapesArray.some(kf=>"group"===kf.type||xd.getParentGroup(kf))||1<xd.selectedShapesArray.length)&&(null==(Ea=xd.selectedShapesArray)?void 0:Ea.some(kf=>!kf.props.isLocked))&&!xd.readOnly&&(0,Tf.jsxs)(Tf.Fragment,{children:[xd.selectedShapesArray.some(kf=>"group"===kf.type||xd.getParentGroup(kf))&&(0,Tf.jsxs)(ti.ContextMenuItem,
{className:"tl-menu-item",onClick:()=>We(xd.api.unGroup),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"ungroup"}),Id("whiteboard/ungroup"),(0,Tf.jsx)(ak,{action:"whiteboard/ungroup"})]}),1<xd.selectedShapesArray.length&&(null==(Ka=xd.selectedShapesArray)?void 0:Ka.some(kf=>!kf.props.isLocked))&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.api.doGroup),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"group"}),Id("whiteboard/group"),(0,Tf.jsx)(ak,{action:"whiteboard/group"})]}),
(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"})]}),0<(null==(fb=xd.selectedShapes)?void 0:fb.size)&&(null==(ub=xd.selectedShapesArray)?void 0:ub.some(kf=>!kf.props.isLocked))&&(0,Tf.jsxs)(Tf.Fragment,{children:[!xd.readOnly&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.cut),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"cut"}),Id("whiteboard/cut")]}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.copy),children:[(0,Tf.jsx)(ih,
{className:"tl-menu-icon",name:"copy"}),Id("whiteboard/copy"),(0,Tf.jsx)(ak,{action:"editor/copy"})]})]}),!xd.readOnly&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.paste),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"clipboard"}),Id("whiteboard/paste"),(0,Tf.jsx)(ak,{shortcut:`${vw}+v`})]}),1===(null==(bc=xd.selectedShapes)?void 0:bc.size)&&!xd.readOnly&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(()=>xd.paste(void 0,!0)),children:[(0,Tf.jsx)(ih,
{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/paste-as-link"),(0,Tf.jsx)(ak,{shortcut:`${vw}+\u21E7+v`})]}),0<(null==(tc=xd.selectedShapes)?void 0:tc.size)&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(()=>{var kf,Vf;return Sd.exportToImage(xd.currentPageId,{x:xd.selectionBounds.minX+xd.viewport.camera.point[0]-8,y:xd.selectionBounds.minY+xd.viewport.camera.point[1]-
8,width:(null==(kf=xd.selectionBounds)?void 0:kf.width)+16,height:(null==(Vf=xd.selectionBounds)?void 0:Vf.height)+16,zoom:xd.viewport.camera.zoom})}),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"file-export"}),Id("whiteboard/export"),(0,Tf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Tf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.api.selectAll),
children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/select-all"),(0,Tf.jsx)(ak,{action:"editor/select-parent"})]}),1<(null==(Dc=xd.selectedShapes)?void 0:Dc.size)&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.api.deselectAll),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/deselect-all")]}),!xd.readOnly&&0<(null==($c=xd.selectedShapes)?void 0:$c.size)&&(null==(sd=xd.selectedShapesArray)?void 0:
sd.some(kf=>!kf.props.isLocked))&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(()=>xd.setLocked(!0)),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"lock"}),Id("whiteboard/lock"),(0,Tf.jsx)(ak,{action:"whiteboard/lock"})]}),!xd.readOnly&&0<(null==(od=xd.selectedShapes)?void 0:od.size)&&(null==(Gd=xd.selectedShapesArray)?void 0:Gd.some(kf=>kf.props.isLocked))&&(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(()=>xd.setLocked(!1)),children:[(0,Tf.jsx)(ih,
{className:"tl-menu-icon",name:"lock-open"}),Id("whiteboard/unlock"),(0,Tf.jsx)(ak,{action:"whiteboard/unlock"})]}),0<(null==(Rd=xd.selectedShapes)?void 0:Rd.size)&&!xd.readOnly&&(null==(id=xd.selectedShapesArray)?void 0:id.some(kf=>!kf.props.isLocked))&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.api.deleteShapes),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"backspace"}),Id("whiteboard/delete"),(0,Tf.jsx)(ak,{action:"editor/delete"})]}),
1<(null==(qd=xd.selectedShapes)?void 0:qd.size)&&!xd.readOnly&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.flipHorizontal),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"flip-horizontal"}),Id("whiteboard/flip-horizontally")]}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.flipVertical),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",
name:"flip-vertical"}),Id("whiteboard/flip-vertically")]})]}),!xd.readOnly&&(0,Tf.jsxs)(Tf.Fragment,{children:[(0,Tf.jsx)(ti.ContextMenuSeparator,{className:"menu-separator"}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.bringToFront),children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/move-to-front"),(0,Tf.jsx)(ak,{action:"whiteboard/bring-to-front"})]}),(0,Tf.jsxs)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>We(xd.sendToBack),
children:[(0,Tf.jsx)(ih,{className:"tl-menu-icon",name:"circle-dotted"}),Id("whiteboard/move-to-back"),(0,Tf.jsx)(ak,{action:"whiteboard/send-to-back"})]})]}),ig&&(0,Tf.jsx)(ti.ContextMenuItem,{className:"tl-menu-item",onClick:()=>{1===xd.selectedShapesArray.length?console.log(Ab(xd.selectedShapesArray[0].serialized)):console.log(xd.selectedShapesArray.map(kf=>Ab(kf.serialized)))},children:Id("whiteboard/dev-print-shape-props")})]})]})})]})}),qu=Sf(Z(68)),os=Z(282),gD=Be(({shape:c})=>{const n=$e();
var {handlers:O}=qu.default.useContext(wi);O=O.t;const da=qu.default.useMemo(()=>{var ra;const Ea=[...(null!=(ra=c.props.refs)?ra:[])].map(Ka=>[Ka,!0]);"logseq-portal"===c.props.type&&c.props.pageId&&Ea.unshift([c.props.pageId,!1]);return Ea.filter(Ka=>Ka[0].toLowerCase()!==n.currentPage.id&&Ka[0]!==c.props.pageId)},[c.props.id,c.props.type,c.props.parentId,c.props.refs]);return 0===da.length?null:(0,os.jsx)("div",{className:"tl-quick-links",title:O("whiteboard/shape-quick-links"),children:da.map(([ra,
Ea])=>(0,os.jsx)("div",{className:"tl-quick-links-row",children:(0,os.jsx)(yx,{id:ra,showReferenceContent:Ea})},ra))})}),Mp=Sf(Z(68)),Np=Sf(Z(68)),ps={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},qs=(c,n,O)=>ci(void 0,[c,n,O],function*(da,{point:ra,shiftKey:Ea,dataTransfer:Ka,fromDrop:fb},ub){function bc(Af,ag){return ci(this,null,function*(){const fh=Object.values(da.assets).find(Ih=>Ih.src===Af);return fh?fh:{id:Te(),type:ag,src:Af,size:yield Oh(ub.makeAssetUrl(Af),
ag)}})}function tc(Af){return ci(this,null,function*(){const ag=Af.filter(fh=>"unknown"!==wq(fh.name)).map(fh=>ci(this,null,function*(){try{const Ih=yield ub.saveAsset(fh);return yield bc(Ih,wq(fh.name))}catch(Ih){console.error(Ih)}return null}));return(yield Promise.all(ag)).filter(Qc)})}function Dc(Af){return[rg(Ff({},wn.defaultProps),{html:Af,point:[ra[0],ra[1]]})]}function $c(Af){return ci(this,null,function*(){return Xk(od,Gd,qd,id,xd,Rd,ig)(Af)})}function sd(){return ci(this,null,function*(){const Af=
yield navigator.clipboard.read(),ag=Xk(xd,Rd,ig);return(yield Promise.all(Af.map(fh=>ag(fh)))).flat().filter(Qc)})}function od(Af){return ci(this,null,function*(){var ag=Af.getData("file");if(!ag)return null;const fh=yield bc(ag,"pdf");da.addAssets([fh]);ag=rg(Ff({},Wq.defaultProps),{id:Te(),assetId:fh.id,url:ag,opacity:1});fh.size&&Object.assign(ag,{point:[ra[0]-fh.size[0]/4+16,ra[1]-fh.size[1]/4+16],size:ve.div(fh.size,2)});return[ag]})}function Gd(Af){return ci(this,null,function*(){var ag=Array.from(Af.files);
return 0<ag.length?(Lg=ag=yield tc(ag),ag.map((fh,Ih)=>{switch(fh.type){case "video":var Wi=hs.defaultProps;break;case "image":Wi=es.defaultProps;break;case "pdf":Wi=Wq.defaultProps;break;default:return null}Wi=rg(Ff({},Wi),{id:Te(),assetId:fh.id,opacity:1});fh.size&&Object.assign(Wi,{point:[ra[0]-fh.size[0]/4+16*Ih,ra[1]-fh.size[1]/4+16*Ih],size:ve.div(fh.size,2)});return Wi})):null})}function Rd(Af){return ci(this,null,function*(){if(Af.types.includes("text/plain")&&(Ea||fb))return null;const ag=
yield Bm(Af,"text/html");return ag?Xk(Sd,Dc)(ag):null})}function id(Af){return ci(this,null,function*(){var ag,fh,Ih,Wi,ii,Zg,Ki=Af.getData("block-uuid");if(Ki){Ki=Ki.trim();const Oi=null==(Ih=null==(fh=null==(ag=window.logseq)?void 0:ag.api)?void 0:fh.get_selected_blocks)?void 0:Ih.call(fh);ag=Oi&&1<(null==Oi?void 0:Oi.length)?Oi.map(cj=>cj.uuid):[Ki];null==(Zg=null==(ii=null==(Wi=window.logseq)?void 0:Wi.api)?void 0:ii.set_blocks_id)?void 0:Zg.call(ii,ag);Wi=ag.map(cj=>We(`((${cj}))`));return(yield Promise.all(Wi)).flat().filter(Qc).map((cj,
Pk)=>rg(Ff({},cj),{point:[ra[0]+(Gj.defaultProps.size[0]+16)*Pk,ra[1]]}))}return null})}function qd(Af){return ci(this,null,function*(){var ag=Af.getData("page-name");return ag?(ag=ag.trim(),We(`[[${ag}]]`)):null})}function xd(Af){return ci(this,null,function*(){var ag=yield Bm(Af,"text/plain");return ag?(ag=ag.trim(),Xk(Id,Ve)(ag)):null})}function Sd(Af){if(Af=da.api.getClonedShapesFromTldrString(decodeURIComponent(Af),ra)){const {shapes:ag,assets:fh,bindings:Ih}=Af;dh.push(...fh);Ig.push(...Ih);
return ag}return null}function Id(Af){return ci(this,null,function*(){try{const fh=new URL(Af);var ag=fh.host&&["http:","https:"].includes(fh.protocol)}catch(fh){ag=!1}return ag&&!Ea?Wx.test(Af)?[rg(Ff({},Bo.defaultProps),{url:Af,point:[ra[0],ra[1]]})]:Yx.test(Af)?[rg(Ff({},Kp.defaultProps),{url:Af,point:[ra[0],ra[1]]})]:[rg(Ff({},zo.defaultProps),{url:Af,point:[ra[0],ra[1]]})]:null})}function Ve(Af){return Af.startsWith("\x3ciframe")?[rg(Ff({},wn.defaultProps),{html:Af,point:[ra[0],ra[1]]})]:null}
function We(Af){return ci(this,null,function*(){if(/^\(\(.*\)\)$/.test(Af)&&40===Af.length){var ag=Af.slice(2,-2);if(qg(ag))return[rg(Ff({},Gj.defaultProps),{point:[ra[0],ra[1]],size:[400,0],pageId:ag,fill:da.settings.color,stroke:da.settings.color,scaleLevel:da.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(Af))return ag=Af.slice(2,-2),[rg(Ff({},Gj.defaultProps),{point:[ra[0],ra[1]],size:[400,0],pageId:ag,fill:da.settings.color,stroke:da.settings.color,scaleLevel:da.settings.scaleLevel,
blockType:"P"})];return null})}function ig(Af){return ci(this,null,function*(){var ag=yield Bm(Af,"text/plain");return ag&&(ag=ag.trim(),ag=yield null==ub?void 0:ub.addNewBlock(ag))?[rg(Ff({},Gj.defaultProps),{size:[400,0],point:[ra[0],ra[1]],pageId:ag,fill:da.settings.color,stroke:da.settings.color,scaleLevel:da.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var kf,Vf;let Lg=[],dh=[];const Ig=[];da.cursors.setCursor("progress");let eh=[];try{Ka?eh.push(...(null!=(kf=yield $c(Ka))?kf:[])):
eh.push(...(null!=(Vf=yield sd())?Vf:[]))}catch(Af){console.error(Af)}const Df=eh.map(Af=>rg(Ff({},Af),{parentId:da.currentPageId,isLocked:!1,id:qg(Af.id)?Af.id:Te()})),Kf=null==Ka?void 0:Ka.types.every(Af=>"Files"===Af);da.wrapUpdate(()=>{var Af=[...Lg,...dh];0<Af.length&&da.createAssets(Af);0<Df.length&&da.createShapes(Df);da.currentPage.updateBindings(Object.fromEntries(Ig.map(ag=>[ag.id,ag])));if(1===da.selectedShapesArray.length&&1===Df.length&&fb){Af=da.selectedShapesArray[0];const ag=da.getShapeById(Df[0].id);
da.createNewLineBinding(Af,ag)}da.setSelectedShapes(Df.map(ag=>ag.id));da.selectedTool.transition("idle");da.cursors.setCursor("default");(fb||Kf)&&da.packIntoRectangle()})}),ru=Sf(Z(68)),rs=Sf(Z(68)),Jm=Z(282),su=[du,eu,ay,fu,gu,cl,hu,iu,ju,jv,iv,Pn],hD=c=>{const {renderers:n}=vp.useContext(wi);return(0,Jm.jsx)(n.BacklinksCount,rg(Ff({},c),{options:{"portal?":!1}}))},dy=()=>{const c=vp.useRef(null),n=$e(),O=vp.useMemo(()=>({ContextBar:ns,BacklinksCount:hD,QuickLinks:gD}),[]);return(0,Jm.jsx)(ar,
{collisionRef:c,children:(0,Jm.jsx)("div",{ref:c,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":n.uuid,children:(0,Jm.jsx)(nB,{components:O,children:(0,Jm.jsx)(GB,{})})})})},iD=c=>{var {onPersist:n,readOnly:O,model:da}=c;c=Zi(c,["onPersist","readOnly","model"]);const ra=uk(),Ea=vr(),Ka=wr(),fb=O?null:xr(),ub=vp.useCallback((bc,tc)=>{null==n?void 0:n(bc,tc)},[da]);return(0,Jm.jsx)(jB,rg(Ff({Shapes:$x,Tools:su,onDrop:ra,onPaste:Ea,onCopy:Ka,readOnly:O,onCanvasDBClick:fb,onPersist:ub,model:da},
c),{children:(0,Jm.jsx)(dy,{})}))},br=function(c){var {renderers:n,handlers:O}=c;c=Zi(c,["renderers","handlers"]);const da={renderers:vp.useMemo(()=>Object.fromEntries(Object.entries(n).map(([ra,Ea])=>[ra,vp.memo(Ea)])),[]),handlers:O};return(0,Jm.jsx)(wi.Provider,{value:da,children:(0,Jm.jsx)(iD,Ff({},c))})}};
'use strict';var xBe=function(a,b){var c=$APP.$M.A(a),d=c?$APP.Qz:$APP.h0a;a=$APP.nN.A(b);return $APP.wn.C(function(e){var f=$APP.Se(e);e=$APP.J.C(f,$APP.jx);f=c?$APP.J.C(f,d):$APP.J.C($APP.Ex.A(f),d);return $APP.m(f)?new $APP.l(null,2,[$APP.ft,$APP.q.A(e),$APP.oFd,$APP.oFd.A(f)],null):null},$APP.Hy.A(a))},yBe=function(a){return $APP.Jq.G(a,$APP.I([$APP.Kq,!0]))},zBe=function(a,b,c,d){c=new $APP.l(null,5,[$APP.ft,$APP.va(c,"id"),$APP.Hl,$APP.va(c,"name"),$APP.dv,yBe($APP.va(c,"bindings")),$APP.oFd,
$APP.va(c,"nonce"),$APP.AEc,yBe(d)],null);d=$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null);var e=$APP.Xq.A(a);e=$APP.m(e)?e:$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null);return $APP.hg([$APP.Wq,$APP.Xq,$APP.Pz,$APP.Tz,$APP.Jz,$APP.Nw,$APP.ix,$APP.gl,$APP.Sx],[d,e,c,$APP.B7a,$APP.Oq,$APP.Vw,b,$APP.gl.A(a),$APP.Lq.A?$APP.Lq.A(b):$APP.Lq.call(null,b)])},ABe=function(a,b,c,d){var e=$APP.Lq.A?$APP.Lq.A(b):$APP.Lq.call(null,b);c=$APP.Pe([$APP.PN($APP.Tz),$APP.B7a,$APP.PN($APP.Pz),new $APP.l(null,5,[$APP.ft,$APP.va(c,
"id"),$APP.Hl,$APP.va(c,"name"),$APP.dv,yBe($APP.va(c,"bindings")),$APP.oFd,$APP.va(c,"nonce"),$APP.AEc,yBe(d)],null)]);d=$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null);a=$APP.Xq.A(a);a=$APP.m(a)?a:$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null);return new $APP.l(null,6,[$APP.ix,b,$APP.Sx,e,$APP.Mw,"whiteboard",$APP.Ex,c,$APP.Wq,d,$APP.Xq,a],null)},BBe=function(a,b,c,d){var e=$APP.$M.A($APP.KL())?zBe:ABe;return e.J?e.J(a,b,c,d):e.call(null,a,b,c,d)},CBe=function(a,b,c,d,e,f){var g=$APP.yN.A?$APP.yN.A(e):$APP.yN.call(null,
e);a=yBe(a.getCleanUpAssets());var h=$APP.yg($APP.Xg.C(function(y){y=$APP.Se(y);y=$APP.J.C(y,$APP.ft);return yBe(b.getShapeById(y).serialized)},$APP.Jj.C(c,d)));d=$APP.yg($APP.Xg.C($APP.ft,d));var n=$APP.yg($APP.Xg.C($APP.ft,c)),p=$APP.yg($APP.Aj.C($APP.ki,$APP.Jj.C(n,d)));c=$APP.z(p)?function(){var y=$APP.Ec($APP.Ph.A($APP.Xg.C($APP.Ix,$APP.Hy.A(g))));return $APP.jWa($APP.tc(p),y,null)}():null;var r=$APP.z(p)?$APP.Cg(p,c):null;c=$APP.yg($APP.yf.C(function(y){y=$APP.ft.A(y);return p.A?p.A(y):p.call(null,
y)},h));var t=$APP.Aj.C($APP.ki,$APP.Jj.C(d,n)),v=$APP.KL();d=$APP.z(t)?$APP.Aj.C($APP.hb,$APP.Uk.C(function(y){return $APP.H8b(y,$APP.Qz)},function(){var y=new $APP.O(null,1,5,$APP.U,[$APP.$l],null),B=$APP.Uk.C(function(D){return new $APP.O(null,2,5,$APP.U,[$APP.jx,$APP.uh(D)],null)},t);return $APP.mN?$APP.mN(v,y,B):$APP.R4b.call(null,v,y,B)}())):null;n=$APP.Uk.C(function(y){return new $APP.O(null,2,5,$APP.U,[$APP.Mx,new $APP.O(null,2,5,$APP.U,[$APP.jx,$APP.uh(y)],null)],null)},t);h=$APP.Xg.C(function(y){var B=
$APP.m(r)?$APP.J.C(r,$APP.q.A($APP.jx.A(y))):null;return $APP.m(B)?$APP.V.F(y,$APP.Ix,B):y},$APP.Xg.C($APP.Yq,$APP.Xg.C(function(y){var B=$APP.gl.A(g),D=$APP.KL();return $APP.H7a(D,y,B)},h)));var w=function(){var y=$APP.ix.A(g);return $APP.m(y)?y:$APP.q.A(e)}();a=BBe(g,w,b,a);return $APP.z(h)||$APP.z(n)||$APP.qg.C($APP.Ex.A(a),$APP.Ex.A(g))?new $APP.l(null,6,[$APP.fyc,a,$APP.INd,h,$APP.ED,n,$APP.cWd,d,$APP.Ofd,c,$APP.Fab,new $APP.l(null,2,[$APP.Ylb,!0,$APP.yE,f],null)],null):null},DBe=function(a){return $APP.uh(a.id)},
EBe=function(a,b){var c=$APP.$u.A(b),d=$APP.DEc.A(b);d=$APP.Uk.C(DBe,d);switch(c){case "sendToBack":c=function(){var f=DBe($APP.gPb.A(b));if($APP.m(f)){var g=$APP.Ix.A;f=new $APP.O(null,2,5,$APP.U,[$APP.jx,f],null);f=$APP.nN.A?$APP.nN.A(f):$APP.nN.call(null,f);g=g.call($APP.Ix,f)}else g=null;return g}();var e=$APP.jWa($APP.tc(d),null,c);return a=$APP.je.C($APP.Po.C(function(f,g){return new $APP.l(null,2,[$APP.jx,g,$APP.Ix,$APP.E.C(e,f)],null)},d),$APP.bA(new $APP.l(null,1,[$APP.gl,$APP.gl.A(a)],null)));
case "bringToFront":return c=function(){var f=DBe($APP.cN.A(b));if($APP.m(f)){var g=$APP.Ix.A;f=new $APP.O(null,2,5,$APP.U,[$APP.jx,f],null);f=$APP.nN.A?$APP.nN.A(f):$APP.nN.call(null,f);g=g.call($APP.Ix,f)}else g=null;return g}(),e=$APP.jWa($APP.tc(d),c,null),a=$APP.je.C($APP.Aj.C($APP.hb,$APP.Po.C(function(f,g){var h=new $APP.O(null,2,5,$APP.U,[$APP.jx,g],null);h=$APP.nN.A?$APP.nN.A(h):$APP.nN.call(null,h);return $APP.m(h)?new $APP.l(null,2,[$APP.jx,g,$APP.Ix,$APP.E.C(e,f)],null):null},d)),$APP.bA(new $APP.l(null,
1,[$APP.gl,$APP.gl.A(a)],null)));default:throw Error(["No matching clause: ",$APP.q.A(c)].join(""));}},FBe=function(a,b,c){c=$APP.tj(c);var d=$APP.Nac.A(c),e=$APP.Ac($APP.A(b.pages)),f=$APP.yN(a),g=$APP.vd(new $APP.sg(null,new $APP.l(null,2,["sendToBack",null,"bringToFront",null],null),null),$APP.$u.A(c))?EBe(f,c):null;c=$APP.yg($APP.Po.C(function(v,w){v=w.id;w=w.nonce;w=$APP.m(w)?w:Date.now();return new $APP.l(null,2,[$APP.ft,v,$APP.oFd,w],null)},e.shapes));var h=$APP.KL(),n=function(){var v=$APP.ln.C($APP.u($APP.bhe),
new $APP.O(null,2,5,$APP.U,[h,a],null));return $APP.m(v)?v:$APP.yg($APP.Xg.C(function(w){return $APP.Bk.F(w,$APP.ft,$APP.q)},xBe(h,$APP.gl.A(f))))}();b=CBe(b,e,c,n,a,d);e=$APP.Se(b);n=$APP.J.C(e,$APP.fyc);b=$APP.J.C(e,$APP.Ofd);var p=$APP.J.C(e,$APP.cWd),r=$APP.J.C(e,$APP.INd),t=$APP.J.C(e,$APP.ED);d=$APP.J.C(e,$APP.Fab);if($APP.z(e)||$APP.z(g)){g=$APP.hl.G(t,new $APP.O(null,1,5,$APP.U,[n],null),$APP.I([r,g]));b=$APP.m($APP.$e(function(v){return $APP.C.C("group",$APP.Ci.A(v))},b))?$APP.V.F(d,$APP.GE,
$APP.$D):$APP.m(function(){var v=$APP.Te(p);return $APP.m(v)?$APP.Ze(function(w){return $APP.C.C("group",$APP.Ci.A(w))},p):v}())?$APP.V.F(d,$APP.GE,$APP.Iyd):$APP.m($APP.$e(function(v){return $APP.C.C("line",$APP.Ci.A(v))&&$APP.C.C("arrow ",$APP.wo.A($APP.iwd.A(v)))},b))?$APP.V.F(d,$APP.GE,$APP.OJd):$APP.V.F(d,$APP.GE,$APP.gqd);$APP.hh.J($APP.bhe,$APP.bl,new $APP.O(null,2,5,$APP.U,[h,a],null),c);if($APP.vd(new $APP.sg(null,new $APP.l(null,1,[$APP.OJd,null],null),null),$APP.GE.A(b)))return $APP.ML($APP.t3d,
new $APP.l(null,2,[$APP.el,g,$APP.Fab,b],null));c=$APP.t3d.A($APP.u($APP.JL));g=$APP.hl.C($APP.el.A(c),g);c=$APP.aj.G($APP.I([b,$APP.Fab.A(c)]));$APP.ML($APP.t3d,$APP.Re);return $APP.EN(h,g,c)}return null},GBe=function(a,b){var c=$APP.$M.A($APP.KL()),d=new $APP.l(null,6,[$APP.ft,$APP.q.A(b),$APP.Hl,a,$APP.l0a,$APP.B7a,$APP.dv,$APP.Re,$APP.oFd,1,$APP.AEc,$APP.Cf],null);d=$APP.Pe([$APP.PN($APP.Tz),$APP.B7a,$APP.PN($APP.Pz),d]);a=new $APP.l(null,7,[$APP.jx,b,$APP.Sx,$APP.Lq.A?$APP.Lq.A(a):$APP.Lq.call(null,
a),$APP.ix,a,$APP.Mw,"whiteboard",$APP.Jz,$APP.Oq,$APP.Wq,$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null),$APP.Xq,$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null)],null);c=c?$APP.aj.G($APP.I([a,d])):$APP.V.F(a,$APP.Ex,d);return new $APP.O(null,1,5,$APP.U,[c],null)},HBe=function(a){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W(function(){var b=$APP.m(a)?$APP.Xh(a):a;return $APP.m(b)?b:$APP.Pj?$APP.Pj():$APP.Qj.call(null)}()),function(b){return $APP.kH($APP.W($APP.m(a)?a:$APP.q.A(b)),function(c){return $APP.kH($APP.W($APP.EN($APP.KL(),
GBe(c,b),new $APP.l(null,1,[$APP.GE,$APP.Pdb],null))),function(){return $APP.W(b)})})})})},IBe=function(a,b){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.KL()),function(c){return $APP.kH($APP.W($APP.Jy.I?$APP.Jy.I():$APP.Jy.call(null)),function(d){return $APP.kH($APP.W($APP.yN(a)),function(e){return $APP.kH($APP.W(function(){var f=new $APP.l(null,5,[$APP.jx,d,$APP.ix,$APP.m(b)?b:"",$APP.Jz,$APP.Oq,$APP.Ay,$APP.gl.A(e),$APP.Tx,$APP.gl.A(e)],null);return $APP.Yq.A?$APP.Yq.A(f):
$APP.Yq.call(null,f)}()),function(f){return $APP.kH($APP.W($APP.EN(c,new $APP.O(null,1,5,$APP.U,[f],null),new $APP.l(null,2,[$APP.GE,$APP.OG,$APP.Ylb,!0],null))),function(){return $APP.W(d)})})})})})})},JBe=function(){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W(fetch("./whiteboard/onboarding.edn")),function(a){return $APP.kH($APP.W(a.text()),function(b){return $APP.kH($APP.W($APP.xBa(b)),function(c){return $APP.W(c)})})})})},KBe=function(a,b){var c=$APP.Se(a);a=$APP.J.C(c,$APP.Gy);
c=$APP.J.C(c,$APP.YA);var d=$APP.A(a);a=$APP.zEc(c);d=$APP.H8b(d,$APP.Pz);c=$APP.AEc.A(d);d=$APP.dv.A(d);return b.cloneShapesIntoCurrentPage($APP.xj(new $APP.l(null,3,[$APP.DEc,a,$APP.AEc,c,$APP.dv,d],null)))},LBe=function(a){var b=$APP.KL();if($APP.m($APP.$M.I())){var c=new $APP.O(null,5,5,$APP.U,[$APP.bn,new $APP.O(null,2,5,$APP.U,[$APP.Si($APP.Dm,$APP.Dy,new $APP.O(null,6,5,$APP.U,[$APP.gl,$APP.jx,$APP.Sx,$APP.ix,$APP.Xq,$APP.Wq],null)),$APP.am],null),$APP.en,new $APP.O(null,2,5,$APP.U,[$APP.Dy,
$APP.Sx],null),new $APP.O(null,3,5,$APP.U,[$APP.Dy,$APP.Nw,$APP.Vw],null)],null);b=$APP.fN(b);b=$APP.px.C?$APP.px.C(c,b):$APP.px.call(null,c,b)}else c=new $APP.O(null,5,5,$APP.U,[$APP.bn,new $APP.O(null,2,5,$APP.U,[$APP.Si($APP.Dm,$APP.Dy,new $APP.O(null,6,5,$APP.U,[$APP.gl,$APP.jx,$APP.Sx,$APP.ix,$APP.Xq,$APP.Wq],null)),$APP.am],null),$APP.en,new $APP.O(null,2,5,$APP.U,[$APP.Dy,$APP.Sx],null),new $APP.O(null,3,5,$APP.U,[$APP.Dy,$APP.Mw,"whiteboard"],null)],null),b=$APP.fN(b),b=$APP.px.C?$APP.px.C(c,
b):$APP.px.call(null,c,b);return($APP.Nc(b)||$APP.C.C(1,$APP.tc(b))&&$APP.C.C($APP.q.A(a),$APP.q.A($APP.jx.A($APP.A(b)))))&&$APP.lb($APP.ln.C($APP.u($APP.JL),new $APP.O(null,1,5,$APP.U,[$APP.f3b],null)))},MBe=function(a){var b=$APP.CM();$APP.m(b)&&$APP.ff.C(b.api.updateShapes,$APP.yj(a))},NBe=function(a){var b=$APP.CM();if($APP.m(b)&&(b=$APP.Ac($APP.A(b.pages)),$APP.m(b))){var c=$APP.yN.A?$APP.yN.A(a):$APP.yN.call(null,a);if($APP.m(c)){a=$APP.Xg;var d=a.C,e=$APP.jl.C($APP.q,$APP.jx);c=$APP.Hy.A(c);
c=$APP.zy.A?$APP.zy.A(c):$APP.zy.call(null,c);a=d.call(a,e,c);$APP.z(a)&&b.updateShapesIndex($APP.yj(a))}}},OBe=function(a){return null!=a?$APP.Vn($APP.kH($APP.W(null),function(){return $APP.kH($APP.W(JBe()),function(b){return $APP.kH($APP.W(KBe(b,a)),function(){return $APP.W($APP.h3b())})})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},PBe=function(a){a.cleanup($APP.Xg.C(function(b){return b.id},a.shapes))},QBe=function(a,b){b=$APP.Jq.G(b,$APP.I([new $APP.l(null,
1,[$APP.Kq,!0],null)]));b=$APP.Se(b);var c=$APP.J.C(b,$APP.WP),d=$APP.KL();return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.m(c)?$APP.dic(d,a,new $APP.l(null,1,[$APP.Gl,100],null)):null),function(e){return $APP.kH($APP.W($APP.Xg.C(function(f){return $APP.Bk.F($APP.Bk.F(f,$APP.jx,$APP.q),$APP.ix,function(g){return $APP.ff.C($APP.q,$APP.q4b(g))})},e)),function(f){return $APP.W($APP.xj(new $APP.l(null,1,[$APP.YA,f],null)))})})})},RBe=function(a){return $APP.Rn.C($APP.spc($APP.KL(),new $APP.O(null,
1,5,$APP.U,[$APP.Jq.A(a)],null)),function(b){var c=(c=$APP.z(b))?$APP.A(b):c;return $APP.m(c)?(b=$APP.E.F(c,0,null),$APP.E.F(c,1,null),c=$APP.E.F(c,2,null),$APP.upc($APP.m(c)?c:b)):null})},SBe=function(){return $APP.Mge.A?$APP.Mge.A(null):$APP.Mge.call(null,null)},TBe=function(){return $APP.Oge.A?$APP.Oge.A(null):$APP.Oge.call(null,null)},kCe=function(a){return $APP.hg([UBe,VBe,WBe,XBe,YBe,ZBe,$Be,aCe,bCe,$APP.CG,cCe,dCe,eCe,fCe,$APP.ew,gCe,hCe,iCe,jCe],[function(b){return $APP.m($APP.Rq.A?$APP.Rq.A(b):
$APP.Rq.call(null,b))?$APP.q.A($APP.jx.A($APP.c6b($APP.KL(),$APP.Xh(b)))):$APP.q.A($APP.jx.A($APP.yN.A?$APP.yN.A(b):$APP.yN.call(null,b)))},function(b){return $APP.xj($APP.MPc(b))},function(b){return $APP.g6b(b)},function(b){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W(function(){var c=new $APP.l(null,1,[$APP.PQ,!1],null);return $APP.NQ?$APP.NQ(b,c):$APP.OQ.call(null,b,c)}()),function(c){return $APP.W($APP.q.A($APP.jx.A(c)))})})},function(b){return $APP.p3b($APP.m(b)?$APP.MPc(b):null)},
function(b){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W(HBe(b)),function(c){return $APP.W($APP.q.A(c))})})},$APP.eK,function(b){return $APP.drc(b)},function(b){b=$APP.yN.A?$APP.yN.A(b):$APP.yN.call(null,b);return $APP.m(b)?$APP.zN(b):null},QBe,RBe,$APP.Ndc,function(b,c){return $APP.BQb(b,$APP.I([$APP.kC,c]))},function(b){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W(IBe(a,b)),function(c){return $APP.W($APP.q.A(c))})})},function(b){return $APP.UO.G($APP.I([$APP.Yg.A(b)]))},
function(b,c){function d(){return(0,$APP.T0c)(new $APP.O(null,1,5,$APP.U,[$APP.uh(b)],null),$APP.aj.G($APP.I([$APP.Jq.G(c,$APP.I([$APP.Kq,!0])),new $APP.l(null,1,[$APP.RB,!0],null)])))}return $APP.sL.A?$APP.sL.A(d):$APP.sL.call(null,d)},function(b,c){return $APP.EM($APP.KL(),$APP.gl.A($APP.yN(b)),$APP.Yg.A(c))},function(b){return $APP.m(b)?$APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.Xh(b)),function(c){return $APP.kH($APP.W($APP.m(c)?$APP.MN($APP.KL(),c):null),function(){return $APP.kH($APP.W(function(){var d=
$APP.m(c)?$APP.c6b($APP.KL(),c):null;return $APP.m(d)?d:$APP.yN.A?$APP.yN.A(b):$APP.yN.call(null,b)}()),function(d){return $APP.kH($APP.W($APP.zN(d)),function(e){return $APP.W($APP.kH($APP.W(null),function(){return $APP.kH($APP.W(null==d?function(){var f=new $APP.l(null,1,[$APP.PQ,!1],null);return $APP.NQ?$APP.NQ(b,f):$APP.OQ.call(null,b,f)}():null),function(f){return $APP.kH($APP.W($APP.m(f)?f:d),function(g){return $APP.W($APP.QQ.C($APP.m(e)?$APP.jx.A(g):$APP.g6b($APP.jx.A(g)),$APP.m($APP.m(c)?$APP.qg.C(c,
$APP.jx.A(g)):c)?new $APP.l(null,1,[$APP.uD,c],null):null))})})}))})})})})}):null},function(b){return $APP.xj($APP.C5b(b))}])},mCe=function(a,b,c){return $APP.Vn($APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.u(lCe)),function(){return $APP.kH($APP.W($APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.ML(new $APP.O(null,2,5,$APP.U,[$APP.oUd,$APP.KL()],null),$APP.Tq.I?$APP.Tq.I():$APP.Tq.call(null))),function(){return $APP.W(FBe(a,b,c))})})),function(d){return $APP.W($APP.lf(lCe,
d))})})}),function(d){console.error(d);return $APP.fI.A(new $APP.O(null,2,5,$APP.U,[$APP.MF,["Save whiteboard failed, error:",$APP.q.A(d.cause)].join("")],null))})},XBe=new $APP.M(null,"addNewPage","addNewPage",1998524678),jCe=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),gCe=new $APP.M(null,"exportToImage","exportToImage",-154356643),fCe=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),nCe=new $APP.M(null,"KeyboardShortcut","KeyboardShortcut",1250004264),UBe=new $APP.M(null,
"getBlockPageName","getBlockPageName",-1656908032),oCe=new $APP.M(null,"renderers","renderers",-1460292282),pCe=new $APP.M(null,"model","model",331153215),WBe=new $APP.M(null,"getRedirectPageName","getRedirectPageName",-1858136925),$Be=new $APP.M(null,"isMobile","isMobile",-2043133877),YBe=new $APP.M(null,"setCurrentPdf","setCurrentPdf",-63289336),qCe=new $APP.M(null,"onMount","onMount",-876858467),aCe=new $APP.M(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),dCe=new $APP.M(null,
"makeAssetUrl","makeAssetUrl",217779988),rCe=new $APP.M(null,"onPersist","onPersist",-1848738852),sCe=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),eCe=new $APP.M(null,"copyToClipboard","copyToClipboard",1092115063),iCe=new $APP.M(null,"redirectToPage","redirectToPage",87147838),ZBe=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),cCe=new $APP.M(null,"saveAsset","saveAsset",-668047853),tCe=new $APP.M(null,"BacklinksCount","BacklinksCount",364670631),uCe=new $APP.M(null,"Block",
"Block",-1959785792),hCe=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),vCe=new $APP.M(null,"Page","Page",-1267059506),wCe=new $APP.M(null,"PageName","PageName",-164991013),xCe=new $APP.M(null,"Tweet","Tweet",-452258680),bCe=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),yCe=new $APP.M(null,"BlockReference","BlockReference",-120254741),VBe=new $APP.M(null,"inflateAsset","inflateAsset",-1449040639);$APP.IBb("tldraw");var zCe=$APP.ij(659);var ACe,BCe,lCe,CCe,DCe;$APP.eqe={};ACe=$APP.FR($APP.va(zCe,"App"));$APP.hqe=$APP.va(zCe,"generateJSXFromModel");
BCe=new $APP.l(null,8,[vCe,$APP.OI($APP.RI,function(a){return(0,$APP.Sbd)(new $APP.l(null,2,[$APP.VA,$APP.va(a,"pageName"),$APP.RB,!0],null))},null,"frontend.extensions.tldraw/page-cp"),uCe,$APP.OI($APP.RI,function(a){a=$APP.uh($APP.va(a,"blockId"));var b=new $APP.l(null,2,[$APP.ft,$APP.q.A(a),$APP.RB,!0],null),c=$APP.IM($APP.Ybd);a=c.C?c.C(b,a):c.call(null,b,a);return $APP.II(a)},null,"frontend.extensions.tldraw/block-cp"),sCe,$APP.OI($APP.RI,function(a){return(0,$APP.KV)(new $APP.l(null,1,[$APP.IX,
!0],null),$APP.KL(),$APP.uh($APP.va(a,"blockId")),new $APP.l(null,2,[$APP.tid,$APP.va(a,"endSeparator"),$APP.Mdd,$APP.va(a,"levelLimit",3)],null))},null,"frontend.extensions.tldraw/breadcrumb"),xCe,$APP.OI($APP.RI,function(a){return(0,$APP.QYc)($APP.va(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),wCe,$APP.OI($APP.RI,function(a){a=$APP.va(a,"pageName");$APP.m(a)?(a=$APP.yN.A?$APP.yN.A(a):$APP.yN.call(null,a),a=$APP.m(a)?(0,$APP.oT)(new $APP.l(null,1,[$APP.IX,!0],null),a):null):a=null;return $APP.II(a)},
null,"frontend.extensions.tldraw/page-name-link"),tCe,function(a){return $APP.ff.C($APP.iqe,$APP.Xg.C(function(b){return $APP.Jq.G($APP.va(a,b),$APP.I([new $APP.l(null,1,[$APP.Kq,!0],null)]))},new $APP.O(null,3,5,$APP.U,["id","className","options"],null)))},yCe,$APP.OI($APP.RI,function(a){return(0,$APP.bYc)($APP.Re,$APP.va(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),nCe,$APP.OI($APP.RI,function(a){return $APP.II(function(){var b=$APP.tj(a);if($APP.m(b)){var c=$APP.Se(b);
b=$APP.J.C(c,$APP.XG);var d=$APP.J.C(c,$APP.ER);c=$APP.J.C(c,$APP.YE);b="string"===typeof b?$APP.MR($APP.Yg.A(b)):d;var e=$APP.aj.G($APP.I([new $APP.l(null,1,[$APP.p4,!1],null),c]));return"string"===typeof b?$APP.zGc(b,$APP.I([e])):$APP.Bi.C(" | ",$APP.Xg.C(function(f){return $APP.zGc(f,$APP.I([e]))},b))}return null}())},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);lCe=$APP.gh.A(null);
CCe=$APP.OI($APP.RI,function(a,b,c,d,e){return $APP.Z("div",{style:{overscrollBehavior:"none"},onBlur:function(f){f=$APP.va(f,"target").tagName;var g=new $APP.sg(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);f=g.A?g.A(f):g.call(null,f);return $APP.m(f)?$APP.vM():null},onWheel:$APP.QJ,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.m($APP.m(c)?$APP.lb(d):c)?$APP.Z("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.II($APP.NR("Loading onboarding whiteboard ..."))]):
null,$APP.II(function(){var f=new $APP.l(null,6,[oCe,BCe,$APP.hy,kCe(a),qCe,e,$APP.VRd,!0,rCe,function(g,h){return mCe(a,g,h)},pCe,b],null);return ACe.A?ACe.A(f):ACe.call(null,f)}())])},new $APP.O(null,2,5,$APP.U,[$APP.QI,new $APP.l(null,1,[$APP.oLb,function(a,b){var c=$APP.A($APP.PI.A(a)),d=$APP.E.C($APP.PI.A(a),1),e=$APP.E.C($APP.PI.A(b),1),f=function(){var g=function(){var h=$APP.va(d,"pages");h=null==h?null:$APP.A(h);return null==h?null:$APP.va(h,"shapes")}();return $APP.Cg($APP.Xg.C(function(h){return $APP.va(h,
"id")},g),g)}();a=function(){var g=$APP.va(e,"pages");g=null==g?null:$APP.A(g);return null==g?null:$APP.va(g,"shapes")}();a=$APP.yf.C(function(g){var h=$APP.J.C(f,$APP.va(g,"id"));return $APP.m(h)?$APP.qg.C($APP.va(g,"type"),$APP.va(h,"type")):null},a);$APP.z(a)&&MBe(a);NBe(c);return b}],null)],null),"frontend.extensions.tldraw/tldraw-inner");DCe=$APP.OI($APP.RI,function(a,b,c,d){var e=$APP.LEc(a);return $APP.m(e)?CCe(a,e,b,c,d):null},new $APP.O(null,2,5,$APP.U,[$APP.b8,$APP.g9],null),"frontend.extensions.tldraw/tldraw-app-react");
$APP.fqe=$APP.OI($APP.RI,function(a,b){var c=$APP.WI.A?$APP.WI.A(!0):$APP.WI.call(null,!0),d=$APP.E.F(c,0,null),e=$APP.E.F(c,1,null);c=$APP.WI(null);var f=$APP.E.F(c,0,null),g=$APP.E.F(c,1,null);$APP.oL(function(){return $APP.kH($APP.W(null),function(){return $APP.kH($APP.W($APP.MN($APP.KL(),a)),function(){return $APP.W(e.A?e.A(!1):e.call(null,!1))})})},$APP.Cf);$APP.oL(function(){$APP.m($APP.m(f)?b:f)&&$APP.q3b(f,b);return function(){return $APP.$b}},new $APP.O(null,2,5,$APP.U,[b,f],null));if($APP.m(d))return null;
var h=LBe(a);return DCe(a,h,f,function(n){if($APP.m(n)){n.appUndo=SBe;n.appRedo=TBe;var p=$APP.va(n,"api");return $APP.m(p)?$APP.Rn.C(h?OBe(p):null,function(){PBe(n.currentPage);$APP.q3b(n,b);return g.A?g.A(n):g.call(null,n)}):null}return null})},null,"frontend.extensions.tldraw/tldraw-app");$APP.nB.Ki();
}).call(this);
//# sourceMappingURL=tldraw.js.map
